var a4=Object.defineProperty,c4=Object.defineProperties;var l4=Object.getOwnPropertyDescriptors;var X1=Object.getOwnPropertySymbols,u4=Object.getPrototypeOf,d4=Object.prototype.hasOwnProperty,h4=Object.prototype.propertyIsEnumerable,f4=Reflect.get;var J1=(n,e,t)=>e in n?a4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H=(n,e)=>{for(var t in e||={})d4.call(e,t)&&J1(n,t,e[t]);if(X1)for(var t of X1(e))h4.call(e,t)&&J1(n,t,e[t]);return n},oe=(n,e)=>c4(n,l4(e));var es=(n,e,t)=>f4(u4(n),t,e);var S=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(l){i(l)}},s=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});var N0;function vp(){return N0}function mi(n){let e=N0;return N0=n,e}var Z1=Symbol("NotFound");function Bc(n){return n===Z1||n?.name==="\u0275NotFound"}var Dn=null,_p=!1,F0=1,p4=null,Tn=Symbol("SIGNAL");function xe(n){let e=Dn;return Dn=n,e}function Cp(){return Dn}var $c={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Hc(n){if(_p)throw new Error("");if(Dn===null)return;Dn.consumerOnSignalRead(n);let e=Dn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Dn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Dn.producers,t!==void 0&&t.producer===n)){Dn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Dn&&(!r||m4(i,Dn)))return;let o=Wc(Dn),s={producer:n,consumer:Dn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Dn.producersTail=s,e!==void 0?e.nextProducer=s:Dn.producers=s,o&&rM(n,s)}function eM(){F0++}function Ip(n){if(!(Wc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===F0)){if(!n.producerMustRecompute(n)&&!md(n)){Ep(n);return}n.producerRecomputeValue(n),Ep(n)}}function L0(n){if(n.consumers===void 0)return;let e=_p;_p=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||g4(r)}}finally{_p=e}}function V0(){return Dn?.consumerAllowSignalWrites!==!1}function g4(n){n.dirty=!0,L0(n),n.consumerMarkedDirty?.(n)}function Ep(n){n.dirty=!1,n.lastCleanEpoch=F0}function zc(n){return n&&tM(n),xe(n)}function tM(n){n.producersTail=void 0,n.recomputing=!0}function gd(n,e){xe(e),n&&nM(n)}function nM(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Wc(n))do t=j0(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function md(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Ip(t),r!==t.version))return!0}return!1}function yd(n){if(Wc(n)){let e=n.producers;for(;e!==void 0;)e=j0(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function rM(n,e){let t=n.consumersTail,r=Wc(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)rM(i.producer,i)}function j0(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Wc(e)){let o=e.producers;for(;o!==void 0;)o=j0(o)}return t}function Wc(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function xp(n){p4?.(n)}function m4(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Dp(n,e){return Object.is(n,e)}function Tp(n,e){let t=Object.create(y4);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Ip(t),Hc(t),t.value===pd)throw t.error;return t.value};return r[Tn]=t,xp(t),r}var bp=Symbol("UNSET"),wp=Symbol("COMPUTING"),pd=Symbol("ERRORED"),y4=oe(H({},$c),{value:bp,dirty:!0,error:null,equal:Dp,kind:"computed",producerMustRecompute(n){return n.value===bp||n.value===wp},producerRecomputeValue(n){if(n.value===wp)throw new Error("");let e=n.value;n.value=wp;let t=zc(n),r,i=!1;try{r=n.computation(),xe(null),i=e!==bp&&e!==pd&&r!==pd&&n.equal(e,r)}catch(o){r=pd,n.error=o}finally{gd(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function v4(){throw new Error}var iM=v4;function oM(n){iM(n)}function U0(n){iM=n}var _4=null;function B0(n,e){let t=Object.create(Sp);t.value=n,e!==void 0&&(t.equal=e);let r=()=>sM(t);return r[Tn]=t,xp(t),[r,s=>qc(t,s),s=>$0(t,s)]}function sM(n){return Hc(n),n.value}function qc(n,e){V0()||oM(n),n.equal(n.value,e)||(n.value=e,b4(n))}function $0(n,e){V0()||oM(n),qc(n,e(n.value))}var Sp=oe(H({},$c),{equal:Dp,value:void 0,kind:"signal"});function b4(n){n.version++,eM(),L0(n),_4?.(n)}function we(n){return typeof n=="function"}function Gc(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Mp=Gc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ba(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var xt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(we(r))try{r()}catch(o){e=o instanceof Mp?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{aM(o)}catch(s){e=e??[],s instanceof Mp?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Mp(e)}}add(e){var t;if(e&&e!==this)if(this.closed)aM(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ba(t,e)}remove(e){let{_finalizers:t}=this;t&&ba(t,e),e instanceof n&&e._removeParent(this)}};xt.EMPTY=(()=>{let n=new xt;return n.closed=!0,n})();var H0=xt.EMPTY;function Ap(n){return n instanceof xt||n&&"closed"in n&&we(n.remove)&&we(n.add)&&we(n.unsubscribe)}function aM(n){we(n)?n():n.unsubscribe()}var Gr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Kc={setTimeout(n,e,...t){let{delegate:r}=Kc;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Kc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Pp(n){Kc.setTimeout(()=>{let{onUnhandledError:e}=Gr;if(e)e(n);else throw n})}function vd(){}var cM=z0("C",void 0,void 0);function lM(n){return z0("E",void 0,n)}function uM(n){return z0("N",n,void 0)}function z0(n,e,t){return{kind:n,value:e,error:t}}var wa=null;function Yc(n){if(Gr.useDeprecatedSynchronousErrorHandling){let e=!wa;if(e&&(wa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=wa;if(wa=null,t)throw r}}else n()}function dM(n){Gr.useDeprecatedSynchronousErrorHandling&&wa&&(wa.errorThrown=!0,wa.error=n)}var Ea=class extends xt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ap(e)&&e.add(this)):this.destination=C4}static create(e,t,r){return new ts(e,t,r)}next(e){this.isStopped?q0(uM(e),this):this._next(e)}error(e){this.isStopped?q0(lM(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?q0(cM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},w4=Function.prototype.bind;function W0(n,e){return w4.call(n,e)}var G0=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Rp(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Rp(r)}else Rp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Rp(t)}}},ts=class extends Ea{constructor(e,t,r){super();let i;if(we(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Gr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&W0(e.next,o),error:e.error&&W0(e.error,o),complete:e.complete&&W0(e.complete,o)}):i=e}this.destination=new G0(i)}};function Rp(n){Gr.useDeprecatedSynchronousErrorHandling?dM(n):Pp(n)}function E4(n){throw n}function q0(n,e){let{onStoppedNotification:t}=Gr;t&&Kc.setTimeout(()=>t(n,e))}var C4={closed:!0,next:vd,error:E4,complete:vd};var Qc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pr(n){return n}function kp(...n){return K0(n)}function K0(n){return n.length===0?pr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ue=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=x4(t)?t:new ts(t,r,i);return Yc(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=hM(r),new r((i,o)=>{let s=new ts({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Qc](){return this}pipe(...t){return K0(t)(this)}toPromise(t){return t=hM(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function hM(n){var e;return(e=n??Gr.Promise)!==null&&e!==void 0?e:Promise}function I4(n){return n&&we(n.next)&&we(n.error)&&we(n.complete)}function x4(n){return n&&n instanceof Ea||I4(n)&&Ap(n)}function Y0(n){return we(n?.lift)}function Fe(n){return e=>{if(Y0(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Re(n,e,t,r,i){return new Q0(n,e,t,r,i)}var Q0=class extends Ea{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Xc(){return Fe((n,e)=>{let t=null;n._refCount++;let r=Re(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Jc=class extends ue{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Y0(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xt;let t=this.getSubject();e.add(this.source.subscribe(Re(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xt.EMPTY)}return e}refCount(){return Xc()(this)}};var fM=Gc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var bt=(()=>{class n extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Op(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new fM}next(t){Yc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Yc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Yc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?H0:(this.currentObservers=null,o.push(t),new xt(()=>{this.currentObservers=null,ba(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ue;return t.source=this,t}}return n.create=(e,t)=>new Op(e,t),n})(),Op=class extends bt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:H0}};var ft=class extends bt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var X0={now(){return(X0.delegate||Date).now()},delegate:void 0};var Np=class extends xt{constructor(e,t){super()}schedule(e,t=0){return this}};var _d={setInterval(n,e,...t){let{delegate:r}=_d;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=_d;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Zc=class extends Np{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return _d.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&_d.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ba(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var el=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};el.now=X0.now;var tl=class extends el{constructor(e,t=el.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var J0=new tl(Zc);var Fp=class extends Zc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Lp=class extends tl{};var Z0=new Lp(Fp);var Yn=new ue(n=>n.complete());function pM(n){return n&&we(n.schedule)}function gM(n){return n[n.length-1]}function Vp(n){return we(gM(n))?n.pop():void 0}function ns(n){return pM(gM(n))?n.pop():void 0}function eb(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function yM(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(h){s(h)}}function c(u){try{l(r.throw(u))}catch(h){s(h)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function mM(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ca(n){return this instanceof Ca?(this.v=n,this):new Ca(n)}function vM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(_){return Promise.resolve(_).then(p,h)}}function a(p,_){r[p]&&(i[p]=function(w){return new Promise(function(b,T){o.push([p,w,b,T])>1||c(p,w)})},_&&(i[p]=_(i[p])))}function c(p,_){try{l(r[p](_))}catch(w){f(o[0][3],w)}}function l(p){p.value instanceof Ca?Promise.resolve(p.value.v).then(u,h):f(o[0][2],p)}function u(p){c("next",p)}function h(p){c("throw",p)}function f(p,_){p(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}function _M(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof mM=="function"?mM(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var jp=n=>n&&typeof n.length=="number"&&typeof n!="function";function Up(n){return we(n?.then)}function Bp(n){return we(n[Qc])}function $p(n){return Symbol.asyncIterator&&we(n?.[Symbol.asyncIterator])}function Hp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function D4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zp=D4();function Wp(n){return we(n?.[zp])}function qp(n){return vM(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ca(t.read());if(i)return yield Ca(void 0);yield yield Ca(r)}}finally{t.releaseLock()}})}function Gp(n){return we(n?.getReader)}function Ut(n){if(n instanceof ue)return n;if(n!=null){if(Bp(n))return T4(n);if(jp(n))return S4(n);if(Up(n))return M4(n);if($p(n))return bM(n);if(Wp(n))return A4(n);if(Gp(n))return P4(n)}throw Hp(n)}function T4(n){return new ue(e=>{let t=n[Qc]();if(we(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function S4(n){return new ue(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function M4(n){return new ue(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Pp)})}function A4(n){return new ue(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function bM(n){return new ue(e=>{R4(n,e).catch(t=>e.error(t))})}function P4(n){return bM(qp(n))}function R4(n,e){var t,r,i,o;return yM(this,void 0,void 0,function*(){try{for(t=_M(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Qn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function rs(n,e=0){return Fe((t,r)=>{t.subscribe(Re(r,i=>Qn(r,n,()=>r.next(i),e),()=>Qn(r,n,()=>r.complete(),e),i=>Qn(r,n,()=>r.error(i),e)))})}function is(n,e=0){return Fe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function wM(n,e){return Ut(n).pipe(is(e),rs(e))}function EM(n,e){return Ut(n).pipe(is(e),rs(e))}function CM(n,e){return new ue(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function IM(n,e){return new ue(t=>{let r;return Qn(t,e,()=>{r=n[zp](),Qn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>we(r?.return)&&r.return()})}function Kp(n,e){if(!n)throw new Error("Iterable cannot be null");return new ue(t=>{Qn(t,e,()=>{let r=n[Symbol.asyncIterator]();Qn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function xM(n,e){return Kp(qp(n),e)}function DM(n,e){if(n!=null){if(Bp(n))return wM(n,e);if(jp(n))return CM(n,e);if(Up(n))return EM(n,e);if($p(n))return Kp(n,e);if(Wp(n))return IM(n,e);if(Gp(n))return xM(n,e)}throw Hp(n)}function le(n,e){return e?DM(n,e):Ut(n)}function q(...n){let e=ns(n);return le(n,e)}function Kr(n,e){let t=we(n)?n:()=>n,r=i=>i.error(t());return new ue(e?i=>e.schedule(r,0,i):r)}function tb(n){return!!n&&(n instanceof ue||we(n.lift)&&we(n.subscribe))}var gr=Gc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function nl(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=!1,s;n.subscribe({next:a=>{s=a,o=!0},error:i,complete:()=>{o?r(s):t?r(e.defaultValue):i(new gr)}})})}function Yp(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new ts({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new gr)}});n.subscribe(o)})}function Y(n,e){return Fe((t,r)=>{let i=0;t.subscribe(Re(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:k4}=Array;function O4(n,e){return k4(e)?n(...e):n(e)}function Qp(n){return Y(e=>O4(n,e))}var{isArray:N4}=Array,{getPrototypeOf:F4,prototype:L4,keys:V4}=Object;function Xp(n){if(n.length===1){let e=n[0];if(N4(e))return{args:e,keys:null};if(j4(e)){let t=V4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function j4(n){return n&&typeof n=="object"&&F4(n)===L4}function Jp(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function bd(...n){let e=ns(n),t=Vp(n),{args:r,keys:i}=Xp(n);if(r.length===0)return le([],e);let o=new ue(U4(r,e,i?s=>Jp(i,s):pr));return t?o.pipe(Qp(t)):o}function U4(n,e,t=pr){return r=>{TM(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)TM(e,()=>{let l=le(n[c],e),u=!1;l.subscribe(Re(r,h=>{o[c]=h,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function TM(n,e,t){n?Qn(t,n,e):e()}function SM(n,e,t,r,i,o,s,a){let c=[],l=0,u=0,h=!1,f=()=>{h&&!c.length&&!l&&e.complete()},p=w=>l<r?_(w):c.push(w),_=w=>{o&&e.next(w),l++;let b=!1;Ut(t(w,u++)).subscribe(Re(e,T=>{i?.(T),o?p(T):e.next(T)},()=>{b=!0},void 0,()=>{if(b)try{for(l--;c.length&&l<r;){let T=c.shift();s?Qn(e,s,()=>_(T)):_(T)}f()}catch(T){e.error(T)}}))};return n.subscribe(Re(e,p,()=>{h=!0,f()})),()=>{a?.()}}function Lt(n,e,t=1/0){return we(e)?Lt((r,i)=>Y((o,s)=>e(r,o,i,s))(Ut(n(r,i))),t):(typeof e=="number"&&(t=e),Fe((r,i)=>SM(r,i,n,t)))}function os(n=1/0){return Lt(pr,n)}function MM(){return os(1)}function rl(...n){return MM()(le(n,ns(n)))}function wd(n){return new ue(e=>{Ut(n()).subscribe(e)})}function nb(...n){let e=Vp(n),{args:t,keys:r}=Xp(n),i=new ue(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let h=!1;Ut(t[u]).subscribe(Re(o,f=>{h||(h=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(r?Jp(r,a):a),o.complete())}))}});return e?i.pipe(Qp(e)):i}function Xt(n,e){return Fe((t,r)=>{let i=0;t.subscribe(Re(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ye(n){return Fe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Re(t,void 0,void 0,s=>{o=Ut(n(s,Ye(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function AM(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(Re(s,u=>{let h=l++;c=a?n(c,u,h):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function yi(n,e){return we(e)?Lt(n,e,1):Lt(n,1)}function ss(n){return Fe((e,t)=>{let r=!1;e.subscribe(Re(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Vn(n){return n<=0?()=>Yn:Fe((e,t)=>{let r=0;e.subscribe(Re(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Zp(n=B4){return Fe((e,t)=>{let r=!1;e.subscribe(Re(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function B4(){return new gr}function as(n){return Fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ao(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Xt((i,o)=>n(i,o,r)):pr,Vn(1),t?ss(e):Zp(()=>new gr))}function il(n){return n<=0?()=>Yn:Fe((e,t)=>{let r=[];e.subscribe(Re(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function rb(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Xt((i,o)=>n(i,o,r)):pr,il(1),t?ss(e):Zp(()=>new gr))}function eg(n,e){return Fe(AM(n,e,arguments.length>=2,!0))}function tg(...n){let e=ns(n);return Fe((t,r)=>{(e?rl(n,t,e):rl(n,t)).subscribe(r)})}function Ce(n,e){return Fe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Re(r,c=>{i?.unsubscribe();let l=0,u=o++;Ut(n(c,u)).subscribe(i=Re(r,h=>r.next(e?e(c,h,u,l++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ol(n){return Fe((e,t)=>{Ut(n).subscribe(Re(t,()=>t.complete(),vd)),!t.closed&&e.subscribe(t)})}function an(n,e,t){let r=we(n)||e||t?{next:n,error:e,complete:t}:n;return r?Fe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Re(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):pr}function PM(n){let e=xe(null);try{return n()}finally{xe(e)}}var cs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},mb=new cs("20.3.14");var og="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",J=class extends Error{code;constructor(e,t){super(ho(e,t)),this.code=e}};function $4(n){return`NG0${Math.abs(n)}`}function ho(n,e){return`${$4(n)}${e?": "+e:""}`}var fo=globalThis;function qe(n){for(let e in n)if(n[e]===qe)return e;throw Error("")}function OM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function lo(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(lo).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function sg(n,e){return n?e?`${n} ${e}`:n:e||""}var H4=qe({__forward_ref__:qe});function mr(n){return n.__forward_ref__=mr,n.toString=function(){return lo(this())},n}function _n(n){return yb(n)?n():n}function yb(n){return typeof n=="function"&&n.hasOwnProperty(H4)&&n.__forward_ref__===mr}function Z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Xn(n){return{providers:n.providers||[],imports:n.imports||[]}}function xd(n){return z4(n,ag)}function vb(n){return xd(n)!==null}function z4(n,e){return n.hasOwnProperty(e)&&n[e]||null}function W4(n){let e=n?.[ag]??null;return e||null}function ob(n){return n&&n.hasOwnProperty(rg)?n[rg]:null}var ag=qe({\u0275prov:qe}),rg=qe({\u0275inj:qe}),te=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _b(n){return n&&!!n.\u0275providers}var bb=qe({\u0275cmp:qe}),wb=qe({\u0275dir:qe}),Eb=qe({\u0275pipe:qe}),Cb=qe({\u0275mod:qe}),Cd=qe({\u0275fac:qe}),Sa=qe({__NG_ELEMENT_ID__:qe}),RM=qe({__NG_ENV_ID__:qe});function ds(n){return typeof n=="string"?n:n==null?"":String(n)}function NM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ds(n)}var FM=qe({ngErrorCode:qe}),q4=qe({ngErrorMessage:qe}),G4=qe({ngTokenPath:qe});function Ib(n,e){return LM("",-200,e)}function cg(n,e){throw new J(-201,!1)}function LM(n,e,t){let r=new J(e,n);return r[FM]=e,r[q4]=n,t&&(r[G4]=t),r}function K4(n){return n[FM]}var sb;function VM(){return sb}function jn(n){let e=sb;return sb=n,e}function xb(n,e,t){let r=xd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;cg(n,"Injector")}var Y4={},Ia=Y4,ab="__NG_DI_FLAG__",cb=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=xa(t)||0;try{return this.injector.get(e,r&8?null:Ia,r)}catch(i){if(Bc(i))return i;throw i}}};function Q4(n,e=0){let t=vp();if(t===void 0)throw new J(-203,!1);if(t===null)return xb(n,void 0,e);{let r=X4(e),i=t.retrieve(n,r);if(Bc(i)){if(r.optional)return null;throw i}return i}}function ce(n,e=0){return(VM()||Q4)(_n(n),e)}function L(n,e){return ce(n,xa(e))}function xa(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function X4(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function lb(n){let e=[];for(let t=0;t<n.length;t++){let r=_n(n[t]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=J4(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ce(i,o))}else e.push(ce(r))}return e}function jM(n,e){return n[ab]=e,n.prototype[ab]=e,n}function J4(n){return n[ab]}function ls(n,e){let t=n.hasOwnProperty(Cd);return t?n[Cd]:null}function UM(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function BM(n){return n.flat(Number.POSITIVE_INFINITY)}function lg(n,e){n.forEach(t=>Array.isArray(t)?lg(t,e):e(t))}function Db(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Dd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function $M(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function ug(n,e,t){let r=al(n,e);return r>=0?n[r|1]=t:(r=~r,$M(n,r,e,t)),r}function dg(n,e){let t=al(n,e);if(t>=0)return n[t|1]}function al(n,e){return Z4(n,e,1)}function Z4(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var hs={},Un=[],fs=new te(""),Tb=new te("",-1),Sb=new te(""),Id=class{get(e,t=Ia){if(t===Ia){let i=LM("",-201);throw i.name="\u0275NotFound",i}return t}};function Mb(n){return n[Cb]||null}function po(n){return n[bb]||null}function Ab(n){return n[wb]||null}function HM(n){return n[Eb]||null}function yr(n){return{\u0275providers:n}}function hg(...n){return{\u0275providers:Pb(!0,n),\u0275fromNgModule:!0}}function Pb(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return lg(e,s=>{let a=s;ig(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&zM(i,o),t}function zM(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Rb(i,o=>{e(o,r)})}}function ig(n,e,t,r){if(n=_n(n),!n)return!1;let i=null,o=ob(n),s=!o&&po(n);if(!o&&!s){let c=n.ngModule;if(o=ob(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)ig(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{lg(o.imports,u=>{ig(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&zM(l,e)}if(!a){let l=ls(i)||(()=>new i);e({provide:i,useFactory:l,deps:Un},i),e({provide:Sb,useValue:i,multi:!0},i),e({provide:fs,useValue:()=>ce(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Rb(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Rb(n,e){for(let t of n)_b(t)&&(t=t.\u0275providers),Array.isArray(t)?Rb(t,e):e(t)}var eB=qe({provide:String,useValue:qe});function WM(n){return n!==null&&typeof n=="object"&&eB in n}function tB(n){return!!(n&&n.useExisting)}function nB(n){return!!(n&&n.useFactory)}function Da(n){return typeof n=="function"}function qM(n){return!!n.useClass}var Td=new te(""),ng={},kM={},ib;function Sd(){return ib===void 0&&(ib=new Id),ib}var wt=class{},Ta=class extends wt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,db(e,s=>this.processProvider(s)),this.records.set(Tb,sl(void 0,this)),i.has("environment")&&this.records.set(wt,sl(void 0,this));let o=this.records.get(Td);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Sb,Un,{self:!0}))}retrieve(e,t){let r=xa(t)||0;try{return this.get(e,Ia,r)}catch(i){if(Bc(i))return i;throw i}}destroy(){Ed(this),this._destroyed=!0;let e=xe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),xe(e)}}onDestroy(e){return Ed(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ed(this);let t=mi(this),r=jn(void 0),i;try{return e()}finally{mi(t),jn(r)}}get(e,t=Ia,r){if(Ed(this),e.hasOwnProperty(RM))return e[RM](this);let i=xa(r),o,s=mi(this),a=jn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=aB(e)&&xd(e);u&&this.injectableDefInScope(u)?l=sl(ub(e),ng):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?Sd():this.parent;return t=i&8&&t===Ia?null:t,c.get(e,t)}catch(c){let l=K4(c);throw l===-200||l===-201?new J(l,null):c}finally{jn(a),mi(s)}}resolveInjectorInitializers(){let e=xe(null),t=mi(this),r=jn(void 0),i;try{let o=this.get(fs,Un,{self:!0});for(let s of o)s()}finally{mi(t),jn(r),xe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(lo(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=_n(e);let t=Da(e)?e:_n(e&&e.provide),r=iB(e);if(!Da(e)&&e.multi===!0){let i=this.records.get(t);i||(i=sl(void 0,ng,!0),i.factory=()=>lb(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=xe(null);try{if(t.value===kM)throw Ib(lo(e));return t.value===ng&&(t.value=kM,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&sB(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{xe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=_n(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ub(n){let e=xd(n),t=e!==null?e.factory:ls(n);if(t!==null)return t;if(n instanceof te)throw new J(204,!1);if(n instanceof Function)return rB(n);throw new J(204,!1)}function rB(n){if(n.length>0)throw new J(204,!1);let t=W4(n);return t!==null?()=>t.factory(n):()=>new n}function iB(n){if(WM(n))return sl(void 0,n.useValue);{let e=kb(n);return sl(e,ng)}}function kb(n,e,t){let r;if(Da(n)){let i=_n(n);return ls(i)||ub(i)}else if(WM(n))r=()=>_n(n.useValue);else if(nB(n))r=()=>n.useFactory(...lb(n.deps||[]));else if(tB(n))r=(i,o)=>ce(_n(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=_n(n&&(n.useClass||n.provide));if(oB(n))r=()=>new i(...lb(n.deps));else return ls(i)||ub(i)}return r}function Ed(n){if(n.destroyed)throw new J(205,!1)}function sl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function oB(n){return!!n.deps}function sB(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function aB(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function db(n,e){for(let t of n)Array.isArray(t)?db(t,e):t&&_b(t)?db(t.\u0275providers,e):e(t)}function Tt(n,e){let t;n instanceof Ta?(Ed(n),t=n):t=new cb(n);let r,i=mi(t),o=jn(void 0);try{return e()}finally{mi(i),jn(o)}}function GM(){return VM()!==void 0||vp()!=null}var Qr=0,me=1,ye=2,cn=3,Tr=4,Sr=5,Md=6,cl=7,Sn=8,ps=9,vi=10,pt=11,ll=12,Ob=13,Ma=14,Mr=15,gs=16,Aa=17,_i=18,Ad=19,Nb=20,co=21,fg=22,Pd=23,vr=24,Pa=25,Rd=26,ln=27,KM=1;var ms=7,kd=8,Ra=9,Bn=10;function bi(n){return Array.isArray(n)&&typeof n[KM]=="object"}function Xr(n){return Array.isArray(n)&&n[KM]===!0}function Fb(n){return(n.flags&4)!==0}function ys(n){return n.componentOffset>-1}function ul(n){return(n.flags&1)===1}function wi(n){return!!n.template}function dl(n){return(n[ye]&512)!==0}function ka(n){return(n[ye]&256)===256}var YM="svg",QM="math";function Ar(n){for(;Array.isArray(n);)n=n[Qr];return n}function Lb(n,e){return Ar(e[n])}function Jr(n,e){return Ar(e[n.index])}function pg(n,e){return n.data[e]}function gg(n,e){return n[e]}function Vb(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Pr(n,e){let t=e[n];return bi(t)?t:t[Qr]}function XM(n){return(n[ye]&4)===4}function mg(n){return(n[ye]&128)===128}function JM(n){return Xr(n[cn])}function Od(n,e){return e==null?null:n[e]}function jb(n){n[Aa]=0}function Ub(n){n[ye]&1024||(n[ye]|=1024,mg(n)&&hl(n))}function ZM(n,e){for(;n>0;)e=e[Ma],n--;return e}function Nd(n){return!!(n[ye]&9216||n[vr]?.dirty)}function yg(n){n[vi].changeDetectionScheduler?.notify(8),n[ye]&64&&(n[ye]|=1024),Nd(n)&&hl(n)}function hl(n){n[vi].changeDetectionScheduler?.notify(0);let e=us(n);for(;e!==null&&!(e[ye]&8192||(e[ye]|=8192,!mg(e)));)e=us(e)}function Bb(n,e){if(ka(n))throw new J(911,!1);n[co]===null&&(n[co]=[]),n[co].push(e)}function eA(n,e){if(n[co]===null)return;let t=n[co].indexOf(e);t!==-1&&n[co].splice(t,1)}function us(n){let e=n[cn];return Xr(e)?e[cn]:e}function $b(n){return n[cl]??=[]}function Hb(n){return n.cleanup??=[]}function tA(n,e,t,r){let i=$b(e);i.push(t),n.firstCreatePass&&Hb(n).push(r,i.length-1)}var De={lFrame:vA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var hb=!1;function nA(){return De.lFrame.elementDepthCount}function rA(){De.lFrame.elementDepthCount++}function iA(){De.lFrame.elementDepthCount--}function vg(){return De.bindingsEnabled}function oA(){return De.skipHydrationRootTNode!==null}function sA(n){return De.skipHydrationRootTNode===n}function aA(){De.skipHydrationRootTNode=null}function Ie(){return De.lFrame.lView}function Jt(){return De.lFrame.tView}function de(n){return De.lFrame.contextLView=n,n[Sn]}function he(n){return De.lFrame.contextLView=null,n}function un(){let n=zb();for(;n!==null&&n.type===64;)n=n.parent;return n}function zb(){return De.lFrame.currentTNode}function cA(){let n=De.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function fl(n,e){let t=De.lFrame;t.currentTNode=n,t.isParent=e}function Wb(){return De.lFrame.isParent}function lA(){De.lFrame.isParent=!1}function uA(){return De.lFrame.contextLView}function qb(){return hb}function Gb(n){let e=hb;return hb=n,e}function pl(){let n=De.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function dA(){return De.lFrame.bindingIndex}function hA(n){return De.lFrame.bindingIndex=n}function gl(){return De.lFrame.bindingIndex++}function _g(n){let e=De.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function fA(){return De.lFrame.inI18n}function pA(n,e){let t=De.lFrame;t.bindingIndex=t.bindingRootIndex=n,bg(e)}function gA(){return De.lFrame.currentDirectiveIndex}function bg(n){De.lFrame.currentDirectiveIndex=n}function mA(n){let e=De.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Kb(){return De.lFrame.currentQueryIndex}function wg(n){De.lFrame.currentQueryIndex=n}function cB(n){let e=n[me];return e.type===2?e.declTNode:e.type===1?n[Sr]:null}function Yb(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=cB(o),i===null||(o=o[Ma],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=De.lFrame=yA();return r.currentTNode=e,r.lView=n,!0}function Eg(n){let e=yA(),t=n[me];De.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yA(){let n=De.lFrame,e=n===null?null:n.child;return e===null?vA(n):e}function vA(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function _A(){let n=De.lFrame;return De.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Qb=_A;function Cg(){let n=_A();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function bA(n){return(De.lFrame.contextLView=ZM(n,De.lFrame.contextLView))[Sn]}function go(){return De.lFrame.selectedIndex}function vs(n){De.lFrame.selectedIndex=n}function Ig(){let n=De.lFrame;return pg(n.tView,n.selectedIndex)}function wA(){return De.lFrame.currentNamespace}var EA=!0;function xg(){return EA}function Fd(n){EA=n}function fb(n,e=null,t=null,r){let i=Xb(n,e,t,r);return i.resolveInjectorInitializers(),i}function Xb(n,e=null,t=null,r,i=new Set){let o=[t||Un,hg(n)];return r=r||(typeof n=="object"?void 0:lo(n)),new Ta(o,e||Sd(),r||null,i)}var Dt=class n{static THROW_IF_NOT_FOUND=Ia;static NULL=new Id;static create(e,t){if(Array.isArray(e))return fb({name:""},t,e,"");{let r=e.name??"";return fb({name:r},e.parent,e.providers,r)}}static \u0275prov=Z({token:n,providedIn:"any",factory:()=>ce(Tb)});static __NG_ELEMENT_ID__=-1},St=new te(""),Rr=(()=>{class n{static __NG_ELEMENT_ID__=lB;static __NG_ENV_ID__=t=>t}return n})(),pb=class extends Rr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ka(this._lView)}onDestroy(e){let t=this._lView;return Bb(t,e),()=>eA(t,e)}};function lB(){return new pb(Ie())}var Yr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},$n=new te("",{providedIn:"root",factory:()=>{let n=L(wt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Yr),e.handleError(t))}}}),CA={provide:fs,useValue:()=>void L(Yr),multi:!0};function Jb(n){return typeof n=="function"&&n[Tn]!==void 0}function Hn(n,e){let[t,r,i]=B0(n,e?.equal),o=t,s=o[Tn];return o.set=r,o.update=i,o.asReadonly=IA.bind(o),o}function IA(){let n=this[Tn];if(n.readonlyFn===void 0){let e=()=>this();e[Tn]=n,n.readonlyFn=e}return n.readonlyFn}function Zb(n){return Jb(n)&&typeof n.set=="function"}var Dg=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=uB}return n})();function uB(){return new Dg(Ie(),un())}var uo=class{},Tg=new te("",{providedIn:"root",factory:()=>!1});var ew=new te(""),tw=new te(""),Ei=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ft(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ue(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),mo=(()=>{class n{internalPendingTasks=L(Ei);scheduler=L(uo);errorHandler=L($n);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})();function Ld(...n){}var nw=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new gb})}return n})(),gb=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function wl(n){return{toString:n}.toString()}var Sg="__parameters__";function vB(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function _B(n,e,t){return wl(()=>{let r=vB(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let h=c.hasOwnProperty(Sg)?c[Sg]:Object.defineProperty(c,Sg,{value:[]})[Sg];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var _r=jM(_B("Optional"),8);function bB(n){return typeof n=="function"}var Fg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function nP(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var kr=(()=>{let n=()=>rP;return n.ngInherit=!0,n})();function rP(n){return n.type.prototype.ngOnChanges&&(n.setInput=EB),wB}function wB(){let n=oP(this),e=n?.current;if(e){let t=n.previous;if(t===hs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function EB(n,e,t,r,i){let o=this.declaredInputs[r],s=oP(n)||CB(n,{previous:hs,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Fg(l&&l.currentValue,t,c===hs),nP(n,e,i,t)}var iP="__ngSimpleChanges__";function oP(n){return n[iP]||null}function CB(n,e){return n[iP]=e}var xA=[];var Qe=function(n,e=null,t){for(let r=0;r<xA.length;r++){let i=xA[r];i(n,e,t)}};function IB(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=rP(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function sP(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Rg(n,e,t){aP(n,e,3,t)}function kg(n,e,t,r){(n[ye]&3)===t&&aP(n,e,t,r)}function rw(n,e){let t=n[ye];(t&3)===e&&(t&=16383,t+=1,n[ye]=t)}function aP(n,e,t,r){let i=r!==void 0?n[Aa]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Aa]+=65536),(a<o||o==-1)&&(xB(n,t,e,c),n[Aa]=(n[Aa]&4294901760)+c+2),c++}function DA(n,e){Qe(4,n,e);let t=xe(null);try{e.call(n)}finally{xe(t),Qe(5,n,e)}}function xB(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ye]>>14<n[Aa]>>16&&(n[ye]&3)===e&&(n[ye]+=16384,DA(a,o)):DA(a,o)}var yl=-1,Na=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function DB(n){return(n.flags&8)!==0}function TB(n){return(n.flags&16)!==0}function SB(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];MB(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function cP(n){return n===3||n===4||n===6}function MB(n){return n.charCodeAt(0)===64}function Ud(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?TA(n,t,i,null,e[++r]):TA(n,t,i,null,null))}}return n}function TA(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function lP(n){return n!==yl}function Lg(n){return n&32767}function AB(n){return n>>16}function Vg(n,e){let t=AB(n),r=e;for(;t>0;)r=r[Ma],t--;return r}var pw=!0;function jg(n){let e=pw;return pw=n,e}var PB=256,uP=PB-1,dP=5,RB=0,Ci={};function kB(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Sa)&&(r=t[Sa]),r==null&&(r=t[Sa]=RB++);let i=r&uP,o=1<<i;e.data[n+(i>>dP)]|=o}function Ug(n,e){let t=hP(n,e);if(t!==-1)return t;let r=e[me];r.firstCreatePass&&(n.injectorIndex=e.length,iw(r.data,n),iw(e,null),iw(r.blueprint,null));let i=jw(n,e),o=n.injectorIndex;if(lP(i)){let s=Lg(i),a=Vg(i,e),c=a[me].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function iw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function hP(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function jw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=yP(i),r===null)return yl;if(t++,i=i[Ma],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return yl}function gw(n,e,t){kB(n,e,t)}function OB(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(cP(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function fP(n,e,t){if(t&8||n!==void 0)return n;cg(e,"NodeInjector")}function pP(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ps],o=jn(void 0);try{return i?i.get(e,r,t&8):xb(e,r,t&8)}finally{jn(o)}}return fP(r,e,t)}function gP(n,e,t,r=0,i){if(n!==null){if(e[ye]&2048&&!(r&2)){let s=VB(n,e,t,r,Ci);if(s!==Ci)return s}let o=mP(n,e,t,r,Ci);if(o!==Ci)return o}return pP(e,t,r,i)}function mP(n,e,t,r,i){let o=FB(t);if(typeof o=="function"){if(!Yb(e,n,r))return r&1?fP(i,t,r):pP(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))cg(t);else return s}finally{Qb()}}else if(typeof o=="number"){let s=null,a=hP(n,e),c=yl,l=r&1?e[Mr][Sr]:null;for((a===-1||r&4)&&(c=a===-1?jw(n,e):e[a+8],c===yl||!MA(r,!1)?a=-1:(s=e[me],a=Lg(c),e=Vg(c,e)));a!==-1;){let u=e[me];if(SA(o,a,u.data)){let h=NB(a,e,t,s,r,l);if(h!==Ci)return h}c=e[a+8],c!==yl&&MA(r,e[me].data[a+8]===l)&&SA(o,a,e)?(s=u,a=Lg(c),e=Vg(c,e)):a=-1}}return i}function NB(n,e,t,r,i,o){let s=e[me],a=s.data[n+8],c=r==null?ys(a)&&pw:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=Og(a,s,t,c,l);return u!==null?Bd(e,s,u,a,i):Ci}function Og(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,h=r?a:a+u,f=i?a+u:l;for(let p=h;p<f;p++){let _=s[p];if(p<c&&t===_||p>=c&&_.type===t)return p}if(i){let p=s[c];if(p&&wi(p)&&p.type===t)return c}return null}function Bd(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Na){let a=o;if(a.resolving){let p=NM(s[t]);throw Ib(p)}let c=jg(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,h=a.injectImpl?jn(a.injectImpl):null,f=Yb(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&IB(t,s[t],e)}finally{h!==null&&jn(h),jg(c),a.resolving=!1,Qb()}}return o}function FB(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Sa)?n[Sa]:void 0;return typeof e=="number"?e>=0?e&uP:LB:e}function SA(n,e,t){let r=1<<n;return!!(t[e+(n>>dP)]&r)}function MA(n,e){return!(n&2)&&!(n&1&&e)}var Oa=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return gP(this._tNode,this._lView,e,xa(r),t)}};function LB(){return new Oa(un(),Ie())}function xi(n){return wl(()=>{let e=n.prototype.constructor,t=e[Cd]||mw(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Cd]||mw(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function mw(n){return yb(n)?()=>{let e=mw(_n(n));return e&&e()}:ls(n)}function VB(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ye]&2048&&!dl(s);){let a=mP(o,s,t,r|2,Ci);if(a!==Ci)return a;let c=o.parent;if(!c){let l=s[Nb];if(l){let u=l.get(t,Ci,r);if(u!==Ci)return u}c=yP(s),s=s[Ma]}o=c}return i}function yP(n){let e=n[me],t=e.type;return t===2?e.declTNode:t===1?n[Sr]:null}function Wd(n){return OB(un(),n)}function jB(){return El(un(),Ie())}function El(n,e){return new Mn(Jr(n,e))}var Mn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=jB}return n})();function UB(n){return n instanceof Mn?n.nativeElement:n}function BB(){return this._results[Symbol.iterator]()}var Bg=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new bt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=BM(e);(this._changesDetected=!UM(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=BB};function vP(n){return(n.flags&128)===128}var Uw=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Uw||{}),_P=new Map,$B=0;function HB(){return $B++}function zB(n){_P.set(n[Ad],n)}function yw(n){_P.delete(n[Ad])}var AA="__ngContext__";function vl(n,e){bi(e)?(n[AA]=e[Ad],zB(e)):n[AA]=e}function bP(n){return EP(n[ll])}function wP(n){return EP(n[Tr])}function EP(n){for(;n!==null&&!Xr(n);)n=n[Tr];return n}var vw;function Bw(n){vw=n}function CP(){if(vw!==void 0)return vw;if(typeof document<"u")return document;throw new J(210,!1)}var em=new te("",{providedIn:"root",factory:()=>WB}),WB="ng",tm=new te(""),Ua=new te("",{providedIn:"platform",factory:()=>"unknown"});var nm=new te("",{providedIn:"root",factory:()=>CP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var qB="h",GB="b";var IP=!1,xP=new te("",{providedIn:"root",factory:()=>IP});var $w=new te("");var KB=(n,e,t,r)=>{};function YB(n,e,t,r){KB(n,e,t,r)}function Hw(n){return(n.flags&32)===32}var QB=()=>null;function DP(n,e,t=!1){return QB(n,e,t)}function TP(n,e){let t=n.contentQueries;if(t!==null){let r=xe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];wg(o),a.contentQueries(2,e[s],s)}}}finally{xe(r)}}}function _w(n,e,t){wg(0);let r=xe(null);try{e(n,t)}finally{xe(r)}}function zw(n,e,t){if(Fb(e)){let r=xe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{xe(r)}}}var yo=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(yo||{});var Mg;function XB(){if(Mg===void 0&&(Mg=null,fo.trustedTypes))try{Mg=fo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Mg}function PA(n){return XB()?.createScriptURL(n)||n}var $g=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${og})`}};function Cl(n){return n instanceof $g?n.changingThisBreaksApplicationSecurity:n}function Ww(n,e){let t=SP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${og})`)}return t===e}function SP(n){return n instanceof $g&&n.getTypeName()||null}var JB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function MP(n){return n=String(n),n.match(JB)?n:"unsafe:"+n}var rm=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(rm||{});function AP(n){let e=RP();return e?e.sanitize(rm.URL,n)||"":Ww(n,"URL")?Cl(n):MP(ds(n))}function PP(n){let e=RP();if(e)return PA(e.sanitize(rm.RESOURCE_URL,n)||"");if(Ww(n,"ResourceURL"))return PA(Cl(n));throw new J(904,!1)}function ZB(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?PP:AP}function qw(n,e,t){return ZB(e,t)(n)}function RP(){let n=Ie();return n&&n[vi].sanitizer}var e5=/^>|^->|<!--|-->|--!>|<!-$/g,t5=/(<|>)/g,n5="\u200B$1\u200B";function r5(n){return n.replace(e5,e=>e.replace(t5,n5))}function kP(n){return n instanceof Function?n():n}function i5(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var OP="ng-template";function o5(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&i5(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Gw(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Gw(n){return n.type===4&&n.value!==OP}function s5(n,e,t){let r=n.type===4&&!t?OP:n.value;return e===r}function a5(n,e,t){let r=4,i=n.attrs,o=i!==null?u5(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Zr(r)&&!Zr(c))return!1;if(s&&Zr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!s5(n,c,t)||c===""&&e.length===1){if(Zr(r))return!1;s=!0}}else if(r&8){if(i===null||!o5(n,i,c,t)){if(Zr(r))return!1;s=!0}}else{let l=e[++a],u=c5(c,i,Gw(n),t);if(u===-1){if(Zr(r))return!1;s=!0;continue}if(l!==""){let h;if(u>o?h="":h=i[u+1].toLowerCase(),r&2&&l!==h){if(Zr(r))return!1;s=!0}}}}return Zr(r)||s}function Zr(n){return(n&1)===0}function c5(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return d5(e,n)}function l5(n,e,t=!1){for(let r=0;r<e.length;r++)if(a5(n,e[r],t))return!0;return!1}function u5(n){for(let e=0;e<n.length;e++){let t=n[e];if(cP(t))return e}return n.length}function d5(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function RA(n,e){return n?":not("+e.trim()+")":e}function h5(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Zr(s)&&(e+=RA(o,i),i=""),r=s,o=o||!Zr(r);t++}return i!==""&&(e+=RA(o,i)),e}function f5(n){return n.map(h5).join(",")}function p5(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Zr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var zn={};function g5(n,e){return n.createText(e)}function m5(n,e,t){n.setValue(e,t)}function y5(n,e){return n.createComment(r5(e))}function NP(n,e,t){return n.createElement(e,t)}function Hg(n,e,t,r,i){n.insertBefore(e,t,r,i)}function FP(n,e,t){n.appendChild(e,t)}function kA(n,e,t,r,i){r!==null?Hg(n,e,t,r,i):FP(n,e,t)}function v5(n,e,t,r){n.removeChild(null,e,t,r)}function _5(n,e,t){n.setAttribute(e,"style",t)}function b5(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function LP(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&SB(n,e,r),i!==null&&b5(n,e,i),o!==null&&_5(n,e,o)}function Kw(n,e,t,r,i,o,s,a,c,l,u){let h=ln+r,f=h+i,p=w5(h,f),_=typeof l=="function"?l():l;return p[me]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:u}}function w5(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:zn);return t}function E5(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Kw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Yw(n,e,t,r,i,o,s,a,c,l,u){let h=e.blueprint.slice();return h[Qr]=i,h[ye]=r|4|128|8|64|1024,(l!==null||n&&n[ye]&2048)&&(h[ye]|=2048),jb(h),h[cn]=h[Ma]=n,h[Sn]=t,h[vi]=s||n&&n[vi],h[pt]=a||n&&n[pt],h[ps]=c||n&&n[ps]||null,h[Sr]=o,h[Ad]=HB(),h[Md]=u,h[Nb]=l,h[Mr]=e.type==2?n[Mr]:h,h}function C5(n,e,t){let r=Jr(e,n),i=E5(t),o=n[vi].rendererFactory,s=Qw(n,Yw(n,i,null,VP(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function VP(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function jP(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Qw(n,e){return n[ll]?n[Ob][Tr]=e:n[ll]=e,n[Ob]=e,e}function C(n=1){UP(Jt(),Ie(),go()+n,!1)}function UP(n,e,t,r){if(!r)if((e[ye]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Rg(e,o,t)}else{let o=n.preOrderHooks;o!==null&&kg(e,o,0,t)}vs(t)}var im=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(im||{});function bw(n,e,t,r){let i=xe(null);try{let[o,s,a]=n.inputs[t],c=null;(s&im.SignalBased)!==0&&(c=e[o][Tn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):nP(e,c,o,r)}finally{xe(i)}}var Ii=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ii||{}),I5;function Xw(n,e){return I5(n,e)}var _l=new Set,om=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(om||{}),Ba=new te(""),OA=new Set;function Il(n){OA.has(n)||(OA.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var BP=!1,ww=class extends bt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,GM()&&(this.destroyRef=L(Rr,{optional:!0})??void 0,this.pendingTasks=L(Ei,{optional:!0})??void 0)}emit(e){let t=xe(null);try{super.next(e)}finally{xe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof xt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},gt=ww;function $P(n){let e,t;function r(){n=Ld;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function NA(n){return queueMicrotask(()=>n()),()=>{n=Ld}}var Jw="isAngularZone",zg=Jw+"_ID",x5=0,Be=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new gt(!1);onMicrotaskEmpty=new gt(!1);onStable=new gt(!1);onError=new gt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=BP}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,S5(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Jw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new J(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,D5,Ld,Ld);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},D5={};function Zw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function T5(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){$P(()=>{n.callbackScheduled=!1,Ew(n),n.isCheckStableRunning=!0,Zw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ew(n)}function S5(n){let e=()=>{T5(n)},t=x5++;n._inner=n._inner.fork({name:"angular",properties:{[Jw]:!0,[zg]:t,[zg+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(M5(c))return r.invokeTask(o,s,a,c);try{return FA(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),LA(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return FA(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!A5(c)&&e(),LA(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ew(n),Zw(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ew(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function FA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function LA(n){n._nesting--,Zw(n)}var Wg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new gt;onMicrotaskEmpty=new gt;onStable=new gt;onError=new gt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function M5(n){return HP(n,"__ignore_ng_zone__")}function A5(n){return HP(n,"__scheduler_tick__")}function HP(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var eE=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),zP=[0,1,2,3],WP=(()=>{class n{ngZone=L(Be);scheduler=L(uo);errorHandler=L(Yr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){L(Ba,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Qe(16),this.executing=!0;for(let r of zP)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Qe(17)}register(t){let{view:r}=t;r!==void 0?((r[Pa]??=[]).push(t),hl(r),r[ye]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(om.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),qg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Pa];e&&(this.view[Pa]=e.filter(t=>t!==this))}};function qd(n,e){let t=e?.injector??L(Dt);return Il("NgAfterNextRender"),R5(n,t,e,!0)}function P5(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function R5(n,e,t,r){let i=e.get(eE);i.impl??=e.get(WP);let o=e.get(Ba,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Rr):null,a=e.get(Dg,null,{optional:!0}),c=new qg(i.impl,P5(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var k5=new te("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function qP(n,e,t){let r=n.get(k5);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function O5(n,e){for(let[t,r]of e)qP(n,r.animateFns)}function VA(n,e,t,r){let i=n?.[Rd]?.enter;e!==null&&i&&i.has(t.index)&&O5(r,i)}function ml(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;Xr(i)?c=i:bi(i)&&(l=!0,i=i[Qr]);let u=Ar(i);n===0&&r!==null?(VA(a,r,o,t),s==null?FP(e,r,u):Hg(e,r,u,s||null,!0)):n===1&&r!==null?(VA(a,r,o,t),Hg(e,r,u,s||null,!0)):n===2?jA(a,o,t,h=>{v5(e,u,l,h)}):n===3&&jA(a,o,t,()=>{e.destroyNode(u)}),c!=null&&G5(e,n,t,c,o,r,s)}}function N5(n,e){GP(n,e),e[Qr]=null,e[Sr]=null}function F5(n,e,t,r,i,o){r[Qr]=i,r[Sr]=e,sm(n,r,t,1,i,o)}function GP(n,e){e[vi].changeDetectionScheduler?.notify(9),sm(n,e,e[pt],2,null,null)}function L5(n){let e=n[ll];if(!e)return ow(n[me],n);for(;e;){let t=null;if(bi(e))t=e[ll];else{let r=e[Bn];r&&(t=r)}if(!t){for(;e&&!e[Tr]&&e!==n;)bi(e)&&ow(e[me],e),e=e[cn];e===null&&(e=n),bi(e)&&ow(e[me],e),t=e&&e[Tr]}e=t}}function tE(n,e){let t=n[Ra],r=t.indexOf(e);t.splice(r,1)}function KP(n,e){if(ka(e))return;let t=e[pt];t.destroyNode&&sm(n,e,t,3,null,null),L5(e)}function ow(n,e){if(ka(e))return;let t=xe(null);try{e[ye]&=-129,e[ye]|=256,e[vr]&&yd(e[vr]),U5(n,e),j5(n,e),e[me].type===1&&e[pt].destroy();let r=e[gs];if(r!==null&&Xr(e[cn])){r!==e[cn]&&tE(r,e);let i=e[_i];i!==null&&i.detachView(n)}yw(e)}finally{xe(t)}}function jA(n,e,t,r){let i=n?.[Rd];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&_l.add(n),qP(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),V5(n,r)}else n&&_l.delete(n),r(!1)},i)}function V5(n,e){let t=n[Rd]?.running;if(t){t.then(()=>{n[Rd].running=void 0,_l.delete(n),e(!0)});return}e(!1)}function j5(n,e){let t=n.cleanup,r=e[cl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[cl]=null);let i=e[co];if(i!==null){e[co]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Pd];if(o!==null){e[Pd]=null;for(let s of o)s.destroy()}}function U5(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Na)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Qe(4,a,c);try{c.call(a)}finally{Qe(5,a,c)}}else{Qe(4,i,o);try{o.call(i)}finally{Qe(5,i,o)}}}}}function B5(n,e,t){return $5(n,e.parent,t)}function $5(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Qr];if(ys(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===yo.None||i===yo.Emulated)return null}return Jr(r,t)}function H5(n,e,t){return W5(n,e,t)}function z5(n,e,t){return n.type&40?Jr(n,t):null}var W5=z5,UA;function nE(n,e,t,r){let i=B5(n,r,e),o=e[pt],s=r.parent||e[Sr],a=H5(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)kA(o,i,t[c],a,!1);else kA(o,i,t,a,!1);UA!==void 0&&UA(o,r,e,t,i)}function Vd(n,e){if(e!==null){let t=e.type;if(t&3)return Jr(e,n);if(t&4)return Cw(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Vd(n,r);{let i=n[e.index];return Xr(i)?Cw(-1,i):Ar(i)}}else{if(t&128)return Vd(n,e.next);if(t&32)return Xw(e,n)()||Ar(n[e.index]);{let r=YP(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=us(n[Mr]);return Vd(i,r)}else return Vd(n,e.next)}}}return null}function YP(n,e){if(e!==null){let r=n[Mr][Sr],i=e.projection;return r.projection[i]}return null}function Cw(n,e){let t=Bn+n+1;if(t<e.length){let r=e[t],i=r[me].firstChild;if(i!==null)return Vd(r,i)}return e[ms]}function rE(n,e,t,r,i,o,s){for(;t!=null;){let a=r[ps];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&vl(Ar(c),r),t.flags|=2),!Hw(t))if(l&8)rE(n,e,t.child,r,i,o,!1),ml(e,n,a,i,c,t,o,r);else if(l&32){let u=Xw(t,r),h;for(;h=u();)ml(e,n,a,i,h,t,o,r);ml(e,n,a,i,c,t,o,r)}else l&16?q5(n,e,r,t,i,o):ml(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function sm(n,e,t,r,i,o){rE(t,r,n.firstChild,e,i,o,!1)}function q5(n,e,t,r,i,o){let s=t[Mr],c=s[Sr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ml(e,n,t[ps],i,u,r,o,t)}else{let l=c,u=s[cn];vP(r)&&(l.flags|=128),rE(n,e,l,u,i,o,!0)}}function G5(n,e,t,r,i,o,s){let a=r[ms],c=Ar(r);a!==c&&ml(e,n,t,o,a,i,s);for(let l=Bn;l<r.length;l++){let u=r[l];sm(u[me],u,n,e,o,a)}}function K5(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ii.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ii.Important),n.setStyle(t,r,i,o))}}function QP(n,e,t,r,i){let o=go(),s=r&2;try{vs(-1),s&&e.length>ln&&UP(n,e,ln,!1),Qe(s?2:0,i,t),t(r,i)}finally{vs(o),Qe(s?3:1,i,t)}}function am(n,e,t){t6(n,e,t),(t.flags&64)===64&&n6(n,e,t)}function iE(n,e,t=Jr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Y5(n,e,t,r){let o=r.get(xP,IP)||t===yo.ShadowDom,s=n.selectRootElement(e,o);return Q5(s),s}function Q5(n){X5(n)}var X5=()=>null;function J5(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function XP(n,e,t,r,i,o){let s=e[me];if(sE(n,s,e,t,r)){ys(n)&&e6(e,n.index);return}n.type&3&&(t=J5(t)),Z5(n,e,t,r,i,o)}function Z5(n,e,t,r,i,o){if(n.type&3){let s=Jr(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function e6(n,e){let t=Pr(e,n);t[ye]&16||(t[ye]|=64)}function t6(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ys(t)&&C5(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ug(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=Bd(e,n,s,t);if(vl(c,e),o!==null&&s6(e,s-r,c,a,t,o),wi(a)){let l=Pr(t.index,e);l[Sn]=Bd(e,n,s,t)}}}function n6(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=gA();try{vs(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];bg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&r6(c,l)}}finally{vs(-1),bg(s)}}function r6(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function oE(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];l5(e,o.selectors,!1)&&(r??=[],wi(o)?r.unshift(o):r.push(o))}return r}function i6(n,e,t,r,i,o){let s=Jr(n,e);o6(e[pt],s,o,n.value,t,r,i)}function o6(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?ds(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function s6(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];bw(r,t,c,l)}}function JP(n,e,t,r,i){let o=ln+t,s=e[me],a=i(s,e,n,r,t);e[o]=a,fl(n,!0);let c=n.type===2;return c?(LP(e[pt],a,n),(nA()===0||ul(n))&&vl(a,e),rA()):vl(a,e),xg()&&(!c||!Hw(n))&&nE(s,e,a,n),n}function ZP(n){let e=n;return Wb()?lA():(e=e.parent,fl(e,!1)),e}function a6(n,e){let t=n[ps];if(!t)return;let r;try{r=t.get($n,null)}catch{r=null}r?.(e)}function sE(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],h=e.data[l];bw(h,t[l],u,i),a=!0}if(o)for(let c of o){let l=t[c],u=e.data[c];bw(u,l,r,i),a=!0}return a}function c6(n,e){let t=Pr(e,n),r=t[me];l6(r,t);let i=t[Qr];i!==null&&t[Md]===null&&(t[Md]=DP(i,t[ps])),Qe(18),aE(r,t,t[Sn]),Qe(19,t[Sn])}function l6(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function aE(n,e,t){Eg(e);try{let r=n.viewQuery;r!==null&&_w(1,r,t);let i=n.template;i!==null&&QP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[_i]?.finishViewCreation(n),n.staticContentQueries&&TP(n,e),n.staticViewQueries&&_w(2,n.viewQuery,t);let o=n.components;o!==null&&u6(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ye]&=-5,Cg()}}function u6(n,e){for(let t=0;t<e.length;t++)c6(n,e[t])}function d6(n,e,t,r){let i=xe(null);try{let o=e.tView,a=n[ye]&4096?4096:16,c=Yw(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[gs]=l;let u=n[_i];return u!==null&&(c[_i]=u.createEmbeddedView(o)),aE(o,c,t),c}finally{xe(i)}}function BA(n,e){return!e||e.firstChild===null||vP(n)}function $d(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Ar(o)),Xr(o)&&eR(o,r);let s=t.type;if(s&8)$d(n,e,t.child,r);else if(s&32){let a=Xw(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=YP(e,t);if(Array.isArray(a))r.push(...a);else{let c=us(e[Mr]);$d(c[me],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function eR(n,e){for(let t=Bn;t<n.length;t++){let r=n[t],i=r[me].firstChild;i!==null&&$d(r[me],r,i,e)}n[ms]!==n[Qr]&&e.push(n[ms])}function tR(n){if(n[Pa]!==null){for(let e of n[Pa])e.impl.addSequence(e);n[Pa].length=0}}var nR=[];function h6(n){return n[vr]??f6(n)}function f6(n){let e=nR.pop()??Object.create(g6);return e.lView=n,e}function p6(n){n.lView[vr]!==n&&(n.lView=null,nR.push(n))}var g6=oe(H({},$c),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{hl(n.lView)},consumerOnSignalRead(){this.lView[vr]=this}});function m6(n){let e=n[vr]??Object.create(y6);return e.lView=n,e}var y6=oe(H({},$c),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=us(n.lView);for(;e&&!rR(e[me]);)e=us(e);e&&Ub(e)},consumerOnSignalRead(){this.lView[vr]=this}});function rR(n){return n.type!==2}function iR(n){if(n[Pd]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Pd])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ye]&8192)}}var v6=100;function oR(n,e=0){let r=n[vi].rendererFactory,i=!1;i||r.begin?.();try{_6(n,e)}finally{i||r.end?.()}}function _6(n,e){let t=qb();try{Gb(!0),Iw(n,e);let r=0;for(;Nd(n);){if(r===v6)throw new J(103,!1);r++,Iw(n,1)}}finally{Gb(t)}}function b6(n,e,t,r){if(ka(e))return;let i=e[ye],o=!1,s=!1;Eg(e);let a=!0,c=null,l=null;o||(rR(n)?(l=h6(e),c=zc(l)):Cp()===null?(a=!1,l=m6(e),c=zc(l)):e[vr]&&(yd(e[vr]),e[vr]=null));try{jb(e),hA(n.bindingStartIndex),t!==null&&QP(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let p=n.preOrderCheckHooks;p!==null&&Rg(e,p,null)}else{let p=n.preOrderHooks;p!==null&&kg(e,p,0,null),rw(e,0)}if(s||w6(e),iR(e),sR(e,0),n.contentQueries!==null&&TP(n,e),!o)if(u){let p=n.contentCheckHooks;p!==null&&Rg(e,p)}else{let p=n.contentHooks;p!==null&&kg(e,p,1),rw(e,1)}C6(n,e);let h=n.components;h!==null&&cR(e,h,0);let f=n.viewQuery;if(f!==null&&_w(2,f,r),!o)if(u){let p=n.viewCheckHooks;p!==null&&Rg(e,p)}else{let p=n.viewHooks;p!==null&&kg(e,p,2),rw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[fg]){for(let p of e[fg])p();e[fg]=null}o||(tR(e),e[ye]&=-73)}catch(u){throw o||hl(e),u}finally{l!==null&&(gd(l,c),a&&p6(l)),Cg()}}function sR(n,e){for(let t=bP(n);t!==null;t=wP(t))for(let r=Bn;r<t.length;r++){let i=t[r];aR(i,e)}}function w6(n){for(let e=bP(n);e!==null;e=wP(e)){if(!(e[ye]&2))continue;let t=e[Ra];for(let r=0;r<t.length;r++){let i=t[r];Ub(i)}}}function E6(n,e,t){Qe(18);let r=Pr(e,n);aR(r,t),Qe(19,r[Sn])}function aR(n,e){mg(n)&&Iw(n,e)}function Iw(n,e){let r=n[me],i=n[ye],o=n[vr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&md(o)),s||=!1,o&&(o.dirty=!1),n[ye]&=-9217,s)b6(r,n,r.template,n[Sn]);else if(i&8192){let a=xe(null);try{iR(n),sR(n,1);let c=r.components;c!==null&&cR(n,c,1),tR(n)}finally{xe(a)}}}function cR(n,e,t){for(let r=0;r<e.length;r++)E6(n,e[r],t)}function C6(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)vs(~i);else{let o=i,s=t[++r],a=t[++r];pA(s,o);let c=e[o];Qe(24,c),a(2,c),Qe(25,c)}}}finally{vs(-1)}}function cE(n,e){let t=qb()?64:1088;for(n[vi].changeDetectionScheduler?.notify(e);n;){n[ye]|=t;let r=us(n);if(dl(n)&&!r)return n;n=r}return null}function lR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function I6(n,e,t,r=!0){let i=e[me];if(x6(i,e,n,t),r){let s=Cw(t,n),a=e[pt],c=a.parentNode(n[ms]);c!==null&&F5(i,n[Sr],a,e,c,s)}let o=e[Md];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function xw(n,e){if(n.length<=Bn)return;let t=Bn+e,r=n[t];if(r){let i=r[gs];i!==null&&i!==n&&tE(i,r),e>0&&(n[t-1][Tr]=r[Tr]);let o=Dd(n,Bn+e);N5(r[me],r);let s=o[_i];s!==null&&s.detachView(o[me]),r[cn]=null,r[Tr]=null,r[ye]&=-129}return r}function x6(n,e,t,r){let i=Bn+r,o=t.length;r>0&&(t[i-1][Tr]=e),r<o-Bn?(e[Tr]=t[i],Db(t,Bn+r,e)):(t.push(e),e[Tr]=null),e[cn]=t;let s=e[gs];s!==null&&t!==s&&uR(s,e);let a=e[_i];a!==null&&a.insertView(n),yg(e),e[ye]|=128}function uR(n,e){let t=n[Ra],r=e[cn];if(bi(r))n[ye]|=2;else{let i=r[cn][Mr];e[Mr]!==i&&(n[ye]|=2)}t===null?n[Ra]=[e]:t.push(e)}var _s=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[me];return $d(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Sn]}set context(e){this._lView[Sn]=e}get destroyed(){return ka(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[cn];if(Xr(e)){let t=e[kd],r=t?t.indexOf(this):-1;r>-1&&(xw(e,r),Dd(t,r))}this._attachedToViewContainer=!1}KP(this._lView[me],this._lView)}onDestroy(e){Bb(this._lView,e)}markForCheck(){cE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ye]&=-129}reattach(){yg(this._lView),this._lView[ye]|=128}detectChanges(){this._lView[ye]|=1024,oR(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=dl(this._lView),t=this._lView[gs];t!==null&&!e&&tE(t,this._lView),GP(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let t=dl(this._lView),r=this._lView[gs];r!==null&&!t&&uR(r,this._lView),yg(this._lView)}};var bs=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=D6;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=d6(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new _s(o)}}return n})();function D6(){return cm(un(),Ie())}function cm(n,e){return n.type&4?new bs(e,n,El(n,e)):null}function lE(n,e,t,r,i){let o=n.data[e];if(o===null)o=T6(n,e,t,r,i),fA()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=cA();o.injectorIndex=s===null?-1:s.injectorIndex}return fl(o,!0),o}function T6(n,e,t,r,i){let o=zb(),s=Wb(),a=s?o:o&&o.parent,c=n.data[e]=M6(n,a,t,e,r,i);return S6(n,c,o,s),c}function S6(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function M6(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return oA()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Ehe=new RegExp(`^(\\d+)*(${GB}|${qB})*(.*)`);var A6=()=>null;function $A(n,e){return A6(n,e)}var dR=class{},lm=class{},Dw=class{resolveComponentFactory(e){throw new J(917,!1)}},Gd=class{static NULL=new Dw},Fa=class{},Or=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>P6()}return n})();function P6(){let n=Ie(),e=un(),t=Pr(e.index,n);return(bi(t)?t:n)[pt]}var hR=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>null})}return n})();var Ng={},Tw=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Ng,r);return i!==Ng||t===Ng?i:this.parentInjector.get(e,t,r)}};function HA(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=sg(i,a);else if(o==2){let c=a,l=e[++s];r=sg(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function X(n,e=0){let t=Ie();if(t===null)return ce(n,e);let r=un();return gP(r,t,_n(n),e)}function uE(){let n="invalid";throw new Error(n)}function fR(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}O6(n,e,t,a,o,c,l)}o!==null&&r!==null&&R6(t,r,o)}function R6(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}function k6(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function O6(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let p=r[f];!c&&wi(p)&&(c=!0,k6(n,t,f)),gw(Ug(t,e),n,p.type)}U6(t,n.data.length,a);for(let f=0;f<a;f++){let p=r[f];p.providersResolver&&p.providersResolver(p)}let l=!1,u=!1,h=jP(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let f=0;f<a;f++){let p=r[f];if(t.mergedAttrs=Ud(t.mergedAttrs,p.hostAttrs),F6(n,t,e,h,p),j6(h,p,i),s!==null&&s.has(p)){let[w,b]=s.get(p);t.directiveToIndex.set(p.type,[h,w+t.directiveStart,b+t.directiveStart])}else(o===null||!o.has(p))&&t.directiveToIndex.set(p.type,h);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let _=p.type.prototype;!l&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),h++}N6(n,t,o)}function N6(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))zA(0,e,i,r),zA(1,e,i,r),qA(e,r,!1);else{let o=t.get(i);WA(0,e,o,r),WA(1,e,o,r),qA(e,r,!0)}}}function zA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),pR(e,o)}}function WA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),pR(e,s)}}function pR(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function qA(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Gw(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function F6(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ls(i.type,!0)),s=new Na(o,wi(i),X,null);n.blueprint[r]=s,t[r]=s,L6(n,e,r,jP(n,t,i.hostVars,zn),i)}function L6(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;V6(s)!=a&&s.push(a),s.push(t,r,o)}}function V6(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function j6(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;wi(e)&&(t[""]=n)}}function U6(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function dE(n,e,t,r,i,o,s,a){let c=e[me],l=c.consts,u=Od(l,s),h=lE(c,n,t,r,u);return o&&fR(c,e,h,Od(l,a),i),h.mergedAttrs=Ud(h.mergedAttrs,h.attrs),h.attrs!==null&&HA(h,h.attrs,!1),h.mergedAttrs!==null&&HA(h,h.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,h),h}function hE(n,e){sP(n,e),Fb(e)&&n.queries.elementEnd(e)}function fE(n){return mR(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function gR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function mR(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function um(n,e,t){return n[e]=t}function B6(n,e){return n[e]}function ti(n,e,t){if(t===zn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function pE(n,e,t,r){let i=ti(n,e,t);return ti(n,e+1,r)||i}function $6(n,e,t,r,i){let o=pE(n,e,t,r);return ti(n,e+2,i)||o}function sw(n,e,t){return function r(i){let o=ys(n)?Pr(n.index,e):e;cE(o,5);let s=e[Sn],a=GA(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=GA(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function GA(n,e,t,r){let i=xe(null);try{return Qe(6,e,t),t(r)!==!1}catch(o){return a6(n,o),!1}finally{Qe(7,e,t),xe(i)}}function H6(n,e,t,r,i,o,s,a){let c=ul(n),l=!1,u=null;if(!r&&c&&(u=W6(e,t,o,n.index)),u!==null){let h=u.__ngLastListenerFn__||u;h.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let h=Jr(n,t),f=r?r(h):h;YB(t,f,o,a);let p=i.listen(f,o,a);if(!z6(o)){let _=r?w=>r(Ar(w[n.index])):n.index;yR(_,e,t,o,a,p,!1)}}return l}function z6(n){return n.startsWith("animation")||n.startsWith("transition")}function W6(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[cl],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function yR(n,e,t,r,i,o,s){let a=e.firstCreatePass?Hb(e):null,c=$b(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function KA(n,e,t,r,i,o){let s=e[t],a=e[me],l=a.data[t].outputs[r],h=s[l].subscribe(o);yR(n.index,a,e,i,o,h,!0)}var Sw=Symbol("BINDING");var Gg=class extends Gd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=po(e);return new La(t,this.ngModule)}};function q6(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&im.SignalBased)!==0};return i&&(o.transform=i),o})}function G6(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function K6(n,e,t){let r=e instanceof wt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Tw(t,r):t}function Y6(n){let e=n.get(Fa,null);if(e===null)throw new J(407,!1);let t=n.get(hR,null),r=n.get(uo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function Q6(n,e){let t=vR(n);return NP(e,t,t==="svg"?YM:t==="math"?QM:null)}function vR(n){return(n.selectors[0][0]||"div").toLowerCase()}var La=class extends lm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=q6(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=G6(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=f5(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Qe(22);let a=xe(null);try{let c=this.componentDef,l=X6(r,c,s,o),u=K6(c,i||this.ngModule,e),h=Y6(u),f=h.rendererFactory.createRenderer(null,c),p=r?Y5(f,r,c.encapsulation,u):Q6(c,f),_=s?.some(YA)||o?.some(T=>typeof T!="function"&&T.bindings.some(YA)),w=Yw(null,l,null,512|VP(c),null,null,h,f,u,null,DP(p,u,!0));w[ln]=p,Eg(w);let b=null;try{let T=dE(ln,w,2,"#host",()=>l.directiveRegistry,!0,0);LP(f,p,T),vl(p,w),am(l,w,T),zw(l,T,w),hE(l,T),t!==void 0&&Z6(T,this.ngContentSelectors,t),b=Pr(T.index,w),w[Sn]=b[Sn],aE(l,w,null)}catch(T){throw b!==null&&yw(b),yw(w),T}finally{Qe(23),Cg()}return new Kg(this.componentType,w,!!_)}finally{xe(a)}}};function X6(n,e,t,r){let i=n?["ng-version","20.3.14"]:p5(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[Sw].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let h=r[u];if(typeof h!="function")for(let f of h.bindings){a+=f[Sw].requiredVars;let p=u+1;f.create&&(f.targetIdx=p,(o??=[]).push(f)),f.update&&(f.targetIdx=p,(s??=[]).push(f))}}let c=[e];if(r)for(let u of r){let h=typeof u=="function"?u:u.type,f=Ab(h);c.push(f)}return Kw(0,null,J6(o,s),1,a,c,null,null,null,[i],null)}function J6(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function YA(n){let e=n[Sw].kind;return e==="input"||e==="twoWay"}var Kg=class extends dR{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=pg(t[me],ln),this.location=El(this._tNode,t),this.instance=Pr(this._tNode.index,t)[Sn],this.hostView=this.changeDetectorRef=new _s(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=sE(r,i[me],i,e,t);this.previousInputValues.set(e,t);let s=Pr(r.index,i);cE(s,1)}get injector(){return new Oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Z6(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var vo=(()=>{class n{static __NG_ELEMENT_ID__=e$}return n})();function e$(){let n=un();return bR(n,Ie())}var t$=vo,_R=class extends t${_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return El(this._hostTNode,this._hostLView)}get injector(){return new Oa(this._hostTNode,this._hostLView)}get parentInjector(){let e=jw(this._hostTNode,this._hostLView);if(lP(e)){let t=Vg(e,this._hostLView),r=Lg(e),i=t[me].data[r+8];return new Oa(i,t)}else return new Oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=QA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Bn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=$A(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,BA(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!bB(e),l;if(c)l=t;else{let b=t||{};l=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef,s=b.directives,a=b.bindings}let u=c?e:new La(po(e)),h=r||this.parentInjector;if(!o&&u.ngModule==null){let T=(c?h:this.parentInjector).get(wt,null);T&&(o=T)}let f=po(u.componentType??{}),p=$A(this._lContainer,f?.id??null),_=p?.firstChild??null,w=u.create(h,i,_,o,s,a);return this.insertImpl(w.hostView,l,BA(this._hostTNode,p)),w}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(JM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[cn],l=new _R(c,c[Sr],c[cn]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return I6(s,i,o,r),e.attachToViewContainerRef(),Db(aw(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=QA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=xw(this._lContainer,t);r&&(Dd(aw(this._lContainer),t),KP(r[me],r))}detach(e){let t=this._adjustIndex(e,-1),r=xw(this._lContainer,t);return r&&Dd(aw(this._lContainer),t)!=null?new _s(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function QA(n){return n[kd]}function aw(n){return n[kd]||(n[kd]=[])}function bR(n,e){let t,r=e[n.index];return Xr(r)?t=r:(t=lR(r,e,null,n),e[n.index]=t,Qw(e,t)),r$(t,e,n,r),new _R(t,n,e)}function n$(n,e){let t=n[pt],r=t.createComment(""),i=Jr(e,n),o=t.parentNode(i);return Hg(t,o,r,t.nextSibling(i),!1),r}var r$=s$,i$=()=>!1;function o$(n,e,t){return i$(n,e,t)}function s$(n,e,t,r){if(n[ms])return;let i;t.type&8?i=Ar(r):i=n$(e,t),n[ms]=i}var Mw=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Aw=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)gE(e,t).matches!==null&&this.queries[t].setDirty()}},Yg=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=p$(e):this.predicate=e}},Pw=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Rw=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,a$(t,o)),this.matchTNodeWithReadOption(e,t,Og(t,e,o,!1,!1))}else r===bs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Og(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Mn||i===vo||i===bs&&t.type&4)this.addMatch(t.index,-2);else{let o=Og(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function a$(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function c$(n,e){return n.type&11?El(n,e):n.type&4?cm(n,e):null}function l$(n,e,t,r){return t===-1?c$(e,n):t===-2?u$(n,e,r):Bd(n,n[me],t,e)}function u$(n,e,t){if(t===Mn)return El(e,n);if(t===bs)return cm(e,n);if(t===vo)return bR(e,n)}function wR(n,e,t,r){let i=e[_i].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(l$(e,u,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function kw(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=wR(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let h=Bn;h<u.length;h++){let f=u[h];f[gs]===f[cn]&&kw(f[me],f,l,r)}if(u[Ra]!==null){let h=u[Ra];for(let f=0;f<h.length;f++){let p=h[f];kw(p[me],p,l,r)}}}}}return r}function d$(n,e){return n[_i].queries[e].queryList}function ER(n,e,t){let r=new Bg((t&4)===4);return tA(n,e,r,r.destroy),(e[_i]??=new Aw).queries.push(new Mw(r))-1}function h$(n,e,t){let r=Jt();return r.firstCreatePass&&(CR(r,new Yg(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),ER(r,Ie(),e)}function f$(n,e,t,r){let i=Jt();if(i.firstCreatePass){let o=un();CR(i,new Yg(e,t,r),o.index),g$(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return ER(i,Ie(),t)}function p$(n){return n.split(",").map(e=>e.trim())}function CR(n,e,t){n.queries===null&&(n.queries=new Pw),n.queries.track(new Rw(e,t))}function g$(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function gE(n,e){return n.queries.getByIndex(e)}function m$(n,e){let t=n[me],r=gE(t,e);return r.crossesNgTemplate?kw(t,n,e,[]):wR(t,n,r,e)}var Va=class{},dm=class{};var Qg=class extends Va{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Gg(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Mb(e);this._bootstrapComponents=kP(o.bootstrap),this._r3Injector=Xb(e,t,[{provide:Va,useValue:this},{provide:Gd,useValue:this.componentFactoryResolver},...r],lo(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Xg=class extends dm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Qg(this.moduleType,e,[])}};var Hd=class extends Va{injector;componentFactoryResolver=new Gg(this);instance=null;constructor(e){super();let t=new Ta([...e.providers,{provide:Va,useValue:this},{provide:Gd,useValue:this.componentFactoryResolver}],e.parent||Sd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function xl(n,e,t=null){return new Hd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var y$=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Pb(!1,t.type),i=r.length>0?xl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Z({token:n,providedIn:"environment",factory:()=>new n(ce(wt))})}return n})();function $e(n){return wl(()=>{let e=IR(n),t=oe(H({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Uw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(y$).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||yo.Emulated,styles:n.styles||Un,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Il("NgStandalone"),xR(t);let r=n.dependencies;return t.directiveDefs=XA(r,v$),t.pipeDefs=XA(r,HM),t.id=w$(t),t})}function v$(n){return po(n)||Ab(n)}function br(n){return wl(()=>({type:n.type,bootstrap:n.bootstrap||Un,declarations:n.declarations||Un,imports:n.imports||Un,exports:n.exports||Un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function _$(n,e){if(n==null)return hs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=im.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function b$(n){if(n==null)return hs;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function rt(n){return wl(()=>{let e=IR(n);return xR(e),e})}function Dl(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function IR(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||hs,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Un,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:_$(n.inputs,e),outputs:b$(n.outputs),debugInfo:null}}function xR(n){n.features?.forEach(e=>e(n))}function XA(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function w$(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function E$(n){return Object.getPrototypeOf(n.prototype).constructor}function Jn(n){let e=E$(n.type),t=!0,r=[n];for(;e;){let i;if(wi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=cw(n.inputs),s.declaredInputs=cw(n.declaredInputs),s.outputs=cw(n.outputs);let a=i.hostBindings;a&&T$(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&x$(n,c),l&&D$(n,l),C$(n,i),OM(n.outputs,i.outputs),wi(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Jn&&(t=!1)}}e=Object.getPrototypeOf(e)}I$(r)}function C$(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function I$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ud(i.hostAttrs,t=Ud(t,i.hostAttrs))}}function cw(n){return n===hs?{}:n===Un?[]:n}function x$(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function D$(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function T$(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function S$(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Ud(n.mergedAttrs,n.attrs);let u=n.tView=Kw(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),fl(n,!1);let c=A$(t,e,n,r);xg()&&nE(t,e,c,n),vl(c,e);let l=lR(c,e,c,n);e[r+ln]=l,Qw(e,l),o$(l,n,e)}function M$(n,e,t,r,i,o,s,a,c,l,u){let h=t+ln,f;return e.firstCreatePass?(f=lE(e,h,4,s||null,a||null),vg()&&fR(e,n,f,Od(e.consts,l),oE),sP(e,f)):f=e.data[h],S$(f,n,e,t,r,i,o,c),ul(f)&&am(e,n,f),l!=null&&iE(n,f,u),f}function K(n,e,t,r,i,o,s,a){let c=Ie(),l=Jt(),u=Od(l.consts,o);return M$(c,l,n,e,t,r,i,u,void 0,s,a),K}var A$=P$;function P$(n,e,t,r){return Fd(!0),e[pt].createComment("")}var mE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var yE=new te("");function _o(n){return!!n&&typeof n.then=="function"}function hm(n){return!!n&&typeof n.subscribe=="function"}var vE=new te("");function fm(n){return yr([{provide:vE,multi:!0,useValue:n}])}var _E=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=L(vE,{optional:!0})??[];injector=L(Dt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Tt(this.injector,i);if(_o(o))t.push(o);else if(hm(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kd=new te("");function DR(){U0(()=>{let n="";throw new J(600,n)})}function TR(n){return n.isBoundToModule}var R$=10;var bo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L($n);afterRenderManager=L(eE);zonelessEnabled=L(Tg);rootEffectScheduler=L(nw);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new bt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=L(Ei);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Y(t=>!t))}constructor(){L(Ba,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=L(wt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Dt.NULL){return this._injector.get(Be).run(()=>{Qe(10);let s=t instanceof lm;if(!this._injector.get(_E).done){let _="";throw new J(405,_)}let c;s?c=t:c=this._injector.get(Gd).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=TR(c)?void 0:this._injector.get(Va),u=r||c.selector,h=c.create(i,[],u,l),f=h.location.nativeElement,p=h.injector.get(yE,null);return p?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),jd(this.components,h),p?.unregisterApplication(f)}),this._loadComponent(h),Qe(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Qe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(om.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new J(101,!1);let t=xe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,xe(t),this.afterTick.next(),Qe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Fa,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<R$;)Qe(14),this.synchronizeOnce(),Qe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Nd(i))continue;let o=r&&!this.zonelessEnabled?0:1;oR(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Nd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;jd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Kd,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>jd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new J(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ws(n,e,t,r){let i=Ie(),o=gl();if(ti(i,o,e)){let s=Jt(),a=Ig();i6(a,i,n,e,t,r)}return ws}var Mhe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function N(n,e,t){let r=Ie(),i=gl();if(ti(r,i,e)){let o=Jt(),s=Ig();XP(s,r,n,e,r[pt],t)}return N}function Ow(n,e,t,r,i){sE(e,n,t,i?"class":"style",r)}function v(n,e,t,r){let i=Ie(),o=i[me],s=n+ln,a=o.firstCreatePass?dE(s,i,2,e,oE,vg(),t,r):o.data[s];if(JP(a,i,n,e,k$),ul(a)){let c=i[me];am(c,i,a),zw(c,a,i)}return r!=null&&iE(i,a),v}function m(){let n=Jt(),e=un(),t=ZP(e);return n.firstCreatePass&&hE(n,t),sA(t)&&aA(),iA(),t.classesWithoutHost!=null&&DB(t)&&Ow(n,t,Ie(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&TB(t)&&Ow(n,t,Ie(),t.stylesWithoutHost,!1),m}function Q(n,e,t,r){return v(n,e,t,r),m(),Q}var k$=(n,e,t,r,i)=>(Fd(!0),NP(e[pt],r,wA()));function Bt(n,e,t){let r=Ie(),i=r[me],o=n+ln,s=i.firstCreatePass?dE(o,r,8,"ng-container",oE,vg(),e,t):i.data[o];if(JP(s,r,n,"ng-container",O$),ul(s)){let a=r[me];am(a,r,s),zw(a,s,r)}return t!=null&&iE(r,s),Bt}function $t(){let n=Jt(),e=un(),t=ZP(e);return n.firstCreatePass&&hE(n,t),$t}var O$=(n,e,t,r,i)=>(Fd(!0),y5(e[pt],""));function ke(){return Ie()}var Ag=void 0;function N$(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var F$=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ag,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ag,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ag,"{1} 'at' {0}",Ag],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",N$],lw={};function Zn(n){let e=L$(n),t=JA(e);if(t)return t;let r=e.split("-")[0];if(t=JA(r),t)return t;if(r==="en")return F$;throw new J(701,!1)}function JA(n){return n in lw||(lw[n]=fo.ng&&fo.ng.common&&fo.ng.common.locales&&fo.ng.common.locales[n]),lw[n]}var Mt=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Mt||{});function L$(n){return n.toLowerCase().replace(/_/g,"-")}var Yd="en-US";var V$=Yd;function SR(n){typeof n=="string"&&(V$=n.toLowerCase().replace(/_/g,"-"))}function ae(n,e,t){let r=Ie(),i=Jt(),o=un();return MR(i,r,r[pt],o,n,e,t),ae}function MR(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=sw(r,e,o),H6(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let h=0;h<u.length;h+=2){let f=u[h],p=u[h+1];c??=sw(r,e,o),KA(r,e,f,p,i,c)}if(l&&l.length)for(let h of l)c??=sw(r,e,o),KA(r,e,h,i,i,c)}}function W(n=1){return bA(n)}function bE(n,e,t,r){f$(n,e,t,r)}function Tl(n,e,t){h$(n,e,t)}function Es(n){let e=Ie(),t=Jt(),r=Kb();wg(r+1);let i=gE(t,r);if(n.dirty&&XM(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=m$(e,r);n.reset(o,UB),n.notifyOnChanges()}return!0}return!1}function Cs(){return d$(Ie(),Kb())}function er(n){let e=uA();return gg(e,ln+n)}function Pg(n,e){return n<<17|e<<2}function ja(n){return n>>17&32767}function j$(n){return(n&2)==2}function U$(n,e){return n&131071|e<<17}function Nw(n){return n|2}function bl(n){return(n&131068)>>2}function uw(n,e){return n&-131069|e<<2}function B$(n){return(n&1)===1}function Fw(n){return n|1}function $$(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ja(s),c=bl(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let h=t;u=h[1],(u===null||al(h,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let f=ja(n[a+1]);n[r+1]=Pg(f,a),f!==0&&(n[f+1]=uw(n[f+1],r)),n[a+1]=U$(n[a+1],r)}else n[r+1]=Pg(a,0),a!==0&&(n[a+1]=uw(n[a+1],r)),a=r;else n[r+1]=Pg(c,0),a===0?a=r:n[c+1]=uw(n[c+1],r),c=r;l&&(n[r+1]=Nw(n[r+1])),ZA(n,u,r,!0),ZA(n,u,r,!1),H$(e,u,n,r,o),s=Pg(a,c),o?e.classBindings=s:e.styleBindings=s}function H$(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&al(o,e)>=0&&(t[r+1]=Fw(t[r+1]))}function ZA(n,e,t,r){let i=n[t+1],o=e===null,s=r?ja(i):bl(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];z$(c,e)&&(a=!0,n[s+1]=r?Fw(l):Nw(l)),s=r?ja(l):bl(l)}a&&(n[t+1]=r?Nw(i):Fw(i))}function z$(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?al(n,e)>=0:!1}var ei={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function W$(n){return n.substring(ei.key,ei.keyEnd)}function q$(n){return G$(n),AR(n,PR(n,0,ei.textEnd))}function AR(n,e){let t=ei.textEnd;return t===e?-1:(e=ei.keyEnd=K$(n,ei.key=e,t),PR(n,e,t))}function G$(n){ei.key=0,ei.keyEnd=0,ei.value=0,ei.valueEnd=0,ei.textEnd=n.length}function PR(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function K$(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function An(n,e,t){return RR(n,e,t,!1),An}function Se(n,e){return RR(n,e,null,!0),Se}function wo(n){Q$(n8,Y$,n,!0)}function Y$(n,e){for(let t=q$(e);t>=0;t=AR(e,t))ug(n,W$(e),!0)}function RR(n,e,t,r){let i=Ie(),o=Jt(),s=_g(2);if(o.firstUpdatePass&&OR(o,n,s,r),e!==zn&&ti(i,s,e)){let a=o.data[go()];NR(o,a,i,i[pt],n,i[s+1]=i8(e,t),r,s)}}function Q$(n,e,t,r){let i=Jt(),o=_g(2);i.firstUpdatePass&&OR(i,null,o,r);let s=Ie();if(t!==zn&&ti(s,o,t)){let a=i.data[go()];if(FR(a,r)&&!kR(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=sg(c,t||"")),Ow(i,a,s,t,r)}else r8(i,a,s,s[pt],s[o+1],s[o+1]=t8(n,e,t),r,o)}}function kR(n,e){return e>=n.expandoStartIndex}function OR(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[go()],s=kR(n,t);FR(o,r)&&e===null&&!s&&(e=!1),e=X$(i,o,e,r),$$(i,o,e,t,s,r)}}function X$(n,e,t,r){let i=mA(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=dw(null,n,e,t,r),t=zd(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=dw(i,n,e,t,r),o===null){let c=J$(n,e,r);c!==void 0&&Array.isArray(c)&&(c=dw(null,n,e,c[1],r),c=zd(c,e.attrs,r),Z$(n,e,r,c))}else o=e8(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function J$(n,e,t){let r=t?e.classBindings:e.styleBindings;if(bl(r)!==0)return n[ja(r)]}function Z$(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ja(i)]=r}function e8(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=zd(r,s,t)}return zd(r,e.attrs,t)}function dw(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=zd(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function zd(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ug(n,s,t?!0:e[++o]))}return n===void 0?null:n}function t8(n,e,t){if(t==null||t==="")return Un;let r=[],i=Cl(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function n8(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&ug(n,r,t)}function r8(n,e,t,r,i,o,s,a){i===zn&&(i=Un);let c=0,l=0,u=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;u!==null||h!==null;){let f=c<i.length?i[c+1]:void 0,p=l<o.length?o[l+1]:void 0,_=null,w;u===h?(c+=2,l+=2,f!==p&&(_=h,w=p)):h===null||u!==null&&u<h?(c+=2,_=u):(l+=2,_=h,w=p),_!==null&&NR(n,e,t,r,_,w,s,a),u=c<i.length?i[c]:null,h=l<o.length?o[l]:null}}function NR(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=B$(l)?eP(c,e,t,i,bl(l),s):void 0;if(!Jg(u)){Jg(o)||j$(l)&&(o=eP(c,null,t,i,a,s));let h=Lb(go(),t);K5(r,s,h,i,o)}}function eP(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,h=u===null,f=t[i+1];f===zn&&(f=h?Un:void 0);let p=h?dg(f,r):u===r?f:void 0;if(l&&!Jg(p)&&(p=dg(c,r)),Jg(p)&&(a=p,s))return a;let _=n[i+1];i=s?ja(_):bl(_)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=dg(c,r))}return a}function Jg(n){return n!==void 0}function i8(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=lo(Cl(n)))),n}function FR(n,e){return(n.flags&(e?8:16))!==0}function E(n,e=""){let t=Ie(),r=Jt(),i=n+ln,o=r.firstCreatePass?lE(r,i,1,e,null):r.data[i],s=o8(r,t,o,e,n);t[i]=s,xg()&&nE(r,t,s,o),fl(o,!1)}var o8=(n,e,t,r,i)=>(Fd(!0),g5(e[pt],r));function LR(n,e,t,r=""){return ti(n,gl(),t)?e+ds(t)+r:zn}function s8(n,e,t,r,i,o=""){let s=dA(),a=pE(n,s,t,i);return _g(2),a?e+ds(t)+r+ds(i)+o:zn}function re(n){return ie("",n),re}function ie(n,e,t){let r=Ie(),i=LR(r,n,e,t);return i!==zn&&VR(r,go(),i),ie}function dn(n,e,t,r,i){let o=Ie(),s=s8(o,n,e,t,r,i);return s!==zn&&VR(o,go(),s),dn}function VR(n,e,t){let r=Lb(e,n);m5(n[pt],r,t)}function Zt(n,e,t){Zb(e)&&(e=e());let r=Ie(),i=gl();if(ti(r,i,e)){let o=Jt(),s=Ig();XP(s,r,n,e,r[pt],t)}return Zt}function hn(n,e){let t=Zb(n);return t&&n.set(e),t}function en(n,e){let t=Ie(),r=Jt(),i=un();return MR(r,t,t[pt],i,n,e),en}function wE(n){return ti(Ie(),gl(),n)?ds(n):zn}function EE(n,e,t=""){return LR(Ie(),n,e,t)}function a8(n,e,t){let r=Jt();if(r.firstCreatePass){let i=wi(n);Lw(t,r.data,r.blueprint,i,!0),Lw(e,r.data,r.blueprint,i,!1)}}function Lw(n,e,t,r,i){if(n=_n(n),Array.isArray(n))for(let o=0;o<n.length;o++)Lw(n[o],e,t,r,i);else{let o=Jt(),s=Ie(),a=un(),c=Da(n)?n:_n(n.provide),l=kb(n),u=a.providerIndexes&1048575,h=a.directiveStart,f=a.providerIndexes>>20;if(Da(n)||!n.multi){let p=new Na(l,i,X,null),_=fw(c,e,i?u:u+f,h);_===-1?(gw(Ug(a,s),o,c),hw(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(p),s.push(p)):(t[_]=p,s[_]=p)}else{let p=fw(c,e,u+f,h),_=fw(c,e,u,u+f),w=p>=0&&t[p],b=_>=0&&t[_];if(i&&!b||!i&&!w){gw(Ug(a,s),o,c);let T=u8(i?l8:c8,t.length,i,r,l,n);!i&&b&&(t[_].providerFactory=T),hw(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(T),s.push(T)}else{let T=jR(t[i?_:p],l,!i&&r);hw(o,n,p>-1?p:_,T)}!i&&r&&b&&t[_].componentProviders++}}}function hw(n,e,t,r){let i=Da(e),o=qM(e);if(i||o){let c=(o?_n(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function jR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function fw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function c8(n,e,t,r,i){return Vw(this.multi,[])}function l8(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Bd(r,r[me],this.providerFactory.index,i);s=c.slice(0,a),Vw(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Vw(o,s);return s}function Vw(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function u8(n,e,t,r,i,o){let s=new Na(n,t,X,null);return s.multi=[],s.index=e,s.componentProviders=0,jR(s,i,r&&!t),s}function Di(n,e=[]){return t=>{t.providersResolver=(r,i)=>a8(r,i?i(n):n,e)}}function $a(n,e,t){let r=pl()+n,i=Ie();return i[r]===zn?um(i,r,t?e.call(t):e()):B6(i,r)}function Qd(n,e,t,r){return UR(Ie(),pl(),n,e,t,r)}function Xd(n,e,t,r,i,o){return h8(Ie(),pl(),n,e,t,r,i,o)}function CE(n,e){let t=n[e];return t===zn?void 0:t}function UR(n,e,t,r,i,o){let s=e+t;return ti(n,s,i)?um(n,s+1,o?r.call(o,i):r(i)):CE(n,s+1)}function d8(n,e,t,r,i,o,s){let a=e+t;return pE(n,a,i,o)?um(n,a+2,s?r.call(s,i,o):r(i,o)):CE(n,a+2)}function h8(n,e,t,r,i,o,s,a){let c=e+t;return $6(n,c,i,o,s)?um(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):CE(n,c+3)}function fn(n,e){let t=Jt(),r,i=n+ln;t.firstCreatePass?(r=f8(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ls(r.type,!0)),s,a=jn(X);try{let c=jg(!1),l=o();return jg(c),Vb(t,Ie(),i,l),l}finally{jn(a)}}function f8(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Wn(n,e,t){let r=n+ln,i=Ie(),o=gg(i,r);return BR(i,r)?UR(i,pl(),e,o.transform,t,o):o.transform(t)}function Sl(n,e,t,r){let i=n+ln,o=Ie(),s=gg(o,i);return BR(o,i)?d8(o,pl(),e,s.transform,t,r,s):s.transform(t,r)}function BR(n,e){return n[me].data[e].pure}function tr(n,e){return cm(n,e)}var Zg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},IE=(()=>{class n{compileModuleSync(t){return new Xg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Mb(t),o=kP(i.declarations).reduce((s,a)=>{let c=po(a);return c&&s.push(new La(c)),s},[]);return new Zg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var p8=(()=>{class n{zone=L(Be);changeDetectionScheduler=L(uo);applicationRef=L(bo);applicationErrorHandler=L($n);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $R({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Be(oe(H({},HR()),{scheduleInRootZone:t})),[{provide:Be,useFactory:n},{provide:fs,multi:!0,useFactory:()=>{let r=L(p8,{optional:!0});return()=>r.initialize()}},{provide:fs,multi:!0,useFactory:()=>{let r=L(g8);return()=>{r.initialize()}}},e===!0?{provide:ew,useValue:!0}:[],{provide:tw,useValue:t??BP},{provide:$n,useFactory:()=>{let r=L(Be),i=L(wt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Yr),o.handleError(s))})}}}]}function HR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var g8=(()=>{class n{subscription=new xt;initialized=!1;zone=L(Be);pendingTasks=L(Ei);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Be.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Be.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var zR=(()=>{class n{applicationErrorHandler=L($n);appRef=L(bo);taskService=L(Ei);ngZone=L(Be);zonelessEnabled=L(Tg);tracing=L(Ba,{optional:!0});disableScheduling=L(ew,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new xt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(zg):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(tw,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Wg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?NA:$P;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(zg+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,NA(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function m8(){return typeof $localize<"u"&&$localize.locale||Yd}var Ml=new te("",{providedIn:"root",factory:()=>L(Ml,{optional:!0,skipSelf:!0})||m8()});function Ht(n){return PM(n)}function Al(n,e){return Tp(n,e?.equal)}var WR=class{[Tn];constructor(e){this[Tn]=e}destroy(){this[Tn].destroy()}};var QR=Symbol("InputSignalNode#UNSET"),S8=oe(H({},Sp),{transformFn:void 0,applyValueToInputSignal(n,e){qc(n,e)}});function XR(n,e){let t=Object.create(S8);t.value=n,t.transformFn=e?.transform;function r(){if(Hc(t),t.value===QR){let i=null;throw new J(-950,i)}return t.value}return r[Tn]=t,r}var gm=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Wd(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},M8=new te("");M8.__NG_ELEMENT_ID__=n=>{let e=un();if(e===null)throw new J(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new J(204,!1)};function qR(n,e){return XR(n,e)}function A8(n){return XR(QR,n)}var JR=(qR.required=A8,qR);var xE=new te(""),P8=new te("");function Jd(n){return!n.moduleRef}function R8(n){let e=Jd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Be);return t.run(()=>{Jd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get($n),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Jd(n)){let o=()=>e.destroy(),s=n.platformInjector.get(xE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(xE);s.add(o),n.moduleRef.onDestroy(()=>{jd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return O8(r,t,()=>{let o=e.get(Ei),s=o.add(),a=e.get(_E);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Ml,Yd);if(SR(c||Yd),!e.get(P8,!0))return Jd(n)?e.get(bo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Jd(n)){let u=e.get(bo);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return k8?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var k8;function O8(n,e,t){try{let r=t();return _o(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var pm=null;function N8(n=[],e){return Dt.create({name:e,providers:[{provide:Td,useValue:"platform"},{provide:xE,useValue:new Set([()=>pm=null])},...n]})}function F8(n=[]){if(pm)return pm;let e=N8(n);return pm=e,DR(),L8(e),e}function L8(n){let e=n.get(tm,null);Tt(n,()=>{e?.forEach(t=>t())})}function AE(){return!1}var Ti=(()=>{class n{static __NG_ELEMENT_ID__=V8}return n})();function V8(n){return j8(un(),Ie(),(n&16)===16)}function j8(n,e,t){if(ys(n)&&!t){let r=Pr(n.index,e);return new _s(r,r)}else if(n.type&175){let r=e[Mr];return new _s(r,e)}return null}var DE=class{constructor(){}supports(e){return fE(e)}create(e){return new TE(e)}},U8=(n,e)=>e,TE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||U8}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<GR(r,i,o)?t:r,a=GR(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let p=f<o.length?o[f]:o[f]=0,_=p+f;u<=_&&_<l&&(o[f]=p+1)}let h=s.previousIndex;o[h]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!fE(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,gR(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new SE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new mm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new mm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},SE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},ME=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},mm=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new ME,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function GR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function KR(){return new PE([new DE])}var PE=(()=>{class n{factories;static \u0275prov=Z({token:n,providedIn:"root",factory:KR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=L(n,{optional:!0,skipSelf:!0});return n.create(t,r||KR())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new J(901,!1)}}return n})();function ZR(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Qe(8);try{let o=i?.injector??F8(r),s=[$R({}),{provide:uo,useExisting:zR},CA,...t||[]],a=new Hd({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return R8({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Qe(9)}}function Ha(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ek(n){let e=po(n);if(!e)return null;let t=new La(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var rk=null;function Nr(){return rk}function RE(n){rk??=n}var Zd=class{},eh=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>L(ik),providedIn:"platform"})}return n})(),kE=new te(""),ik=(()=>{class n extends eh{_location;_history;_doc=L(St);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nr().getBaseHref(this._doc)}onPopState(t){let r=Nr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Nr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ym(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function tk(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ni(n){return n&&n[0]!=="?"?`?${n}`:n}var ri=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>L(_m),providedIn:"root"})}return n})(),vm=new te(""),_m=(()=>{class n extends ri{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(St).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ym(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ni(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ni(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ni(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ce(eh),ce(vm,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Is=(()=>{class n{_subject=new bt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=H8(tk(nk(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ni(r))}normalize(t){return n.stripTrailingSlash($8(this._basePath,nk(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ni(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ni(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ni;static joinWithSlash=ym;static stripTrailingSlash=tk;static \u0275fac=function(r){return new(r||n)(ce(ri))};static \u0275prov=Z({token:n,factory:()=>B8(),providedIn:"root"})}return n})();function B8(){return new Is(ce(ri))}function $8(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function nk(n){return n.replace(/\/index.html$/,"")}function H8(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var $E=(()=>{class n extends ri{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=ym(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ni(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ni(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ce(eh),ce(vm,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();var HE=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(HE||{});var Pn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Pn||{}),Xe=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Xe||{}),rr=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(rr||{}),ir={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function uk(n){return Zn(n)[Mt.LocaleId]}function dk(n,e,t){let r=Zn(n),i=[r[Mt.DayPeriodsFormat],r[Mt.DayPeriodsStandalone]],o=Fr(i,e);return Fr(o,t)}function hk(n,e,t){let r=Zn(n),i=[r[Mt.DaysFormat],r[Mt.DaysStandalone]],o=Fr(i,e);return Fr(o,t)}function fk(n,e,t){let r=Zn(n),i=[r[Mt.MonthsFormat],r[Mt.MonthsStandalone]],o=Fr(i,e);return Fr(o,t)}function pk(n,e){let r=Zn(n)[Mt.Eras];return Fr(r,e)}function th(n,e){let t=Zn(n);return Fr(t[Mt.DateFormat],e)}function nh(n,e){let t=Zn(n);return Fr(t[Mt.TimeFormat],e)}function rh(n,e){let r=Zn(n)[Mt.DateTimeFormat];return Fr(r,e)}function Si(n,e){let t=Zn(n),r=t[Mt.NumberSymbols][e];if(typeof r>"u"){if(e===ir.CurrencyDecimal)return t[Mt.NumberSymbols][ir.Decimal];if(e===ir.CurrencyGroup)return t[Mt.NumberSymbols][ir.Group]}return r}function gk(n,e){return Zn(n)[Mt.NumberFormats][e]}function mk(n){if(!n[Mt.ExtraData])throw new J(2303,!1)}function yk(n){let e=Zn(n);return mk(e),(e[Mt.ExtraData][2]||[]).map(r=>typeof r=="string"?OE(r):[OE(r[0]),OE(r[1])])}function vk(n,e,t){let r=Zn(n);mk(r);let i=[r[Mt.ExtraData][0],r[Mt.ExtraData][1]],o=Fr(i,e)||[];return Fr(o,t)||[]}function Fr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new J(2304,!1)}function OE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var z8=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,bm={},W8=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function _k(n,e,t,r){let i=eH(n);e=Eo(t,e)||e;let s=[],a;for(;e;)if(a=W8.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=wk(r,c),i=Z8(i,r));let l="";return s.forEach(u=>{let h=X8(u);l+=h?h(i,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function xm(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Eo(n,e){let t=uk(n);if(bm[t]??={},bm[t][e])return bm[t][e];let r="";switch(e){case"shortDate":r=th(n,rr.Short);break;case"mediumDate":r=th(n,rr.Medium);break;case"longDate":r=th(n,rr.Long);break;case"fullDate":r=th(n,rr.Full);break;case"shortTime":r=nh(n,rr.Short);break;case"mediumTime":r=nh(n,rr.Medium);break;case"longTime":r=nh(n,rr.Long);break;case"fullTime":r=nh(n,rr.Full);break;case"short":let i=Eo(n,"shortTime"),o=Eo(n,"shortDate");r=wm(rh(n,rr.Short),[i,o]);break;case"medium":let s=Eo(n,"mediumTime"),a=Eo(n,"mediumDate");r=wm(rh(n,rr.Medium),[s,a]);break;case"long":let c=Eo(n,"longTime"),l=Eo(n,"longDate");r=wm(rh(n,rr.Long),[c,l]);break;case"full":let u=Eo(n,"fullTime"),h=Eo(n,"fullDate");r=wm(rh(n,rr.Full),[u,h]);break}return r&&(bm[t][e]=r),r}function wm(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function ii(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function q8(n,e){return ii(n,3).substring(0,e)}function zt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=G8(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return q8(a,e);let c=Si(s,ir.MinusSign);return ii(a,e,c,r,i)}}function G8(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new J(2301,!1)}}function at(n,e,t=Pn.Format,r=!1){return function(i,o){return K8(i,o,n,e,t,r)}}function K8(n,e,t,r,i,o){switch(t){case 2:return fk(e,i,r)[n.getMonth()];case 1:return hk(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=yk(e),u=vk(e,i,r),h=l.findIndex(f=>{if(Array.isArray(f)){let[p,_]=f,w=s>=p.hours&&a>=p.minutes,b=s<_.hours||s===_.hours&&a<_.minutes;if(p.hours<_.hours){if(w&&b)return!0}else if(w||b)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(h!==-1)return u[h]}return dk(e,i,r)[s<12?0:1];case 3:return pk(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new J(2302,!1)}}function Em(n){return function(e,t,r){let i=-1*r,o=Si(t,ir.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+ii(s,2,o)+ii(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+ii(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+ii(s,2,o)+":"+ii(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+ii(s,2,o)+":"+ii(Math.abs(i%60),2,o);default:throw new J(2310,!1)}}}var Y8=0,Im=4;function Q8(n){let e=xm(n,Y8,1).getDay();return xm(n,0,1+(e<=Im?Im:Im+7)-e)}function bk(n){let e=n.getDay(),t=e===0?-3:Im-e;return xm(n.getFullYear(),n.getMonth(),n.getDate()+t)}function NE(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=bk(t),s=Q8(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return ii(i,n,Si(r,ir.MinusSign))}}function Cm(n,e=!1){return function(t,r){let o=bk(t).getFullYear();return ii(o,n,Si(r,ir.MinusSign),e)}}var FE={};function X8(n){if(FE[n])return FE[n];let e;switch(n){case"G":case"GG":case"GGG":e=at(3,Xe.Abbreviated);break;case"GGGG":e=at(3,Xe.Wide);break;case"GGGGG":e=at(3,Xe.Narrow);break;case"y":e=zt(0,1,0,!1,!0);break;case"yy":e=zt(0,2,0,!0,!0);break;case"yyy":e=zt(0,3,0,!1,!0);break;case"yyyy":e=zt(0,4,0,!1,!0);break;case"Y":e=Cm(1);break;case"YY":e=Cm(2,!0);break;case"YYY":e=Cm(3);break;case"YYYY":e=Cm(4);break;case"M":case"L":e=zt(1,1,1);break;case"MM":case"LL":e=zt(1,2,1);break;case"MMM":e=at(2,Xe.Abbreviated);break;case"MMMM":e=at(2,Xe.Wide);break;case"MMMMM":e=at(2,Xe.Narrow);break;case"LLL":e=at(2,Xe.Abbreviated,Pn.Standalone);break;case"LLLL":e=at(2,Xe.Wide,Pn.Standalone);break;case"LLLLL":e=at(2,Xe.Narrow,Pn.Standalone);break;case"w":e=NE(1);break;case"ww":e=NE(2);break;case"W":e=NE(1,!0);break;case"d":e=zt(2,1);break;case"dd":e=zt(2,2);break;case"c":case"cc":e=zt(7,1);break;case"ccc":e=at(1,Xe.Abbreviated,Pn.Standalone);break;case"cccc":e=at(1,Xe.Wide,Pn.Standalone);break;case"ccccc":e=at(1,Xe.Narrow,Pn.Standalone);break;case"cccccc":e=at(1,Xe.Short,Pn.Standalone);break;case"E":case"EE":case"EEE":e=at(1,Xe.Abbreviated);break;case"EEEE":e=at(1,Xe.Wide);break;case"EEEEE":e=at(1,Xe.Narrow);break;case"EEEEEE":e=at(1,Xe.Short);break;case"a":case"aa":case"aaa":e=at(0,Xe.Abbreviated);break;case"aaaa":e=at(0,Xe.Wide);break;case"aaaaa":e=at(0,Xe.Narrow);break;case"b":case"bb":case"bbb":e=at(0,Xe.Abbreviated,Pn.Standalone,!0);break;case"bbbb":e=at(0,Xe.Wide,Pn.Standalone,!0);break;case"bbbbb":e=at(0,Xe.Narrow,Pn.Standalone,!0);break;case"B":case"BB":case"BBB":e=at(0,Xe.Abbreviated,Pn.Format,!0);break;case"BBBB":e=at(0,Xe.Wide,Pn.Format,!0);break;case"BBBBB":e=at(0,Xe.Narrow,Pn.Format,!0);break;case"h":e=zt(3,1,-12);break;case"hh":e=zt(3,2,-12);break;case"H":e=zt(3,1);break;case"HH":e=zt(3,2);break;case"m":e=zt(4,1);break;case"mm":e=zt(4,2);break;case"s":e=zt(5,1);break;case"ss":e=zt(5,2);break;case"S":e=zt(6,1);break;case"SS":e=zt(6,2);break;case"SSS":e=zt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Em(0);break;case"ZZZZZ":e=Em(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Em(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Em(2);break;default:return null}return FE[n]=e,e}function wk(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function J8(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Z8(n,e,t){let i=n.getTimezoneOffset(),o=wk(e,i);return J8(n,-1*(o-i))}function eH(n){if(ok(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return xm(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(z8))return tH(r)}let e=new Date(n);if(!ok(e))throw new J(2311,!1);return e}function tH(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function ok(n){return n instanceof Date&&!isNaN(n.valueOf())}var nH=/^(\d+)?\.((\d+)(-(\d+))?)?$/,sk=22,Dm=".",ih="0",rH=";",iH=",",LE="#";function oH(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=Si(t,ir.Infinity);else{let l=cH(n);s&&(l=aH(l));let u=e.minInt,h=e.minFrac,f=e.maxFrac;if(o){let k=o.match(nH);if(k===null)throw new J(2306,!1);let V=k[1],j=k[3],U=k[5];V!=null&&(u=VE(V)),j!=null&&(h=VE(j)),U!=null?f=VE(U):j!=null&&h>f&&(f=h)}lH(l,h,f);let p=l.digits,_=l.integerLen,w=l.exponent,b=[];for(c=p.every(k=>!k);_<u;_++)p.unshift(0);for(;_<0;_++)p.unshift(0);_>0?b=p.splice(_,p.length):(b=p,p=[0]);let T=[];for(p.length>=e.lgSize&&T.unshift(p.splice(-e.lgSize,p.length).join(""));p.length>e.gSize;)T.unshift(p.splice(-e.gSize,p.length).join(""));p.length&&T.unshift(p.join("")),a=T.join(Si(t,r)),b.length&&(a+=Si(t,i)+b.join("")),w&&(a+=Si(t,ir.Exponential)+"+"+w)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function Ek(n,e,t){let r=gk(e,HE.Decimal),i=sH(r,Si(e,ir.MinusSign));return oH(n,i,e,ir.Group,ir.Decimal,t)}function sH(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(rH),i=r[0],o=r[1],s=i.indexOf(Dm)!==-1?i.split(Dm):[i.substring(0,i.lastIndexOf(ih)+1),i.substring(i.lastIndexOf(ih)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(LE));for(let u=0;u<c.length;u++){let h=c.charAt(u);h===ih?t.minFrac=t.maxFrac=u+1:h===LE?t.maxFrac=u+1:t.posSuf+=h}let l=a.split(iH);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let u=i.length-t.posPre.length-t.posSuf.length,h=o.indexOf(LE);t.negPre=o.substring(0,h).replace(/'/g,""),t.negSuf=o.slice(h+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function aH(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function cH(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Dm))>-1&&(e=e.replace(Dm,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===ih;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===ih;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>sk&&(r=r.splice(0,sk-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function lH(n,e,t){if(e>t)throw new J(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let h=s;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let h=1;h<s;h++)r[h]=0}if(a>=5)if(s-1<0){for(let h=0;h>s;h--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+n.integerLen,u=r.reduceRight(function(h,f,p,_){return f=f+h,_[p]=f<10?f:f-10,c&&(_[p]===0&&p>=l?_.pop():c=!1),f>=10?1:0},0);u&&(r.unshift(u),n.integerLen++)}function VE(n){let e=parseInt(n);if(isNaN(e))throw new J(2305,!1);return e}var jE=/\s+/,ak=[],wr=(()=>{class n{_ngEl;_renderer;initialClasses=ak;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(jE):ak}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(jE):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(jE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(X(Mn),X(Or))};static \u0275dir=rt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Tm=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Wt=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Tm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),ck(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);ck(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(X(vo),X(bs),X(PE))};static \u0275dir=rt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function ck(n,e){n.context.$implicit=e.item}var it=(()=>{class n{_viewContainer;_context=new Sm;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lk(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lk(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(X(vo),X(bs))};static \u0275dir=rt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Sm=class{$implicit=null;ngIf=null};function lk(n,e){if(n&&!n.createEmbeddedView)throw new J(2020,!1)}function Mm(n,e){return new J(2100,!1)}var UE=class{createSubscription(e,t,r){return Ht(()=>e.subscribe({next:t,error:r}))}dispose(e){Ht(()=>e.unsubscribe())}},BE=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},uH=new BE,dH=new UE,za=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=L($n);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(_o(t))return uH;if(hm(t))return dH;throw Mm(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(X(Ti,16))};static \u0275pipe=Dl({name:"async",type:n,pure:!1})}return n})();var hH=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Wa=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw Mm(n,t);return t.replace(hH,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Dl({name:"titlecase",type:n,pure:!0})}return n})();var fH="mediumDate",Ck=new te(""),Ik=new te(""),oh=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??fH,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return _k(t,s,o||this.locale,a)}catch(s){throw Mm(n,s.message)}}static \u0275fac=function(r){return new(r||n)(X(Ml,16),X(Ck,24),X(Ik,24))};static \u0275pipe=Dl({name:"date",type:n,pure:!0})}return n})();var zE=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!pH(t))return null;i||=this._locale;try{let o=gH(t);return Ek(o,i,r)}catch(o){throw Mm(n,o.message)}}static \u0275fac=function(r){return new(r||n)(X(Ml,16))};static \u0275pipe=Dl({name:"number",type:n,pure:!0})}return n})();function pH(n){return!(n==null||n===""||n!==n)}function gH(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new J(2309,!1);return n}var Je=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=Xn({})}return n})();function sh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var qa=class{};var xk="browser";var Dk=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new WE(L(St),window)})}return n})(),WE=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(oe(H({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=mH(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(ho(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(oe(H({},t),{left:i-s[0],top:o-s[1]}))}};function mH(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ah=class{_doc;constructor(e){this._doc=e}manager},Am=(()=>{class n extends ah{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ce(St))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Rm=new te(""),QE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Am));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Am);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ce(Rm),ce(Be))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),qE="ng-app-id";function Tk(n){for(let e of n)e.remove()}function Sk(n,e){let t=e.createElement("style");return t.textContent=n,t}function yH(n,e,t,r){let i=n.head?.querySelectorAll(`style[${qE}="${e}"],link[${qE}="${e}"]`);if(i)for(let o of i)o.removeAttribute(qE),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function KE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var XE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,yH(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Sk);r?.forEach(i=>this.addUsage(i,this.external,KE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Tk(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Tk(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Sk(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,KE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ce(St),ce(em),ce(nm,8),ce(Ua))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),GE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},JE=/%COMP%/g;var Ak="%COMP%",vH=`_nghost-${Ak}`,_H=`_ngcontent-${Ak}`,bH=!0,wH=new te("",{providedIn:"root",factory:()=>bH});function EH(n){return _H.replace(JE,n)}function CH(n){return vH.replace(JE,n)}function Pk(n,e){return e.map(t=>t.replace(JE,n))}var ZE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new ch(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Pm?i.applyToHost(t):i instanceof lh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case yo.Emulated:o=new Pm(c,l,r,this.appId,u,s,a,h,f);break;case yo.ShadowDom:return new YE(c,l,t,r,s,a,this.nonce,h,f);default:o=new lh(c,l,r,u,s,a,h,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ce(QE),ce(XE),ce(em),ce(wH),ce(St),ce(Be),ce(nm),ce(Ba,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),ch=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(GE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Mk(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Mk(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=GE[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=GE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ii.DashCase|Ii.Important)?e.style.setProperty(t,r,i&Ii.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ii.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Nr().getGlobalEventTarget(this.doc,e),!e))throw new J(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Mk(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var YE=class extends ch{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=Pk(i.id,u);for(let f of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=f,this.shadowRoot.appendChild(p)}let h=i.getExternalStyles?.();if(h)for(let f of h){let p=KE(f,o);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},lh=class extends ch{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?Pk(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&_l.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Pm=class extends lh{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,l,u),this.contentAttr=EH(u),this.hostAttr=CH(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var km=class n extends Zd{supportsDOMEvents=!0;static makeCurrent(){RE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=IH();return t==null?null:xH(t)}resetBaseElement(){uh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sh(document.cookie,e)}},uh=null;function IH(){return uh=uh||document.head.querySelector("base"),uh?uh.getAttribute("href"):null}function xH(n){return new URL(n,document.baseURI).pathname}var DH=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Rk=["alt","control","meta","shift"],TH={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},SH={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},kk=(()=>{class n extends ah{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Rk.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=TH[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Rk.forEach(s=>{if(s!==i){let a=SH[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ce(St))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function eC(n,e,t){let r=H({rootComponent:n,platformRef:t?.platformRef},MH(e));return ZR(r)}function MH(n){return{appProviders:[...OH,...n?.providers??[]],platformProviders:kH}}function AH(){km.makeCurrent()}function PH(){return new Yr}function RH(){return Bw(document),document}var kH=[{provide:Ua,useValue:xk},{provide:tm,useValue:AH,multi:!0},{provide:St,useFactory:RH}];var OH=[{provide:Td,useValue:"root"},{provide:Yr,useFactory:PH},{provide:Rm,useClass:Am,multi:!0,deps:[St]},{provide:Rm,useClass:kk,multi:!0,deps:[St]},ZE,XE,QE,{provide:Fa,useExisting:ZE},{provide:qa,useClass:DH},[]];var kl=class{},dh=class{},xs=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Nm=class{encodeKey(e){return Ok(e)}encodeValue(e){return Ok(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function NH(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var FH=/%(\d[a-f0-9])/gi,LH={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ok(n){return encodeURIComponent(n).replace(FH,(e,t)=>LH[t]??e)}function Om(n){return`${n}`}var Co=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Nm,e.fromString){if(e.fromObject)throw new J(2805,!1);this.map=NH(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Om):[Om(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Om(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Om(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Fm=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function VH(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Nk(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Fk(n){return typeof Blob<"u"&&n instanceof Blob}function Lk(n){return typeof FormData<"u"&&n instanceof FormData}function jH(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Vk="Content-Type",jk="Accept",Bk="X-Request-URL",$k="text/plain",Hk="application/json",UH=`${Hk}, ${$k}, */*`,Pl=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(VH(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new J(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new xs,this.context??=new Fm,!this.params)this.params=new Co,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Nk(this.body)||Fk(this.body)||Lk(this.body)||jH(this.body)?this.body:this.body instanceof Co?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Lk(this.body)?null:Fk(this.body)?this.body.type||null:Nk(this.body)?null:typeof this.body=="string"?$k:this.body instanceof Co?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Hk:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,u=e.credentials||this.credentials,h=e.referrer||this.referrer,f=e.integrity||this.integrity,p=e.transferCache??this.transferCache,_=e.timeout??this.timeout,w=e.body!==void 0?e.body:this.body,b=e.withCredentials??this.withCredentials,T=e.reportProgress??this.reportProgress,k=e.headers||this.headers,V=e.params||this.params,j=e.context??this.context;return e.setHeaders!==void 0&&(k=Object.keys(e.setHeaders).reduce((U,B)=>U.set(B,e.setHeaders[B]),k)),e.setParams&&(V=Object.keys(e.setParams).reduce((U,B)=>U.set(B,e.setParams[B]),V)),new n(t,r,w,{params:V,headers:k,context:j,reportProgress:T,responseType:i,withCredentials:b,transferCache:p,keepalive:o,cache:a,priority:s,timeout:_,mode:c,redirect:l,credentials:u,referrer:h,integrity:f})}},Ga=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Ga||{}),Ol=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new xs,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},Lm=class n extends Ol{constructor(e={}){super(e)}type=Ga.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},hh=class n extends Ol{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ga.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},Rl=class extends Ol{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},BH=200,$H=204;function tC(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var jm=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Pl)o=t;else{let c;i.headers instanceof xs?c=i.headers:c=new xs(i.headers);let l;i.params&&(i.params instanceof Co?l=i.params:l=new Co({fromObject:i.params})),o=new Pl(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let s=q(o).pipe(yi(c=>this.handler.handle(c)));if(t instanceof Pl||i.observe==="events")return s;let a=s.pipe(Xt(c=>c instanceof hh));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Y(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new J(2806,!1);return c.body}));case"blob":return a.pipe(Y(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new J(2807,!1);return c.body}));case"text":return a.pipe(Y(c=>{if(c.body!==null&&typeof c.body!="string")throw new J(2808,!1);return c.body}));case"json":default:return a.pipe(Y(c=>c.body))}case"response":return a;default:throw new J(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Co().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,tC(i,r))}post(t,r,i={}){return this.request("POST",t,tC(i,r))}put(t,r,i={}){return this.request("PUT",t,tC(i,r))}static \u0275fac=function(r){return new(r||n)(ce(kl))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();var HH=new te("");function zk(n,e){return e(n)}function zH(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function WH(n,e,t){return(r,i)=>Tt(t,()=>e(r,o=>n(o,i)))}var Wk=new te(""),rC=new te(""),qk=new te(""),iC=new te("",{providedIn:"root",factory:()=>!0});function qH(){let n=null;return(e,t)=>{n===null&&(n=(L(Wk,{optional:!0})??[]).reduceRight(zH,zk));let r=L(mo);if(L(iC)){let o=r.add();return n(e,t).pipe(as(o))}else return n(e,t)}}var Vm=(()=>{class n extends kl{backend;injector;chain=null;pendingTasks=L(mo);contributeToStability=L(iC);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(rC),...this.injector.get(qk,[])]));this.chain=r.reduceRight((i,o)=>WH(i,o,this.injector),zk)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(as(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(ce(dh),ce(wt))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();var GH=/^\)\]\}',?\n/,KH=RegExp(`^${Bk}:`,"m");function YH(n){return"responseURL"in n&&n.responseURL?n.responseURL:KH.test(n.getAllResponseHeaders())?n.getResponseHeader(Bk):null}var nC=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new J(-2800,!1);let r=this.xhrFactory;return q(null).pipe(Ce(()=>new ue(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((b,T)=>s.setRequestHeader(b,T.join(","))),t.headers.has(jk)||s.setRequestHeader(jk,UH),!t.headers.has(Vk)){let b=t.detectContentTypeHeader();b!==null&&s.setRequestHeader(Vk,b)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let b=t.responseType.toLowerCase();s.responseType=b!=="json"?b:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let b=s.statusText||"OK",T=new xs(s.getAllResponseHeaders()),k=YH(s)||t.url;return c=new Lm({headers:T,status:s.status,statusText:b,url:k}),c},u=()=>{let{headers:b,status:T,statusText:k,url:V}=l(),j=null;T!==$H&&(j=typeof s.response>"u"?s.responseText:s.response),T===0&&(T=j?BH:0);let U=T>=200&&T<300;if(t.responseType==="json"&&typeof j=="string"){let B=j;j=j.replace(GH,"");try{j=j!==""?JSON.parse(j):null}catch(M){j=B,U&&(U=!1,j={error:M,text:j})}}U?(o.next(new hh({body:j,headers:b,status:T,statusText:k,url:V||void 0})),o.complete()):o.error(new Rl({error:j,headers:b,status:T,statusText:k,url:V||void 0}))},h=b=>{let{url:T}=l(),k=new Rl({error:b,status:s.status||0,statusText:s.statusText||"Unknown Error",url:T||void 0});o.error(k)},f=h;t.timeout&&(f=b=>{let{url:T}=l(),k=new Rl({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:T||void 0});o.error(k)});let p=!1,_=b=>{p||(o.next(l()),p=!0);let T={type:Ga.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(T.total=b.total),t.responseType==="text"&&s.responseText&&(T.partialText=s.responseText),o.next(T)},w=b=>{let T={type:Ga.UploadProgress,loaded:b.loaded};b.lengthComputable&&(T.total=b.total),o.next(T)};return s.addEventListener("load",u),s.addEventListener("error",h),s.addEventListener("timeout",f),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",_),a!==null&&s.upload&&s.upload.addEventListener("progress",w)),s.send(a),o.next({type:Ga.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",u),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",_),a!==null&&s.upload&&s.upload.removeEventListener("progress",w)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(ce(qa))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Gk=new te(""),QH="XSRF-TOKEN",XH=new te("",{providedIn:"root",factory:()=>QH}),JH="X-XSRF-TOKEN",ZH=new te("",{providedIn:"root",factory:()=>JH}),fh=class{},ez=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=sh(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(ce(St),ce(XH))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),tz=/^(?:https?:)?\/\//i;function nz(n,e){if(!L(Gk)||n.method==="GET"||n.method==="HEAD"||tz.test(n.url))return e(n);let t=L(fh).getToken(),r=L(ZH);return t!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,t)})),e(n)}var oC=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})(oC||{});function rz(n,e){return{\u0275kind:n,\u0275providers:e}}function Kk(...n){let e=[jm,nC,Vm,{provide:kl,useExisting:Vm},{provide:dh,useFactory:()=>L(HH,{optional:!0})??L(nC)},{provide:rC,useValue:nz,multi:!0},{provide:Gk,useValue:!0},{provide:fh,useClass:ez}];for(let t of n)e.push(...t.\u0275providers);return yr(e)}var Uk=new te("");function Yk(){return rz(oC.LegacyInterceptors,[{provide:Uk,useFactory:qH},{provide:rC,useExisting:Uk,multi:!0}])}var ph=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=Xn({providers:[Kk(Yk())]})}return n})();var Qk=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ce(St))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _e="primary",Th=Symbol("RouteTitle"),uC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Qa(n){return new uC(n)}function iO(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function sz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mi(n[t],e[t]))return!1;return!0}function Mi(n,e){let t=n?dC(n):void 0,r=e?dC(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!oO(n[i],e[i]))return!1;return!0}function dC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function oO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function sO(n){return n.length>0?n[n.length-1]:null}function Io(n){return tb(n)?n:_o(n)?le(Promise.resolve(n)):q(n)}var az={exact:cO,subset:lO},aO={exact:cz,subset:lz,ignored:()=>!0};function Xk(n,e,t){return az[t.paths](n.root,e.root,t.matrixParams)&&aO[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function cz(n,e){return Mi(n,e)}function cO(n,e,t){if(!Ka(n.segments,e.segments)||!$m(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!cO(n.children[r],e.children[r],t))return!1;return!0}function lz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>oO(n[t],e[t]))}function lO(n,e,t){return uO(n,e,e.segments,t)}function uO(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ka(i,t)||e.hasChildren()||!$m(i,t,r))}else if(n.segments.length===t.length){if(!Ka(n.segments,t)||!$m(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!lO(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ka(n.segments,i)||!$m(n.segments,i,r)||!n.children[_e]?!1:uO(n.children[_e],e,o,r)}}function $m(n,e,t){return e.every((r,i)=>aO[t](n[i].parameters,r.parameters))}var Ai=class{root;queryParams;fragment;_queryParamMap;constructor(e=new He([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qa(this.queryParams),this._queryParamMap}toString(){return hz.serialize(this)}},He=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hm(this)}},Ds=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Qa(this.parameters),this._parameterMap}toString(){return hO(this)}};function uz(n,e){return Ka(n,e)&&n.every((t,r)=>Mi(t.parameters,e[r].parameters))}function Ka(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function dz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===_e&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==_e&&(t=t.concat(e(i,r)))}),t}var Xa=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>new Ts,providedIn:"root"})}return n})(),Ts=class{parse(e){let t=new fC(e);return new Ai(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${gh(e.root,!0)}`,r=gz(e.queryParams),i=typeof e.fragment=="string"?`#${fz(e.fragment)}`:"";return`${t}${r}${i}`}},hz=new Ts;function Hm(n){return n.segments.map(e=>hO(e)).join("/")}function gh(n,e){if(!n.hasChildren())return Hm(n);if(e){let t=n.children[_e]?gh(n.children[_e],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==_e&&r.push(`${i}:${gh(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=dz(n,(r,i)=>i===_e?[gh(n.children[_e],!1)]:[`${i}:${gh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[_e]!=null?`${Hm(n)}/${t[0]}`:`${Hm(n)}/(${t.join("//")})`}}function dO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Um(n){return dO(n).replace(/%3B/gi,";")}function fz(n){return encodeURI(n)}function hC(n){return dO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zm(n){return decodeURIComponent(n)}function Jk(n){return zm(n.replace(/\+/g,"%20"))}function hO(n){return`${hC(n.path)}${pz(n.parameters)}`}function pz(n){return Object.entries(n).map(([e,t])=>`;${hC(e)}=${hC(t)}`).join("")}function gz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Um(t)}=${Um(i)}`).join("&"):`${Um(t)}=${Um(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var mz=/^[^\/()?;#]+/;function sC(n){let e=n.match(mz);return e?e[0]:""}var yz=/^[^\/()?;=#]+/;function vz(n){let e=n.match(yz);return e?e[0]:""}var _z=/^[^=?&#]+/;function bz(n){let e=n.match(_z);return e?e[0]:""}var wz=/^[^&#]+/;function Ez(n){let e=n.match(wz);return e?e[0]:""}var fC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new He([],{}):new He([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[_e]=new He(e,t)),r}parseSegment(){let e=sC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new Ds(zm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=vz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=sC(this.remaining);i&&(r=i,this.capture(r))}e[zm(t)]=zm(r)}parseQueryParam(e){let t=bz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Ez(this.remaining);s&&(r=s,this.capture(r))}let i=Jk(t),o=Jk(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=sC(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=_e);let s=this.parseChildren();t[o??_e]=Object.keys(s).length===1&&s[_e]?s[_e]:new He([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function fO(n){return n.segments.length>0?new He([],{[_e]:n}):n}function pO(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=pO(i);if(r===_e&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new He(n.segments,e);return Cz(t)}function Cz(n){if(n.numberOfChildren===1&&n.children[_e]){let e=n.children[_e];return new He(n.segments.concat(e.segments),e.children)}return n}function Ss(n){return n instanceof Ai}function gO(n,e,t=null,r=null){let i=mO(n);return yO(i,e,t,r)}function mO(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new He(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=fO(r);return e??i}function yO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return aC(i,i,i,t,r);let o=Iz(e);if(o.toRoot())return aC(i,i,new He([],{}),t,r);let s=xz(o,i,n),a=s.processChildren?yh(s.segmentGroup,s.index,o.commands):_O(s.segmentGroup,s.index,o.commands);return aC(i,s.segmentGroup,a,t,r)}function Wm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function _h(n){return typeof n=="object"&&n!=null&&n.outlets}function aC(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=vO(n,e,t);let a=fO(pO(s));return new Ai(a,o,i)}function vO(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=vO(o,e,t)}),new He(n.segments,r)}var qm=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wm(r[0]))throw new J(4003,!1);let i=r.find(_h);if(i&&i!==sO(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Iz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new qm(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new qm(t,e,r)}var Ll=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function xz(n,e,t){if(n.isAbsolute)return new Ll(e,!0,0);if(!t)return new Ll(e,!1,NaN);if(t.parent===null)return new Ll(t,!0,0);let r=Wm(n.commands[0])?0:1,i=t.segments.length-1+r;return Dz(t,i,n.numberOfDoubleDots)}function Dz(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new Ll(r,!1,i-o)}function Tz(n){return _h(n[0])?n[0].outlets:{[_e]:n}}function _O(n,e,t){if(n??=new He([],{}),n.segments.length===0&&n.hasChildren())return yh(n,e,t);let r=Sz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new He(n.segments.slice(0,r.pathIndex),{});return o.children[_e]=new He(n.segments.slice(r.pathIndex),n.children),yh(o,0,i)}else return r.match&&i.length===0?new He(n.segments,{}):r.match&&!n.hasChildren()?pC(n,e,t):r.match?yh(n,0,i):pC(n,e,t)}function yh(n,e,t){if(t.length===0)return new He(n.segments,{});{let r=Tz(t),i={};if(Object.keys(r).some(o=>o!==_e)&&n.children[_e]&&n.numberOfChildren===1&&n.children[_e].segments.length===0){let o=yh(n.children[_e],e,t);return new He(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=_O(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new He(n.segments,i)}}function Sz(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(_h(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!eO(c,l,s))return o;r+=2}else{if(!eO(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function pC(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(_h(o)){let c=Mz(o.outlets);return new He(r,c)}if(i===0&&Wm(t[0])){let c=n.segments[e];r.push(new Ds(c.path,Zk(t[0]))),i++;continue}let s=_h(o)?o.outlets[_e]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Wm(a)?(r.push(new Ds(s,Zk(a))),i+=2):(r.push(new Ds(s,{})),i++)}return new He(r,{})}function Mz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=pC(new He([],{}),0,r))}),e}function Zk(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function eO(n,e,t){return n==t.path&&Mi(e,t.parameters)}var Vl="imperative",tn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(tn||{}),Cr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Pi=class extends Cr{type=tn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gn=class extends Cr{urlAfterRedirects;type=tn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(qn||{}),Ul=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Ul||{}),Lr=class extends Cr{reason;code;type=tn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ri=class extends Cr{reason;code;type=tn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ms=class extends Cr{error;target;type=tn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bh=class extends Cr{urlAfterRedirects;state;type=tn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gm=class extends Cr{urlAfterRedirects;state;type=tn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Km=class extends Cr{urlAfterRedirects;state;shouldActivate;type=tn.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ym=class extends Cr{urlAfterRedirects;state;type=tn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qm=class extends Cr{urlAfterRedirects;state;type=tn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xm=class{route;type=tn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jm=class{route;type=tn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zm=class{snapshot;type=tn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ey=class{snapshot;type=tn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ty=class{snapshot;type=tn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ny=class{snapshot;type=tn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bl=class{routerEvent;position;anchor;type=tn.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},wh=class{},$l=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Az(n){return!(n instanceof wh)&&!(n instanceof $l)}function Pz(n,e){return n.providers&&!n._injector&&(n._injector=xl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function oi(n){return n.outlet||_e}function Rz(n,e){let t=n.filter(r=>oi(r)===e);return t.push(...n.filter(r=>oi(r)!==e)),t}function Wl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ry=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Wl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ja(this.rootInjector)}},Ja=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ry(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ce(wt))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iy=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=gC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=gC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=mC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return mC(e,this._root).map(t=>t.value)}};function gC(n,e){if(n===e.value)return e;for(let t of e.children){let r=gC(n,t);if(r)return r}return null}function mC(n,e){if(n===e.value)return[e];for(let t of e.children){let r=mC(n,t);if(r.length)return r.unshift(e),r}return[]}var Er=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Fl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Eh=class extends iy{snapshot;constructor(e,t){super(e),this.snapshot=t,IC(this,e)}toString(){return this.snapshot.toString()}};function bO(n){let e=kz(n),t=new ft([new Ds("",{})]),r=new ft({}),i=new ft({}),o=new ft({}),s=new ft(""),a=new Vr(t,r,o,s,i,_e,n,e.root);return a.snapshot=e.root,new Eh(new Er(a,[]),e)}function kz(n){let e={},t={},r={},o=new Ya([],e,r,"",t,_e,n,null,{});return new Ch("",new Er(o,[]))}var Vr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Y(l=>l[Th]))??q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>Qa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>Qa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function oy(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&EO(i)&&(r.resolve[Th]=i.title),r}var Ya=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Th]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ch=class extends iy{url;constructor(e,t){super(t),this.url=e,IC(this,t)}toString(){return wO(this._root)}};function IC(n,e){e.value._routerState=n,e.children.forEach(t=>IC(n,t))}function wO(n){let e=n.children.length>0?` { ${n.children.map(wO).join(", ")} } `:"";return`${n.value}${e}`}function cC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Mi(e.params,t.params)||n.paramsSubject.next(t.params),sz(e.url,t.url)||n.urlSubject.next(t.url),Mi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function yC(n,e){let t=Mi(n.params,e.params)&&uz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||yC(n.parent,e.parent))}function EO(n){return typeof n.title=="string"||n.title===null}var CO=new te(""),Sh=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=_e;activateEvents=new gt;deactivateEvents=new gt;attachEvents=new gt;detachEvents=new gt;routerOutletData=JR();parentContexts=L(Ja);location=L(vo);changeDetector=L(Ti);inputBinder=L(Mh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new vC(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[kr]})}return n})(),vC=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Vr?this.route:e===Ja?this.childContexts:e===CO?this.outletData:this.parent.get(e,t)}},Mh=new te(""),xC=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=bd([r.queryParams,r.params,r.data]).pipe(Ce(([o,s,a],c)=>(a=H(H(H({},o),s),a),c===0?q(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=ek(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),DC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=$e({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Q(0,"router-outlet")},dependencies:[Sh],encapsulation:2})}return n})();function TC(n){let e=n.children&&n.children.map(TC),t=e?oe(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==_e&&(t.component=DC),t}function Oz(n,e,t){let r=Ih(n,e._root,t?t._root:void 0);return new Eh(r,e)}function Ih(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Nz(n,e,t);return new Er(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ih(n,a)),s}}let r=Fz(e.value),i=e.children.map(o=>Ih(n,o));return new Er(r,i)}}function Nz(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ih(n,r,i);return Ih(n,r)})}function Fz(n){return new Vr(new ft(n.url),new ft(n.params),new ft(n.queryParams),new ft(n.fragment),new ft(n.data),n.outlet,n.component,n)}var Hl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},IO="ngNavigationCancelingError";function sy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ss(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=xO(!1,qn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function xO(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[IO]=!0,t.cancellationCode=e,t}function Lz(n){return DO(n)&&Ss(n.url)}function DO(n){return!!n&&n[IO]}var Vz=(n,e,t,r)=>Y(i=>(new _C(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),_C=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),cC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Fl(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fl(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fl(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Fl(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ny(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ey(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(cC(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),cC(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ay=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},jl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function jz(n,e,t){let r=n._root,i=e?e._root:null;return mh(r,i,t,[r.value])}function Uz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ql(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!vb(n)?n:e.get(n):r}function mh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fl(e);return n.children.forEach(s=>{Bz(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>vh(a,t.getContext(s),i)),i}function Bz(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=$z(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ay(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?mh(n,e,a?a.children:null,r,i):mh(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new jl(a.outlet.component,s))}else s&&vh(e,a,i),i.canActivateChecks.push(new ay(r)),o.component?mh(n,null,a?a.children:null,r,i):mh(n,null,t,r,i);return i}function $z(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ka(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ka(n.url,e.url)||!Mi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yC(n,e)||!Mi(n.queryParams,e.queryParams);case"paramsChange":default:return!yC(n,e)}}function vh(n,e,t){let r=Fl(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?vh(s,e.children.getContext(o),t):vh(s,null,t):vh(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new jl(e.outlet.component,i)):t.canDeactivateChecks.push(new jl(null,i)):t.canDeactivateChecks.push(new jl(null,i))}function Ah(n){return typeof n=="function"}function Hz(n){return typeof n=="boolean"}function zz(n){return n&&Ah(n.canLoad)}function Wz(n){return n&&Ah(n.canActivate)}function qz(n){return n&&Ah(n.canActivateChild)}function Gz(n){return n&&Ah(n.canDeactivate)}function Kz(n){return n&&Ah(n.canMatch)}function TO(n){return n instanceof gr||n?.name==="EmptyError"}var Bm=Symbol("INITIAL_VALUE");function zl(){return Ce(n=>bd(n.map(e=>e.pipe(Vn(1),tg(Bm)))).pipe(Y(e=>{for(let t of e)if(t!==!0){if(t===Bm)return Bm;if(t===!1||Yz(t))return t}return!0}),Xt(e=>e!==Bm),Vn(1)))}function Yz(n){return Ss(n)||n instanceof Hl}function Qz(n,e){return Lt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?q(oe(H({},t),{guardsResult:!0})):Xz(s,r,i,n).pipe(Lt(a=>a&&Hz(a)?Jz(r,o,n,e):q(a)),Y(a=>oe(H({},t),{guardsResult:a})))})}function Xz(n,e,t,r){return le(n).pipe(Lt(i=>r9(i.component,i.route,t,e,r)),ao(i=>i!==!0,!0))}function Jz(n,e,t,r){return le(e).pipe(yi(i=>rl(e9(i.route.parent,r),Zz(i.route,r),n9(n,i.path,t),t9(n,i.route,t))),ao(i=>i!==!0,!0))}function Zz(n,e){return n!==null&&e&&e(new ty(n)),q(!0)}function e9(n,e){return n!==null&&e&&e(new Zm(n)),q(!0)}function t9(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return q(!0);let i=r.map(o=>wd(()=>{let s=Wl(e)??t,a=ql(o,s),c=Wz(a)?a.canActivate(e,n):Tt(s,()=>a(e,n));return Io(c).pipe(ao())}));return q(i).pipe(zl())}function n9(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Uz(s)).filter(s=>s!==null).map(s=>wd(()=>{let a=s.guards.map(c=>{let l=Wl(s.node)??t,u=ql(c,l),h=qz(u)?u.canActivateChild(r,n):Tt(l,()=>u(r,n));return Io(h).pipe(ao())});return q(a).pipe(zl())}));return q(o).pipe(zl())}function r9(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return q(!0);let s=o.map(a=>{let c=Wl(e)??i,l=ql(a,c),u=Gz(l)?l.canDeactivate(n,e,t,r):Tt(c,()=>l(n,e,t,r));return Io(u).pipe(ao())});return q(s).pipe(zl())}function i9(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return q(!0);let o=i.map(s=>{let a=ql(s,n),c=zz(a)?a.canLoad(e,t):Tt(n,()=>a(e,t));return Io(c)});return q(o).pipe(zl(),SO(r))}function SO(n){return kp(an(e=>{if(typeof e!="boolean")throw sy(n,e)}),Y(e=>e===!0))}function o9(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return q(!0);let o=i.map(s=>{let a=ql(s,n),c=Kz(a)?a.canMatch(e,t):Tt(n,()=>a(e,t));return Io(c)});return q(o).pipe(zl(),SO(r))}var xh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Dh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Nl(n){return Kr(new xh(n))}function s9(n){return Kr(new J(4e3,!1))}function a9(n){return Kr(xO(!1,qn.GuardRejected))}var bC=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return q(r);if(i.numberOfChildren>1||!i.children[_e])return s9(`${e.redirectTo}`);i=i.children[_e]}}applyRedirectCommands(e,t,r,i,o){return c9(t,i,o).pipe(Y(s=>{if(s instanceof Ai)throw new Dh(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Dh(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ai(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new He(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function c9(n,e,t){if(typeof n=="string")return q(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:h}=e;return Io(Tt(t,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:h})))}var wC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function l9(n,e,t,r,i){let o=MO(n,e,t);return o.matched?(r=Pz(e,r),o9(r,e,t,i).pipe(Y(s=>s===!0?o:H({},wC)))):q(o)}function MO(n,e,t){if(e.path==="**")return u9(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},wC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||iO)(t,n,e);if(!i)return H({},wC);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?H(H({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function u9(n){return{matched:!0,parameters:n.length>0?sO(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function tO(n,e,t,r){return t.length>0&&f9(n,t,r)?{segmentGroup:new He(e,h9(r,new He(t,n.children))),slicedSegments:[]}:t.length===0&&p9(n,t,r)?{segmentGroup:new He(n.segments,d9(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new He(n.segments,n.children),slicedSegments:t}}function d9(n,e,t,r){let i={};for(let o of t)if(ly(n,e,o)&&!r[oi(o)]){let s=new He([],{});i[oi(o)]=s}return H(H({},r),i)}function h9(n,e){let t={};t[_e]=e;for(let r of n)if(r.path===""&&oi(r)!==_e){let i=new He([],{});t[oi(r)]=i}return t}function f9(n,e,t){return t.some(r=>ly(n,e,r)&&oi(r)!==_e)}function p9(n,e,t){return t.some(r=>ly(n,e,r))}function ly(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function g9(n,e,t){return e.length===0&&!n.children[t]}var EC=class{};function m9(n,e,t,r,i,o,s="emptyOnly"){return new CC(n,e,t,r,i,s,o).recognize()}var y9=31,CC=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new bC(this.urlSerializer,this.urlTree)}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=tO(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(({children:t,rootSnapshot:r})=>{let i=new Er(r,t),o=new Ch("",i),s=gO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ya([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),_e,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,_e,t).pipe(Y(r=>({children:r,rootSnapshot:t})),Ye(r=>{if(r instanceof Dh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof xh?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof Er?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return le(o).pipe(yi(s=>{let a=r.children[s],c=Rz(t,s);return this.processSegmentGroup(e,c,a,s,i)}),eg((s,a)=>(s.push(...a),s)),ss(null),rb(),Lt(s=>{if(s===null)return Nl(r);let a=AO(s);return v9(a),q(a)}))}processSegment(e,t,r,i,o,s,a){return le(t).pipe(yi(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Ye(l=>{if(l instanceof xh)return q(null);throw l}))),ao(c=>!!c),Ye(c=>{if(TO(c))return g9(r,i,o)?q(new EC):Nl(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return oi(r)!==s&&(s===_e||!ly(i,o,r))?Nl(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Nl(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:h,remainingSegments:f}=MO(t,i,o);if(!c)return Nl(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>y9&&(this.allowRedirects=!1));let p=new Ya(o,l,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,nO(i),oi(i),i.component??i._loadedComponent??null,i,rO(i)),_=oy(p,a,this.paramsInheritanceStrategy);return p.params=Object.freeze(_.params),p.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h,p,e).pipe(Ce(b=>this.applyRedirects.lineralizeSegments(i,b)),Lt(b=>this.processSegment(e,r,t,b.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=l9(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ce(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ce(({routes:l})=>{let u=r._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:p}=c,_=new Ya(f,h,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,nO(r),oi(r),r.component??r._loadedComponent??null,r,rO(r)),w=oy(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(w.params),_.data=Object.freeze(w.data);let{segmentGroup:b,slicedSegments:T}=tO(t,f,p,l);if(T.length===0&&b.hasChildren())return this.processChildren(u,l,b,_).pipe(Y(V=>new Er(_,V)));if(l.length===0&&T.length===0)return q(new Er(_,[]));let k=oi(r)===o;return this.processSegment(u,l,b,T,k?_e:o,!0,_).pipe(Y(V=>new Er(_,V instanceof Er?[V]:[])))}))):Nl(t)))}getChildConfig(e,t,r){return t.children?q({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?q({routes:t._loadedRoutes,injector:t._loadedInjector}):i9(e,t,r,this.urlSerializer).pipe(Lt(i=>i?this.configLoader.loadChildren(e,t).pipe(an(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):a9(t))):q({routes:[],injector:e})}};function v9(n){n.sort((e,t)=>e.value.outlet===_e?-1:t.value.outlet===_e?1:e.value.outlet.localeCompare(t.value.outlet))}function _9(n){let e=n.value.routeConfig;return e&&e.path===""}function AO(n){let e=[],t=new Set;for(let r of n){if(!_9(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=AO(r.children);e.push(new Er(r.value,i))}return e.filter(r=>!t.has(r))}function nO(n){return n.data||{}}function rO(n){return n.resolve||{}}function b9(n,e,t,r,i,o){return Lt(s=>m9(n,e,t,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:c})=>oe(H({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function w9(n,e){return Lt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return q(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of PO(c))s.add(l);let a=0;return le(s).pipe(yi(c=>o.has(c)?E9(c,r,n,e):(c.data=oy(c,c.parent,n).resolve,q(void 0))),an(()=>a++),il(1),Lt(c=>a===s.size?q(t):Yn))})}function PO(n){let e=n.children.map(t=>PO(t)).flat();return[n,...e]}function E9(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!EO(i)&&(o[Th]=i.title),wd(()=>(n.data=oy(n,n.parent,t).resolve,C9(o,n,e,r).pipe(Y(s=>(n._resolvedData=s,n.data=H(H({},n.data),s),null)))))}function C9(n,e,t,r){let i=dC(n);if(i.length===0)return q({});let o={};return le(i).pipe(Lt(s=>I9(n[s],e,t,r).pipe(ao(),an(a=>{if(a instanceof Hl)throw sy(new Ts,a);o[s]=a}))),il(1),Y(()=>o),Ye(s=>TO(s)?Yn:Kr(s)))}function I9(n,e,t,r){let i=Wl(e)??r,o=ql(n,i),s=o.resolve?o.resolve(e,t):Tt(i,()=>o(e,t));return Io(s)}function lC(n){return Ce(e=>{let t=n(e);return t?le(t).pipe(Y(()=>e)):q(e)})}var SC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===_e);return r}getResolvedTitleForRoute(t){return t.data[Th]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>L(RO),providedIn:"root"})}return n})(),RO=(()=>{class n extends SC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ce(Qk))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),As=new te("",{providedIn:"root",factory:()=>({})}),Za=new te(""),uy=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=L(IE);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return q(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Io(Tt(t,()=>r.loadComponent())).pipe(Y(OO),Ce(NO),an(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),as(()=>{this.componentLoaders.delete(r)})),o=new Jc(i,()=>new bt).pipe(Xc());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=kO(r,this.compiler,t,this.onLoadEndListener).pipe(as(()=>{this.childrenLoaders.delete(r)})),s=new Jc(o,()=>new bt).pipe(Xc());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kO(n,e,t,r){return Io(Tt(t,()=>n.loadChildren())).pipe(Y(OO),Ce(NO),Lt(i=>i instanceof dm||Array.isArray(i)?q(i):le(e.compileModuleAsync(i))),Y(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Za,[],{optional:!0,self:!0}).flat()),{routes:s.map(TC),injector:o}}))}function x9(n){return n&&typeof n=="object"&&"default"in n}function OO(n){return x9(n)?n.default:n}function NO(n){return q(n)}var dy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>L(D9),providedIn:"root"})}return n})(),D9=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MC=new te(""),AC=new te("");function FO(n,e,t){let r=n.get(AC),i=n.get(St);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),T9(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&Tt(n,()=>c({transition:a,from:e,to:t})),s}function T9(n){return new Promise(e=>{qd({read:()=>setTimeout(e)},{injector:n})})}var PC=new te(""),hy=(()=>{class n{currentNavigation=Hn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new bt;transitionAbortWithErrorSubject=new bt;configLoader=L(uy);environmentInjector=L(wt);destroyRef=L(Rr);urlSerializer=L(Xa);rootContexts=L(Ja);location=L(Is);inputBindingEnabled=L(Mh,{optional:!0})!==null;titleStrategy=L(SC);options=L(As,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=L(dy);createViewTransition=L(MC,{optional:!0});navigationErrorHandler=L(PC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>q(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Xm(i)),r=i=>this.events.next(new Jm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Ht(()=>{this.transitions?.next(oe(H({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new ft(null),this.transitions.pipe(Xt(r=>r!==null),Ce(r=>{let i=!1;return q(r).pipe(Ce(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",qn.SupersededByNewNavigation),Yn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?oe(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Ri(o.id,this.urlSerializer.serialize(o.rawUrl),"",Ul.IgnoredSameUrlNavigation)),o.resolve(!1),Yn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return q(o).pipe(Ce(c=>(this.events.next(new Pi(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Yn:Promise.resolve(c))),b9(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),an(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new bh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:h,extras:f}=o,p=new Pi(c,this.urlSerializer.serialize(l),u,h);this.events.next(p);let _=bO(this.rootComponentType).snapshot;return this.currentTransition=r=oe(H({},o),{targetSnapshot:_,urlAfterRedirects:l,extras:oe(H({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(w=>(w.finalUrl=l,w)),q(r)}else return this.events.next(new Ri(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Ul.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Yn}),an(o=>{let s=new Gm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Y(o=>(this.currentTransition=r=oe(H({},o),{guards:jz(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Qz(this.environmentInjector,o=>this.events.next(o)),an(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw sy(this.urlSerializer,o.guardsResult);let s=new Km(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Xt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",qn.GuardRejected),!1)),lC(o=>{if(o.guards.canActivateChecks.length!==0)return q(o).pipe(an(s=>{let a=new Ym(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ce(s=>{let a=!1;return q(s).pipe(w9(this.paramsInheritanceStrategy,this.environmentInjector),an({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",qn.NoDataFromResolver)}}))}),an(s=>{let a=new Qm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),lC(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Wl(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(an(u=>{a.component=u}),Y(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return bd(s(o.targetSnapshot.root)).pipe(ss(null),Vn(1))}),lC(()=>this.afterPreactivation()),Ce(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?le(a).pipe(Y(()=>r)):q(r)}),Y(o=>{let s=Oz(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=oe(H({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),an(()=>{this.events.next(new wh)}),Vz(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Vn(1),ol(new ue(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Xt(()=>!i&&!r.targetRouterState),an(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",qn.Aborted)}))),an({next:o=>{i=!0,this.lastSuccessfulNavigation=Ht(this.currentNavigation),this.events.next(new Gn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),ol(this.transitionAbortWithErrorSubject.pipe(an(o=>{throw o}))),as(()=>{i||this.cancelNavigationTransition(r,"",qn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ye(o=>{if(this.destroyed)return r.resolve(!1),Yn;if(i=!0,DO(o))this.events.next(new Lr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Lz(o)?this.events.next(new $l(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ms(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Tt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Hl){let{message:c,cancellationCode:l}=sy(this.urlSerializer,a);this.events.next(new Lr(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new $l(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Yn}))}))}cancelNavigationTransition(t,r,i){let o=new Lr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Ht(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function S9(n){return n!==Vl}var LO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>L(M9),providedIn:"root"})}return n})(),cy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},M9=(()=>{class n extends cy{static \u0275fac=(()=>{let t;return function(i){return(t||(t=xi(n)))(i||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VO=(()=>{class n{urlSerializer=L(Xa);options=L(As,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=L(Is);urlHandlingStrategy=L(dy);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ai;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Ai?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=bO(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>L(A9),providedIn:"root"})}return n})(),A9=(()=>{class n extends VO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Pi?this.updateStateMemento():t instanceof Ri?this.commitTransition(r):t instanceof bh?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof wh?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Lr&&t.code!==qn.SupersededByNewNavigation&&t.code!==qn.Redirect?this.restoreHistory(r):t instanceof Ms?this.restoreHistory(r,!0):t instanceof Gn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=H(H({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=H(H({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xi(n)))(i||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fy(n,e){n.events.pipe(Xt(t=>t instanceof Gn||t instanceof Lr||t instanceof Ms||t instanceof Ri),Y(t=>t instanceof Gn||t instanceof Ri?0:(t instanceof Lr?t.code===qn.Redirect||t.code===qn.SupersededByNewNavigation:!1)?2:1),Xt(t=>t!==2),Vn(1)).subscribe(()=>{e()})}var P9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},R9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ze=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=L(mE);stateManager=L(VO);options=L(As,{optional:!0})||{};pendingTasks=L(Ei);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=L(hy);urlSerializer=L(Xa);location=L(Is);urlHandlingStrategy=L(dy);injector=L(wt);_events=new bt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=L(LO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=L(Za,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!L(Mh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new xt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Ht(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Lr&&r.code!==qn.Redirect&&r.code!==qn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Gn)this.navigated=!0;else if(r instanceof $l){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||S9(i.source)},s);this.scheduleNavigation(a,Vl,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Az(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Vl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=H({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get($n)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ht(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(TC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let f=i?i.snapshot:this.routerState.snapshot.root;h=mO(f)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return yO(h,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ss(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Vl,null,r)}navigate(t,r={skipLocationChange:!1}){return k9(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(ho(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=H({},P9):r===!1?i=H({},R9):i=r,Ss(t))return Xk(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Xk(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((h,f)=>{a=h,c=f});let u=this.pendingTasks.add();return fy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function k9(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new J(4008,!1)}var At=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Hn(null);get href(){return Ht(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new bt;applicationErrorHandler=L($n);options=L(As,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(L(new gm("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Gn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ss(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ss(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(X(ze),X(Vr),Wd("tabindex"),X(Or),X(Mn),X(ri))};static \u0275dir=rt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ws("href",i.reactiveHref(),qw)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ha],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ha],replaceUrl:[2,"replaceUrl","replaceUrl",Ha],routerLink:"routerLink"},features:[kr]})}return n})(),kC=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new gt;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Gn&&this.update()})}ngAfterContentInit(){q(this.links.changes,q(null)).pipe(os()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=le(t).pipe(os()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=O9(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(X(ze),X(Mn),X(Or),X(Ti),X(At,8))};static \u0275dir=rt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&bE(o,At,5),r&2){let s;Es(s=Cs())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[kr]})}return n})();function O9(n){return!!n.paths}var Ph=class{};var jO=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Xt(t=>t instanceof Gn),yi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=xl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return le(i).pipe(os())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=q(null);let o=i.pipe(Lt(s=>s===null?q(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return le([o,s]).pipe(os())}else return o})}static \u0275fac=function(r){return new(r||n)(ce(ze),ce(wt),ce(Ph),ce(uy))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UO=new te(""),N9=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Vl;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Pi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Gn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ri&&t.code===Ul.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Bl))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>S(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Bl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){uE()};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function py(n,...e){return yr([{provide:Za,multi:!0,useValue:n},[],{provide:Vr,useFactory:BO,deps:[ze]},{provide:Kd,multi:!0,useFactory:$O},e.map(t=>t.\u0275providers)])}function BO(n){return n.routerState.root}function Rh(n,e){return{\u0275kind:n,\u0275providers:e}}function $O(){let n=L(Dt);return e=>{let t=n.get(bo);if(e!==t.components[0])return;let r=n.get(ze),i=n.get(HO);n.get(OC)===1&&r.initialNavigation(),n.get(qO,null,{optional:!0})?.setUpPreloading(),n.get(UO,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var HO=new te("",{factory:()=>new bt}),OC=new te("",{providedIn:"root",factory:()=>1});function zO(){let n=[{provide:$w,useValue:!0},{provide:OC,useValue:0},fm(()=>{let e=L(Dt);return e.get(kE,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(ze),o=e.get(HO);fy(i,()=>{r(!0)}),e.get(hy).afterPreactivation=()=>(r(!0),o.closed?q(void 0):o),i.initialNavigation()}))})];return Rh(2,n)}function WO(){let n=[fm(()=>{L(ze).setUpLocationChangeListener()}),{provide:OC,useValue:2}];return Rh(3,n)}var qO=new te("");function GO(n){return Rh(0,[{provide:qO,useExisting:jO},{provide:Ph,useExisting:n}])}function KO(){return Rh(8,[xC,{provide:Mh,useExisting:xC}])}function YO(n){Il("NgRouterViewTransitions");let e=[{provide:MC,useValue:FO},{provide:AC,useValue:H({skipNextTransition:!!n?.skipInitialTransition},n)}];return Rh(9,e)}var QO=[Is,{provide:Xa,useClass:Ts},ze,Ja,{provide:Vr,useFactory:BO,deps:[ze]},uy,[]],Vt=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[QO,[],{provide:Za,multi:!0,useValue:t},[],r?.errorHandler?{provide:PC,useValue:r.errorHandler}:[],{provide:As,useValue:r||{}},r?.useHash?L9():V9(),F9(),r?.preloadingStrategy?GO(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?j9(r):[],r?.bindToComponentInputs?KO().\u0275providers:[],r?.enableViewTransitions?YO().\u0275providers:[],U9()]}}static forChild(t){return{ngModule:n,providers:[{provide:Za,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=Xn({})}return n})();function F9(){return{provide:UO,useFactory:()=>{let n=L(Dk),e=L(Be),t=L(As),r=L(hy),i=L(Xa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new N9(i,r,n,e,t)}}}function L9(){return{provide:ri,useClass:$E}}function V9(){return{provide:ri,useClass:_m}}function j9(n){return[n.initialNavigation==="disabled"?WO().\u0275providers:[],n.initialNavigation==="enabledBlocking"?zO().\u0275providers:[]]}var RC=new te("");function U9(){return[{provide:RC,useFactory:$O},{provide:Kd,multi:!0,useExisting:RC}]}var XO=()=>{};var eN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},B9=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},gy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=o>>2,h=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,p=l&63;c||(p=64,s||(f=64)),r.push(t[u],t[h],t[f],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):B9(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let h=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||h==null)throw new FC;let f=o<<2|a>>4;if(r.push(f),l!==64){let p=a<<4&240|l>>2;if(r.push(p),h!==64){let _=l<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},FC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$9=function(n){let e=eN(n);return gy.encodeByteArray(e,!0)},Oh=function(n){return $9(n).replace(/\./g,"")},my=function(n){try{return gy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var H9=()=>VC().__FIREBASE_DEFAULTS__,z9=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},W9=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&my(n[1]);return e&&JSON.parse(e)},yy=()=>{try{return XO()||H9()||z9()||W9()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jC=n=>{var e,t;return(t=(e=yy())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},tN=n=>{let e=jC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},UC=()=>{var n;return(n=yy())===null||n===void 0?void 0:n.config},BC=n=>{var e;return(e=yy())===null||e===void 0?void 0:e[`_${n}`]};var ec=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Rs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function vy(n){return S(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function nN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Oh(JSON.stringify(t)),Oh(JSON.stringify(s)),""].join(".")}var kh={};function q9(){let n={prod:[],emulator:[]};for(let e of Object.keys(kh))kh[e]?n.emulator.push(e):n.prod.push(e);return n}function G9(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var JO=!1;function _y(n,e){if(typeof window>"u"||typeof document>"u"||!Rs(window.location.host)||kh[n]===e||kh[n]||JO)return;kh[n]=e;function t(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=q9().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{JO=!0,s()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){let f=G9(r),p=t("text"),_=document.getElementById(p)||document.createElement("span"),w=t("learnmore"),b=document.getElementById(w)||document.createElement("a"),T=t("preprendIcon"),k=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let V=f.element;a(V),u(b,w);let j=l();c(k,T),V.append(k,_,b,j),document.body.appendChild(V)}o?(_.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function K9(){var n;let e=(n=yy())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oN(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aN(){let n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function cN(){return!K9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nh(){try{return typeof indexedDB=="object"}catch{return!1}}function lN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Y9="FirebaseError",Ir=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Y9,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,si.prototype.create)}},si=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Q9(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ir(i,a,r)}};function Q9(n,e){return n.replace(X9,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var X9=/\{\$([^}]+)}/g;function uN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ai(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(ZO(o)&&ZO(s)){if(!ai(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function ZO(n){return n!==null&&typeof n=="object"}function Fh(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gl(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Kl(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function dN(n,e){let t=new LC(n,e);return t.subscribe.bind(t)}var LC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");J9(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=NC),i.error===void 0&&(i.error=NC),i.complete===void 0&&(i.complete=NC);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function J9(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function NC(){}var Qbe=14400*1e3;function Pt(n){return n&&n._delegate?n._delegate:n}var Kn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var tc="[DEFAULT]";var $C=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ec;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eW(e))try{this.getOrInitializeService({instanceIdentifier:tc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=tc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return S(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=tc){return this.instances.has(e)}getOptions(e=tc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Z9(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=tc){return this.component?this.component.multipleInstances?e:tc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Z9(n){return n===tc?void 0:n}function eW(n){return n.instantiationMode==="EAGER"}var by=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new $C(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var tW=[],Ae=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ae||{}),nW={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},rW=Ae.INFO,iW={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},oW=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=iW[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ki=class{constructor(e){this.name=e,this._logLevel=rW,this._logHandler=oW,this._userLogHandler=null,tW.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}};var sW=(n,e)=>e.some(t=>n instanceof t),hN,fN;function aW(){return hN||(hN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cW(){return fN||(fN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var pN=new WeakMap,zC=new WeakMap,gN=new WeakMap,HC=new WeakMap,qC=new WeakMap;function lW(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Oi(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&pN.set(t,n)}).catch(()=>{}),qC.set(e,n),e}function uW(n){if(zC.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});zC.set(n,e)}var WC={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Oi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mN(n){WC=n(WC)}function dW(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(wy(this),e,...t);return gN.set(r,e.sort?e.sort():[e]),Oi(r)}:cW().includes(n)?function(...e){return n.apply(wy(this),e),Oi(pN.get(this))}:function(...e){return Oi(n.apply(wy(this),e))}}function hW(n){return typeof n=="function"?dW(n):(n instanceof IDBTransaction&&uW(n),sW(n,aW())?new Proxy(n,WC):n)}function Oi(n){if(n instanceof IDBRequest)return lW(n);if(HC.has(n))return HC.get(n);let e=hW(n);return e!==n&&(HC.set(n,e),qC.set(e,n)),e}var wy=n=>qC.get(n);function vN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Oi(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Oi(s.result),c.oldVersion,c.newVersion,Oi(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var fW=["get","getKey","getAll","getAllKeys","count"],pW=["put","add","delete","clear"],GC=new Map;function yN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(GC.get(e))return GC.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=pW.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fW.includes(t)))return;let o=function(s,...a){return S(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return GC.set(e,o),o}mN(n=>oe(H({},n),{get:(e,t,r)=>yN(e,t)||n.get(e,t,r),has:(e,t)=>!!yN(e,t)||n.has(e,t)}));var YC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(gW(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function gW(n){let e=n.getComponent();return e?.type==="VERSION"}var QC="@firebase/app",_N="0.13.2";var xo=new ki("@firebase/app"),mW="@firebase/app-compat",yW="@firebase/analytics-compat",vW="@firebase/analytics",_W="@firebase/app-check-compat",bW="@firebase/app-check",wW="@firebase/auth",EW="@firebase/auth-compat",CW="@firebase/database",IW="@firebase/data-connect",xW="@firebase/database-compat",DW="@firebase/functions",TW="@firebase/functions-compat",SW="@firebase/installations",MW="@firebase/installations-compat",AW="@firebase/messaging",PW="@firebase/messaging-compat",RW="@firebase/performance",kW="@firebase/performance-compat",OW="@firebase/remote-config",NW="@firebase/remote-config-compat",FW="@firebase/storage",LW="@firebase/storage-compat",VW="@firebase/firestore",jW="@firebase/ai",UW="@firebase/firestore-compat",BW="firebase",$W="11.10.0";var XC="[DEFAULT]",HW={[QC]:"fire-core",[mW]:"fire-core-compat",[vW]:"fire-analytics",[yW]:"fire-analytics-compat",[bW]:"fire-app-check",[_W]:"fire-app-check-compat",[wW]:"fire-auth",[EW]:"fire-auth-compat",[CW]:"fire-rtdb",[IW]:"fire-data-connect",[xW]:"fire-rtdb-compat",[DW]:"fire-fn",[TW]:"fire-fn-compat",[SW]:"fire-iid",[MW]:"fire-iid-compat",[AW]:"fire-fcm",[PW]:"fire-fcm-compat",[RW]:"fire-perf",[kW]:"fire-perf-compat",[OW]:"fire-rc",[NW]:"fire-rc-compat",[FW]:"fire-gcs",[LW]:"fire-gcs-compat",[VW]:"fire-fst",[UW]:"fire-fst-compat",[jW]:"fire-vertex","fire-js":"fire-js",[BW]:"fire-js-all"};var Lh=new Map,zW=new Map,JC=new Map;function bN(n,e){try{n.container.addComponent(e)}catch(t){xo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ci(n){let e=n.name;if(JC.has(e))return xo.debug(`There were multiple attempts to register component ${e}.`),!1;JC.set(e,n);for(let t of Lh.values())bN(t,n);for(let t of zW.values())bN(t,n);return!0}function Yl(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function sr(n){return n==null?!1:n.settings!==void 0}var WW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ks=new si("app","Firebase",WW);var ZC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ks.create("app-deleted",{appName:this._name})}};var Os=$W;function nI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:XC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ks.create("bad-app-name",{appName:String(i)});if(t||(t=UC()),!t)throw ks.create("no-options");let o=Lh.get(i);if(o){if(ai(t,o.options)&&ai(r,o.config))return o;throw ks.create("duplicate-app",{appName:i})}let s=new by(i);for(let c of JC.values())s.addComponent(c);let a=new ZC(t,r,s);return Lh.set(i,a),a}function nc(n=XC){let e=Lh.get(n);if(!e&&n===XC&&UC())return nI();if(!e)throw ks.create("no-app",{appName:n});return e}function Ey(){return Array.from(Lh.values())}function Rt(n,e,t){var r;let i=(r=HW[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xo.warn(a.join(" "));return}ci(new Kn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var qW="firebase-heartbeat-database",GW=1,Vh="firebase-heartbeat-store",KC=null;function IN(){return KC||(KC=vN(qW,GW,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vh)}catch(t){console.warn(t)}}}}).catch(n=>{throw ks.create("idb-open",{originalErrorMessage:n.message})})),KC}function KW(n){return S(this,null,function*(){try{let t=(yield IN()).transaction(Vh),r=yield t.objectStore(Vh).get(xN(n));return yield t.done,r}catch(e){if(e instanceof Ir)xo.warn(e.message);else{let t=ks.create("idb-get",{originalErrorMessage:e?.message});xo.warn(t.message)}}})}function wN(n,e){return S(this,null,function*(){try{let r=(yield IN()).transaction(Vh,"readwrite");yield r.objectStore(Vh).put(e,xN(n)),yield r.done}catch(t){if(t instanceof Ir)xo.warn(t.message);else{let r=ks.create("idb-set",{originalErrorMessage:t?.message});xo.warn(r.message)}}})}function xN(n){return`${n.name}!${n.options.appId}`}var YW=1024,QW=30,eI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new tI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=EN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>QW){let s=JW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xo.warn(r)}})}getHeartbeatsHeader(){return S(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=EN(),{heartbeatsToSend:r,unsentEntries:i}=XW(this._heartbeatsCache.heartbeats),o=Oh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return xo.warn(t),""}})}};function EN(){return new Date().toISOString().substring(0,10)}function XW(n,e=YW){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),CN(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),CN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var tI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return Nh()?lN().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield KW(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return wN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return wN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function CN(n){return Oh(JSON.stringify({version:2,heartbeats:n})).length}function JW(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function ZW(n){ci(new Kn("platform-logger",e=>new YC(e),"PRIVATE")),ci(new Kn("heartbeat",e=>new eI(e),"PRIVATE")),Rt(QC,_N,n),Rt(QC,_N,"esm2017"),Rt("fire-js","")}ZW("");var e7="firebase",t7="11.10.0";Rt(e7,t7,"app");function DN(n){n===void 0&&(n=L(Dt));let e=n.get(mo);return t=>new ue(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Ns=new cs("ANGULARFIRE2_VERSION");function jh(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Xl=(n,e)=>{let t=e?[e]:Ey(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ql=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Ql||{}),TN=AE()&&typeof Zone<"u"?Ql.WARN:Ql.SILENT;var Cy=class{zone;delegate;constructor(e,t=Z0){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Fs=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=L(Be);this.outsideAngular=t.runOutsideAngular(()=>new Cy(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Cy(typeof Zone>"u"?void 0:Zone.current,J0))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SN=!1;function n7(n,e){!SN&&(TN>Ql.SILENT||AE())&&(SN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),TN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function r7(n){let e=L(Be,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function rc(n){let e=L(Be,{optional:!0});return e?e.run(()=>n()):n()}var i7=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Tt(t,()=>rc(()=>n.apply(void 0,r)))),Ze=(n,e,t)=>(t||=e?Ql.WARN:Ql.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=L(Fs),s=L(mo),a=L(wt)}catch{return n7(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=rc(()=>s.add())),i[l]=i7(i[l],r,a));let c=r7(()=>n.apply(this,i));return e?c instanceof ue?c.pipe(is(o.outsideAngular),rs(o.insideAngular),DN(a)):c instanceof Promise?rc(()=>{let l=s.add();return new Promise((u,h)=>{c.then(f=>Tt(a,()=>rc(()=>u(f))),f=>Tt(a,()=>rc(()=>h(f)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:rc(()=>c):c instanceof ue?c.pipe(is(o.outsideAngular),rs(o.insideAngular)):rc(()=>c)});var Do=class{constructor(e){return e}},ic=class{constructor(){return Ey()}};function o7(n){return n&&n.length===1?n[0]:new Do(nc())}var rI=new te("angularfire2._apps"),s7={provide:Do,useFactory:o7,deps:[[new _r,rI]]},a7={provide:ic,deps:[[new _r,rI]]};function c7(n){return(e,t)=>{let r=t.get(Ua);Rt("angularfire",Ns.full,"core"),Rt("angularfire",Ns.full,"app"),Rt("angular",mb.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Do(i)}}function MN(n,...e){return yr([s7,a7,{provide:rI,useFactory:c7(n),multi:!0,deps:[Be,Dt,Fs,...e]}])}var AN=Ze(nI,!0);var l7=new Map,u7={activated:!1,tokenObservers:[]},d7={initialized:!1,enabled:!1};function li(n){return l7.get(n)||Object.assign({},u7)}function ON(){return d7}var h7="https://content-firebaseappcheck.googleapis.com/v1";var f7="exchangeDebugToken",PN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Zwe=1440*60*1e3;var sI=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return S(this,null,function*(){this.stop();try{this.pending=new ec,this.pending.promise.catch(t=>{}),yield p7(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ec,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function p7(n){return new Promise(e=>{setTimeout(e,n)})}var g7={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ls=new si("appCheck","AppCheck",g7);function NN(n){if(!li(n).activated)throw Ls.create("use-before-activation",{appName:n.name})}function FN(r,i){return S(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let p=yield s.getHeartbeatsHeader();p&&(o["X-Firebase-Client"]=p)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(p){throw Ls.create("fetch-network-error",{originalErrorMessage:p?.message})}if(c.status!==200)throw Ls.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(p){throw Ls.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Ls.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let h=Number(u[1])*1e3,f=Date.now();return{token:l.token,expireTimeMillis:f+h,issuedAtTimeMillis:f}})}function LN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${h7}/projects/${t}/apps/${r}:${f7}?key=${i}`,body:{debug_token:e}}}var m7="firebase-app-check-database",y7=1,aI="firebase-app-check-store";var Iy=null;function v7(){return Iy||(Iy=new Promise((n,e)=>{try{let t=indexedDB.open(m7,y7);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ls.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(aI,{keyPath:"compositeKey"})}}}catch(t){e(Ls.create("storage-open",{originalErrorMessage:t?.message}))}}),Iy)}function _7(n,e){return b7(w7(n),e)}function b7(n,e){return S(this,null,function*(){let r=(yield v7()).transaction(aI,"readwrite"),o=r.objectStore(aI).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Ls.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function w7(n){return`${n.options.appId}-${n.name}`}var Uh=new ki("@firebase/app-check");function iI(n,e){return Nh()?_7(n,e).catch(t=>{Uh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function VN(){return ON().enabled}function jN(){return S(this,null,function*(){let n=ON();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var E7={error:"UNKNOWN_ERROR"};function C7(n){return gy.encodeString(JSON.stringify(n),!1)}function cI(n,e=!1,t=!1){return S(this,null,function*(){let r=n.app;NN(r);let i=li(r),o=i.token,s;if(o&&!Bh(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Bh(l)?o=l:yield iI(r,void 0))}if(!e&&o&&Bh(o))return{token:o.token};let a=!1;if(VN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=FN(LN(r,yield jN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield iI(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Uh.warn(l.message):t&&Uh.error(l),oI(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield li(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Uh.warn(l.message):t&&Uh.error(l),s=l}let c;return o?s?Bh(o)?c={token:o.token,internalError:s}:c=oI(s):(c={token:o.token},i.token=o,yield iI(r,o)):c=oI(s),a&&T7(r,c),c})}function I7(n){return S(this,null,function*(){let e=n.app;NN(e);let{provider:t}=li(e);if(VN()){let r=yield jN(),{token:i}=yield FN(LN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function x7(n,e,t,r){let{app:i}=n,o=li(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Bh(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),RN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>RN(n))}function UN(n,e){let t=li(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function RN(n){let{app:e}=n,t=li(e),r=t.tokenRefresher;r||(r=D7(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function D7(n){let{app:e}=n;return new sI(()=>S(null,null,function*(){let t=li(e),r;if(t.token?r=yield cI(n,!0):r=yield cI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=li(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},PN.RETRIAL_MIN_WAIT,PN.RETRIAL_MAX_WAIT)}function T7(n,e){let t=li(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Bh(n){return n.expireTimeMillis-Date.now()>0}function oI(n){return{token:C7(E7),error:n}}var lI=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=li(this.app);for(let t of e)UN(this.app,t.next);return Promise.resolve()}};function S7(n,e){return new lI(n,e)}function M7(n){return{getToken:e=>cI(n,e),getLimitedUseToken:()=>I7(n),addTokenListener:e=>x7(n,"INTERNAL",e),removeTokenListener:e=>UN(n.app,e)}}var A7="@firebase/app-check",P7="0.10.1";var R7="app-check",kN="app-check-internal";function k7(){ci(new Kn(R7,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return S7(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kN).initialize()})),ci(new Kn(kN,n=>{let e=n.getProvider("app-check").getImmediate();return M7(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Rt(A7,P7)}k7();var O7="app-check";var Jl=class{constructor(){return Xl(O7)}};var N7=["localhost","0.0.0.0","127.0.0.1"],hEe=typeof window<"u"&&N7.includes(window.location.hostname);function n2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var r2=n2,i2=new si("auth","Firebase",n2());var Ay=new ki("@firebase/auth");function F7(n,...e){Ay.logLevel<=Ae.WARN&&Ay.warn(`Auth (${Os}): ${n}`,...e)}function Dy(n,...e){Ay.logLevel<=Ae.ERROR&&Ay.error(`Auth (${Os}): ${n}`,...e)}function Fi(n,...e){throw kI(n,...e)}function oc(n,...e){return kI(n,...e)}function o2(n,e,t){let r=Object.assign(Object.assign({},r2()),{[e]:t});return new si("auth","Firebase",r).create(e,{appName:n.name})}function Mo(n){return o2(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return i2.create(n,...e)}function fe(n,e,...t){if(!n)throw kI(e,...t)}function To(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Dy(e),new Error(e)}function Us(n,e){n||To(e)}function fI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function L7(){return BN()==="http:"||BN()==="https:"}function BN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function V7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L7()||oN()||"connection"in navigator)?navigator.onLine:!0}function j7(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var sc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Us(t>e,"Short delay should be less than long delay!"),this.isMobile=rN()||sN()}get(){return V7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function OI(n,e){Us(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Py=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;To("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;To("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;To("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var U7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var B7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$7=new sc(3e4,6e4);function Ao(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Li(o,s,a,c){return S(this,arguments,function*(n,e,t,r,i={}){return s2(n,i,()=>S(null,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let h=Fh(Object.assign({key:n.config.apiKey},u)).slice(1),f=yield n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);let p=Object.assign({method:e,headers:f},l);return iN()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Rs(n.emulatorConfig.host)&&(p.credentials="include"),Py.fetch()(yield a2(n,n.config.apiHost,t,h),p)}))})}function s2(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},U7),e);try{let i=new pI(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw xy(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xy(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw xy(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw xy(n,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw o2(n,u,l);Fi(n,u)}}catch(i){if(i instanceof Ir)throw i;Fi(n,"network-request-failed",{message:String(i)})}})}function Yh(o,s,a,c){return S(this,arguments,function*(n,e,t,r,i={}){let l=yield Li(n,e,t,r,i);return"mfaPendingCredential"in l&&Fi(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function a2(n,e,t,r){return S(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?OI(n.config,i):`${n.config.apiScheme}://${i}`;return B7.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function H7(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var pI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(oc(this.auth,"network-request-failed")),$7.get())})}};function xy(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=oc(n,e,r);return i.customData._tokenResponse=t,i}function $N(n){return n!==void 0&&n.enterprise!==void 0}var gI=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return H7(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function z7(n,e){return S(this,null,function*(){return Li(n,"GET","/v2/recaptchaConfig",Ao(n,e))})}function W7(n,e){return S(this,null,function*(){return Li(n,"POST","/v1/accounts:delete",e)})}function Ry(n,e){return S(this,null,function*(){return Li(n,"POST","/v1/accounts:lookup",e)})}function Hh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function NI(n,e=!1){return S(this,null,function*(){let t=Pt(n),r=yield t.getIdToken(e),i=FI(r);fe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Hh(uI(i.auth_time)),issuedAtTime:Hh(uI(i.iat)),expirationTime:Hh(uI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function uI(n){return Number(n)*1e3}function FI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Dy("JWT malformed, contained fewer than 3 sections"),null;try{let i=my(t);return i?JSON.parse(i):(Dy("Failed to decode base64 JWT payload"),null)}catch(i){return Dy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function HN(n){let e=FI(n);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Zl(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ir&&q7(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function q7({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var mI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Wh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hh(this.lastLoginAt),this.creationTime=Hh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ky(n){return S(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Zl(n,Ry(t,{idToken:r}));fe(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?c2(o.providerUserInfo):[],a=G7(n.providerData,s),c=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,u=c?l:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Wh(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(n,h)})}function LI(n){return S(this,null,function*(){let e=Pt(n);yield ky(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function G7(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function c2(n){return n.map(e=>{var{providerId:t}=e,r=eb(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function K7(n,e){return S(this,null,function*(){let t=yield s2(n,{},()=>S(null,null,function*(){let r=Fh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield a2(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Rs(n.emulatorConfig.host)&&(c.credentials="include"),Py.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Y7(n,e){return S(this,null,function*(){return Li(n,"POST","/v2/accounts:revokeToken",Ao(n,e))})}var zh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");let t=HN(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield K7(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(fe(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(fe(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return To("not implemented")}};function Vs(n,e){fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var js=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=eb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wh(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield Zl(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return NI(this,e)}reload(){return LI(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ky(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(sr(this.auth.app))return Promise.reject(Mo(this.auth));let e=yield this.getIdToken();return yield Zl(this,W7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,l,u;let h=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,p=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,_=(s=t.photoURL)!==null&&s!==void 0?s:void 0,w=(a=t.tenantId)!==null&&a!==void 0?a:void 0,b=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,T=(l=t.createdAt)!==null&&l!==void 0?l:void 0,k=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:V,emailVerified:j,isAnonymous:U,providerData:B,stsTokenManager:M}=t;fe(V&&M,e,"internal-error");let x=zh.fromJSON(this.name,M);fe(typeof V=="string",e,"internal-error"),Vs(h,e.name),Vs(f,e.name),fe(typeof j=="boolean",e,"internal-error"),fe(typeof U=="boolean",e,"internal-error"),Vs(p,e.name),Vs(_,e.name),Vs(w,e.name),Vs(b,e.name),Vs(T,e.name),Vs(k,e.name);let D=new n({uid:V,auth:e,email:f,emailVerified:j,displayName:h,isAnonymous:U,photoURL:_,phoneNumber:p,tenantId:w,stsTokenManager:x,createdAt:T,lastLoginAt:k});return B&&Array.isArray(B)&&(D.providerData=B.map(P=>Object.assign({},P))),b&&(D._redirectEventId=b),D}static _fromIdTokenResponse(e,t,r=!1){return S(this,null,function*(){let i=new zh;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ky(o),o})}static _fromGetAccountInfoResponse(e,t,r){return S(this,null,function*(){let i=t.users[0];fe(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?c2(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new zh;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Wh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var zN=new Map;function So(n){Us(n instanceof Function,"Expected a class definition");let e=zN.get(n);return e?(Us(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zN.set(n,e),e)}var Q7=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,r){return S(this,null,function*(){this.storage[t]=r})}_get(t){return S(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),yI=Q7;function Ty(n,e,t){return`firebase:${n}:${e}:${t}`}var Oy=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ty(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ty("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Ry(this.auth,{idToken:e}).catch(()=>{});return t?js._fromGetAccountInfoResponse(this.auth,t,e):null}return js._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return S(this,null,function*(){if(!t.length)return new n(So(yI),e,r);let i=(yield Promise.all(t.map(l=>S(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||So(yI),s=Ty(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(s);if(u){let h;if(typeof u=="string"){let f=yield Ry(e,{idToken:u}).catch(()=>{});if(!f)break;h=yield js._fromGetAccountInfoResponse(e,f,u)}else h=js._fromJSON(e,u);l!==o&&(a=h),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>S(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function WN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(h2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(l2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p2(e))return"Blackberry";if(g2(e))return"Webos";if(u2(e))return"Safari";if((e.includes("chrome/")||d2(e))&&!e.includes("edge/"))return"Chrome";if(f2(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function l2(n=pn()){return/firefox\//i.test(n)}function u2(n=pn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function d2(n=pn()){return/crios\//i.test(n)}function h2(n=pn()){return/iemobile/i.test(n)}function f2(n=pn()){return/android/i.test(n)}function p2(n=pn()){return/blackberry/i.test(n)}function g2(n=pn()){return/webos/i.test(n)}function VI(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function X7(n=pn()){var e;return VI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function J7(){return aN()&&document.documentMode===10}function m2(n=pn()){return VI(n)||f2(n)||g2(n)||p2(n)||/windows phone/i.test(n)||h2(n)}function y2(n,e=[]){let t;switch(n){case"Browser":t=WN(pn());break;case"Worker":t=`${WN(pn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Os}/${r}`}var vI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Z7(t){return S(this,arguments,function*(n,e={}){return Li(n,"GET","/v2/passwordPolicy",Ao(n,e))})}var eq=6,_I=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:eq,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var bI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ny(this),this.idTokenSubscription=new Ny(this),this.beforeStateQueue=new vI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=i2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=So(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Oy.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield Ry(this,{idToken:e}),r=yield js._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){var t;if(sr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield ky(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=j7()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(sr(this.app))return Promise.reject(Mo(this));let t=e?Pt(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return sr(this.app)?Promise.reject(Mo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return sr(this.app)?Promise.reject(Mo(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(So(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield Z7(this),t=new _I(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new si("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Y7(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&So(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=yield Oy.create(this,[So(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=y2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return S(this,null,function*(){var e;if(sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&F7(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Bs(n){return Pt(n)}var Ny=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=dN(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Hy={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tq(n){Hy=n}function v2(n){return Hy.loadJS(n)}function nq(){return Hy.recaptchaEnterpriseScript}function rq(){return Hy.gapiScript}function _2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var wI=class{constructor(){this.enterprise=new EI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},EI=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var iq="recaptcha-enterprise",b2="NO_RECAPTCHA",CI=class{constructor(e){this.type=iq,this.auth=Bs(e)}verify(e="verify",t=!1){return S(this,null,function*(){function r(o){return S(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>S(null,null,function*(){z7(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new gI(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;$N(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(b2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wI().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&$N(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=nq();c.length!==0&&(c+=a),v2(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function $h(n,e,t,r=!1,i=!1){return S(this,null,function*(){let o=new CI(n),s;if(i)s=b2;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Fy(n,e,t,r,i){return S(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield $h(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>S(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield $h(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield $h(n,e,t);return r(n,a).catch(c=>S(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let u=yield $h(n,e,t,!1,!0);return r(n,u)}return Promise.reject(c)}))}else{let a=yield $h(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function jI(n,e){let t=Yl(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(ai(o,e??{}))return i;Fi(i,"already-initialized")}return t.initialize({options:e})}function oq(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(So);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function UI(n,e,t){let r=Bs(n);fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=w2(e),{host:s,port:a}=sq(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe(ai(l,r.config.emulator)&&ai(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Rs(s)?(vy(`${o}//${s}${c}`),_y("Auth",!0)):i||aq()}function w2(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sq(n){let e=w2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:qN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:qN(s)}}}function qN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function aq(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var qh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return To("not implemented")}_getIdTokenResponse(e){return To("not implemented")}_linkToIdToken(e,t){return To("not implemented")}_getReauthenticationResolver(e){return To("not implemented")}};function cq(n,e){return S(this,null,function*(){return Li(n,"POST","/v1/accounts:signUp",e)})}function lq(n,e){return S(this,null,function*(){return Yh(n,"POST","/v1/accounts:signInWithPassword",Ao(n,e))})}function uq(n,e){return S(this,null,function*(){return Li(n,"POST","/v1/accounts:sendOobCode",Ao(n,e))})}function dq(n,e){return S(this,null,function*(){return uq(n,e)})}function hq(n,e){return S(this,null,function*(){return Yh(n,"POST","/v1/accounts:signInWithEmailLink",Ao(n,e))})}function fq(n,e){return S(this,null,function*(){return Yh(n,"POST","/v1/accounts:signInWithEmailLink",Ao(n,e))})}var Gh=class n extends qh{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return S(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fy(e,t,"signInWithPassword",lq,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return hq(e,{email:this._email,oobCode:this._password});default:Fi(e,"internal-error")}})}_linkToIdToken(e,t){return S(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fy(e,r,"signUpPassword",cq,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return fq(e,{idToken:t,email:this._email,oobCode:this._password});default:Fi(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function dI(n,e){return S(this,null,function*(){return Yh(n,"POST","/v1/accounts:signInWithIdp",Ao(n,e))})}function pq(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gq(n){let e=Gl(Kl(n)).link,t=e?Gl(Kl(e)).deep_link_id:null,r=Gl(Kl(n)).deep_link_id;return(r?Gl(Kl(r)).link:null)||r||t||e||n}var Ly=class n{constructor(e){var t,r,i,o,s,a;let c=Gl(Kl(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,h=pq((i=c.mode)!==null&&i!==void 0?i:null);fe(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=gq(e);try{return new n(t)}catch{return null}}};var E2=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Gh._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Ly.parseLink(r);return fe(i,"argument-error"),Gh._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Vy=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var II=class extends Vy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function mq(n,e){return S(this,null,function*(){return Yh(n,"POST","/v1/accounts:signUp",Ao(n,e))})}var eu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return S(this,null,function*(){let o=yield js._fromIdTokenResponse(e,r,i),s=GN(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return S(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=GN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function GN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var xI=class n extends Ir{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function C2(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?xI._fromErrorAndOperation(n,o,e,r):o})}function yq(n,e,t=!1){return S(this,null,function*(){let r=yield Zl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return eu._forOperation(n,"link",r)})}function vq(n,e,t=!1){return S(this,null,function*(){let{auth:r}=n;if(sr(r.app))return Promise.reject(Mo(r));let i="reauthenticate";try{let o=yield Zl(n,C2(r,i,e,n),t);fe(o.idToken,r,"internal-error");let s=FI(o.idToken);fe(s,r,"internal-error");let{sub:a}=s;return fe(n.uid===a,r,"user-mismatch"),eu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Fi(r,"user-mismatch"),o}})}function I2(n,e,t=!1){return S(this,null,function*(){if(sr(n.app))return Promise.reject(Mo(n));let r="signIn",i=yield C2(n,r,e),o=yield eu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function BI(n,e){return S(this,null,function*(){return I2(Bs(n),e)})}function _q(n,e,t){var r;fe(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),fe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),fe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(fe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(fe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function x2(n){return S(this,null,function*(){let e=Bs(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function $I(n,e,t){return S(this,null,function*(){let r=Bs(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&_q(r,i,t),yield Fy(r,i,"getOobCode",dq,"EMAIL_PASSWORD_PROVIDER")})}function HI(n,e,t){return S(this,null,function*(){if(sr(n.app))return Promise.reject(Mo(n));let r=Bs(n),s=yield Fy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mq,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&x2(n),c}),a=yield eu._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function zI(n,e,t){return sr(n.app)?Promise.reject(Mo(n)):BI(Pt(n),E2.credential(e,t)).catch(r=>S(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&x2(n),r}))}function bq(n,e){return S(this,null,function*(){return Li(n,"POST","/v1/accounts:update",e)})}function WI(r,i){return S(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=Pt(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield Zl(o,bq(o.auth,a));o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null;let l=o.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(c)})}function Qh(n,e,t,r){return Pt(n).onIdTokenChanged(e,t,r)}function qI(n,e,t){return Pt(n).beforeAuthStateChanged(e,t)}function Po(n,e,t,r){return Pt(n).onAuthStateChanged(e,t,r)}var jy="__sak";var Uy=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jy,"1"),this.storage.removeItem(jy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var wq=1e3,Eq=10,Cq=(()=>{class n extends Uy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m2(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);J7()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Eq):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},wq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return S(this,null,function*(){yield es(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return S(this,null,function*(){let r=yield es(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return S(this,null,function*(){yield es(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),D2=Cq;var Iq=(()=>{class n extends Uy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),GI=Iq;function xq(n){return Promise.all(n.map(e=>S(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Dq=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return S(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>S(this,null,function*(){return u(r.origin,s)})),l=yield xq(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function T2(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var DI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return S(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=T2("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Ni(){return window}function Tq(n){Ni().location.href=n}function S2(){return typeof Ni().WorkerGlobalScope<"u"&&typeof Ni().importScripts=="function"}function Sq(){return S(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Mq(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Aq(){return S2()?self:null}var M2="firebaseLocalStorageDb",Pq=1,By="firebaseLocalStorage",A2="fbase_key",ac=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function zy(n,e){return n.transaction([By],e?"readwrite":"readonly").objectStore(By)}function Rq(){let n=indexedDB.deleteDatabase(M2);return new ac(n).toPromise()}function TI(){let n=indexedDB.open(M2,Pq);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(By,{keyPath:A2})}catch(i){t(i)}}),n.addEventListener("success",()=>S(null,null,function*(){let r=n.result;r.objectStoreNames.contains(By)?e(r):(r.close(),yield Rq(),e(yield TI()))}))})}function KN(n,e,t){return S(this,null,function*(){let r=zy(n,!0).put({[A2]:e,value:t});return new ac(r).toPromise()})}function kq(n,e){return S(this,null,function*(){let t=zy(n,!1).get(e),r=yield new ac(t).toPromise();return r===void 0?null:r.value})}function YN(n,e){let t=zy(n,!0).delete(e);return new ac(t).toPromise()}var Oq=800,Nq=3,Fq=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return S(this,null,function*(){return this.db?this.db:(this.db=yield TI(),this.db)})}_withRetries(t){return S(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Nq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return S(this,null,function*(){return S2()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return S(this,null,function*(){this.receiver=Dq._getInstance(Aq()),this.receiver._subscribe("keyChanged",(t,r)=>S(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>S(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return S(this,null,function*(){var t,r;if(this.activeServiceWorker=yield Sq(),!this.activeServiceWorker)return;this.sender=new DI(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return S(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Mq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return S(this,null,function*(){try{if(!indexedDB)return!1;let t=yield TI();return yield KN(t,jy,"1"),yield YN(t,jy),!0}catch{}return!1})}_withPendingWrite(t){return S(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(i=>KN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return S(this,null,function*(){let r=yield this._withRetries(i=>kq(i,t));return this.localCache[t]=r,r})}_remove(t){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(r=>YN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return S(this,null,function*(){let t=yield this._withRetries(o=>{let s=zy(o,!1).getAll();return new ac(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>S(this,null,function*(){return this._poll()}),Oq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),P2=Fq;var bEe=_2("rcb"),wEe=new sc(3e4,6e4);function Lq(n,e){return e?So(e):(fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Kh=class extends qh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dI(e,this._buildIdpRequest())}_linkToIdToken(e,t){return dI(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return dI(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Vq(n){return I2(n.auth,new Kh(n),n.bypassAuthState)}function jq(n){let{auth:e,user:t}=n;return fe(t,e,"internal-error"),vq(t,new Kh(n),n.bypassAuthState)}function Uq(n){return S(this,null,function*(){let{auth:e,user:t}=n;return fe(t,e,"internal-error"),yq(t,new Kh(n),n.bypassAuthState)})}var SI=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>S(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return S(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vq;case"linkViaPopup":case"linkViaRedirect":return Uq;case"reauthViaPopup":case"reauthViaRedirect":return jq;default:Fi(this.auth,"internal-error")}}resolve(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var EEe=new sc(2e3,1e4);var Bq="pendingRedirect",Sy=new Map,MI=class n extends SI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return S(this,null,function*(){let e=Sy.get(this.auth._key());if(!e){try{let r=(yield $q(this.resolver,this.auth))?yield es(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Sy.set(this.auth._key(),e)}return this.bypassAuthState||Sy.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return S(this,null,function*(){if(e.type==="signInViaRedirect")return es(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,es(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return S(this,null,function*(){})}cleanUp(){}};function $q(n,e){return S(this,null,function*(){let t=Wq(e),r=zq(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function Hq(n,e){Sy.set(n._key(),e)}function zq(n){return So(n._redirectPersistence)}function Wq(n){return Ty(Bq,n.config.apiKey,n.name)}function qq(n,e,t=!1){return S(this,null,function*(){if(sr(n.app))return Promise.reject(Mo(n));let r=Bs(n),i=Lq(r,e),s=yield new MI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var Gq=600*1e3,AI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!R2(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(oc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gq&&this.cachedEventUids.clear(),this.cachedEventUids.has(QN(e))}saveEventToCache(e){this.cachedEventUids.add(QN(e)),this.lastProcessedEventTime=Date.now()}};function QN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function R2({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Kq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R2(n);default:return!1}}function Yq(t){return S(this,arguments,function*(n,e={}){return Li(n,"GET","/v1/projects",e)})}var Qq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xq=/^https?/;function Jq(n){return S(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Yq(n);for(let t of e)try{if(Zq(t))return}catch{}Fi(n,"unauthorized-domain")})}function Zq(n){let e=fI(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!Xq.test(t))return!1;if(Qq.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var eG=new sc(3e4,6e4);function XN(){let n=Ni().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function tG(n){return new Promise((e,t)=>{var r,i,o;function s(){XN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{XN(),t(oc(n,"network-request-failed"))},timeout:eG.get()})}if(!((i=(r=Ni().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ni().gapi)===null||o===void 0)&&o.load)s();else{let a=_2("iframefcb");return Ni()[a]=()=>{gapi.load?s():t(oc(n,"network-request-failed"))},v2(`${rq()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw My=null,e})}var My=null;function nG(n){return My=My||tG(n),My}var rG=new sc(5e3,15e3),iG="__/auth/iframe",oG="emulator/auth/iframe",sG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cG(n){let e=n.config;fe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?OI(e,oG):`https://${n.config.authDomain}/${iG}`,r={apiKey:e.apiKey,appName:n.name,v:Os},i=aG.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Fh(r).slice(1)}`}function lG(n){return S(this,null,function*(){let e=yield nG(n),t=Ni().gapi;return fe(t,n,"internal-error"),e.open({where:document.body,url:cG(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sG,dontclear:!0},r=>new Promise((i,o)=>S(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=oc(n,"network-request-failed"),a=Ni().setTimeout(()=>{o(s)},rG.get());function c(){Ni().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var uG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dG=500,hG=600,fG="_blank",pG="http://localhost",$y=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function gG(n,e,t,r=dG,i=hG){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},uG),{width:r.toString(),height:i.toString(),top:o,left:s}),l=pn().toLowerCase();t&&(a=d2(l)?fG:t),l2(l)&&(e=e||pG,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[p,_])=>`${f}${p}=${_},`,"");if(X7(l)&&a!=="_self")return mG(e||"",a),new $y(null);let h=window.open(e||"",a,u);fe(h,n,"popup-blocked");try{h.focus()}catch{}return new $y(h)}function mG(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var yG="__/auth/handler",vG="emulator/auth/handler",_G=encodeURIComponent("fac");function JN(n,e,t,r,i,o){return S(this,null,function*(){fe(n.config.authDomain,n,"auth-domain-config-required"),fe(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Os,eventId:i};if(e instanceof Vy){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",uN(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,h]of Object.entries(o||{}))s[u]=h}if(e instanceof II){let u=e.getScopes().filter(h=>h!=="");u.length>0&&(s.scopes=u.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield n._getAppCheckToken(),l=c?`#${_G}=${encodeURIComponent(c)}`:"";return`${bG(n)}?${Fh(a).slice(1)}${l}`})}function bG({config:n}){return n.emulator?OI(n,vG):`https://${n.authDomain}/${yG}`}var hI="webStorageSupport",PI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GI,this._completeRedirectFn=qq,this._overrideRedirectResult=Hq}_openPopup(e,t,r,i){return S(this,null,function*(){var o;Us((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield JN(e,t,r,fI(),i);return gG(e,s,T2())})}_openRedirect(e,t,r,i){return S(this,null,function*(){yield this._originValidation(e);let o=yield JN(e,t,r,fI(),i);return Tq(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Us(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return S(this,null,function*(){let t=yield lG(e),r=new AI(e);return t.register("authEvent",i=>(fe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hI,{type:hI},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[hI];s!==void 0&&t(!!s),Fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Jq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return m2()||u2()||VI()}},k2=PI;var ZN="@firebase/auth",e2="1.10.8";var RI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function wG(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EG(n){ci(new Kn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;fe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:y2(n)},l=new bI(r,i,o,c);return oq(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ci(new Kn("auth-internal",e=>{let t=Bs(e.getProvider("auth").getImmediate());return(r=>new RI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rt(ZN,e2,wG(n)),Rt(ZN,e2,"esm2017")}var CG=300,IG=BC("authIdTokenMaxAge")||CG,t2=null,xG=n=>e=>S(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>IG)return;let i=t?.token;t2!==i&&(t2=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function KI(n=nc()){let e=Yl(n,"auth");if(e.isInitialized())return e.getImmediate();let t=jI(n,{popupRedirectResolver:k2,persistence:[P2,D2,GI]}),r=BC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=xG(o.toString());qI(t,s,()=>s(t.currentUser)),Qh(t,a=>s(a))}}let i=jC("auth");return i&&UI(t,`http://${i}`),t}function DG(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}tq({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=oc("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",DG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EG("Browser");function N2(n){return new ue(function(e){var t=Po(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function F2(n){return new ue(function(e){var t=Qh(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var L2="auth",dt=class{constructor(e){return e}},Xh=class{constructor(){return Xl(L2)}};var YI=new te("angularfire2.auth-instances");function hK(n,e){let t=jh(L2,n,e);return t&&new dt(t)}function fK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new dt(r)}}var pK={provide:Xh,deps:[[new _r,YI]]},gK={provide:dt,useFactory:hK,deps:[[new _r,YI],Do]};function V2(n,...e){return Rt("angularfire",Ns.full,"auth"),yr([gK,pK,{provide:YI,useFactory:fK(n),multi:!0,deps:[Be,Dt,Fs,ic,[new _r,Jl],...e]}])}var Vi=Ze(N2,!0);var j2=Ze(F2,!0);var U2=Ze(HI,!0,2);var B2=Ze(KI,!0);var $2=Ze(Po,!0);var H2=Ze($I,!0,2);var z2=Ze(zI,!0,2);var W2=Ze(WI,!0,2);var G2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K2={};var Ro,QI;(function(){var n;function e(M,x){function D(){}D.prototype=x.prototype,M.D=x.prototype,M.prototype=new D,M.prototype.constructor=M,M.C=function(P,R,O){for(var A=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)A[_t-2]=arguments[_t];return x.prototype[R].apply(P,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,x,D){D||(D=0);var P=Array(16);if(typeof x=="string")for(var R=0;16>R;++R)P[R]=x.charCodeAt(D++)|x.charCodeAt(D++)<<8|x.charCodeAt(D++)<<16|x.charCodeAt(D++)<<24;else for(R=0;16>R;++R)P[R]=x[D++]|x[D++]<<8|x[D++]<<16|x[D++]<<24;x=M.g[0],D=M.g[1],R=M.g[2];var O=M.g[3],A=x+(O^D&(R^O))+P[0]+3614090360&4294967295;x=D+(A<<7&4294967295|A>>>25),A=O+(R^x&(D^R))+P[1]+3905402710&4294967295,O=x+(A<<12&4294967295|A>>>20),A=R+(D^O&(x^D))+P[2]+606105819&4294967295,R=O+(A<<17&4294967295|A>>>15),A=D+(x^R&(O^x))+P[3]+3250441966&4294967295,D=R+(A<<22&4294967295|A>>>10),A=x+(O^D&(R^O))+P[4]+4118548399&4294967295,x=D+(A<<7&4294967295|A>>>25),A=O+(R^x&(D^R))+P[5]+1200080426&4294967295,O=x+(A<<12&4294967295|A>>>20),A=R+(D^O&(x^D))+P[6]+2821735955&4294967295,R=O+(A<<17&4294967295|A>>>15),A=D+(x^R&(O^x))+P[7]+4249261313&4294967295,D=R+(A<<22&4294967295|A>>>10),A=x+(O^D&(R^O))+P[8]+1770035416&4294967295,x=D+(A<<7&4294967295|A>>>25),A=O+(R^x&(D^R))+P[9]+2336552879&4294967295,O=x+(A<<12&4294967295|A>>>20),A=R+(D^O&(x^D))+P[10]+4294925233&4294967295,R=O+(A<<17&4294967295|A>>>15),A=D+(x^R&(O^x))+P[11]+2304563134&4294967295,D=R+(A<<22&4294967295|A>>>10),A=x+(O^D&(R^O))+P[12]+1804603682&4294967295,x=D+(A<<7&4294967295|A>>>25),A=O+(R^x&(D^R))+P[13]+4254626195&4294967295,O=x+(A<<12&4294967295|A>>>20),A=R+(D^O&(x^D))+P[14]+2792965006&4294967295,R=O+(A<<17&4294967295|A>>>15),A=D+(x^R&(O^x))+P[15]+1236535329&4294967295,D=R+(A<<22&4294967295|A>>>10),A=x+(R^O&(D^R))+P[1]+4129170786&4294967295,x=D+(A<<5&4294967295|A>>>27),A=O+(D^R&(x^D))+P[6]+3225465664&4294967295,O=x+(A<<9&4294967295|A>>>23),A=R+(x^D&(O^x))+P[11]+643717713&4294967295,R=O+(A<<14&4294967295|A>>>18),A=D+(O^x&(R^O))+P[0]+3921069994&4294967295,D=R+(A<<20&4294967295|A>>>12),A=x+(R^O&(D^R))+P[5]+3593408605&4294967295,x=D+(A<<5&4294967295|A>>>27),A=O+(D^R&(x^D))+P[10]+38016083&4294967295,O=x+(A<<9&4294967295|A>>>23),A=R+(x^D&(O^x))+P[15]+3634488961&4294967295,R=O+(A<<14&4294967295|A>>>18),A=D+(O^x&(R^O))+P[4]+3889429448&4294967295,D=R+(A<<20&4294967295|A>>>12),A=x+(R^O&(D^R))+P[9]+568446438&4294967295,x=D+(A<<5&4294967295|A>>>27),A=O+(D^R&(x^D))+P[14]+3275163606&4294967295,O=x+(A<<9&4294967295|A>>>23),A=R+(x^D&(O^x))+P[3]+4107603335&4294967295,R=O+(A<<14&4294967295|A>>>18),A=D+(O^x&(R^O))+P[8]+1163531501&4294967295,D=R+(A<<20&4294967295|A>>>12),A=x+(R^O&(D^R))+P[13]+2850285829&4294967295,x=D+(A<<5&4294967295|A>>>27),A=O+(D^R&(x^D))+P[2]+4243563512&4294967295,O=x+(A<<9&4294967295|A>>>23),A=R+(x^D&(O^x))+P[7]+1735328473&4294967295,R=O+(A<<14&4294967295|A>>>18),A=D+(O^x&(R^O))+P[12]+2368359562&4294967295,D=R+(A<<20&4294967295|A>>>12),A=x+(D^R^O)+P[5]+4294588738&4294967295,x=D+(A<<4&4294967295|A>>>28),A=O+(x^D^R)+P[8]+2272392833&4294967295,O=x+(A<<11&4294967295|A>>>21),A=R+(O^x^D)+P[11]+1839030562&4294967295,R=O+(A<<16&4294967295|A>>>16),A=D+(R^O^x)+P[14]+4259657740&4294967295,D=R+(A<<23&4294967295|A>>>9),A=x+(D^R^O)+P[1]+2763975236&4294967295,x=D+(A<<4&4294967295|A>>>28),A=O+(x^D^R)+P[4]+1272893353&4294967295,O=x+(A<<11&4294967295|A>>>21),A=R+(O^x^D)+P[7]+4139469664&4294967295,R=O+(A<<16&4294967295|A>>>16),A=D+(R^O^x)+P[10]+3200236656&4294967295,D=R+(A<<23&4294967295|A>>>9),A=x+(D^R^O)+P[13]+681279174&4294967295,x=D+(A<<4&4294967295|A>>>28),A=O+(x^D^R)+P[0]+3936430074&4294967295,O=x+(A<<11&4294967295|A>>>21),A=R+(O^x^D)+P[3]+3572445317&4294967295,R=O+(A<<16&4294967295|A>>>16),A=D+(R^O^x)+P[6]+76029189&4294967295,D=R+(A<<23&4294967295|A>>>9),A=x+(D^R^O)+P[9]+3654602809&4294967295,x=D+(A<<4&4294967295|A>>>28),A=O+(x^D^R)+P[12]+3873151461&4294967295,O=x+(A<<11&4294967295|A>>>21),A=R+(O^x^D)+P[15]+530742520&4294967295,R=O+(A<<16&4294967295|A>>>16),A=D+(R^O^x)+P[2]+3299628645&4294967295,D=R+(A<<23&4294967295|A>>>9),A=x+(R^(D|~O))+P[0]+4096336452&4294967295,x=D+(A<<6&4294967295|A>>>26),A=O+(D^(x|~R))+P[7]+1126891415&4294967295,O=x+(A<<10&4294967295|A>>>22),A=R+(x^(O|~D))+P[14]+2878612391&4294967295,R=O+(A<<15&4294967295|A>>>17),A=D+(O^(R|~x))+P[5]+4237533241&4294967295,D=R+(A<<21&4294967295|A>>>11),A=x+(R^(D|~O))+P[12]+1700485571&4294967295,x=D+(A<<6&4294967295|A>>>26),A=O+(D^(x|~R))+P[3]+2399980690&4294967295,O=x+(A<<10&4294967295|A>>>22),A=R+(x^(O|~D))+P[10]+4293915773&4294967295,R=O+(A<<15&4294967295|A>>>17),A=D+(O^(R|~x))+P[1]+2240044497&4294967295,D=R+(A<<21&4294967295|A>>>11),A=x+(R^(D|~O))+P[8]+1873313359&4294967295,x=D+(A<<6&4294967295|A>>>26),A=O+(D^(x|~R))+P[15]+4264355552&4294967295,O=x+(A<<10&4294967295|A>>>22),A=R+(x^(O|~D))+P[6]+2734768916&4294967295,R=O+(A<<15&4294967295|A>>>17),A=D+(O^(R|~x))+P[13]+1309151649&4294967295,D=R+(A<<21&4294967295|A>>>11),A=x+(R^(D|~O))+P[4]+4149444226&4294967295,x=D+(A<<6&4294967295|A>>>26),A=O+(D^(x|~R))+P[11]+3174756917&4294967295,O=x+(A<<10&4294967295|A>>>22),A=R+(x^(O|~D))+P[2]+718787259&4294967295,R=O+(A<<15&4294967295|A>>>17),A=D+(O^(R|~x))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+x&4294967295,M.g[1]=M.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,M.g[2]=M.g[2]+R&4294967295,M.g[3]=M.g[3]+O&4294967295}r.prototype.u=function(M,x){x===void 0&&(x=M.length);for(var D=x-this.blockSize,P=this.B,R=this.h,O=0;O<x;){if(R==0)for(;O<=D;)i(this,M,O),O+=this.blockSize;if(typeof M=="string"){for(;O<x;)if(P[R++]=M.charCodeAt(O++),R==this.blockSize){i(this,P),R=0;break}}else for(;O<x;)if(P[R++]=M[O++],R==this.blockSize){i(this,P),R=0;break}}this.h=R,this.o+=x},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var x=1;x<M.length-8;++x)M[x]=0;var D=8*this.o;for(x=M.length-8;x<M.length;++x)M[x]=D&255,D/=256;for(this.u(M),M=Array(16),x=D=0;4>x;++x)for(var P=0;32>P;P+=8)M[D++]=this.g[x]>>>P&255;return M};function o(M,x){var D=a;return Object.prototype.hasOwnProperty.call(D,M)?D[M]:D[M]=x(M)}function s(M,x){this.h=x;for(var D=[],P=!0,R=M.length-1;0<=R;R--){var O=M[R]|0;P&&O==x||(D[R]=O,P=!1)}this.g=D}var a={};function c(M){return-128<=M&&128>M?o(M,function(x){return new s([x|0],0>x?-1:0)}):new s([M|0],0>M?-1:0)}function l(M){if(isNaN(M)||!isFinite(M))return h;if(0>M)return b(l(-M));for(var x=[],D=1,P=0;M>=D;P++)x[P]=M/D|0,D*=4294967296;return new s(x,0)}function u(M,x){if(M.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(M.charAt(0)=="-")return b(u(M.substring(1),x));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=l(Math.pow(x,8)),P=h,R=0;R<M.length;R+=8){var O=Math.min(8,M.length-R),A=parseInt(M.substring(R,R+O),x);8>O?(O=l(Math.pow(x,O)),P=P.j(O).add(l(A))):(P=P.j(D),P=P.add(l(A)))}return P}var h=c(0),f=c(1),p=c(16777216);n=s.prototype,n.m=function(){if(w(this))return-b(this).m();for(var M=0,x=1,D=0;D<this.g.length;D++){var P=this.i(D);M+=(0<=P?P:4294967296+P)*x,x*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(_(this))return"0";if(w(this))return"-"+b(this).toString(M);for(var x=l(Math.pow(M,6)),D=this,P="";;){var R=j(D,x).g;D=T(D,R.j(x));var O=((0<D.g.length?D.g[0]:D.h)>>>0).toString(M);if(D=R,_(D))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function _(M){if(M.h!=0)return!1;for(var x=0;x<M.g.length;x++)if(M.g[x]!=0)return!1;return!0}function w(M){return M.h==-1}n.l=function(M){return M=T(this,M),w(M)?-1:_(M)?0:1};function b(M){for(var x=M.g.length,D=[],P=0;P<x;P++)D[P]=~M.g[P];return new s(D,~M.h).add(f)}n.abs=function(){return w(this)?b(this):this},n.add=function(M){for(var x=Math.max(this.g.length,M.g.length),D=[],P=0,R=0;R<=x;R++){var O=P+(this.i(R)&65535)+(M.i(R)&65535),A=(O>>>16)+(this.i(R)>>>16)+(M.i(R)>>>16);P=A>>>16,O&=65535,A&=65535,D[R]=A<<16|O}return new s(D,D[D.length-1]&-2147483648?-1:0)};function T(M,x){return M.add(b(x))}n.j=function(M){if(_(this)||_(M))return h;if(w(this))return w(M)?b(this).j(b(M)):b(b(this).j(M));if(w(M))return b(this.j(b(M)));if(0>this.l(p)&&0>M.l(p))return l(this.m()*M.m());for(var x=this.g.length+M.g.length,D=[],P=0;P<2*x;P++)D[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<M.g.length;R++){var O=this.i(P)>>>16,A=this.i(P)&65535,_t=M.i(R)>>>16,Ne=M.i(R)&65535;D[2*P+2*R]+=A*Ne,k(D,2*P+2*R),D[2*P+2*R+1]+=O*Ne,k(D,2*P+2*R+1),D[2*P+2*R+1]+=A*_t,k(D,2*P+2*R+1),D[2*P+2*R+2]+=O*_t,k(D,2*P+2*R+2)}for(P=0;P<x;P++)D[P]=D[2*P+1]<<16|D[2*P];for(P=x;P<2*x;P++)D[P]=0;return new s(D,0)};function k(M,x){for(;(M[x]&65535)!=M[x];)M[x+1]+=M[x]>>>16,M[x]&=65535,x++}function V(M,x){this.g=M,this.h=x}function j(M,x){if(_(x))throw Error("division by zero");if(_(M))return new V(h,h);if(w(M))return x=j(b(M),x),new V(b(x.g),b(x.h));if(w(x))return x=j(M,b(x)),new V(b(x.g),x.h);if(30<M.g.length){if(w(M)||w(x))throw Error("slowDivide_ only works with positive integers.");for(var D=f,P=x;0>=P.l(M);)D=U(D),P=U(P);var R=B(D,1),O=B(P,1);for(P=B(P,2),D=B(D,2);!_(P);){var A=O.add(P);0>=A.l(M)&&(R=R.add(D),O=A),P=B(P,1),D=B(D,1)}return x=T(M,R.j(x)),new V(R,x)}for(R=h;0<=M.l(x);){for(D=Math.max(1,Math.floor(M.m()/x.m())),P=Math.ceil(Math.log(D)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=l(D),A=O.j(x);w(A)||0<A.l(M);)D-=P,O=l(D),A=O.j(x);_(O)&&(O=f),R=R.add(O),M=T(M,A)}return new V(R,M)}n.A=function(M){return j(this,M).h},n.and=function(M){for(var x=Math.max(this.g.length,M.g.length),D=[],P=0;P<x;P++)D[P]=this.i(P)&M.i(P);return new s(D,this.h&M.h)},n.or=function(M){for(var x=Math.max(this.g.length,M.g.length),D=[],P=0;P<x;P++)D[P]=this.i(P)|M.i(P);return new s(D,this.h|M.h)},n.xor=function(M){for(var x=Math.max(this.g.length,M.g.length),D=[],P=0;P<x;P++)D[P]=this.i(P)^M.i(P);return new s(D,this.h^M.h)};function U(M){for(var x=M.g.length+1,D=[],P=0;P<x;P++)D[P]=M.i(P)<<1|M.i(P-1)>>>31;return new s(D,M.h)}function B(M,x){var D=x>>5;x%=32;for(var P=M.g.length-D,R=[],O=0;O<P;O++)R[O]=0<x?M.i(O+D)>>>x|M.i(O+D+1)<<32-x:M.i(O+D);return new s(R,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QI=K2.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=u,Ro=K2.Integer=s}).apply(typeof G2<"u"?G2:typeof self<"u"?self:typeof window<"u"?window:{});var Wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ko={};var XI,mK,tu,JI,Jh,qy,ZI,ex,tx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wy=="object"&&Wy];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(d,g){if(g)e:{var y=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var F=d[I];if(!(F in y))break e;y=y[F]}d=d[d.length-1],I=y[d],g=g(I),g!=I&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,I=!1,F={next:function(){if(!I&&y<d.length){var $=y++;return{value:g($,d[$]),done:!1}}return I=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});var s=s||{},a=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function l(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function u(d,g,y){return d.call.apply(d.bind,arguments)}function h(d,g,y){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,I),d.apply(g,F)}}return function(){return d.apply(g,arguments)}}function f(d,g,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function p(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function _(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(I,F,$){for(var ee=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)ee[nt-2]=arguments[nt];return g.prototype[F].apply(I,ee)}}function w(d){let g=d.length;if(0<g){let y=Array(g);for(let I=0;I<g;I++)y[I]=d[I];return y}return[]}function b(d,g){for(let y=1;y<arguments.length;y++){let I=arguments[y];if(c(I)){let F=d.length||0,$=I.length||0;d.length=F+$;for(let ee=0;ee<$;ee++)d[F+ee]=I[ee]}else d.push(I)}}class T{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function k(d){return/^[\s\xa0]*$/.test(d)}function V(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function j(d){return j[" "](d),d}j[" "]=function(){};var U=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function B(d,g,y){for(let I in d)g.call(y,d[I],I,d)}function M(d,g){for(let y in d)g.call(void 0,d[y],y,d)}function x(d){let g={};for(let y in d)g[y]=d[y];return g}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,g){let y,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(y in I)d[y]=I[y];for(let $=0;$<D.length;$++)y=D[$],Object.prototype.hasOwnProperty.call(I,y)&&(d[y]=I[y])}}function R(d){var g=1;d=d.split(":");let y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function O(d){a.setTimeout(()=>{throw d},0)}function A(){var d=jt;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class _t{constructor(){this.h=this.g=null}add(g,y){let I=Ne.get();I.set(g,y),this.h?this.h.next=I:this.g=I,this.h=I}}var Ne=new T(()=>new st,d=>d.reset());class st{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,yn=!1,jt=new _t,no=()=>{let d=a.Promise.resolve(void 0);tt=()=>{d.then(Fc)}};var Fc=()=>{for(var d;d=A();){try{d.h.call(d.g)}catch(y){O(y)}var g=Ne;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}yn=!1};function Nn(){this.s=this.s,this.C=this.C}Nn.prototype.s=!1,Nn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Nn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ct(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var ro=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let y=()=>{};a.addEventListener("test",y,g),a.removeEventListener("test",y,g)}catch{}return d})();function Wr(d,g){if(Ct.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(U){e:{try{j(g.nodeName);var F=!0;break e}catch{}F=!1}F||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:io[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Wr.aa.h.call(this)}}_(Wr,Ct);var io={2:"touch",3:"pen",4:"mouse"};Wr.prototype.h=function(){Wr.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Zu="closure_listenable_"+(1e6*Math.random()|0),PU=0;function RU(d,g,y,I,F){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!I,this.ha=F,this.key=++PU,this.da=this.fa=!1}function tp(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function np(d){this.src=d,this.g={},this.h=0}np.prototype.add=function(d,g,y,I,F){var $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);var ee=h0(d,g,I,F);return-1<ee?(g=d[ee],y||(g.fa=!1)):(g=new RU(g,this.src,$,!!I,F),g.fa=y,d.push(g)),g};function d0(d,g){var y=g.type;if(y in d.g){var I=d.g[y],F=Array.prototype.indexOf.call(I,g,void 0),$;($=0<=F)&&Array.prototype.splice.call(I,F,1),$&&(tp(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function h0(d,g,y,I){for(var F=0;F<d.length;++F){var $=d[F];if(!$.da&&$.listener==g&&$.capture==!!y&&$.ha==I)return F}return-1}var f0="closure_lm_"+(1e6*Math.random()|0),p0={};function XS(d,g,y,I,F){if(I&&I.once)return ZS(d,g,y,I,F);if(Array.isArray(g)){for(var $=0;$<g.length;$++)XS(d,g[$],y,I,F);return null}return y=v0(y),d&&d[Zu]?d.K(g,y,l(I)?!!I.capture:!!I,F):JS(d,g,y,!1,I,F)}function JS(d,g,y,I,F,$){if(!g)throw Error("Invalid event type");var ee=l(F)?!!F.capture:!!F,nt=m0(d);if(nt||(d[f0]=nt=new np(d)),y=nt.add(g,y,I,ee,$),y.proxy)return y;if(I=kU(),y.proxy=I,I.src=d,I.listener=y,d.addEventListener)ro||(F=ee),F===void 0&&(F=!1),d.addEventListener(g.toString(),I,F);else if(d.attachEvent)d.attachEvent(t1(g.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function kU(){function d(y){return g.call(d.src,d.listener,y)}let g=OU;return d}function ZS(d,g,y,I,F){if(Array.isArray(g)){for(var $=0;$<g.length;$++)ZS(d,g[$],y,I,F);return null}return y=v0(y),d&&d[Zu]?d.L(g,y,l(I)?!!I.capture:!!I,F):JS(d,g,y,!0,I,F)}function e1(d,g,y,I,F){if(Array.isArray(g))for(var $=0;$<g.length;$++)e1(d,g[$],y,I,F);else I=l(I)?!!I.capture:!!I,y=v0(y),d&&d[Zu]?(d=d.i,g=String(g).toString(),g in d.g&&($=d.g[g],y=h0($,y,I,F),-1<y&&(tp($[y]),Array.prototype.splice.call($,y,1),$.length==0&&(delete d.g[g],d.h--)))):d&&(d=m0(d))&&(g=d.g[g.toString()],d=-1,g&&(d=h0(g,y,I,F)),(y=-1<d?g[d]:null)&&g0(y))}function g0(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Zu])d0(g.i,d);else{var y=d.type,I=d.proxy;g.removeEventListener?g.removeEventListener(y,I,d.capture):g.detachEvent?g.detachEvent(t1(y),I):g.addListener&&g.removeListener&&g.removeListener(I),(y=m0(g))?(d0(y,d),y.h==0&&(y.src=null,g[f0]=null)):tp(d)}}}function t1(d){return d in p0?p0[d]:p0[d]="on"+d}function OU(d,g){if(d.da)d=!0;else{g=new Wr(g,this);var y=d.listener,I=d.ha||d.src;d.fa&&g0(d),d=y.call(I,g)}return d}function m0(d){return d=d[f0],d instanceof np?d:null}var y0="__closure_events_fn_"+(1e9*Math.random()>>>0);function v0(d){return typeof d=="function"?d:(d[y0]||(d[y0]=function(g){return d.handleEvent(g)}),d[y0])}function Cn(){Nn.call(this),this.i=new np(this),this.M=this,this.F=null}_(Cn,Nn),Cn.prototype[Zu]=!0,Cn.prototype.removeEventListener=function(d,g,y,I){e1(this,d,g,y,I)};function Fn(d,g){var y,I=d.F;if(I)for(y=[];I;I=I.F)y.push(I);if(d=d.M,I=g.type||g,typeof g=="string")g=new Ct(g,d);else if(g instanceof Ct)g.target=g.target||d;else{var F=g;g=new Ct(I,d),P(g,F)}if(F=!0,y)for(var $=y.length-1;0<=$;$--){var ee=g.g=y[$];F=rp(ee,I,!0,g)&&F}if(ee=g.g=d,F=rp(ee,I,!0,g)&&F,F=rp(ee,I,!1,g)&&F,y)for($=0;$<y.length;$++)ee=g.g=y[$],F=rp(ee,I,!1,g)&&F}Cn.prototype.N=function(){if(Cn.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],I=0;I<y.length;I++)tp(y[I]);delete d.g[g],d.h--}}this.F=null},Cn.prototype.K=function(d,g,y,I){return this.i.add(String(d),g,!1,y,I)},Cn.prototype.L=function(d,g,y,I){return this.i.add(String(d),g,!0,y,I)};function rp(d,g,y,I){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var F=!0,$=0;$<g.length;++$){var ee=g[$];if(ee&&!ee.da&&ee.capture==y){var nt=ee.listener,vn=ee.ha||ee.src;ee.fa&&d0(d.i,ee),F=nt.call(vn,I)!==!1&&F}}return F&&!I.defaultPrevented}function n1(d,g,y){if(typeof d=="function")y&&(d=f(d,y));else if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function r1(d){d.g=n1(()=>{d.g=null,d.i&&(d.i=!1,r1(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class NU extends Nn{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:r1(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ed(d){Nn.call(this),this.h=d,this.g={}}_(ed,Nn);var i1=[];function o1(d){B(d.g,function(g,y){this.g.hasOwnProperty(y)&&g0(g)},d),d.g={}}ed.prototype.N=function(){ed.aa.N.call(this),o1(this)},ed.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _0=a.JSON.stringify,FU=a.JSON.parse,LU=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function b0(){}b0.prototype.h=null;function s1(d){return d.h||(d.h=d.i())}function a1(){}var td={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function w0(){Ct.call(this,"d")}_(w0,Ct);function E0(){Ct.call(this,"c")}_(E0,Ct);var ma={},c1=null;function ip(){return c1=c1||new Cn}ma.La="serverreachability";function l1(d){Ct.call(this,ma.La,d)}_(l1,Ct);function nd(d){let g=ip();Fn(g,new l1(g))}ma.STAT_EVENT="statevent";function u1(d,g){Ct.call(this,ma.STAT_EVENT,d),this.stat=g}_(u1,Ct);function Ln(d){let g=ip();Fn(g,new u1(g,d))}ma.Ma="timingevent";function d1(d,g){Ct.call(this,ma.Ma,d),this.size=g}_(d1,Ct);function rd(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function id(){this.g=!0}id.prototype.xa=function(){this.g=!1};function VU(d,g,y,I,F,$){d.info(function(){if(d.g)if($)for(var ee="",nt=$.split("&"),vn=0;vn<nt.length;vn++){var je=nt[vn].split("=");if(1<je.length){var In=je[0];je=je[1];var xn=In.split("_");ee=2<=xn.length&&xn[1]=="type"?ee+(In+"="+je+"&"):ee+(In+"=redacted&")}}else ee=null;else ee=$;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+g+`
`+y+`
`+ee})}function jU(d,g,y,I,F,$,ee){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+g+`
`+y+`
`+$+" "+ee})}function Lc(d,g,y,I){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+BU(d,y)+(I?" "+I:"")})}function UU(d,g){d.info(function(){return"TIMEOUT: "+g})}id.prototype.info=function(){};function BU(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var I=y[d];if(!(2>I.length)){var F=I[1];if(Array.isArray(F)&&!(1>F.length)){var $=F[0];if($!="noop"&&$!="stop"&&$!="close")for(var ee=1;ee<F.length;ee++)F[ee]=""}}}}return _0(y)}catch{return g}}var op={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},h1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},C0;function sp(){}_(sp,b0),sp.prototype.g=function(){return new XMLHttpRequest},sp.prototype.i=function(){return{}},C0=new sp;function Xo(d,g,y,I){this.j=d,this.i=g,this.l=y,this.R=I||1,this.U=new ed(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new f1}function f1(){this.i=null,this.g="",this.h=!1}var p1={},I0={};function x0(d,g,y){d.L=1,d.v=up(oo(g)),d.m=y,d.P=!0,g1(d,null)}function g1(d,g){d.F=Date.now(),ap(d),d.A=oo(d.v);var y=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),M1(y.i,"t",I),d.C=0,y=d.j.J,d.h=new f1,d.g=G1(d.j,y?g:null,!d.m),0<d.O&&(d.M=new NU(f(d.Y,d,d.g),d.O)),g=d.U,y=d.g,I=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(i1[0]=F.toString()),F=i1);for(var $=0;$<F.length;$++){var ee=XS(y,F[$],I||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=d.H?x(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),nd(),VU(d.i,d.u,d.A,d.l,d.R,d.m)}Xo.prototype.ca=function(d){d=d.target;let g=this.M;g&&so(d)==3?g.j():this.Y(d)},Xo.prototype.Y=function(d){try{if(d==this.g)e:{let xn=so(this.g);var g=this.g.Ba();let Uc=this.g.Z();if(!(3>xn)&&(xn!=3||this.g&&(this.h.h||this.g.oa()||F1(this.g)))){this.J||xn!=4||g==7||(g==8||0>=Uc?nd(3):nd(2)),D0(this);var y=this.g.Z();this.X=y;t:if(m1(this)){var I=F1(this.g);d="";var F=I.length,$=so(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ya(this),od(this);var ee="";break t}this.h.i=new a.TextDecoder}for(g=0;g<F;g++)this.h.h=!0,d+=this.h.i.decode(I[g],{stream:!($&&g==F-1)});I.length=0,this.h.g+=d,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=y==200,jU(this.i,this.u,this.A,this.l,this.R,xn,y),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,vn=this.g;if((nt=vn.g?vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(nt)){var je=nt;break t}}je=null}if(y=je)Lc(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,T0(this,y);else{this.o=!1,this.s=3,Ln(12),ya(this),od(this);break e}}if(this.P){y=!0;let qr;for(;!this.J&&this.C<ee.length;)if(qr=$U(this,ee),qr==I0){xn==4&&(this.s=4,Ln(14),y=!1),Lc(this.i,this.l,null,"[Incomplete Response]");break}else if(qr==p1){this.s=4,Ln(15),Lc(this.i,this.l,ee,"[Invalid Chunk]"),y=!1;break}else Lc(this.i,this.l,qr,null),T0(this,qr);if(m1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xn!=4||ee.length!=0||this.h.h||(this.s=1,Ln(16),y=!1),this.o=this.o&&y,!y)Lc(this.i,this.l,ee,"[Invalid Chunked Response]"),ya(this),od(this);else if(0<ee.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),k0(In),In.M=!0,Ln(11))}}else Lc(this.i,this.l,ee,null),T0(this,ee);xn==4&&ya(this),this.o&&!this.J&&(xn==4?H1(this.j,this):(this.o=!1,ap(this)))}else o4(this.g),y==400&&0<ee.indexOf("Unknown SID")?(this.s=3,Ln(12)):(this.s=0,Ln(13)),ya(this),od(this)}}}catch{}finally{}};function m1(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function $U(d,g){var y=d.C,I=g.indexOf(`
`,y);return I==-1?I0:(y=Number(g.substring(y,I)),isNaN(y)?p1:(I+=1,I+y>g.length?I0:(g=g.slice(I,I+y),d.C=I+y,g)))}Xo.prototype.cancel=function(){this.J=!0,ya(this)};function ap(d){d.S=Date.now()+d.I,y1(d,d.I)}function y1(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=rd(f(d.ba,d),g)}function D0(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Xo.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(UU(this.i,this.A),this.L!=2&&(nd(),Ln(17)),ya(this),this.s=2,od(this)):y1(this,this.S-d)};function od(d){d.j.G==0||d.J||H1(d.j,d)}function ya(d){D0(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,o1(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function T0(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||S0(y.h,d))){if(!d.K&&S0(y.h,d)&&y.G==3){try{var I=y.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)gp(y),fp(y);else break e;R0(y),Ln(18)}}else y.za=F[1],0<y.za-y.T&&37500>F[2]&&y.F&&y.v==0&&!y.C&&(y.C=rd(f(y.Za,y),6e3));if(1>=b1(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else _a(y,11)}else if((d.K||y.g==d)&&gp(y),!k(g))for(F=y.Da.g.parse(g),g=0;g<F.length;g++){let je=F[g];if(y.T=je[0],je=je[1],y.G==2)if(je[0]=="c"){y.K=je[1],y.ia=je[2];let In=je[3];In!=null&&(y.la=In,y.j.info("VER="+y.la));let xn=je[4];xn!=null&&(y.Aa=xn,y.j.info("SVER="+y.Aa));let Uc=je[5];Uc!=null&&typeof Uc=="number"&&0<Uc&&(I=1.5*Uc,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;let qr=d.g;if(qr){let yp=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yp){var $=I.h;$.g||yp.indexOf("spdy")==-1&&yp.indexOf("quic")==-1&&yp.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(M0($,$.h),$.h=null))}if(I.D){let O0=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;O0&&(I.ya=O0,ut(I.I,I.D,O0))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var ee=d;if(I.qa=q1(I,I.J?I.ia:null,I.W),ee.K){w1(I.h,ee);var nt=ee,vn=I.L;vn&&(nt.I=vn),nt.B&&(D0(nt),ap(nt)),I.g=ee}else B1(I);0<y.i.length&&pp(y)}else je[0]!="stop"&&je[0]!="close"||_a(y,7);else y.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?_a(y,7):P0(y):je[0]!="noop"&&y.l&&y.l.ta(je),y.v=0)}}nd(4)}catch{}}var HU=class{constructor(d,g){this.g=d,this.map=g}};function v1(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _1(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function b1(d){return d.h?1:d.g?d.g.size:0}function S0(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function M0(d,g){d.g?d.g.add(g):d.h=g}function w1(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}v1.prototype.cancel=function(){if(this.i=E1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function E1(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let y of d.g.values())g=g.concat(y.D);return g}return w(d.i)}function zU(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],y=d.length,I=0;I<y;I++)g.push(d[I]);return g}g=[],y=0;for(I in d)g[y++]=d[I];return g}function WU(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(let I in d)g[y++]=I;return g}}}function C1(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=WU(d),I=zU(d),F=I.length,$=0;$<F;$++)g.call(void 0,I[$],y&&y[$],d)}var I1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qU(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var I=d[y].indexOf("="),F=null;if(0<=I){var $=d[y].substring(0,I);F=d[y].substring(I+1)}else $=d[y];g($,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function va(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof va){this.h=d.h,cp(this,d.j),this.o=d.o,this.g=d.g,lp(this,d.s),this.l=d.l;var g=d.i,y=new cd;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),x1(this,y),this.m=d.m}else d&&(g=String(d).match(I1))?(this.h=!1,cp(this,g[1]||"",!0),this.o=sd(g[2]||""),this.g=sd(g[3]||"",!0),lp(this,g[4]),this.l=sd(g[5]||"",!0),x1(this,g[6]||"",!0),this.m=sd(g[7]||"")):(this.h=!1,this.i=new cd(null,this.h))}va.prototype.toString=function(){var d=[],g=this.j;g&&d.push(ad(g,D1,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(ad(g,D1,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(ad(y,y.charAt(0)=="/"?YU:KU,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",ad(y,XU)),d.join("")};function oo(d){return new va(d)}function cp(d,g,y){d.j=y?sd(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function lp(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function x1(d,g,y){g instanceof cd?(d.i=g,JU(d.i,d.h)):(y||(g=ad(g,QU)),d.i=new cd(g,d.h))}function ut(d,g,y){d.i.set(g,y)}function up(d){return ut(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function sd(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ad(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,GU),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function GU(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var D1=/[#\/\?@]/g,KU=/[#\?:]/g,YU=/[#\?]/g,QU=/[#\?@]/g,XU=/#/g;function cd(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Jo(d){d.g||(d.g=new Map,d.h=0,d.i&&qU(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}n=cd.prototype,n.add=function(d,g){Jo(this),this.i=null,d=Vc(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function T1(d,g){Jo(d),g=Vc(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function S1(d,g){return Jo(d),g=Vc(d,g),d.g.has(g)}n.forEach=function(d,g){Jo(this),this.g.forEach(function(y,I){y.forEach(function(F){d.call(g,F,I,this)},this)},this)},n.na=function(){Jo(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let I=0;I<g.length;I++){let F=d[I];for(let $=0;$<F.length;$++)y.push(g[I])}return y},n.V=function(d){Jo(this);let g=[];if(typeof d=="string")S1(this,d)&&(g=g.concat(this.g.get(Vc(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},n.set=function(d,g){return Jo(this),this.i=null,d=Vc(this,d),S1(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function M1(d,g,y){T1(d,g),0<y.length&&(d.i=null,d.g.set(Vc(d,g),w(y)),d.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var I=g[y];let $=encodeURIComponent(String(I)),ee=this.V(I);for(I=0;I<ee.length;I++){var F=$;ee[I]!==""&&(F+="="+encodeURIComponent(String(ee[I]))),d.push(F)}}return this.i=d.join("&")};function Vc(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function JU(d,g){g&&!d.j&&(Jo(d),d.i=null,d.g.forEach(function(y,I){var F=I.toLowerCase();I!=F&&(T1(this,I),M1(this,F,y))},d)),d.j=g}function ZU(d,g){let y=new id;if(a.Image){let I=new Image;I.onload=p(Zo,y,"TestLoadImage: loaded",!0,g,I),I.onerror=p(Zo,y,"TestLoadImage: error",!1,g,I),I.onabort=p(Zo,y,"TestLoadImage: abort",!1,g,I),I.ontimeout=p(Zo,y,"TestLoadImage: timeout",!1,g,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else g(!1)}function e4(d,g){let y=new id,I=new AbortController,F=setTimeout(()=>{I.abort(),Zo(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:I.signal}).then($=>{clearTimeout(F),$.ok?Zo(y,"TestPingServer: ok",!0,g):Zo(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),Zo(y,"TestPingServer: error",!1,g)})}function Zo(d,g,y,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(y)}catch{}}function t4(){this.g=new LU}function n4(d,g,y){let I=y||"";try{C1(d,function(F,$){let ee=F;l(F)&&(ee=_0(F)),g.push(I+$+"="+encodeURIComponent(ee))})}catch(F){throw g.push(I+"type="+encodeURIComponent("_badmap")),F}}function ld(d){this.l=d.Ub||null,this.j=d.eb||!1}_(ld,b0),ld.prototype.g=function(){return new dp(this.l,this.j)},ld.prototype.i=(function(d){return function(){return d}})({});function dp(d,g){Cn.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(dp,Cn),n=dp.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,dd(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ud(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,dd(this)),this.g&&(this.readyState=3,dd(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;A1(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function A1(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?ud(this):dd(this),this.readyState==3&&A1(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,ud(this))},n.Qa=function(d){this.g&&(this.response=d,ud(this))},n.ga=function(){this.g&&ud(this)};function ud(d){d.readyState=4,d.l=null,d.j=null,d.v=null,dd(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function dd(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(dp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function P1(d){let g="";return B(d,function(y,I){g+=I,g+=":",g+=y,g+=`\r
`}),g}function A0(d,g,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=P1(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):ut(d,g,y))}function It(d){Cn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(It,Cn);var r4=/^https?$/i,i4=["POST","PUT"];n=It.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():C0.g(),this.v=this.o?s1(this.o):s1(C0),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch($){R1(this,$);return}if(d=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)y.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let $ of I.keys())y.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),F=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(i4,g,void 0))||I||F||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[$,ee]of y)this.g.setRequestHeader($,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{N1(this),this.u=!0,this.g.send(d),this.u=!1}catch($){R1(this,$)}};function R1(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,k1(d),hp(d)}function k1(d){d.A||(d.A=!0,Fn(d,"complete"),Fn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Fn(this,"complete"),Fn(this,"abort"),hp(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hp(this,!0)),It.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?O1(this):this.bb())},n.bb=function(){O1(this)};function O1(d){if(d.h&&typeof s<"u"&&(!d.v[1]||so(d)!=4||d.Z()!=2)){if(d.u&&so(d)==4)n1(d.Ea,0,d);else if(Fn(d,"readystatechange"),so(d)==4){d.h=!1;try{let ee=d.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var I;if(I=ee===0){var F=String(d.D).match(I1)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),I=!r4.test(F?F.toLowerCase():"")}y=I}if(y)Fn(d,"complete"),Fn(d,"success");else{d.m=6;try{var $=2<so(d)?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.Z()+"]",k1(d)}}finally{hp(d)}}}}function hp(d,g){if(d.g){N1(d);let y=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||Fn(d,"ready");try{y.onreadystatechange=I}catch{}}}function N1(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function so(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<so(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),FU(g)}};function F1(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function o4(d){let g={};d=(d.g&&2<=so(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(k(d[I]))continue;var y=R(d[I]);let F=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let $=g[F]||[];g[F]=$,$.push(y)}M(g,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hd(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function L1(d){this.Aa=0,this.i=[],this.j=new id,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hd("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hd("baseRetryDelayMs",5e3,d),this.cb=hd("retryDelaySeedMs",1e4,d),this.Wa=hd("forwardChannelMaxRetries",2,d),this.wa=hd("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new v1(d&&d.concurrentRequestLimit),this.Da=new t4,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=L1.prototype,n.la=8,n.G=1,n.connect=function(d,g,y,I){Ln(0),this.W=d,this.H=g||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=q1(this,null,this.W),pp(this)};function P0(d){if(V1(d),d.G==3){var g=d.U++,y=oo(d.I);if(ut(y,"SID",d.K),ut(y,"RID",g),ut(y,"TYPE","terminate"),fd(d,y),g=new Xo(d,d.j,g),g.L=2,g.v=up(oo(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=g.v,y=!0),y||(g.g=G1(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ap(g)}W1(d)}function fp(d){d.g&&(k0(d),d.g.cancel(),d.g=null)}function V1(d){fp(d),d.u&&(a.clearTimeout(d.u),d.u=null),gp(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function pp(d){if(!_1(d.h)&&!d.s){d.s=!0;var g=d.Ga;tt||no(),yn||(tt(),yn=!0),jt.add(g,d),d.B=0}}function s4(d,g){return b1(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=rd(f(d.Ga,d,g),z1(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let F=new Xo(this,this.j,d),$=this.o;if(this.S&&($?($=x($),P($,this.S)):$=this.S),this.m!==null||this.O||(F.H=$,$=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=U1(this,F,g),y=oo(this.I),ut(y,"RID",d),ut(y,"CVER",22),this.D&&ut(y,"X-HTTP-Session-Id",this.D),fd(this,y),$&&(this.O?g="headers="+encodeURIComponent(String(P1($)))+"&"+g:this.m&&A0(y,this.m,$)),M0(this.h,F),this.Ua&&ut(y,"TYPE","init"),this.P?(ut(y,"$req",g),ut(y,"SID","null"),F.T=!0,x0(F,y,null)):x0(F,y,g),this.G=2}}else this.G==3&&(d?j1(this,d):this.i.length==0||_1(this.h)||j1(this))};function j1(d,g){var y;g?y=g.l:y=d.U++;let I=oo(d.I);ut(I,"SID",d.K),ut(I,"RID",y),ut(I,"AID",d.T),fd(d,I),d.m&&d.o&&A0(I,d.m,d.o),y=new Xo(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=U1(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),M0(d.h,y),x0(y,I,g)}function fd(d,g){d.H&&B(d.H,function(y,I){ut(g,I,y)}),d.l&&C1({},function(y,I){ut(g,I,y)})}function U1(d,g,y){y=Math.min(d.i.length,y);var I=d.l?f(d.l.Na,d.l,d):null;e:{var F=d.i;let $=-1;for(;;){let ee=["count="+y];$==-1?0<y?($=F[0].g,ee.push("ofs="+$)):$=0:ee.push("ofs="+$);let nt=!0;for(let vn=0;vn<y;vn++){let je=F[vn].g,In=F[vn].map;if(je-=$,0>je)$=Math.max(0,F[vn].g-100),nt=!1;else try{n4(In,ee,"req"+je+"_")}catch{I&&I(In)}}if(nt){I=ee.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,I}function B1(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;tt||no(),yn||(tt(),yn=!0),jt.add(g,d),d.v=0}}function R0(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=rd(f(d.Fa,d),z1(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,$1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=rd(f(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ln(10),fp(this),$1(this))};function k0(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function $1(d){d.g=new Xo(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=oo(d.qa);ut(g,"RID","rpc"),ut(g,"SID",d.K),ut(g,"AID",d.T),ut(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&ut(g,"TO",d.ja),ut(g,"TYPE","xmlhttp"),fd(d,g),d.m&&d.o&&A0(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=up(oo(g)),y.m=null,y.P=!0,g1(y,d)}n.Za=function(){this.C!=null&&(this.C=null,fp(this),R0(this),Ln(19))};function gp(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function H1(d,g){var y=null;if(d.g==g){gp(d),k0(d),d.g=null;var I=2}else if(S0(d.h,g))y=g.D,w1(d.h,g),I=1;else return;if(d.G!=0){if(g.o)if(I==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var F=d.B;I=ip(),Fn(I,new d1(I,y)),pp(d)}else B1(d);else if(F=g.s,F==3||F==0&&0<g.X||!(I==1&&s4(d,g)||I==2&&R0(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),F){case 1:_a(d,5);break;case 4:_a(d,10);break;case 3:_a(d,6);break;default:_a(d,2)}}}function z1(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function _a(d,g){if(d.j.info("Error code "+g),g==2){var y=f(d.fb,d),I=d.Xa;let F=!I;I=new va(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cp(I,"https"),up(I),F?ZU(I.toString(),y):e4(I.toString(),y)}else Ln(2);d.G=0,d.l&&d.l.sa(g),W1(d),V1(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ln(2)):(this.j.info("Failed to ping google.com"),Ln(1))};function W1(d){if(d.G=0,d.ka=[],d.l){let g=E1(d.h);(g.length!=0||d.i.length!=0)&&(b(d.ka,g),b(d.ka,d.i),d.h.i.length=0,w(d.i),d.i.length=0),d.l.ra()}}function q1(d,g,y){var I=y instanceof va?oo(y):new va(y);if(I.g!="")g&&(I.g=g+"."+I.g),lp(I,I.s);else{var F=a.location;I=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;var $=new va(null);I&&cp($,I),g&&($.g=g),F&&lp($,F),y&&($.l=y),I=$}return y=d.D,g=d.ya,y&&g&&ut(I,y,g),ut(I,"VER",d.la),fd(d,I),I}function G1(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new It(new ld({eb:y})):new It(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function K1(){}n=K1.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function mp(){}mp.prototype.g=function(d,g){return new fr(d,g)};function fr(d,g){Cn.call(this),this.g=new L1(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!k(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!k(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new jc(this)}_(fr,Cn),fr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fr.prototype.close=function(){P0(this.g)},fr.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=_0(d),d=y);g.i.push(new HU(g.Ya++,d)),g.G==3&&pp(g)},fr.prototype.N=function(){this.g.l=null,delete this.j,P0(this.g),delete this.g,fr.aa.N.call(this)};function Y1(d){w0.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}_(Y1,w0);function Q1(){E0.call(this),this.status=1}_(Q1,E0);function jc(d){this.g=d}_(jc,K1),jc.prototype.ua=function(){Fn(this.g,"a")},jc.prototype.ta=function(d){Fn(this.g,new Y1(d))},jc.prototype.sa=function(d){Fn(this.g,new Q1)},jc.prototype.ra=function(){Fn(this.g,"b")},mp.prototype.createWebChannel=mp.prototype.g,fr.prototype.send=fr.prototype.o,fr.prototype.open=fr.prototype.m,fr.prototype.close=fr.prototype.close,tx=ko.createWebChannelTransport=function(){return new mp},ex=ko.getStatEventTarget=function(){return ip()},ZI=ko.Event=ma,qy=ko.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},op.NO_ERROR=0,op.TIMEOUT=8,op.HTTP_ERROR=6,Jh=ko.ErrorCode=op,h1.COMPLETE="complete",JI=ko.EventType=h1,a1.EventType=td,td.OPEN="a",td.CLOSE="b",td.ERROR="c",td.MESSAGE="d",Cn.prototype.listen=Cn.prototype.K,tu=ko.WebChannel=a1,mK=ko.FetchXmlHttpFactory=ld,It.prototype.listenOnce=It.prototype.L,It.prototype.getLastError=It.prototype.Ka,It.prototype.getLastErrorCode=It.prototype.Ba,It.prototype.getStatus=It.prototype.Z,It.prototype.getResponseJson=It.prototype.Oa,It.prototype.getResponseText=It.prototype.oa,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Ha,XI=ko.XhrIo=It}).apply(typeof Wy<"u"?Wy:typeof self<"u"?self:typeof window<"u"?window:{});var Y2="@firebase/firestore",Q2="4.8.0";var gn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");var bu="11.10.0";var fc=new ki("@firebase/firestore");function nu(){return fc.logLevel}function se(n,...e){if(fc.logLevel<=Ae.DEBUG){let t=e.map(zD);fc.debug(`Firestore (${bu}): ${n}`,...t)}}function Oo(n,...e){if(fc.logLevel<=Ae.ERROR){let t=e.map(zD);fc.error(`Firestore (${bu}): ${n}`,...t)}}function qs(n,...e){if(fc.logLevel<=Ae.WARN){let t=e.map(zD);fc.warn(`Firestore (${bu}): ${n}`,...t)}}function zD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ge(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,$F(n,r,t)}function $F(n,e,t){let r=`FIRESTORE (${bu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Oo(r),new Error(r)}function Ge(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||$F(e,i,r)}function be(n,e){return n}var z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ne=class extends Ir{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ui=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Zy=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},sx=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gn.UNAUTHENTICATED))}shutdown(){}},ax=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},cx=class{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ge(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ui,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ui)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string",31837,{l:r}),new Zy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new gn(e)}},lx=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},ux=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new lx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ev=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},dx=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ge(this.o===void 0,3512);let r=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,se("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ev(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ev(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function yK(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function HF(){return new TextEncoder}var of=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=yK(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Te(n,e){return n<e?-1:n>e?1:0}function hx(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Te(r,i);{let o=HF(),s=vK(o.encode(X2(n,t)),o.encode(X2(e,t)));return s!==0?s:Te(r,i)}}t+=r>65535?2:1}return Te(n.length,e.length)}function X2(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function vK(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Te(n[t],e[t]);return Te(n.length,e.length)}function lu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var J2="__name__",tv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ge(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ge(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Te(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):hx(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ro.fromString(e.substring(4,e.length-2))}},yt=class n extends tv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ne(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},_K=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dr=class n extends tv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return _K.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===J2}static keyField(){return new n([J2])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new ne(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ne(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var pe=class n{constructor(e){this.path=e}static fromPath(e){return new n(yt.fromString(e))}static fromName(e){return new n(yt.fromString(e).popFirst(5))}static empty(){return new n(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new yt(e.slice()))}};function zF(n,e,t){if(!t)throw new ne(z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bK(n,e,t,r){if(e===!0&&r===!0)throw new ne(z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Z2(n){if(!pe.isDocumentKey(n))throw new ne(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eF(n){if(pe.isDocumentKey(n))throw new ne(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WF(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Nv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ge(12329,{type:typeof n})}function ar(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Nv(n);throw new ne(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wK(n,e){if(e<=0)throw new ne(z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Yt(n,e){let t={typeString:n};return e&&(t.value=e),t}function bf(n,e){if(!WF(n))throw new ne(z.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ne(z.INVALID_ARGUMENT,t);return!0}var tF=-62135596800,nF=1e6,et=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*nF);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<tF)throw new ne(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nF}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-tF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:Yt("string",et._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};var Ee=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new et(0,0))}static max(){return new n(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var sf=-1,fx=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};fx.UNKNOWN_ID=-1;function EK(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(r===1e9?new et(t+1,0):new et(t,r));return new pc(i,pe.empty(),e)}function CK(n){return new pc(n.readTime,n.key,sf)}var pc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ee.min(),pe.empty(),sf)}static max(){return new n(Ee.max(),pe.empty(),sf)}};function IK(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Te(n.largestBatchId,e.largestBatchId))}var xK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",px=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function wu(n){return S(this,null,function*(){if(n.code!==z.FAILED_PRECONDITION||n.message!==xK)throw n;se("LocalStore","Unexpectedly lost primary lease")})}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(u=>{s[l]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function DK(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Eu(n){return n.name==="IndexedDbTransactionError"}var WD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),qD=-1;function Fv(n){return n==null}function af(n){return n===0&&1/n==-1/0}function TK(n){return typeof n=="number"&&Number.isInteger(n)&&!af(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var qF="";function SK(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rF(e)),e=MK(n.get(t),e);return rF(e)}function MK(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case qF:t+="";break;default:t+=o}}return t}function rF(n){return n+qF+""}var AK="remoteDocuments",GF="owner";var KF="mutationQueues";var YF="mutations";var QF="documentMutations",PK="remoteDocumentsV14";var XF="remoteDocumentGlobal";var JF="targets";var ZF="targetDocuments";var eL="targetGlobal",tL="collectionParents";var nL="clientMetadata";var rL="bundles";var iL="namedQueries";var RK="indexConfiguration";var kK="indexState";var OK="indexEntries";var oL="documentOverlays";var NK="globals";var FK=[KF,YF,QF,AK,JF,GF,eL,ZF,nL,XF,tL,rL,iL],DCe=[...FK,oL],LK=[KF,YF,QF,PK,JF,GF,eL,ZF,nL,XF,tL,rL,iL,oL],VK=LK,jK=[...VK,RK,kK,OK];var TCe=[...jK,NK];function iF(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Js(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var kt=class n{constructor(e,t){this.comparator=e,this.root=t||ji.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ji.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ji.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new su(this.root,e,this.comparator,!1)}getReverseIterator(){return new su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new su(this.root,e,this.comparator,!0)}},su=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ji=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}};ji.EMPTY=null,ji.RED=!0,ji.BLACK=!1;ji.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new ji(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mn=class n{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nv(this.data.getIterator())}getIteratorFrom(e){return new nv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},nv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ur=class n{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new n([])}unionWith(e){let t=new mn(Dr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lu(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var rv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var kn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rv("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};kn.EMPTY_BYTE_STRING=new kn("");var UK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function No(n){if(Ge(!!n,39018),typeof n=="string"){let e=0,t=UK.exec(n);if(Ge(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(n.seconds),nanos:mt(n.nanos)}}function mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fo(n){return typeof n=="string"?kn.fromBase64String(n):kn.fromUint8Array(n)}var aL="server_timestamp",cL="__type__",lL="__previous_value__",uL="__local_write_time__";function GD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[cL])===null||t===void 0?void 0:t.stringValue)===aL}function Lv(n){let e=n.mapValue.fields[lL];return GD(e)?Lv(e):e}function cf(n){let e=No(n.mapValue.fields[uL].timestampValue);return new et(e.seconds,e.nanos)}var gx=class{constructor(e,t,r,i,o,s,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},iv="(default)",ov=class n{constructor(e,t){this.projectId=e,this.database=t||iv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===iv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var KD="__type__",dL="__max__",Gy={mapValue:{fields:{__type__:{stringValue:dL}}}},YD="__vector__",uu="value";function Gs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?GD(n)?4:fL(n)?9007199254740991:hL(n)?10:11:ge(28295,{value:n})}function Hi(n,e){if(n===e)return!0;let t=Gs(n);if(t!==Gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cf(n).isEqual(cf(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=No(i.timestampValue),a=No(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Fo(i.bytesValue).isEqual(Fo(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return mt(i.geoPointValue.latitude)===mt(o.geoPointValue.latitude)&&mt(i.geoPointValue.longitude)===mt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return mt(i.integerValue)===mt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=mt(i.doubleValue),a=mt(o.doubleValue);return s===a?af(s)===af(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return lu(n.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(iF(s)!==iF(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Hi(s[c],a[c])))return!1;return!0})(n,e);default:return ge(52216,{left:n})}}function lf(n,e){return(n.values||[]).find(t=>Hi(t,e))!==void 0}function du(n,e){if(n===e)return 0;let t=Gs(n),r=Gs(e);if(t!==r)return Te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Te(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=mt(o.integerValue||o.doubleValue),c=mt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return oF(n.timestampValue,e.timestampValue);case 4:return oF(cf(n),cf(e));case 5:return hx(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Fo(o),c=Fo(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=Te(a[l],c[l]);if(u!==0)return u}return Te(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=Te(mt(o.latitude),mt(s.latitude));return a!==0?a:Te(mt(o.longitude),mt(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return sF(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,l,u;let h=o.fields||{},f=s.fields||{},p=(a=h[uu])===null||a===void 0?void 0:a.arrayValue,_=(c=f[uu])===null||c===void 0?void 0:c.arrayValue,w=Te(((l=p?.values)===null||l===void 0?void 0:l.length)||0,((u=_?.values)===null||u===void 0?void 0:u.length)||0);return w!==0?w:sF(p,_)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Gy.mapValue&&s===Gy.mapValue)return 0;if(o===Gy.mapValue)return 1;if(s===Gy.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){let f=hx(c[h],u[h]);if(f!==0)return f;let p=du(a[c[h]],l[u[h]]);if(p!==0)return p}return Te(c.length,u.length)})(n.mapValue,e.mapValue);default:throw ge(23264,{le:t})}}function oF(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Te(n,e);let t=No(n),r=No(e),i=Te(t.seconds,r.seconds);return i!==0?i:Te(t.nanos,r.nanos)}function sF(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=du(t[i],r[i]);if(o)return o}return Te(t.length,r.length)}function hu(n){return mx(n)}function mx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=No(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Fo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=mx(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${mx(t.fields[s])}`;return i+"}"})(n.mapValue):ge(61005,{value:n})}function Qy(n){switch(Gs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Lv(n);return e?16+Qy(e):16;case 5:return 2*n.stringValue.length;case 6:return Fo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Qy(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Js(r.fields,(o,s)=>{i+=o.length+Qy(s)}),i})(n.mapValue);default:throw ge(13486,{value:n})}}function aF(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yx(n){return!!n&&"integerValue"in n}function QD(n){return!!n&&"arrayValue"in n}function cF(n){return!!n&&"nullValue"in n}function lF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xy(n){return!!n&&"mapValue"in n}function hL(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[KD])===null||t===void 0?void 0:t.stringValue)===YD}function ef(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Js(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ef(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ef(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dL}var MCe={mapValue:{fields:{[KD]:{stringValue:YD},[uu]:{arrayValue:{}}}}};var xr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ef(t)}setAll(e){let t=Dr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ef(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Xy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Xy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Js(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ef(this.value))}};function pL(n){let e=[];return Js(n.fields,(t,r)=>{let i=new Dr([t]);if(Xy(r)){let o=pL(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ur(e)}var di=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ee.min(),Ee.min(),Ee.min(),xr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ee.min(),Ee.min(),xr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ee.min(),Ee.min(),xr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fu=class{constructor(e,t){this.position=e,this.inclusive=t}};function uF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=pe.comparator(pe.fromName(s.referenceValue),t.key):r=du(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function dF(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hi(n.position[t],e.position[t]))return!1;return!0}var gc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function BK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var sv=class{},Kt=class n extends sv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new _x(e,t,r):t==="array-contains"?new Ex(e,r):t==="in"?new Cx(e,r):t==="not-in"?new Ix(e,r):t==="array-contains-any"?new xx(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new bx(e,r):new wx(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(du(t,this.value)):t!==null&&Gs(this.value)===Gs(t)&&this.matchesComparison(du(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},hi=class n extends sv{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return gL(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function gL(n){return n.op==="and"}function mL(n){return $K(n)&&gL(n)}function $K(n){for(let e of n.filters)if(e instanceof hi)return!1;return!0}function vx(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+hu(n.value);if(mL(n))return n.filters.map(e=>vx(e)).join(",");{let e=n.filters.map(t=>vx(t)).join(",");return`${n.op}(${e})`}}function yL(n,e){return n instanceof Kt?(function(r,i){return i instanceof Kt&&r.op===i.op&&r.field.isEqual(i.field)&&Hi(r.value,i.value)})(n,e):n instanceof hi?(function(r,i){return i instanceof hi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&yL(s,i.filters[a]),!0):!1})(n,e):void ge(19439)}function vL(n){return n instanceof Kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${hu(t.value)}`})(n):n instanceof hi?(function(t){return t.op.toString()+" {"+t.getFilters().map(vL).join(" ,")+"}"})(n):"Filter"}var _x=class extends Kt{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){let t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}},bx=class extends Kt{constructor(e,t){super(e,"in",t),this.keys=_L("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},wx=class extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=_L("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function _L(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>pe.fromName(r.referenceValue))}var Ex=class extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return QD(t)&&lf(t.arrayValue,this.value)}},Cx=class extends Kt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&lf(this.value.arrayValue,t)}},Ix=class extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!lf(this.value.arrayValue,t)}},xx=class extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!QD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>lf(this.value.arrayValue,r))}};var Dx=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function hF(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Dx(n,e,t,r,i,o,s)}function XD(n){let e=be(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>vx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Fv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hu(r)).join(",")),e.Pe=t}return e.Pe}function JD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BK(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dF(n.startAt,e.startAt)&&dF(n.endAt,e.endAt)}function Tx(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ks=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function HK(n,e,t,r,i,o,s,a){return new Ks(n,e,t,r,i,o,s,a)}function Vv(n){return new Ks(n)}function fF(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bL(n){return n.collectionGroup!==null}function tf(n){let e=be(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new mn(Dr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new gc(o,r))}),t.has(Dr.keyField().canonicalString())||e.Te.push(new gc(Dr.keyField(),r))}return e.Te}function Ui(n){let e=be(n);return e.Ie||(e.Ie=zK(e,tf(n))),e.Ie}function zK(n,e){if(n.limitType==="F")return hF(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new gc(i.field,o)});let t=n.endAt?new fu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fu(n.startAt.position,n.startAt.inclusive):null;return hF(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Sx(n,e){let t=n.filters.concat([e]);return new Ks(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function av(n,e,t){return new Ks(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jv(n,e){return JD(Ui(n),Ui(e))&&n.limitType===e.limitType}function wL(n){return`${XD(Ui(n))}|lt:${n.limitType}`}function ru(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>vL(i)).join(", ")}]`),Fv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hu(i)).join(",")),`Target(${r})`})(Ui(n))}; limitType=${n.limitType})`}function Uv(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):pe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of tf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let l=uF(s,a,c);return s.inclusive?l<=0:l<0})(r.startAt,tf(r),i)||r.endAt&&!(function(s,a,c){let l=uF(s,a,c);return s.inclusive?l>=0:l>0})(r.endAt,tf(r),i))})(n,e)}function WK(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EL(n){return(e,t)=>{let r=!1;for(let i of tf(n)){let o=qK(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function qK(n,e,t){let r=n.field.isKeyField()?pe.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?du(c,l):ge(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:n.dir})}}var Lo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return sL(this.inner)}size(){return this.innerSize}};var GK=new kt(pe.comparator);function Vo(){return GK}var CL=new kt(pe.comparator);function Zh(...n){let e=CL;for(let t of n)e=e.insert(t.key,t);return e}function IL(n){let e=CL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function cc(){return nf()}function xL(){return nf()}function nf(){return new Lo(n=>n.toString(),(n,e)=>n.isEqual(e))}var KK=new kt(pe.comparator),YK=new mn(pe.comparator);function Oe(...n){let e=YK;for(let t of n)e=e.add(t);return e}var QK=new mn(Te);function XK(){return QK}function ZD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function DL(n){return{integerValue:""+n}}function JK(n,e){return TK(e)?DL(e):ZD(n,e)}var pu=class{constructor(){this._=void 0}};function ZK(n,e,t){return n instanceof mc?(function(i,o){let s={fields:{[cL]:{stringValue:aL},[uL]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&GD(o)&&(o=Lv(o)),o&&(s.fields[lL]=o),{mapValue:s}})(t,e):n instanceof Ys?SL(n,e):n instanceof yc?ML(n,e):(function(i,o){let s=TL(i,o),a=pF(s)+pF(i.Ee);return yx(s)&&yx(i.Ee)?DL(a):ZD(i.serializer,a)})(n,e)}function eY(n,e,t){return n instanceof Ys?SL(n,e):n instanceof yc?ML(n,e):t}function TL(n,e){return n instanceof gu?(function(r){return yx(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var mc=class extends pu{},Ys=class extends pu{constructor(e){super(),this.elements=e}};function SL(n,e){let t=AL(e);for(let r of n.elements)t.some(i=>Hi(i,r))||t.push(r);return{arrayValue:{values:t}}}var yc=class extends pu{constructor(e){super(),this.elements=e}};function ML(n,e){let t=AL(e);for(let r of n.elements)t=t.filter(i=>!Hi(i,r));return{arrayValue:{values:t}}}var gu=class extends pu{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function pF(n){return mt(n.integerValue||n.doubleValue)}function AL(n){return QD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var cv=class{constructor(e,t){this.field=e,this.transform=t}};function tY(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ys&&i instanceof Ys||r instanceof yc&&i instanceof yc?lu(r.elements,i.elements,Hi):r instanceof gu&&i instanceof gu?Hi(r.Ee,i.Ee):r instanceof mc&&i instanceof mc})(n.transform,e.transform)}var Mx=class{constructor(e,t){this.version=e,this.transformResults=t}},Bi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Jy(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var mu=class{};function PL(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new uf(n.key,Bi.none()):new vc(n.key,n.data,Bi.none());{let t=n.data,r=xr.empty(),i=new mn(Dr.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new zi(n.key,r,new Ur(i.toArray()),Bi.none())}}function nY(n,e,t){n instanceof vc?(function(i,o,s){let a=i.value.clone(),c=mF(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof zi?(function(i,o,s){if(!Jy(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=mF(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(RL(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function rf(n,e,t,r){return n instanceof vc?(function(o,s,a,c){if(!Jy(o.precondition,s))return a;let l=o.value.clone(),u=yF(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof zi?(function(o,s,a,c){if(!Jy(o.precondition,s))return a;let l=yF(o.fieldTransforms,c,s),u=s.data;return u.setAll(RL(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))})(n,e,t,r):(function(o,s,a){return Jy(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function rY(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=TL(r.transform,i||null);o!=null&&(t===null&&(t=xr.empty()),t.set(r.field,o))}return t||null}function gF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&lu(r,i,(o,s)=>tY(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var vc=class extends mu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},zi=class extends mu{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function RL(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function mF(n,e,t){let r=new Map;Ge(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,eY(s,a,t[i]))}return r}function yF(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,ZK(o,s,e))}return r}var uf=class extends mu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ax=class extends mu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Px=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&nY(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=rf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=rf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=xL();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=PL(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&lu(this.mutations,e.mutations,(t,r)=>gF(t,r))&&lu(this.baseMutations,e.baseMutations,(t,r)=>gF(t,r))}},Rx=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ge(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return KK})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var kx=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ox=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var qt,Le;function iY(n){switch(n){case z.OK:return ge(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ge(15467,{code:n})}}function kL(n){if(n===void 0)return Oo("GRPC error has no .code"),z.UNKNOWN;switch(n){case qt.OK:return z.OK;case qt.CANCELLED:return z.CANCELLED;case qt.UNKNOWN:return z.UNKNOWN;case qt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case qt.INTERNAL:return z.INTERNAL;case qt.UNAVAILABLE:return z.UNAVAILABLE;case qt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case qt.NOT_FOUND:return z.NOT_FOUND;case qt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case qt.ABORTED:return z.ABORTED;case qt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case qt.DATA_LOSS:return z.DATA_LOSS;default:return ge(39323,{code:n})}}(Le=qt||(qt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";var vF=null;var oY=new Ro([4294967295,4294967295],0);function _F(n){let e=HF().encode(n),t=new QI;return t.update(e),new Uint8Array(t.digest())}function bF(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ro([t,r],0),new Ro([i,o],0)]}var Nx=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lc(`Invalid padding: ${t}`);if(r<0)throw new lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new lc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ro.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Ro.fromNumber(r)));return i.compare(oY)===1&&(i=new Ro([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=_F(e),[r,i]=bF(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=_F(e),[r,i]=bF(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},lc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var lv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,df.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ee.min(),i,new kt(Te),Vo(),Oe())}},df=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Oe(),Oe(),Oe())}};var au=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},uv=class{constructor(e,t){this.targetId=e,this.De=t}},dv=class{constructor(e,t,r=kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},hv=class{constructor(){this.ve=0,this.Ce=wF(),this.Fe=kn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Oe(),t=Oe(),r=Oe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ge(38017,{changeType:o})}}),new df(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=wF()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Fx=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vo(),this.je=Ky(),this.Je=Ky(),this.He=new kt(Te)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(Tx(o))if(r===0){let s=new pe(o.path);this.Xe(t,s,di.newNoDocument(s,Ee.min()))}else Ge(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}vF?.ct((function(u,h,f,p,_){var w,b,T,k,V,j;let U={localCacheCount:u,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},B=h.unchangedNames;return B&&(U.bloomFilter={applied:_===0,hashCount:(w=B?.hashCount)!==null&&w!==void 0?w:0,bitmapLength:(k=(T=(b=B?.bits)===null||b===void 0?void 0:b.bitmap)===null||T===void 0?void 0:T.length)!==null&&k!==void 0?k:0,padding:(j=(V=B?.bits)===null||V===void 0?void 0:V.padding)!==null&&j!==void 0?j:0,mightContain:M=>{var x;return(x=p?.mightContain(M))!==null&&x!==void 0&&x}}),U})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Fo(r).toUint8Array()}catch(c){if(c instanceof rv)return qs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Nx(s,i,o)}catch(c){return qs(c instanceof lc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&Tx(a.target)){let c=new pe(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,di.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Oe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new lv(e,t,this.He,this.ze,r);return this.ze=Vo(),this.je=Ky(),this.Je=Ky(),this.He=new kt(Te),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new hv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new mn(Te),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new mn(Te),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new hv),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Ky(){return new kt(pe.comparator)}function wF(){return new kt(pe.comparator)}var sY={asc:"ASCENDING",desc:"DESCENDING"},aY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cY={and:"AND",or:"OR"},Lx=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Vx(n,e){return n.useProto3Json||Fv(e)?e:{value:e}}function fv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lY(n,e){return fv(n,e.toTimestamp())}function $i(n){return Ge(!!n,49232),Ee.fromTimestamp((function(t){let r=No(t);return new et(r.seconds,r.nanos)})(n))}function eT(n,e){return jx(n,e).canonicalString()}function jx(n,e){let t=(function(i){return new yt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function NL(n){let e=yt.fromString(n);return Ge(UL(e),10190,{key:e.toString()}),e}function Ux(n,e){return eT(n.databaseId,e.path)}function nx(n,e){let t=NL(e);if(t.get(1)!==n.databaseId.projectId)throw new ne(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ne(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(LL(t))}function FL(n,e){return eT(n.databaseId,e)}function uY(n){let e=NL(n);return e.length===4?yt.emptyPath():LL(e)}function Bx(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LL(n){return Ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function EF(n,e,t){return{name:Ux(n,e),fields:t.value.mapValue.fields}}function dY(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ge(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,u){return l.useProto3Json?(Ge(u===void 0||typeof u=="string",58123),kn.fromBase64String(u||"")):(Ge(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),kn.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let u=l.code===void 0?z.UNKNOWN:kL(l.code);return new ne(u,l.message||"")})(s);t=new dv(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=nx(n,r.document.name),o=$i(r.document.updateTime),s=r.document.createTime?$i(r.document.createTime):Ee.min(),a=new xr({mapValue:{fields:r.document.fields}}),c=di.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new au(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=nx(n,r.document),o=r.readTime?$i(r.readTime):Ee.min(),s=di.newNoDocument(i,o),a=r.removedTargetIds||[];t=new au([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=nx(n,r.document),o=r.removedTargetIds||[];t=new au([],o,i,null)}else{if(!("filter"in e))return ge(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Ox(i,o),a=r.targetId;t=new uv(a,s)}}return t}function hY(n,e){let t;if(e instanceof vc)t={update:EF(n,e.key,e.value)};else if(e instanceof uf)t={delete:Ux(n,e.key)};else if(e instanceof zi)t={update:EF(n,e.key,e.data),updateMask:wY(e.fieldMask)};else{if(!(e instanceof Ax))return ge(16599,{Rt:e.type});t={verify:Ux(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof mc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ys)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gu)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw ge(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:lY(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ge(27497)})(n,e.precondition)),t}function fY(n,e){return n&&n.length>0?(Ge(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?$i(i.updateTime):$i(o);return s.isEqual(Ee.min())&&(s=$i(o)),new Mx(s,i.transformResults||[])})(t,e))):[]}function pY(n,e){return{documents:[FL(n,e.path)]}}function gY(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=FL(n,i);let o=(function(l){if(l.length!==0)return jL(hi.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(u=>(function(f){return{field:iu(f.field),direction:vY(f.dir)}})(u))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Vx(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function mY(n){let e=uY(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ge(r===1,65062);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];t.where&&(o=(function(h){let f=VL(h);return f instanceof hi&&mL(f)?f.getFilters():[f]})(t.where));let s=[];t.orderBy&&(s=(function(h){return h.map(f=>(function(_){return new gc(ou(_.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(f))})(t.orderBy));let a=null;t.limit&&(a=(function(h){let f;return f=typeof h=="object"?h.value:h,Fv(f)?null:f})(t.limit));let c=null;t.startAt&&(c=(function(h){let f=!!h.before,p=h.values||[];return new fu(p,f)})(t.startAt));let l=null;return t.endAt&&(l=(function(h){let f=!h.before,p=h.values||[];return new fu(p,f)})(t.endAt)),HK(e,i,s,o,a,"F",c,l)}function yY(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function VL(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ou(t.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ou(t.unaryFilter.field);return Kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ou(t.unaryFilter.field);return Kt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ou(t.unaryFilter.field);return Kt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Kt.create(ou(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return hi.create(t.compositeFilter.filters.map(r=>VL(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(t.compositeFilter.op))})(n):ge(30097,{filter:n})}function vY(n){return sY[n]}function _Y(n){return aY[n]}function bY(n){return cY[n]}function iu(n){return{fieldPath:n.canonicalString()}}function ou(n){return Dr.fromServerFormat(n.fieldPath)}function jL(n){return n instanceof Kt?(function(t){if(t.op==="=="){if(lF(t.value))return{unaryFilter:{field:iu(t.field),op:"IS_NAN"}};if(cF(t.value))return{unaryFilter:{field:iu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lF(t.value))return{unaryFilter:{field:iu(t.field),op:"IS_NOT_NAN"}};if(cF(t.value))return{unaryFilter:{field:iu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:iu(t.field),op:_Y(t.op),value:t.value}}})(n):n instanceof hi?(function(t){let r=t.getFilters().map(i=>jL(i));return r.length===1?r[0]:{compositeFilter:{op:bY(t.op),filters:r}}})(n):ge(54877,{filter:n})}function wY(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function UL(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var hf=class n{constructor(e,t,r,i,o=Ee.min(),s=Ee.min(),a=kn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $x=class{constructor(e){this.gt=e}};function EY(n){let e=mY({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?av(e,e.limit,"L"):e}var pv=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(mt(e.integerValue));else if("doubleValue"in e){let r=mt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),af(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=No(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Fo(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?fL(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):hL(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ge(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=uu,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(mt(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),pe.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};pv.Ut=new pv;var Hx=class{constructor(){this.Dn=new zx}addToCollectionParentIndex(e,t){return this.Dn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(pc.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(pc.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},zx=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mn(yt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mn(yt.comparator)).toArray()}};var ACe=new Uint8Array(0);var CF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BL=41943040,jr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};jr.DEFAULT_COLLECTION_PERCENTILE=10,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jr.DEFAULT=new jr(BL,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jr.DISABLED=new jr(-1,0,0);var ff=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var IF="LruGarbageCollector",CY=1048576;function xF([n,e],[t,r]){let i=Te(n,t);return i===0?Te(e,r):i}var Wx=class{constructor(e){this.Tr=e,this.buffer=new mn(xF),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();xF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},qx=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){se(IF,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>S(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Eu(t)?se(IF,"Ignoring IndexedDB error during garbage collection: ",t):yield wu(t)}yield this.Rr(3e5)}))}},Gx=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(WD.ue);let r=new Wx(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(CF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CF):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),nu()<=Ae.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}};function IY(n,e){return new Gx(n,e)}var Kx=class{constructor(){this.changes=new Lo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,di.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Yx=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Qx=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&rf(r.mutation,i,Ur.empty(),et.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Oe()){let i=cc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Zh();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=cc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Oe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Vo(),s=nf(),a=(function(){return nf()})();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof zi)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),rf(u.mutation,l,u.mutation.getFieldMask(),et.now())):s.set(l.key,Ur.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),t.forEach((l,u)=>{var h;return a.set(l,new Yx(u,(h=s.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=nf(),i=new kt((s,a)=>s-a),o=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||Ur.empty();u=a.applyToLocalView(l,u),r.set(c,u);let h=(i.get(a.batchId)||Oe()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,h=xL();u.forEach(f=>{if(!o.has(f)){let p=PL(t.get(f),r.get(f));p!==null&&h.set(f,p),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,h))}return G.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bL(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):G.resolve(cc()),a=sf,c=o;return s.next(l=>G.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(u)?G.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{c=c.insert(u,f)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,Oe())).next(u=>({batchId:a,changes:IL(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(r=>{let i=Zh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Zh();return this.indexManager.getCollectionParents(e,o).next(a=>G.forEach(a,c=>{let l=(function(h,f){return new Ks(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,di.newInvalidDocument(u)))});let a=Zh();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&rf(u.mutation,l,Ur.empty(),et.now()),Uv(t,l)&&(a=a.insert(c,l))}),a})}};var Xx=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return G.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:$i(i.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:EY(i.bundledQuery),readTime:$i(i.readTime)}})(t)),G.resolve()}};var Jx=class{constructor(){this.overlays=new kt(pe.comparator),this.kr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let r=cc();return G.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),G.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){let i=cc(),o=t.length+1,s=new pe(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new kt((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=o.get(l.largestBatchId);u===null&&(u=cc(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=cc(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return G.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new kx(t,r));let o=this.kr.get(t);o===void 0&&(o=Oe(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var Zx=class{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var pf=class{constructor(){this.qr=new mn(Gt.Qr),this.$r=new mn(Gt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Gt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Gt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new pe(new yt([])),r=new Gt(t,e),i=new Gt(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new pe(new yt([])),r=new Gt(t,e),i=new Gt(t,e+1),o=Oe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Gt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Gt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return pe.comparator(e.key,t.key)||Te(e.Hr,t.Hr)}static Ur(e,t){return Te(e.Hr,t.Hr)||pe.comparator(e.key,t.key)}};var eD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new mn(Gt.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Px(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Gt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(s)}lookupMutationBatch(e,t){return G.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?qD:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Gt(t,0),i=new Gt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Te);return t.forEach(i=>{let o=new Gt(i,0),s=new Gt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),G.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;pe.isDocumentKey(o)||(o=o.child(""));let s=new Gt(new pe(o),0),a=new mn(Te);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),G.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ge(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return G.forEach(t.mutations,i=>{let o=new Gt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Gt(t,0),i=this.Yr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var tD=class{constructor(e){this.ni=e,this.docs=(function(){return new kt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():di.newInvalidDocument(t))}getEntries(e,t){let r=Vo();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():di.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Vo(),s=t.path,a=new pe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||IK(CK(u),r)<=0||(i.has(u.key)||Uv(t,u))&&(o=o.insert(u.key,u.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ge(9500)}ri(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nD(this)}getSize(e){return G.resolve(this.size)}},nD=class extends Kx{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var rD=class{constructor(e){this.persistence=e,this.ii=new Lo(t=>XD(t),JD),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.si=0,this.oi=new pf,this.targetCount=0,this._i=ff.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),G.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new ff(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.hr(t),G.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(o).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.oi.containsKey(t))}};var gv=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new WD(0),this.ci=!1,this.ci=!0,this.li=new Zx,this.referenceDelegate=e(this),this.hi=new rD(this),this.indexManager=new Hx,this.remoteDocumentCache=(function(i){return new tD(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new $x(t),this.Ti=new Xx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Jx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new eD(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);let i=new iD(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return G.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},iD=class extends px{constructor(e){super(),this.currentSequenceNumber=e}},oD=class n{constructor(e){this.persistence=e,this.Ai=new pf,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ge(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,r=>{let i=pe.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Ee.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return G.or([()=>G.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},mv=class n{constructor(e,t){this.persistence=e,this.gi=new Lo(r=>SK(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=IY(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return G.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Ee.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qy(e.data.value)),t}Sr(e,t,r){return G.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var sD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Oe(),i=Oe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var aD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var cD=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return cN()?8:DK(pn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new aD;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(nu()<=Ae.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",ru(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(nu()<=Ae.DEBUG&&se("QueryEngine","Query:",ru(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(nu()<=Ae.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",ru(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):G.resolve())}ps(e,t){if(fF(t))return G.resolve(null);let r=Ui(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=av(t,null,"F"),r=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Oe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,s,c.readTime)?this.ps(e,av(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return fF(t)||i.isEqual(Ee.min())?G.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?G.resolve(null):(nu()<=Ae.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ru(t)),this.vs(e,s,t,EK(i,sf)).next(a=>a))})}bs(e,t){let r=new mn(EL(e));return t.forEach((i,o)=>{Uv(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return nu()<=Ae.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",ru(t)),this.gs.getDocumentsMatchingQuery(e,t,pc.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var tT="LocalStore",xY=3e8,lD=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new kt(Te),this.Ms=new Lo(o=>XD(o),JD),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function DY(n,e,t,r){return new lD(n,e,t,r)}function $L(n,e){return S(this,null,function*(){let t=be(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Oe();for(let l of i){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function TY(n,e){let t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let h=l.batch,f=h.keys(),p=G.resolve();return f.forEach(_=>{p=p.next(()=>u.getEntry(c,_)).next(w=>{let b=l.docVersions.get(_);Ge(b!==null,48541),w.version.compareTo(b)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),u.addEntry(w)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,h))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Oe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function HL(n){let e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function SY(n,e){let t=be(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((u,h)=>{let f=i.get(h);if(!f)return;a.push(t.hi.removeMatchingKeys(o,u.removedDocuments,h).next(()=>t.hi.addMatchingKeys(o,u.addedDocuments,h)));let p=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(kn.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(h,p),(function(w,b,T){return w.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=xY?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(f,p,u)&&a.push(t.hi.updateTargetData(o,p))});let c=Vo(),l=Oe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(MY(o,s,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!r.isEqual(Ee.min())){let u=t.hi.getLastRemoteSnapshotVersion(o).next(h=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return G.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Fs=i,o))}function MY(n,e,t){let r=Oe(),i=Oe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Vo();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ee.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):se(tT,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function AY(n,e){let t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function PY(n,e){let t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,G.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new hf(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function uD(n,e,t){return S(this,null,function*(){let r=be(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Eu(s))throw s;se(tT,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function DF(n,e,t){let r=be(n),i=Ee.min(),o=Oe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,u){let h=be(c),f=h.Ms.get(u);return f!==void 0?G.resolve(h.Fs.get(f)):h.hi.getTargetData(l,u)})(r,s,Ui(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:Ee.min(),t?o:Oe())).next(a=>(RY(r,WK(e),a),{documents:a,qs:o})))}function RY(n,e,t){let r=n.xs.get(e)||Ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var yv=class{constructor(){this.activeTargetIds=XK()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var dD=class{constructor(){this.Fo=new yv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new yv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var hD=class{xo(e){}shutdown(){}};var TF="ConnectivityMonitor",vv=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){se(TF,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){se(TF,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Yy=null;function fD(){return Yy===null?Yy=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yy++,"0x"+Yy.toString(16)}var rx="RestConnection",kY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},pD=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===iv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=fD(),a=this.Go(e,t.toUriEncodedString());se(rx,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),u=Rs(l);return this.jo(e,a,c,r,u).then(h=>(se(rx,`Received RPC '${e}' ${s}: `,h),h),h=>{throw qs(rx,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=kY[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var gD=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Rn="WebChannelConnection",mD=class extends pD{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=fD();return new Promise((a,c)=>{let l=new XI;l.setWithCredentials(!0),l.listenOnce(JI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Jh.NO_ERROR:let h=l.getResponseJson();se(Rn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case Jh.TIMEOUT:se(Rn,`RPC '${e}' ${s} timed out`),c(new ne(z.DEADLINE_EXCEEDED,"Request time out"));break;case Jh.HTTP_ERROR:let f=l.getStatus();if(se(Rn,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);let _=p?.error;if(_&&_.status&&_.message){let w=(function(T){let k=T.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(k)>=0?k:z.UNKNOWN})(_.status);c(new ne(w,_.message))}else c(new ne(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ne(z.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{se(Rn,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);se(Rn,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}P_(e,t,r){let i=fD(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=tx(),a=ex(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=o.join("");se(Rn,`Creating RPC '${e}' stream ${i}: ${u}`,c);let h=s.createWebChannel(u,c);this.T_(h);let f=!1,p=!1,_=new gD({Ho:b=>{p?se(Rn,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(f||(se(Rn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),se(Rn,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},Yo:()=>h.close()}),w=(b,T,k)=>{b.listen(T,V=>{try{k(V)}catch(j){setTimeout(()=>{throw j},0)}})};return w(h,tu.EventType.OPEN,()=>{p||(se(Rn,`RPC '${e}' stream ${i} transport opened.`),_.s_())}),w(h,tu.EventType.CLOSE,()=>{p||(p=!0,se(Rn,`RPC '${e}' stream ${i} transport closed`),_.__(),this.I_(h))}),w(h,tu.EventType.ERROR,b=>{p||(p=!0,qs(Rn,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),_.__(new ne(z.UNAVAILABLE,"The operation could not be completed")))}),w(h,tu.EventType.MESSAGE,b=>{var T;if(!p){let k=b.data[0];Ge(!!k,16349);let V=k,j=V?.error||((T=V[0])===null||T===void 0?void 0:T.error);if(j){se(Rn,`RPC '${e}' stream ${i} received error:`,j);let U=j.status,B=(function(D){let P=qt[D];if(P!==void 0)return kL(P)})(U),M=j.message;B===void 0&&(B=z.INTERNAL,M="Unknown error status: "+U+" with message "+j.message),p=!0,_.__(new ne(B,M)),h.close()}else se(Rn,`RPC '${e}' stream ${i} received:`,k),_.a_(k)}}),w(a,ZI.STAT_EVENT,b=>{b.stat===qy.PROXY?se(Rn,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===qy.NOPROXY&&se(Rn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function ix(){return typeof document<"u"?document:null}function Bv(n){return new Lx(n,!0)}var _v=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var SF="PersistentStream",bv=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new _v(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return S(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return S(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return S(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===z.RESOURCE_EXHAUSTED?(Oo(t.toString()),Oo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new ne(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>S(this,null,function*(){this.state=0,this.start()}))}G_(e){return se(SF,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(se(SF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},yD=class extends bv{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=dY(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Ee.min():s.readTime?$i(s.readTime):Ee.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Bx(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=Tx(c)?{documents:pY(o,c)}:{query:gY(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=OL(o,s.resumeToken);let l=Vx(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Ee.min())>0){a.readTime=fv(o,s.snapshotVersion.toTimestamp());let l=Vx(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=yY(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Bx(this.serializer),t.removeTarget=e,this.k_(t)}},vD=class extends bv{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=fY(e.writeResults,e.commitTime),r=$i(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=Bx(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>hY(this.serializer,r))};this.k_(t)}};var _D=class{},bD=class extends _D{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ne(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,jx(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(z.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,jx(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(z.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},wD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Oo(t),this._a=!1):se("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var _c="RemoteStore",ED=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>S(this,null,function*(){wc(this)&&(se(_c,"Restarting streams for network reachability change."),yield(function(c){return S(this,null,function*(){let l=be(c);l.Ia.add(4),yield wf(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield $v(l)})})(this))}))}),this.Aa=new wD(r,i)}};function $v(n){return S(this,null,function*(){if(wc(n))for(let e of n.da)yield e(!0)})}function wf(n){return S(this,null,function*(){for(let e of n.da)yield e(!1)})}function zL(n,e){let t=be(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),oT(t)?iT(t):Cu(t).x_()&&rT(t,e))}function nT(n,e){let t=be(n),r=Cu(t);t.Ta.delete(e),r.x_()&&WL(t,e),t.Ta.size===0&&(r.x_()?r.B_():wc(t)&&t.Aa.set("Unknown"))}function rT(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cu(n).H_(e)}function WL(n,e){n.Ra.$e(e),Cu(n).Y_(e)}function iT(n){n.Ra=new Fx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Cu(n).start(),n.Aa.aa()}function oT(n){return wc(n)&&!Cu(n).M_()&&n.Ta.size>0}function wc(n){return be(n).Ia.size===0}function qL(n){n.Ra=void 0}function OY(n){return S(this,null,function*(){n.Aa.set("Online")})}function NY(n){return S(this,null,function*(){n.Ta.forEach((e,t)=>{rT(n,e)})})}function FY(n,e){return S(this,null,function*(){qL(n),oT(n)?(n.Aa.la(e),iT(n)):n.Aa.set("Unknown")})}function LY(n,e,t){return S(this,null,function*(){if(n.Aa.set("Online"),e instanceof dv&&e.state===2&&e.cause)try{yield(function(i,o){return S(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){se(_c,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wv(n,r)}else if(e instanceof au?n.Ra.Ye(e):e instanceof uv?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ee.min()))try{let r=yield HL(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.Ta.get(l);u&&o.Ta.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.Ta.get(c);if(!u)return;o.Ta.set(c,u.withResumeToken(kn.EMPTY_BYTE_STRING,u.snapshotVersion)),WL(o,c);let h=new hf(u.target,c,l,u.sequenceNumber);rT(o,h)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){se(_c,"Failed to raise snapshot:",r),yield wv(n,r)}})}function wv(n,e,t){return S(this,null,function*(){if(!Eu(e))throw e;n.Ia.add(1),yield wf(n),n.Aa.set("Offline"),t||(t=()=>HL(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(null,null,function*(){se(_c,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield $v(n)}))})}function GL(n,e){return e().catch(t=>wv(n,t,e))}function Hv(n){return S(this,null,function*(){let e=be(n),t=Qs(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:qD;for(;VY(e);)try{let i=yield AY(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,jY(e,i)}catch(i){yield wv(e,i)}KL(e)&&YL(e)})}function VY(n){return wc(n)&&n.Pa.length<10}function jY(n,e){n.Pa.push(e);let t=Qs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function KL(n){return wc(n)&&!Qs(n).M_()&&n.Pa.length>0}function YL(n){Qs(n).start()}function UY(n){return S(this,null,function*(){Qs(n).na()})}function BY(n){return S(this,null,function*(){let e=Qs(n);for(let t of n.Pa)e.X_(t.mutations)})}function $Y(n,e,t){return S(this,null,function*(){let r=n.Pa.shift(),i=Rx.from(r,e,t);yield GL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Hv(n)})}function HY(n,e){return S(this,null,function*(){e&&Qs(n).Z_&&(yield(function(r,i){return S(this,null,function*(){if((function(s){return iY(s)&&s!==z.ABORTED})(i.code)){let o=r.Pa.shift();Qs(r).N_(),yield GL(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Hv(r)}})})(n,e)),KL(n)&&YL(n)})}function MF(n,e){return S(this,null,function*(){let t=be(n);t.asyncQueue.verifyOperationInProgress(),se(_c,"RemoteStore received new credentials");let r=wc(t);t.Ia.add(3),yield wf(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield $v(t)})}function zY(n,e){return S(this,null,function*(){let t=be(n);e?(t.Ia.delete(2),yield $v(t)):e||(t.Ia.add(2),yield wf(t),t.Aa.set("Unknown"))})}function Cu(n){return n.Va||(n.Va=(function(t,r,i){let o=be(t);return o.ia(),new yD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:OY.bind(null,n),e_:NY.bind(null,n),n_:FY.bind(null,n),J_:LY.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.Va.N_(),oT(n)?iT(n):n.Aa.set("Unknown")):(yield n.Va.stop(),qL(n))}))),n.Va}function Qs(n){return n.ma||(n.ma=(function(t,r,i){let o=be(t);return o.ia(),new vD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:UY.bind(null,n),n_:HY.bind(null,n),ea:BY.bind(null,n),ta:$Y.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.ma.N_(),yield Hv(n)):(yield n.ma.stop(),n.Pa.length>0&&(se(_c,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var CD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function sT(n,e){if(Oo("AsyncQueue",`${e}: ${n}`),Eu(n))return new ne(z.UNAVAILABLE,`${e}: ${n}`);throw n}var Ev=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=Zh(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Cv=class{constructor(){this.fa=new kt(pe.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ge(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},yu=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Ev.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var ID=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},xD=class{constructor(){this.queries=AF(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=be(t),o=i.queries;i.queries=AF(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new ne(z.ABORTED,"Firestore shutting down"))}};function AF(){return new Lo(n=>wL(n),jv)}function aT(n,e){return S(this,null,function*(){let t=be(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new ID,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=sT(s,`Initialization of query '${ru(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&lT(t)})}function cT(n,e){return S(this,null,function*(){let t=be(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function WY(n,e){let t=be(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&lT(t)}function qY(n,e,t){let r=be(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function lT(n){n.Da.forEach(e=>{e.next()})}var DD,PF;(PF=DD||(DD={})).Fa="default",PF.Cache="cache";var gf=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new yu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=yu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==DD.Cache}};var Iv=class{constructor(e){this.key=e}},xv=class{constructor(e){this.key=e}},TD=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Oe(),this.mutatedKeys=Oe(),this.Xa=EL(e),this.eu=new Ev(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Cv,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let f=i.get(u),p=Uv(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),b=!1;f&&p?f.data.isEqual(p.data)?_!==w&&(r.track({type:3,doc:p}),b=!0):this.iu(f,p)||(r.track({type:2,doc:p}),b=!0,(c&&this.Xa(p,c)>0||l&&this.Xa(p,l)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),b=!0):f&&!p&&(r.track({type:1,doc:f}),b=!0,(c||l)&&(a=!0)),b&&(p?(s=s.add(p),o=w?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((u,h)=>(function(p,_){let w=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{At:b})}};return w(p)-w(_)})(u.type,h.type)||this.Xa(u.doc,h.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new yu(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Cv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Oe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new xv(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Iv(r))}),t}uu(e){this.Ha=e.qs,this.Za=Oe();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return yu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},uT="SyncEngine",SD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},MD=class{constructor(e){this.key=e,this.lu=!1}},AD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Lo(a=>wL(a),jv),this.Tu=new Map,this.Iu=new Set,this.du=new kt(pe.comparator),this.Eu=new Map,this.Au=new pf,this.Ru={},this.Vu=new Map,this.mu=ff.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function GY(n,e,t=!0){return S(this,null,function*(){let r=tV(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield QL(r,e,t,!0),i})}function KY(n,e){return S(this,null,function*(){let t=tV(n);yield QL(t,e,!0,!1)})}function QL(n,e,t,r){return S(this,null,function*(){let i=yield PY(n.localStore,Ui(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield YY(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&zL(n.remoteStore,i),a})}function YY(n,e,t,r,i){return S(this,null,function*(){n.gu=(h,f,p)=>(function(w,b,T,k){return S(this,null,function*(){let V=b.view.nu(T);V.Ds&&(V=yield DF(w.localStore,b.query,!1).then(({documents:M})=>b.view.nu(M,V)));let j=k&&k.targetChanges.get(b.targetId),U=k&&k.targetMismatches.get(b.targetId)!=null,B=b.view.applyChanges(V,w.isPrimaryClient,j,U);return kF(w,b.targetId,B._u),B.snapshot})})(n,h,f,p);let o=yield DF(n.localStore,e,!0),s=new TD(e,o.qs),a=s.nu(o.documents),c=df.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);kF(n,t,l._u);let u=new SD(e,t,s);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function QY(n,e,t){return S(this,null,function*(){let r=be(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!jv(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield uD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&nT(r.remoteStore,i.targetId),PD(r,i.targetId)}).catch(wu))):(PD(r,i.targetId),yield uD(r.localStore,i.targetId,!0))})}function XY(n,e){return S(this,null,function*(){let t=be(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nT(t.remoteStore,r.targetId))})}function JY(n,e,t){return S(this,null,function*(){let r=oQ(n);try{let i=yield(function(s,a){let c=be(s),l=et.now(),u=a.reduce((p,_)=>p.add(_.key),Oe()),h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=Vo(),w=Oe();return c.Os.getEntries(p,u).next(b=>{_=b,_.forEach((T,k)=>{k.isValidDocument()||(w=w.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,_)).next(b=>{h=b;let T=[];for(let k of a){let V=rY(k,h.get(k.key).overlayedDocument);V!=null&&T.push(new zi(k.key,V,pL(V.value.mapValue),Bi.exists(!0)))}return c.mutationQueue.addMutationBatch(p,l,T,a)}).next(b=>{f=b;let T=b.applyToLocalDocumentSet(h,w);return c.documentOverlayCache.saveOverlays(p,b.batchId,T)})}).then(()=>({batchId:f.batchId,changes:IL(h)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new kt(Te)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Ef(r,i.changes),yield Hv(r.remoteStore)}catch(i){let o=sT(i,"Failed to persist write");t.reject(o)}})}function XL(n,e){return S(this,null,function*(){let t=be(n);try{let r=yield SY(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ge(s.lu,14607):i.removedDocuments.size>0&&(Ge(s.lu,42227),s.lu=!1))}),yield Ef(t,r,e)}catch(r){yield wu(r)}})}function RF(n,e,t){let r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=be(s);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(let f of h.wa)f.va(a)&&(l=!0)}),l&&lT(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ZY(n,e,t){return S(this,null,function*(){let r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new kt(pe.comparator);s=s.insert(o,di.newNoDocument(o,Ee.min()));let a=Oe().add(o),c=new lv(Ee.min(),new Map,new kt(Te),s,a);yield XL(r,c),r.du=r.du.remove(o),r.Eu.delete(e),dT(r)}else yield uD(r.localStore,e,!1).then(()=>PD(r,e,t)).catch(wu)})}function eQ(n,e){return S(this,null,function*(){let t=be(n),r=e.batch.batchId;try{let i=yield TY(t.localStore,e);ZL(t,r,null),JL(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ef(t,i)}catch(i){yield wu(i)}})}function tQ(n,e,t){return S(this,null,function*(){let r=be(n);try{let i=yield(function(s,a){let c=be(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(Ge(h!==null,37113),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(r.localStore,e);ZL(r,e,t),JL(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ef(r,i)}catch(i){yield wu(i)}})}function JL(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function ZL(n,e,t){let r=be(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function PD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||eV(n,r)})}function eV(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(nT(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),dT(n))}function kF(n,e,t){for(let r of t)r instanceof Iv?(n.Au.addReference(r.key,e),nQ(n,r)):r instanceof xv?(se(uT,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||eV(n,r.key)):ge(19791,{yu:r})}function nQ(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(se(uT,"New document in limbo: "+t),n.Iu.add(r),dT(n))}function dT(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new pe(yt.fromString(e)),r=n.mu.next();n.Eu.set(r,new MD(t)),n.du=n.du.insert(t,r),zL(n.remoteStore,new hf(Ui(Vv(t.path)),r,"TargetPurposeLimboResolution",WD.ue))}}function Ef(n,e,t){return S(this,null,function*(){let r=be(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=sD.Es(c.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,l){return S(this,null,function*(){let u=be(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>G.forEach(l,f=>G.forEach(f.Is,p=>u.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>G.forEach(f.ds,p=>u.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Eu(h))throw h;se(tT,"Failed to update sequence numbers: "+h)}for(let h of l){let f=h.targetId;if(!h.fromCache){let p=u.Fs.get(f),_=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(_);u.Fs=u.Fs.insert(f,w)}}})})(r.localStore,o))})}function rQ(n,e){return S(this,null,function*(){let t=be(n);if(!t.currentUser.isEqual(e)){se(uT,"User change. New user:",e.toKey());let r=yield $L(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new ne(z.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ef(t,r.Bs)}})}function iQ(n,e){let t=be(n),r=t.Eu.get(e);if(r&&r.lu)return Oe().add(r.key);{let i=Oe(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function tV(n){let e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZY.bind(null,e),e.hu.J_=WY.bind(null,e.eventManager),e.hu.pu=qY.bind(null,e.eventManager),e}function oQ(n){let e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tQ.bind(null,e),e}var nV=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=Bv(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return DY(this.persistence,new cD,t.initialUser,this.serializer)}Du(t){return new gv(oD.Vi,this.serializer)}bu(t){return new dD}terminate(){return S(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),RD=class extends nV{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ge(this.persistence.referenceDelegate instanceof mv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new qx(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?jr.withCacheSize(this.cacheSizeBytes):jr.DEFAULT;return new gv(r=>mv.Vi(r,t),this.serializer)}};var sQ=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>RF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rQ.bind(null,this.syncEngine),yield zY(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new xD})()}createDatastore(t){let r=Bv(t.databaseInfo.databaseId),i=(function(s){return new mD(s)})(t.databaseInfo);return(function(s,a,c,l){return new bD(s,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new ED(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>RF(this.syncEngine,r,0),(function(){return vv.C()?new vv:new hD})())}createSyncEngine(t,r){return(function(o,s,a,c,l,u,h){let f=new AD(o,s,a,c,l,u);return h&&(f.fu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){var t,r;yield(function(o){return S(this,null,function*(){let s=be(o);se(_c,"RemoteStore shutting down."),s.Ia.add(5),yield wf(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var mf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Oo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Xs="FirestoreClient",kD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gn.UNAUTHENTICATED,this.clientId=of.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>S(this,null,function*(){se(Xs,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(se(Xs,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=sT(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ox(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),se(Xs,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(null,null,function*(){r.isEqual(i)||(yield $L(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{qs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{se("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{qs("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function OF(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield aQ(n);se(Xs,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>MF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>MF(e.remoteStore,i)),n._onlineComponents=e})}function aQ(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se(Xs,"Using user provided OfflineComponentProvider");try{yield ox(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;qs("Error using user provided cache. Falling back to memory cache: "+t),yield ox(n,new nV)}}else se(Xs,"Using default OfflineComponentProvider"),yield ox(n,new RD(void 0));return n._offlineComponents})}function rV(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(se(Xs,"Using user provided OnlineComponentProvider"),yield OF(n,n._uninitializedComponentsProvider._online)):(se(Xs,"Using default OnlineComponentProvider"),yield OF(n,new sQ))),n._onlineComponents})}function cQ(n){return rV(n).then(e=>e.syncEngine)}function Dv(n){return S(this,null,function*(){let e=yield rV(n),t=e.eventManager;return t.onListen=GY.bind(null,e.syncEngine),t.onUnlisten=QY.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=KY.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XY.bind(null,e.syncEngine),t})}function lQ(n,e,t={}){let r=new ui;return n.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return(function(o,s,a,c,l){let u=new mf({next:f=>{u.Ou(),s.enqueueAndForget(()=>cT(o,h));let p=f.docs.has(a);!p&&f.fromCache?l.reject(new ne(z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&c&&c.source==="server"?l.reject(new ne(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new gf(Vv(a.path),u,{includeMetadataChanges:!0,ka:!0});return aT(o,h)})(yield Dv(n),n.asyncQueue,e,t,r)})),r.promise}function uQ(n,e,t={}){let r=new ui;return n.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return(function(o,s,a,c,l){let u=new mf({next:f=>{u.Ou(),s.enqueueAndForget(()=>cT(o,h)),f.fromCache&&c.source==="server"?l.reject(new ne(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new gf(a,u,{includeMetadataChanges:!0,ka:!0});return aT(o,h)})(yield Dv(n),n.asyncQueue,e,t,r)})),r.promise}function iV(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var NF=new Map;var oV="firestore.googleapis.com",FF=!0,Tv=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oV,this.ssl=FF}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:FF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CY)throw new ne(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iV((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},vu=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new sx;switch(r.type){case"firstParty":return new ux(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=NF.get(t);r&&(se("ComponentProvider","Removing Datastore"),NF.delete(t),r.terminate())})(this),Promise.resolve()}};function sV(n,e,t,r={}){var i;n=ar(n,vu);let o=Rs(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(vy(`https://${c}`),_y("Firestore",!0)),s.host!==oV&&s.host!==c&&qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!ai(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=gn.MOCK_USER;else{u=nN(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ne(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new gn(f)}n._authCredentials=new ax(new Zy(u,h))}}var jo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},nn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(bf(t,n._jsonSchema))return new n(e,r||null,new pe(yt.fromString(t.referencePath)))}};nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:Yt("string",nn._jsonSchemaVersion),referencePath:Yt("string")};var $s=class n extends jo{constructor(e,t,r){super(e,t,Vv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new pe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function aV(n,e,...t){if(n=Pt(n),zF("collection","path",e),n instanceof vu){let r=yt.fromString(e,...t);return eF(r),new $s(n,null,r)}{if(!(n instanceof nn||n instanceof $s))throw new ne(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(yt.fromString(e,...t));return eF(r),new $s(n.firestore,null,r)}}function hT(n,e,...t){if(n=Pt(n),arguments.length===1&&(e=of.newId()),zF("doc","path",e),n instanceof vu){let r=yt.fromString(e,...t);return Z2(r),new nn(n,null,new pe(r))}{if(!(n instanceof nn||n instanceof $s))throw new ne(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(yt.fromString(e,...t));return Z2(r),new nn(n.firestore,n instanceof $s?n.converter:null,new pe(r))}}var LF="AsyncQueue",Sv=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new _v(this,"async_queue_retry"),this.oc=()=>{let r=ix();r&&se(LF,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=ix();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=ix();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ui;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return S(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Eu(e))throw e;se(LF,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Oo("INTERNAL UNHANDLED ERROR: ",VF(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=CD.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&ge(47125,{hc:VF(this.tc)})}verifyOperationInProgress(){}Pc(){return S(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function VF(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function jF(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var fi=class extends vu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Sv,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Sv(e),this._firestoreClient=void 0,yield e}})}};function cV(n,e){let t=typeof n=="object"?n:nc(),r=typeof n=="string"?n:e||iv,i=Yl(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=tN("firestore");o&&sV(i,...o)}return i}function zv(n){if(n._terminated)throw new ne(z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||dQ(n),n._firestoreClient}function dQ(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,l,u){return new gx(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,iV(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new kD(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Hs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(kn.fromBase64String(e))}catch(t){throw new ne(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Hs._jsonSchemaVersion="firestore/bytes/1.0",Hs._jsonSchema={type:Yt("string",Hs._jsonSchemaVersion),bytes:Yt("string")};var _u=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var bc=class{constructor(e){this._methodName=e}};var zs=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(bf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};zs._jsonSchemaVersion="firestore/geoPoint/1.0",zs._jsonSchema={type:Yt("string",zs._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};var Ws=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ne(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ws._jsonSchemaVersion="firestore/vectorValue/1.0",Ws._jsonSchema={type:Yt("string",Ws._jsonSchemaVersion),vectorValues:Yt("object")};var hQ=/^__.*__$/,OD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new vc(e,this.data,t,this.fieldTransforms)}},Mv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function lV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ec:n})}}var Av=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Rv(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(lV(this.Ec)&&hQ.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},ND=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bv(e)}Dc(e,t,r,i=!1){return new Av({Ec:e,methodName:t,bc:r,path:Dr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Wv(n){let e=n._freezeSettings(),t=Bv(n._databaseId);return new ND(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uV(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);fT("Data must be an object, but it was:",s,r);let a=dV(r,s),c,l;if(o.merge)c=new Ur(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let h of o.mergeFields){let f=VD(e,h,t);if(!s.contains(f))throw new ne(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);fV(u,f)||u.push(f)}c=new Ur(u),l=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=s.fieldTransforms;return new OD(new xr(a),c,l)}var Pv=class n extends bc{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function fQ(n,e,t){return new Av({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var FD=class n extends bc{_toFieldTransform(e){return new cv(e.path,new mc)}isEqual(e){return e instanceof n}},LD=class n extends bc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=fQ(this,e,!0),r=this.vc.map(o=>Iu(o,t)),i=new Ys(r);return new cv(e.path,i)}isEqual(e){return e instanceof n&&ai(this.vc,e.vc)}};function pQ(n,e,t,r){let i=n.Dc(1,e,t);fT("Data must be an object, but it was:",i,r);let o=[],s=xr.empty();Js(r,(c,l)=>{let u=pT(e,c,t);l=Pt(l);let h=i.gc(u);if(l instanceof Pv)o.push(u);else{let f=Iu(l,h);f!=null&&(o.push(u),s.set(u,f))}});let a=new Ur(o);return new Mv(s,a,i.fieldTransforms)}function gQ(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[VD(e,r,t)],c=[i];if(o.length%2!=0)throw new ne(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(VD(e,o[f])),c.push(o[f+1]);let l=[],u=xr.empty();for(let f=a.length-1;f>=0;--f)if(!fV(l,a[f])){let p=a[f],_=c[f];_=Pt(_);let w=s.gc(p);if(_ instanceof Pv)l.push(p);else{let b=Iu(_,w);b!=null&&(l.push(p),u.set(p,b))}}let h=new Ur(l);return new Mv(u,h,s.fieldTransforms)}function mQ(n,e,t,r=!1){return Iu(t,n.Dc(r?4:3,e))}function Iu(n,e){if(hV(n=Pt(n)))return fT("Unsupported field value:",e,n),dV(n,e);if(n instanceof bc)return(function(r,i){if(!lV(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=Iu(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=et.fromDate(r);return{timestampValue:fv(i.serializer,o)}}if(r instanceof et){let o=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fv(i.serializer,o)}}if(r instanceof zs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hs)return{bytesValue:OL(i.serializer,r._byteString)};if(r instanceof nn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:eT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ws)return(function(s,a){return{mapValue:{fields:{[KD]:{stringValue:YD},[uu]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return ZD(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Nv(r)}`)})(n,e)}function dV(n,e){let t={};return sL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(n,(r,i)=>{let o=Iu(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function hV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof et||n instanceof zs||n instanceof Hs||n instanceof nn||n instanceof bc||n instanceof Ws)}function fT(n,e,t){if(!hV(t)||!WF(t)){let r=Nv(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function VD(n,e,t){if((e=Pt(e))instanceof _u)return e._internalPath;if(typeof e=="string")return pT(n,e);throw Rv("Field path arguments must be of type string or ",n,!1,void 0,t)}var yQ=new RegExp("[~\\*/\\[\\]]");function pT(n,e,t){if(e.search(yQ)>=0)throw Rv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _u(...e.split("."))._internalPath}catch{throw Rv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rv(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ne(z.INVALID_ARGUMENT,a+n+c)}function fV(n,e){return n.some(t=>t.isEqual(e))}var kv=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(qv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},jD=class extends kv{data(){return super.data()}};function qv(n,e){return typeof e=="string"?pT(n,e):e instanceof _u?e._internalPath:e._delegate._internalPath}function pV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ne(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yf=class{},vf=class extends yf{};function gV(n,e,...t){let r=[];e instanceof yf&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof UD).length,a=o.filter(c=>c instanceof Ov).length;if(s>1||s>0&&a>0)throw new ne(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Ov=class n extends vf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return _V(e._query,t),new jo(e.firestore,e.converter,Sx(e._query,t))}_parse(e){let t=Wv(e.firestore);return(function(o,s,a,c,l,u,h){let f;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ne(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){BF(h,u);let _=[];for(let w of h)_.push(UF(c,o,w));f={arrayValue:{values:_}}}else f=UF(c,o,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||BF(h,u),f=mQ(a,s,h,u==="in"||u==="not-in");return Kt.create(l,u,f)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function mV(n,e,t){let r=e,i=qv("where",n);return Ov._create(i,r,t)}var UD=class n extends yf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:hi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)_V(s,c),s=Sx(s,c)})(e._query,t),new jo(e.firestore,e.converter,Sx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var BD=class n extends vf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new ne(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gc(o,s)})(e._query,this._field,this._direction);return new jo(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ks(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function yV(n,e="asc"){let t=e,r=qv("orderBy",n);return BD._create(r,t)}var $D=class n extends vf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new jo(e.firestore,e.converter,av(e._query,this._limit,this._limitType))}};function vV(n){return wK("limit",n),$D._create("limit",n,"F")}function UF(n,e,t){if(typeof(t=Pt(t))=="string"){if(t==="")throw new ne(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bL(e)&&t.indexOf("/")!==-1)throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(yt.fromString(t));if(!pe.isDocumentKey(r))throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return aF(n,new pe(r))}if(t instanceof nn)return aF(n,t._key);throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nv(t)}.`)}function BF(n,e){if(!Array.isArray(n)||n.length===0)throw new ne(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _V(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ne(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var HD=class{convertValue(e,t="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Js(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[uu].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>mt(s.doubleValue));return new Ws(o)}convertGeoPoint(e){return new zs(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Lv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cf(e));default:return null}}convertTimestamp(e){let t=No(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=yt.fromString(e);Ge(UL(r),9688,{name:e});let i=new ov(r.get(1),r.get(3)),o=new pe(r.popFirst(5));return i.isEqual(t)||Oo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function bV(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var uc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dc=class n extends kv{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new cu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(qv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};dc._jsonSchemaVersion="firestore/documentSnapshot/1.0",dc._jsonSchema={type:Yt("string",dc._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};var cu=class extends dc{data(e={}){return super.data(e)}},hc=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new uc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cu(this._firestore,this._userDataWriter,r.key,r,new uc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new cu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new cu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:vQ(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=of.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function vQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:n})}}function Cf(n){n=ar(n,nn);let e=ar(n.firestore,fi);return lQ(zv(e),n._key).then(t=>DV(e,n,t))}hc._jsonSchemaVersion="firestore/querySnapshot/1.0",hc._jsonSchema={type:Yt("string",hc._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};var _f=class extends HD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}};function wV(n){n=ar(n,jo);let e=ar(n.firestore,fi),t=zv(e),r=new _f(e);return pV(n._query),uQ(t,n._query).then(i=>new hc(e,r,n,i))}function EV(n,e,t){n=ar(n,nn);let r=ar(n.firestore,fi),i=bV(n.converter,e,t);return Gv(r,[uV(Wv(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Bi.none())])}function CV(n,e,t,...r){n=ar(n,nn);let i=ar(n.firestore,fi),o=Wv(i),s;return s=typeof(e=Pt(e))=="string"||e instanceof _u?gQ(o,"updateDoc",n._key,e,t,r):pQ(o,"updateDoc",n._key,e),Gv(i,[s.toMutation(n._key,Bi.exists(!0))])}function IV(n){return Gv(ar(n.firestore,fi),[new uf(n._key,Bi.none())])}function xV(n,e){let t=ar(n.firestore,fi),r=hT(n),i=bV(n.converter,e);return Gv(t,[uV(Wv(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Bi.exists(!1))]).then(()=>r)}function If(n,...e){var t,r,i;n=Pt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||jF(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(jF(e[s])){let h=e[s];e[s]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(n instanceof nn)l=ar(n.firestore,fi),u=Vv(n._key.path),c={next:h=>{e[s]&&e[s](DV(l,n,h))},error:e[s+1],complete:e[s+2]};else{let h=ar(n,jo);l=ar(h.firestore,fi),u=h._query;let f=new _f(l);c={next:p=>{e[s]&&e[s](new hc(l,f,h,p))},error:e[s+1],complete:e[s+2]},pV(n._query)}return(function(f,p,_,w){let b=new mf(w),T=new gf(p,b,_);return f.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return aT(yield Dv(f),T)})),()=>{b.Ou(),f.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return cT(yield Dv(f),T)}))}})(zv(l),u,a,c)}function Gv(n,e){return(function(r,i){let o=new ui;return r.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return JY(yield cQ(r),i,o)})),o.promise})(zv(n),e)}function DV(n,e,t){let r=t.docs.get(e._key),i=new _f(n);return new dc(n,i,e._key,r,new uc(t.hasPendingWrites,t.fromCache),e.converter)}function xf(){return new FD("serverTimestamp")}function TV(...n){return new LD("arrayUnion",n)}(function(e,t=!0){(function(i){bu=i})(Os),ci(new Kn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new fi(new cx(r.getProvider("auth-internal")),new dx(s,r.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ne(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ov(l.options.projectId,u)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Rt(Y2,Q2,e),Rt(Y2,Q2,"esm2017")})();var Kv=function(){return Kv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Kv.apply(this,arguments)};var wQ={includeMetadataChanges:!1};function gT(n,e){return e===void 0&&(e=wQ),new ue(function(t){var r=If(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function SV(n){return gT(n,{includeMetadataChanges:!0})}function MV(n,e){return e===void 0&&(e={}),SV(n).pipe(Y(function(t){return mT(t,e)}))}function mT(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Kv(Kv({},r),(t={},t[e.idField]=n.id,t))}function AV(n){return gT(n,{includeMetadataChanges:!0}).pipe(Y(function(e){return e.docs}))}function PV(n,e){return e===void 0&&(e={}),AV(n).pipe(Y(function(t){return t.map(function(r){return mT(r,e)})}))}var rn=class{constructor(e){return e}},RV="firestore",yT=class{constructor(){return Xl(RV)}};var vT=new te("angularfire2.firestore-instances");function EQ(n,e){let t=jh(RV,n,e);return t&&new rn(t)}function CQ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new rn(r)}}var IQ={provide:yT,deps:[[new _r,vT]]},xQ={provide:rn,useFactory:EQ,deps:[[new _r,vT],Do]};function kV(n,...e){return Rt("angularfire",Ns.full,"fst"),yr([xQ,IQ,{provide:vT,useFactory:CQ(n),multi:!0,deps:[Be,Dt,Fs,ic,[new _r,Xh],[new _r,Jl],...e]}])}var Ec=Ze(PV,!0);var Yv=Ze(MV,!0);var Wi=Ze(xV,!0,2);var Ot=Ze(aV,!0,2);var OV=Ze(IV,!0,2);var vt=Ze(hT,!0,2);var Uo=Ze(Cf,!0);var cr=Ze(wV,!0);var NV=Ze(cV,!0);var Qv=Ze(vV,!0,2);var Cc=Ze(yV,!0,2),on=Ze(gV,!0,2);var Bo=Ze(EV,!0,2);var $o=Ze(CV,!0,2);var Nt=Ze(mV,!0,2);var xu=class n{firestore=L(rn);getUserStreak(e){let t=Ot(this.firestore,"dailyProgress"),r=on(t,Nt("userId","==",e),Cc("date","desc"));return Ec(r,{idField:"id"}).pipe(Y(i=>{if(!i||i.length===0)return{current:0,longest:0,weeklyConsistency:0};let s=i.map(a=>{let c;if(a.date?.toDate)c=a.date.toDate();else if(a.date)c=new Date(a.date);else return null;return c.setHours(0,0,0,0),c}).filter(a=>a!==null).sort((a,c)=>c.getTime()-a.getTime()).filter((a,c,l)=>c===l.findIndex(u=>u.getTime()===a.getTime()));return this.calculateStreakFromDates(s)}),Ye(i=>(console.error("Error fetching streak:",i),q({current:0,longest:0,weeklyConsistency:0}))))}calculateStreakFromDates(e){if(e.length===0)return{current:0,longest:0,weeklyConsistency:0};let t=new Date;t.setHours(0,0,0,0);let r=t.getTime(),i=0,o=0,s=0,a=e.some(f=>f.getTime()===r),c=a?r:r-864e5;for(let f of e){let p=f.getTime();if(p===c)s++,c-=864e5;else if(p<c-864e5)o=Math.max(o,s),s=1,c=p-864e5;else continue}o=Math.max(o,s),(a||e[0].getTime()===r-864e5)&&(i=s);let l=r-6*864e5,u=e.filter(f=>f.getTime()>=l&&f.getTime()<=r).length,h=Math.round(u/7*100);return{current:i,longest:o,weeklyConsistency:h,lastWorkoutDate:e[0]||null}}logWorkoutCompletion(e){return S(this,null,function*(){new Date().setHours(0,0,0,0);let r=Ot(this.firestore,"dailyProgress");yield Wi(r,{userId:e,date:et.fromDate(new Date),completedAt:et.now(),type:"workout"})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Br=class n{firestore=L(rn);auth=L(dt);statsSubject=new ft({streak:0,totalWorkouts:0,totalReps:0,caloriesBurned:0,currentWeight:70,lastWorkoutDate:null});stats$=this.statsSubject.asObservable();getCurrentUserOnce(){return this.auth.currentUser?Promise.resolve(this.auth.currentUser):new Promise(e=>{let t=$2(this.auth,r=>{t(),e(r)})})}toDate(e){if(e)return e.toDate?e.toDate():new Date(e)}sanitizeStatsForWrite(e){return oe(H({},e),{lastWorkoutDate:e.lastWorkoutDate?e.lastWorkoutDate:null})}getUserMetrics(e){console.log("getUserMetrics called for userId:",e);let t=Ot(this.firestore,"userMetrics"),r=on(t,Nt("userId","==",e),Cc("lastUpdated","desc"),Qv(1));return le(cr(r)).pipe(Y(i=>{if(console.log("Firestore query results:",i.docs.length,"documents"),!i.docs.length)return console.log("No metrics found for user:",e),null;let o=i.docs[0],s=o.data();console.log("Found metrics data:",s);let a;s.lastUpdated?.toDate?a=s.lastUpdated.toDate():s.lastUpdated instanceof Date?a=s.lastUpdated:s.lastUpdated?a=new Date(s.lastUpdated):a=new Date;let c={id:o.id,userId:s.userId||e,weight:s.weight||0,height:s.height||0,metabolism:s.metabolism||"medium",gender:s.gender||"other",bmi:s.bmi||0,lastUpdated:a};return console.log("Parsed metrics:",c),c}),Ye(i=>(console.error("Error fetching user metrics:",i),q(null))))}saveUserMetrics(e,t){console.log("saveUserMetrics called for userId:",e,"with metrics:",t);let r=Ot(this.firestore,"userMetrics"),i=this.calculateBMI(t.weight,t.height);console.log("Calculated BMI:",i);let o={userId:e,weight:t.weight,height:t.height,metabolism:t.metabolism,gender:t.gender||"other",bmi:i,lastUpdated:et.now()};return console.log("Saving to Firestore:",o),Wi(r,o).then(s=>S(this,null,function*(){console.log("Metrics saved successfully, document ID:",s.id);try{let a=vt(this.firestore,`userStats/${e}`),c=oe(H({},this.statsSubject.value||{}),{currentWeight:t.weight});yield Bo(a,this.sanitizeStatsForWrite(c),{merge:!0}),this.statsSubject.next(c),console.log("Updated userStats with weight and notified subscribers:",t.weight)}catch(a){console.warn("Could not update userStats:",a)}return s})).catch(s=>{throw console.error("Error saving user metrics:",s),s})}saveUserMetricsV2(e,t){console.log("saveUserMetricsV2 called for userId:",e);let r=vt(this.firestore,`users/${e}`),i=this.calculateBMI(t.weight,t.height),o={weight:t.weight,height:t.height,metabolism:t.metabolism,gender:t.gender,bmi:i,lastMetricsUpdate:et.now()};return Bo(r,o,{merge:!0}).then(()=>{console.log("User metrics saved/updated successfully for:",e);let s=vt(this.firestore,`userStats/${e}`);return Bo(s,{currentWeight:t.weight,lastUpdated:et.now()},{merge:!0})}).then(()=>{console.log("User stats updated successfully")}).catch(s=>{throw console.error("Error in saveUserMetricsV2:",s),s})}calculateBMI(e,t){if(!e||!t)return 0;let r=t/100,i=e/(r*r);return Number(i.toFixed(1))}getUserWorkoutLogs(){return le(this.getCurrentUserOnce()).pipe(Ce(e=>{if(!e)return q([]);let t=Ot(this.firestore,`users/${e.uid}/workoutLogs`),r=on(t,Cc("date","desc"));return le(cr(r)).pipe(Y(i=>i.docs.map(o=>{let s=o.data();return oe(H({id:o.id},s),{date:this.toDate(s.date)})})))}))}getUserWorkoutLogsOnce(){let e=this.auth.currentUser;if(!e)return Kr(()=>new Error("User not authenticated"));let t=Ot(this.firestore,`users/${e.uid}/workoutLogs`);return le(cr(t)).pipe(Y(r=>r.docs.map(i=>H({id:i.id},i.data()))))}calculateCalories(e){return e.reduce((t,r)=>{let s=(r.reps||0)*(r.sets||0)*.5,a=(r.duration||0)*5;return t+s+a},0)}getUserStats(){return le(this.getCurrentUserOnce()).pipe(Ce(e=>{if(!e)return q(this.statsSubject.value);let t=vt(this.firestore,`userStats/${e.uid}`);return le(Uo(t)).pipe(Ce(r=>{let i=r.exists()?{streak:r.data().streak??0,totalWorkouts:r.data().totalWorkouts??0,totalReps:r.data().totalReps??0,caloriesBurned:r.data().caloriesBurned??0,currentWeight:r.data().currentWeight??70,lastWorkoutDate:this.toDate(r.data().lastWorkoutDate)}:this.statsSubject.value;return this.getUserWorkoutLogs().pipe(Y(o=>{let s=o[0]?.date,a=oe(H({},i),{lastWorkoutDate:s});return this.statsSubject.next(a),a}))}))}))}fetchInitialStats(){this.getUserStats().subscribe({next:e=>console.debug("[Progress] Initial stats fetched",e),error:e=>console.error("[Progress] fetchInitialStats error",e)})}logWorkout(e,t){return le(this.getCurrentUserOnce()).pipe(Ce(r=>{if(!r)return Kr(()=>new Error("User not authenticated"));let i=e.exercises.reduce((l,u)=>l+(u.reps||0)*(u.sets||0),0),o=this.calculateCalories(e.exercises),s=e.exercises.reduce((l,u)=>l+(u.duration||0),0),a={userId:r.uid,routineId:e.id||"",routineName:e.name,date:et.fromDate(new Date),exercises:e.exercises,totalReps:i,caloriesBurned:o,duration:s,notes:t||"",completed:!0},c=Ot(this.firestore,`users/${r.uid}/workoutLogs`);return console.debug("[Progress] Logging workout to",c,a),le(Wi(c,a)).pipe(Ce(l=>this.updateUserStats().pipe(Y(()=>l.id),Ye(u=>(console.error("[Progress] updateUserStats FAILED (workout saved anyway):",u),q(l.id))))),Ye(l=>(console.error("[Progress] addDoc FAILED - workout not logged:",l),Kr(()=>l))))}))}updateUserStats(){return le(this.getCurrentUserOnce()).pipe(Ce(e=>e?this.getUserWorkoutLogs().pipe(Ce(t=>{let r=new Date;r.setHours(0,0,0,0);let i=t.map(c=>{let l=this.toDate(c.date);return l?(l.setHours(0,0,0,0),l.getTime()):0}).filter(c=>c>0).sort((c,l)=>l-c),o=0;for(let c of i){let l=new Date(r);if(l.setDate(r.getDate()-o),c===l.getTime())o++;else break}let s={streak:o,totalWorkouts:t.length,totalReps:t.reduce((c,l)=>c+(l.totalReps||0),0),caloriesBurned:t.reduce((c,l)=>c+(l.caloriesBurned||0),0),currentWeight:this.statsSubject.value.currentWeight,lastWorkoutDate:t[0]?.date},a=vt(this.firestore,`userStats/${e.uid}`);return le(Bo(a,this.sanitizeStatsForWrite(s),{merge:!0})).pipe(Y(()=>(this.statsSubject.next(s),s)))})):q(this.statsSubject.value)))}updateWeight(e){return le(this.getCurrentUserOnce()).pipe(Ce(t=>{if(!t)return Kr(()=>new Error("User not authenticated"));let r=vt(this.firestore,`userStats/${t.uid}`),i=oe(H({},this.statsSubject.value||{}),{currentWeight:e});return le(Bo(r,this.sanitizeStatsForWrite(i),{merge:!0})).pipe(Y(()=>{this.statsSubject.next(i)}))}))}getDailyProgress(e,t=7){let r=Ot(this.firestore,"dailyProgress"),i=on(r,Nt("userId","==",e),Cc("date","desc"),Qv(t));return Ec(i,{idField:"id"})}getDailyProgressFromLogs(e=7){return this.getUserWorkoutLogs().pipe(Y(t=>{let r=new Map;for(let o of t){let s=this.toDate(o.date);if(!s)continue;let a=s.toISOString().slice(0,10),c=r.get(a)||{userId:o.userId,date:new Date(a),caloriesBurned:0,workoutsCompleted:0};c.caloriesBurned=(c.caloriesBurned||0)+(o.caloriesBurned||0),c.workoutsCompleted=(c.workoutsCompleted||0)+1,c.totalReps=(c.totalReps||0)+(o.totalReps||0),r.set(a,c)}return Array.from(r.values()).sort((o,s)=>(s.date?.getTime()||0)-(o.date?.getTime()||0)).slice(0,e)}))}updateDailyProgress(e,t){let r=new Date;r.setHours(0,0,0,0);let i=`${e}_${r.toISOString().slice(0,10)}`,o=vt(this.firestore,"dailyProgress",i);return Bo(o,H({id:i,userId:e,date:r},t),{merge:!0})}getWorkoutHistory(e,t=30){let r=Ot(this.firestore,"workoutLogs"),i=on(r,Nt("userId","==",e),Cc("date","desc"),Qv(t));return Ec(i,{idField:"id"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var TQ=()=>["/"];function SQ(n,e){if(n&1){let t=ke();v(0,"li",13)(1,"a",14),ae("click",function(){de(t);let i=W();return he(i.collapseIfMobile())}),Q(2,"i",15),v(3,"span",16),E(4),m()()()}if(n&2){let t=e.$implicit,r=W();C(),Se("active",r.isActiveRoute(t.path)),N("routerLink",t.path),C(),wo(t.icon),C(2),re(t.title)}}function MQ(n,e){if(n&1&&(Bt(0),v(1,"span",24),Q(2,"i",25),v(3,"span",26),E(4),m()(),$t()),n&2){let t=e.ngIf;C(),N("title","Current streak: "+t+" day"+(t!==1?"s":"")),C(3),re(t)}}function AQ(n,e){if(n&1){let t=ke();Bt(0),v(1,"li",17)(2,"div",18)(3,"span",19),Q(4,"i",20),E(5),m(),K(6,MQ,5,2,"ng-container",21),fn(7,"async"),m()(),v(8,"li",13)(9,"button",22),ae("click",function(){de(t);let i=W();return i.logout(),he(i.isCollapsed=!0)}),Q(10,"i",23),v(11,"span",16),E(12,"Logout"),m()()(),$t()}if(n&2){let t=e.ngIf,r=W();C(5),ie("",t.displayName||t.email.split("@")[0]," "),C(),N("ngIf",Wn(7,2,r.streak$))}}function PQ(n,e){if(n&1){let t=ke();v(0,"li",13)(1,"a",31),ae("click",function(){de(t);let i=W(2);return he(i.collapseIfMobile())}),Q(2,"i",32),v(3,"span",16),E(4,"Sign Up"),m()()()}}function RQ(n,e){if(n&1){let t=ke();v(0,"li",27)(1,"a",28),ae("click",function(){de(t);let i=W();return he(i.collapseIfMobile())}),Q(2,"i",29),E(3,"Login "),m()(),K(4,PQ,5,0,"li",30)}if(n&2){let t=W();C(4),N("ngIf",t.showRegister)}}var Xv=class n{constructor(e,t,r,i){this.auth=e;this.router=t;this.streakService=r;this.progressService=i;this.user$=Vi(this.auth),Vi(this.auth).subscribe(o=>{o&&this.progressService.getUserStats().subscribe({next:()=>{},error:()=>{}})}),this.streak$=Vi(this.auth).pipe(Ce(o=>o?this.progressService.stats$:q(null)),Y(o=>o?o.streak:0))}isCollapsed=!0;user$;streak$;navItems=[{title:"Challenges",path:"/challenges",icon:"bi bi-clock"},{title:"Leaderboard",path:"/leaderboard",icon:"bi bi-award"},{title:"Routine",path:"/routines",icon:"bi bi-activity"},{title:"Progress",path:"/progress",icon:"bi bi-graph-up"},{title:"Home",path:"",icon:"bi bi-house-door"}];showRegister=!0;isActiveRoute(e){return this.router.url===e}collapseIfMobile(){window.innerWidth<992&&(this.isCollapsed=!0)}logout(){return S(this,null,function*(){yield this.auth.signOut(),this.router.navigate(["/home"])})}static \u0275fac=function(t){return new(t||n)(X(dt),X(ze),X(xu),X(Br))};static \u0275cmp=$e({type:n,selectors:[["app-navbar"]],decls:17,vars:10,consts:[["guest",""],[1,"fixed-top","navbar-wrapper"],[1,"navbar","navbar-expand-lg","navbar-dark"],[1,"container-fluid","px-3","px-lg-4"],[1,"navbar-brand",3,"click","routerLink"],[1,"bi","bi-lightning-fill"],["type","button","aria-controls","navbarContent","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],["id","navbarContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],["class","nav-item",4,"ngFor","ngForOf"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0","align-items-lg-center"],[4,"ngIf","ngIfElse"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link","d-flex","align-items-center",3,"click","routerLink"],["aria-hidden","true"],[1,"ms-2"],[1,"nav-item","d-flex","align-items-center","me-lg-4","mb-3","mb-lg-0"],[1,"d-flex","align-items-center","flex-wrap","gap-2"],[1,"text-light","fw-500","small"],[1,"bi","bi-person-circle","me-2"],[4,"ngIf"],["title","Sign out",1,"btn","btn-outline-light","d-flex","align-items-center","justify-content-center",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"badge","streak-badge",3,"title"],[1,"bi","bi-fire"],[1,"ms-1"],[1,"nav-item","mb-2","mb-lg-0"],["routerLink","/login",1,"nav-link","text-light","fw-bold","px-3","py-2",3,"click"],[1,"bi","bi-box-arrow-in-right","me-2"],["class","nav-item",4,"ngIf"],["routerLink","/register",1,"btn","btn-outline-light","ms-lg-2","d-flex","align-items-center","justify-content-center",3,"click"],[1,"bi","bi-person-plus-fill"]],template:function(t,r){if(t&1){let i=ke();v(0,"header",1)(1,"nav",2)(2,"div",3)(3,"a",4),ae("click",function(){return de(i),he(r.collapseIfMobile())}),Q(4,"i",5),v(5,"span"),E(6,"FitTrack"),m()(),v(7,"button",6),ae("click",function(){return de(i),he(r.isCollapsed=!r.isCollapsed)}),Q(8,"span",7),m(),v(9,"div",8)(10,"ul",9),K(11,SQ,5,6,"li",10),m(),v(12,"ul",11),K(13,AQ,13,4,"ng-container",12),fn(14,"async"),K(15,RQ,5,1,"ng-template",null,0,tr),m()()()()()}if(t&2){let i=er(16);C(3),N("routerLink",$a(9,TQ)),C(4),ws("aria-expanded",!r.isCollapsed),C(2),Se("show",r.isCollapsed),C(2),N("ngForOf",r.navItems),C(2),N("ngIf",Wn(14,7,r.user$))("ngIfElse",i)}},dependencies:[Je,Wt,it,Vt,At,kC,za],styles:[`body[_ngcontent-%COMP%]{margin:0;padding:80px 0 0;font-family:Segoe UI,sans-serif;background:linear-gradient(180deg,#f7fbfd,#eef6f8)!important}main[_ngcontent-%COMP%], .container[_ngcontent-%COMP%], .content-wrapper[_ngcontent-%COMP%]{margin-top:0;padding-top:0}.main-content[_ngcontent-%COMP%]{margin-top:80px}.navbar[_ngcontent-%COMP%]{position:fixed!important;top:0!important;left:0!important;right:0!important;width:100%!important;z-index:1030!important;background:#457b9d!important;padding:0 20px;border-bottom:2px solid #3a6a8a!important;margin:0;box-shadow:none;margin-bottom:2rem}.navbar-brand[_ngcontent-%COMP%]{font-weight:700;color:#f1faee!important}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background:none!important;color:#f1faee!important;border-radius:0;box-shadow:none!important;text-decoration:none!important;position:relative;padding:.5rem 1rem;margin:0 .25rem;transition:color .2s ease;font-weight:500}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#a8dadc!important}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0%;height:2px;background-color:#a8dadc;transition:width .2s ease}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:after{width:100%}.navbar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#a8dadc!important;text-decoration:none!important;font-weight:600}.navbar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:after{width:100%;background-color:#a8dadc}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background:none!important;box-shadow:none!important}.navbar-toggler[_ngcontent-%COMP%]{border-color:#a8dadc!important;padding:.25rem .5rem}.navbar-toggler-icon[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='%23A8DADC' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e")!important}.navbar-collapse[_ngcontent-%COMP%]{background:#457b9d;padding:1rem;border-top:1px solid #3a6a8a}.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{background:#457b9d;border:1px solid #3a6a8a;border-radius:0}.navbar[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#f1faee;background:transparent}.navbar[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#f1faee}.navbar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:transparent;color:#f1faee;border:1px solid #A8DADC;border-radius:4px;padding:.5rem 1.5rem;font-weight:600;transition:background .2s ease;box-shadow:none}.navbar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:#a8dadc1a;color:#f1faee;border-color:#f1faee}nav[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:2px solid rgba(168,218,220,.4);border-radius:50%;transition:border-color .2s ease}nav[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{border-color:#a8dadc}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .navbar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:active{border-bottom:none!important;text-decoration:none!important;outline:none!important}`]})};function kQ(n,e){n&1&&(v(0,"div",1)(1,"div",2)(2,"span",3),E(3,"Loading..."),m()()())}var Jv=class n{constructor(e){this.router=e;this.routerSub=this.router.events.subscribe(t=>{t instanceof Pi&&this.loading.set(!0),(t instanceof Gn||t instanceof Lr||t instanceof Ms)&&this.loading.set(!1)})}title=Hn("appdev_communityfitness");loading=Hn(!1);routerSub;ngOnDestroy(){this.routerSub?.unsubscribe()}static \u0275fac=function(t){return new(t||n)(X(ze))};static \u0275cmp=$e({type:n,selectors:[["app-root"]],decls:3,vars:1,consts:[["class","global-loader-overlay",4,"ngIf"],[1,"global-loader-overlay"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(t,r){t&1&&(K(0,kQ,4,0,"div",0),Q(1,"app-navbar")(2,"router-outlet")),t&2&&N("ngIf",r.loading())},dependencies:[Sh,Vt,Xv,it],styles:["()[_ngcontent-%COMP%]   .global-loader-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#fff9;z-index:1200}.global-loader-overlay[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.global-loader-overlay[_ngcontent-%COMP%]{pointer-events:none}.global-loader-overlay[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{pointer-events:auto}"]})};var Du=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(Du||{});function bT(n,e){return{type:Du.Trigger,name:n,definitions:e,options:{}}}function Zv(n,e=null){return{type:Du.Animate,styles:e,timings:n}}function Df(n){return{type:Du.Style,styles:n,offset:null}}function e_(n,e,t=null){return{type:Du.Transition,expr:n,animation:e,options:t}}var qV=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(X(Or),X(Mn))};static \u0275dir=rt({type:n})}return n})(),u_=(()=>{class n extends qV{static \u0275fac=(()=>{let t;return function(i){return(t||(t=xi(n)))(i||n)}})();static \u0275dir=rt({type:n,features:[Jn]})}return n})(),Au=new te("");var OQ={provide:Au,useExisting:mr(()=>$r),multi:!0};function NQ(){let n=Nr()?Nr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var FQ=new te(""),$r=(()=>{class n extends qV{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!NQ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(X(Or),X(Mn),X(FQ,8))};static \u0275dir=rt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Di([OQ]),Jn]})}return n})();function DT(n){return n==null||TT(n)===0}function TT(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var d_=new te(""),ST=new te(""),LQ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,We=class{static min(e){return GV(e)}static max(e){return VQ(e)}static required(e){return jQ(e)}static requiredTrue(e){return UQ(e)}static email(e){return BQ(e)}static minLength(e){return $Q(e)}static maxLength(e){return HQ(e)}static pattern(e){return zQ(e)}static nullValidator(e){return n_()}static compose(e){return ZV(e)}static composeAsync(e){return tj(e)}};function GV(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function VQ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function jQ(n){return DT(n.value)?{required:!0}:null}function UQ(n){return n.value===!0?null:{required:!0}}function BQ(n){return DT(n.value)||LQ.test(n.value)?null:{email:!0}}function $Q(n){return e=>{let t=e.value?.length??TT(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function HQ(n){return e=>{let t=e.value?.length??TT(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function zQ(n){if(!n)return n_;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(DT(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function n_(n){return null}function KV(n){return n!=null}function YV(n){return _o(n)?le(n):n}function QV(n){let e={};return n.forEach(t=>{e=t!=null?H(H({},e),t):e}),Object.keys(e).length===0?null:e}function XV(n,e){return e.map(t=>t(n))}function WQ(n){return!n.validate}function JV(n){return n.map(e=>WQ(e)?e:t=>e.validate(t))}function ZV(n){if(!n)return null;let e=n.filter(KV);return e.length==0?null:function(t){return QV(XV(t,e))}}function ej(n){return n!=null?ZV(JV(n)):null}function tj(n){if(!n)return null;let e=n.filter(KV);return e.length==0?null:function(t){let r=XV(t,e).map(YV);return nb(r).pipe(Y(QV))}}function nj(n){return n!=null?tj(JV(n)):null}function LV(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function rj(n){return n._rawValidators}function ij(n){return n._rawAsyncValidators}function wT(n){return n?Array.isArray(n)?n:[n]:[]}function r_(n,e){return Array.isArray(n)?n.includes(e):n===e}function VV(n,e){let t=wT(e);return wT(n).forEach(i=>{r_(t,i)||t.push(i)}),t}function jV(n,e){return wT(e).filter(t=>!r_(n,t))}var i_=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ej(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nj(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ic=class extends i_{name;get formDirective(){return null}get path(){return null}},xc=class extends i_{_parent=null;name=null;valueAccessor=null},o_=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},qQ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},nDe=oe(H({},qQ),{"[class.ng-submitted]":"isSubmitted"}),qi=(()=>{class n extends o_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(X(xc,2))};static \u0275dir=rt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Se("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Jn]})}return n})(),Pu=(()=>{class n extends o_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(X(Ic,10))};static \u0275dir=rt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Se("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Jn]})}return n})();var Tf="VALID",t_="INVALID",Tu="PENDING",Sf="DISABLED",ea=class{},s_=class extends ea{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Mf=class extends ea{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Af=class extends ea{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Su=class extends ea{status;source;constructor(e,t){super(),this.status=e,this.source=t}},ET=class extends ea{source;constructor(e){super(),this.source=e}},Pf=class extends ea{source;constructor(e){super(),this.source=e}};function MT(n){return(h_(n)?n.validators:n)||null}function GQ(n){return Array.isArray(n)?ej(n):n||null}function AT(n,e){return(h_(e)?e.asyncValidators:n)||null}function KQ(n){return Array.isArray(n)?nj(n):n||null}function h_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function oj(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new J(1e3,"");if(!r[t])throw new J(1001,"")}function sj(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new J(1002,"")})}var Mu=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ht(this.statusReactive)}set status(e){Ht(()=>this.statusReactive.set(e))}_status=Al(()=>this.statusReactive());statusReactive=Hn(void 0);get valid(){return this.status===Tf}get invalid(){return this.status===t_}get pending(){return this.status==Tu}get disabled(){return this.status===Sf}get enabled(){return this.status!==Sf}errors;get pristine(){return Ht(this.pristineReactive)}set pristine(e){Ht(()=>this.pristineReactive.set(e))}_pristine=Al(()=>this.pristineReactive());pristineReactive=Hn(!0);get dirty(){return!this.pristine}get touched(){return Ht(this.touchedReactive)}set touched(e){Ht(()=>this.touchedReactive.set(e))}_touched=Al(()=>this.touchedReactive());touchedReactive=Hn(!1);get untouched(){return!this.touched}_events=new bt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(VV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(VV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jV(e,this._rawAsyncValidators))}hasValidator(e){return r_(this._rawValidators,e)}hasAsyncValidator(e){return r_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Af(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Af(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Mf(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Mf(!0,r))}markAsPending(e={}){this.status=Tu;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Su(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(H({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Sf,this.errors=null,this._forEachChild(i=>{i.disable(oe(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new s_(this.value,r)),this._events.next(new Su(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Tf,this._forEachChild(r=>{r.enable(oe(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tf||this.status===Tu)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new s_(this.value,t)),this._events.next(new Su(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(H({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sf:Tf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Tu,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=YV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Su(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new gt,this.statusChanges=new gt}_calculateStatus(){return this._allControlsDisabled()?Sf:this.errors?t_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tu)?Tu:this._anyControlsHaveStatus(t_)?t_:Tf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Mf(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Af(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){h_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=GQ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=KQ(this._rawAsyncValidators)}},a_=class extends Mu{constructor(e,t,r){super(MT(t),AT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){sj(this,!0,e),Object.keys(e).forEach(r=>{oj(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Pf(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var CT=class extends a_{};var f_=new te("",{providedIn:"root",factory:()=>p_}),p_="always";function aj(n,e){return[...e.path,n]}function IT(n,e,t=p_){PT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),QQ(n,e),JQ(n,e),XQ(n,e),YQ(n,e)}function UV(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),l_(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function c_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function YQ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function PT(n,e){let t=rj(n);e.validator!==null?n.setValidators(LV(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=ij(n);e.asyncValidator!==null?n.setAsyncValidators(LV(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();c_(e._rawValidators,i),c_(e._rawAsyncValidators,i)}function l_(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=rj(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=ij(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return c_(e._rawValidators,r),c_(e._rawAsyncValidators,r),t}function QQ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&cj(n,e)})}function XQ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&cj(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function cj(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function JQ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function ZQ(n,e){n==null,PT(n,e)}function eX(n,e){return l_(n,e)}function lj(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function tX(n){return Object.getPrototypeOf(n.constructor)===u_}function nX(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function uj(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===$r?t=o:tX(o)?r=o:i=o}),i||r||t||null}function rX(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function BV(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $V(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Zs=class extends Mu{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(MT(t),AT(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),h_(t)&&(t.nonNullable||t.initialValueIsDefault)&&($V(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Pf(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){$V(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var iX=n=>n instanceof Zs;var oX={provide:xc,useExisting:mr(()=>Rf)},HV=Promise.resolve(),Rf=(()=>{class n extends xc{_changeDetectorRef;callSetDisabledState;control=new Zs;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new gt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=uj(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),lj(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){IT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){HV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ha(r);HV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?aj(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(X(Ic,9),X(d_,10),X(ST,10),X(Au,10),X(Ti,8),X(f_,8))};static \u0275dir=rt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Di([oX]),Jn,kr]})}return n})();var Ru=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),sX={provide:Au,useExisting:mr(()=>Ho),multi:!0},Ho=(()=>{class n extends u_{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xi(n)))(i||n)}})();static \u0275dir=rt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ae("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Di([sX]),Jn]})}return n})();var dj=new te("");var aX={provide:Ic,useExisting:mr(()=>Dc)},Dc=(()=>{class n extends Ic{callSetDisabledState;get submitted(){return Ht(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Al(()=>this._submittedReactive());_submittedReactive=Hn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new gt;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(l_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return IT(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){UV(t.control||null,t,!1),rX(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),nX(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new ET(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(UV(r||null,t),iX(i)&&(IT(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);ZQ(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&eX(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){PT(this.form,this),this._oldForm&&l_(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(X(d_,10),X(ST,10),X(f_,8))};static \u0275dir=rt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Di([aX]),Jn,kr]})}return n})();var cX={provide:xc,useExisting:mr(()=>Tc)},Tc=(()=>{class n extends xc{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new gt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=uj(this,o)}ngOnChanges(t){this._added||this._setUpControl(),lj(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return aj(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(X(Ic,13),X(d_,10),X(ST,10),X(Au,10),X(dj,8))};static \u0275dir=rt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Di([cX]),Jn,kr]})}return n})();var lX={provide:Au,useExisting:mr(()=>Gi),multi:!0};function hj(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function uX(n){return n.split(":")[0]}var Gi=(()=>{class n extends u_{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=L(bo).injector;destroyRef=L(Rr);cdr=L(Ti);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,qd({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=hj(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=uX(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xi(n)))(i||n)}})();static \u0275dir=rt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Di([lX]),Jn]})}return n})(),ta=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(hj(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(X(Mn),X(Or),X(Gi,9))};static \u0275dir=rt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),dX={provide:Au,useExisting:mr(()=>fj),multi:!0};function zV(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function hX(n){return n.split(":")[0]}var fj=(()=>{class n extends u_{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=hX(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xi(n)))(i||n)}})();static \u0275dir=rt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Di([dX]),Jn]})}return n})(),na=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(zV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(zV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(X(Mn),X(Or),X(fj,9))};static \u0275dir=rt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function fX(n){return typeof n=="number"?n:parseFloat(n)}var pX=(()=>{class n{_validator=n_;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):n_,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=rt({type:n,features:[kr]})}return n})();var gX={provide:d_,useExisting:mr(()=>RT),multi:!0},RT=(()=>{class n extends pX{min;inputName="min";normalizeInput=t=>fX(t);createValidator=t=>GV(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=xi(n)))(i||n)}})();static \u0275dir=rt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ws("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Di([gX]),Jn]})}return n})();var pj=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=Xn({})}return n})(),xT=class extends Mu{constructor(e,t,r){super(MT(t),AT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){sj(this,!1,e),e.forEach((r,i)=>{oj(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Pf(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function WV(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var ku=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return WV(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new a_(i,o)}record(t,r=null){let i=this._reduceControls(t);return new CT(i,r)}control(t,r,i){let o={};return this.useNonNullable?(WV(r)?o=r:(o.validators=r,o.asyncValidators=i),new Zs(t,oe(H({},o),{nonNullable:!0}))):new Zs(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new xT(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Zs)return t;if(t instanceof Mu)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ou=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:f_,useValue:t.callSetDisabledState??p_}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=Xn({imports:[pj]})}return n})(),Nu=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:dj,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:f_,useValue:t.callSetDisabledState??p_}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=Xn({imports:[pj]})}return n})();var ra=class n{_metrics=new ft({userId:"",weight:75,height:170,metabolism:"medium",gender:"male",bmi:24.1,lastUpdated:new Date});userMetrics$=this._metrics.asObservable();_loaded=new ft(!1);metricsLoaded$=this._loaded.asObservable();get userMetrics(){return this._metrics.getValue()}setMetrics(e){this._metrics.next(e),this._loaded.next(!0)}getMetricsSnapshot(){return this._metrics.getValue()}markLoaded(){this._loaded.next(!0)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var ia=class n{constructor(e,t,r,i){this.auth=e;this.firestore=t;this.router=r;this.userService=i;Vi(this.auth).pipe(Ce(o=>{if(!o)return q(null);let s=vt(this.firestore,`users/${o.uid}`);return Yv(s).pipe(Y(a=>({uid:o.uid,email:o.email,displayName:a?.displayName??o.displayName??null,photoURL:a?.photoURL??o.photoURL??null,createdAt:a?.createdAt??null,gender:a?.gender??null,weight:a?.weight??null,height:a?.height??null,metabolism:a?.metabolism??null})),Ye(()=>q(null)))}),ol(this.destroy$)).subscribe(o=>{this._user.next(o),o&&o.weight!=null&&o.height!=null&&this.userService.setMetrics({userId:o.uid,weight:o.weight??75,height:o.height??170,metabolism:o.metabolism??"medium",gender:o.gender??"other",bmi:this.calculateBMI(o.weight??75,o.height??170),lastUpdated:new Date})})}destroy$=new bt;_user=new ft(null);user$=this._user.asObservable();calculateBMI(e,t){if(!e||!t)return 0;let r=t/100,i=e/(r*r);return Number(i.toFixed(1))}get isAuthenticated$(){return this.user$.pipe(Y(Boolean))}register(e,t,r){return S(this,null,function*(){let o=(yield U2(this.auth,e,t)).user;r&&(yield W2(o,{displayName:r}));let s=vt(this.firestore,`users/${o.uid}`);return yield Bo(s,{uid:o.uid,email:o.email,displayName:r??o.displayName??null,photoURL:o.photoURL??null,createdAt:xf(),points:0,lastPointsUpdate:xf()},{merge:!0}),o})}login(e,t){return S(this,null,function*(){return(yield z2(this.auth,e,t)).user})}logout(){return S(this,null,function*(){yield this.auth.signOut(),yield this.router.navigate(["/login"])})}sendPasswordResetEmail(e){return S(this,null,function*(){return H2(this.auth,e)})}getIdToken(){return this.auth.currentUser?.getIdToken()??Promise.resolve(null)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||n)(ce(dt),ce(rn),ce(ze),ce(ra))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var lr=class n{firestore=L(rn);auth=L(dt);routinesCollection=Ot(this.firestore,"routines");getUserRoutines(){return new ue(e=>{let t=null,r=Po(this.auth,i=>{if(!i){e.next([]);return}let o=i.uid,s=on(this.routinesCollection,Nt("userId","==",o));return t=If(s,a=>{let c=a.docs.map(l=>H({id:l.id},l.data()));e.next(c)},a=>{e.error(a)}),()=>{if(t)try{t()}catch{}try{r()}catch{}}});return()=>r()})}getRoutineById(e){let t=vt(this.firestore,"routines",e);return Yv(t,{idField:"id"}).pipe(Y(r=>r||null))}getTodayRoutine(e){let t=new Date().toLocaleString("en-us",{weekday:"long"}).toLowerCase(),r=Ot(this.firestore,"routines"),i=on(r,Nt("userId","==",e));return Ec(i,{idField:"id"}).pipe(Y(o=>o.filter(s=>s.schedule?.some(a=>typeof a=="string"?a.toLowerCase()===t:(a?.day??"").toLowerCase()===t))))}createRoutine(e){return new ue(t=>{let r=this.auth.currentUser;if(r)this.addRoutineDoc(e,r.uid,t);else{let i=!1,o=Po(this.auth,s=>{i||s&&(i=!0,o(),this.addRoutineDoc(e,s.uid,t))},s=>!i&&t.error(s))}})}addRoutineDoc(e,t,r){let i={userId:t,name:e.name||"Untitled Routine",description:e.description||"",schedule:e.schedule||[],time:e.time||"09:00",exercises:e.exercises||[],completedDates:e.completedDates||[],createdAt:xf(),isPremade:e.isPremade||!1};Wi(this.routinesCollection,i).then(o=>{r.next(o.id),r.complete()}).catch(o=>r.error(o))}updateRoutine(e){if(!e.id)throw new Error("Routine ID is required");let t=vt(this.firestore,"routines",e.id);return new ue(r=>{Cf(t).then(i=>{if(!i.exists()){r.error(new Error("Routine not found"));return}let o=i.data();if(o.isPremade===!0||!o.userId){r.error(new Error("Cannot edit premade routine"));return}$o(t,{name:e.name,description:e.description,schedule:e.schedule,time:e.time,exercises:e.exercises,completedDates:e.completedDates||[]}).then(()=>{r.next(),r.complete()}).catch(a=>r.error(a))}).catch(i=>r.error(i))})}deleteUserRoutine(e){let t=vt(this.firestore,"routines",e);return new ue(r=>{Cf(t).then(i=>{if(!i.exists()){r.error(new Error("Routine not found"));return}let o=i.data();if(!o.userId||o.isPremade){r.error(new Error("Cannot delete premade routine"));return}OV(t).then(()=>{r.next(),r.complete()}).catch(s=>r.error(s))}).catch(i=>r.error(i))})}clonePremadeRoutine(e){return new ue(t=>{let r=this.auth.currentUser;if(r){let i=oe(H({},e),{isPremade:!1});this.addRoutineDoc(i,r.uid,t)}else{let i=!1,o=Po(this.auth,s=>{if(!i&&s){i=!0,o();let a=oe(H({},e),{isPremade:!1});this.addRoutineDoc(a,s.uid,t)}},s=>!i&&t.error(s))}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Fu=class n{firestore=L(rn);auth=L(dt);challengesCollection=Ot(this.firestore,"challenges");userChallengesCollection=Ot(this.firestore,"userChallenges");getWeekKey(e){let t=new Date(e),r=t.getDay(),i=t.getDate()-r+(r===0?-6:1);return new Date(t.setDate(i)).toISOString().split("T")[0]}getDailyChallenges(){let e=on(this.challengesCollection,Nt("type","==","daily"));return le(cr(e)).pipe(Y(t=>t.docs.map(r=>H({id:r.id},r.data()))))}getPublicDailyChallenges(){return this.getDailyChallenges()}getWeeklyChallenges(){let e=on(this.challengesCollection,Nt("type","==","weekly"));return le(cr(e)).pipe(Y(t=>t.docs.map(r=>H({id:r.id},r.data()))))}getPublicWeeklyChallenges(){return this.getWeeklyChallenges()}getDailyChallengeOfTheDay(){let e=this.auth.currentUser?.uid;if(!e)return q(null);let t=new Date().toISOString().split("T")[0],r=vt(this.firestore,"users",e);return le(Uo(r)).pipe(Ce(i=>{let o=i.exists()?i.data():{},s=o?.dailyChallengeId,a=o?.dailyChallengeDate;if(s&&a===t){let c=vt(this.firestore,"challenges",s);return le(Uo(c)).pipe(Y(l=>l.exists()?H({id:l.id},l.data()):null),Ye(l=>(console.error("[ChallengeService] Error fetching assigned daily challenge:",l),q(null))))}return this.getDailyChallenges().pipe(Ce(c=>{if(!c||c.length===0)return q(null);let l=c[Math.floor(Math.random()*c.length)];return l?.id?le($o(r,{dailyChallengeId:l.id,dailyChallengeDate:t})).pipe(Y(()=>l),Ye(u=>(console.error("[ChallengeService] Failed to assign daily challenge, returning chosen challenge anyway",u),q(l)))):q(l||null)}))}),Ye(i=>(console.error("[ChallengeService] Fatal error in getDailyChallengeOfTheDay",i),q(null))))}getWeeklyChallengeOfTheWeek(){let e=this.auth.currentUser?.uid;if(!e)return q(null);let t=this.getWeekKey(new Date),r=vt(this.firestore,"users",e);return le(Uo(r)).pipe(Ce(i=>{let o=i.exists()?i.data():{},s=o?.weeklyChallengeId,a=o?.weeklyChallengeWeek;if(s&&a===t){let c=vt(this.firestore,"challenges",s);return le(Uo(c)).pipe(Y(l=>l.exists()?H({id:l.id},l.data()):null),Ye(l=>(console.error("[ChallengeService] Error fetching assigned weekly challenge:",l),q(null))))}return this.getWeeklyChallenges().pipe(Ce(c=>{if(!c||c.length===0)return q(null);let l=c[Math.floor(Math.random()*c.length)];return l?.id?le($o(r,{weeklyChallengeId:l.id,weeklyChallengeWeek:t})).pipe(Y(()=>l),Ye(u=>(console.error("[ChallengeService] Failed to assign weekly challenge, returning chosen challenge anyway",u),q(l)))):q(l||null)}))}),Ye(i=>(console.error("Error in getWeeklyChallengeOfTheWeek:",i),q(null))))}completeChallenge(e){let t=this.auth.currentUser?.uid;if(!t)throw new Error("User not authenticated");if(!e.id)throw new Error("Cannot complete challenge: missing ID");let r={userId:t,challengeId:e.id,challengeTitle:e.title,challengeType:e.type,points:e.points,completedAt:new Date,status:"completed"};return le(Wi(this.userChallengesCollection,r)).pipe(Y(i=>i.id))}getUserCompletedChallenges(){let e=this.auth.currentUser?.uid;if(!e)return q([]);let t=on(this.userChallengesCollection,Nt("userId","==",e),Nt("status","==","completed"));return le(cr(t)).pipe(Y(r=>r.docs.map(i=>{let o=i.data();return{id:i.id,userId:o.userId,challengeId:o.challengeId,challengeTitle:o.challengeTitle,challengeType:o.challengeType,points:typeof o.points=="number"?o.points:Number(o.points)||0,completedAt:o.completedAt?.toDate?.()||new Date(o.completedAt),status:o.status}})),Y(r=>r.sort((i,o)=>+new Date(o.completedAt).getTime()-+new Date(i.completedAt).getTime())),Ye(r=>(console.error("[ChallengeService] getUserCompletedChallenges error",r),q([]))))}hasCompletedChallenge(e){let t=this.auth.currentUser?.uid;if(!t)return q(!1);let r=on(this.userChallengesCollection,Nt("userId","==",t),Nt("challengeId","==",e),Nt("status","==","completed"));return le(cr(r)).pipe(Y(i=>!i.empty))}getUserTotalPoints(){return this.getUserCompletedChallenges().pipe(Y(e=>e.reduce((t,r)=>t+r.points,0)))}pickRandom(e,t){if(!e||e.length<=t)return[...e];let r=[],i=[...e];for(;r.length<t&&i.length;){let o=Math.floor(Math.random()*i.length);r.push(i.splice(o,1)[0])}return r}getDailyChallengesOfTheDay(){let e=this.auth.currentUser?.uid;if(!e)return q(null);let t=new Date().toISOString().split("T")[0],r=vt(this.firestore,"users",e);return this.getDailyChallenges().pipe(Ce(i=>!i||i.length===0?q([]):le(Uo(r)).pipe(Ce(o=>{let s=o.exists()?o.data():{},a=s?.assignedDailyIds,c=s?.assignedDailyDate;if(a&&c===t){let h=a.map(f=>i.find(p=>p.id===f)).filter(Boolean);return q(h)}let l=this.pickRandom(i,3),u=l.map(h=>h.id).filter(Boolean);return le($o(r,{assignedDailyIds:u,assignedDailyDate:t})).pipe(Y(()=>l),Ye(()=>q(l)))}))),Ye(i=>(console.error("[ChallengeService] getDailyChallengesOfTheDay error",i),q(null))))}getWeeklyChallengesOfTheWeek(){let e=this.auth.currentUser?.uid;if(!e)return q(null);let t=this.getWeekKey(new Date),r=vt(this.firestore,"users",e);return this.getWeeklyChallenges().pipe(Ce(i=>!i||i.length===0?q([]):le(Uo(r)).pipe(Ce(o=>{let s=o.exists()?o.data():{},a=s?.assignedWeeklyIds,c=s?.assignedWeeklyWeek;if(a&&c===t){let h=a.map(f=>i.find(p=>p.id===f)).filter(Boolean);return q(h)}let l=this.pickRandom(i,7),u=l.map(h=>h.id).filter(Boolean);return le($o(r,{assignedWeeklyIds:u,assignedWeeklyWeek:t})).pipe(Y(()=>l),Ye(()=>q(l)))}))),Ye(i=>(console.error("[ChallengeService] getWeeklyChallengesOfTheWeek error",i),q(null))))}seedChallenges(){return S(this,null,function*(){let e=[{title:"100 Push-ups",description:"Complete 100 push-ups today",type:"daily",points:50,difficulty:"Medium",category:"Strength"},{title:"5K Run",description:"Run 5 kilometers",type:"daily",points:75,difficulty:"Hard",category:"Cardio"},{title:"500 Squats",description:"Complete 500 squats",type:"daily",points:60,difficulty:"Hard",category:"Strength"},{title:"10 Min Plank",description:"Hold plank for 10 minutes total",type:"daily",points:80,difficulty:"Hard",category:"Strength"},{title:"No Sugar Day",description:"Avoid sugar for 24 hours",type:"daily",points:40,difficulty:"Medium",category:"Nutrition"},{title:"2L Water",description:"Drink 2 liters of water",type:"daily",points:30,difficulty:"Easy",category:"Nutrition"},{title:"Morning Yoga",description:"Complete 30 min yoga session",type:"daily",points:45,difficulty:"Easy",category:"Flexibility"},{title:"Stairs Challenge",description:"Climb 20 flights of stairs",type:"daily",points:55,difficulty:"Medium",category:"Cardio"},{title:"Meal Prep",description:"Prepare healthy meals for tomorrow",type:"daily",points:35,difficulty:"Easy",category:"Nutrition"},{title:"Stretch Session",description:"20 minutes of stretching",type:"daily",points:25,difficulty:"Easy",category:"Flexibility"},{title:"Breathing Exercises",description:"Practice deep breathing for 10 minutes",type:"daily",points:30,difficulty:"Easy",category:"Flexibility"},{title:"Sleep Quality",description:"Get 8 hours of quality sleep",type:"daily",points:40,difficulty:"Medium",category:"Consistency"},{title:"No Processed Food",description:"Avoid all processed foods today",type:"daily",points:50,difficulty:"Medium",category:"Nutrition"},{title:"Rainbow Plate",description:"Eat 3 different colored vegetables",type:"daily",points:35,difficulty:"Easy",category:"Nutrition"},{title:"Burpee Challenge",description:"Complete 100 burpees throughout the day",type:"daily",points:70,difficulty:"Hard",category:"Cardio"},{title:"Pull-up Progress",description:"Do 5 sets of max pull-ups",type:"daily",points:65,difficulty:"Hard",category:"Strength"},{title:"Stair Master",description:"Walk up 30 flights of stairs",type:"daily",points:55,difficulty:"Medium",category:"Cardio"},{title:"Core Circuit",description:"Complete 3 rounds of core exercises",type:"daily",points:50,difficulty:"Medium",category:"Strength"},{title:"Focus Time",description:"No phone during workouts",type:"daily",points:25,difficulty:"Easy",category:"Consistency"},{title:"Active Recovery",description:"Light stretching before bed",type:"daily",points:20,difficulty:"Easy",category:"Flexibility"},{title:"Step Goal Plus",description:"Walk 12,000 steps",type:"daily",points:45,difficulty:"Medium",category:"Cardio"},{title:"Yoga Flow",description:"Complete a 20-minute yoga routine",type:"daily",points:35,difficulty:"Easy",category:"Flexibility"},{title:"Protein Power",description:"Consume 30g protein per meal",type:"daily",points:40,difficulty:"Medium",category:"Nutrition"},{title:"No Late Snacks",description:"Stop eating 3 hours before bedtime",type:"daily",points:30,difficulty:"Medium",category:"Nutrition"},{title:"Jumping Jacks",description:"Complete 500 jumping jacks",type:"daily",points:45,difficulty:"Medium",category:"Cardio"}],t=[{title:"Week Warrior",description:"Workout 5 days this week",type:"weekly",points:200,difficulty:"Medium",category:"Consistency"},{title:"Clean Eating",description:"Eat healthy all week",type:"weekly",points:150,difficulty:"Medium",category:"Nutrition"},{title:"50K Steps",description:"Walk 50,000 steps this week",type:"weekly",points:175,difficulty:"Hard",category:"Cardio"},{title:"Strength Builder",description:"Complete 3 strength sessions",type:"weekly",points:180,difficulty:"Medium",category:"Strength"},{title:"Cardio King",description:"Log 2 hours of cardio",type:"weekly",points:190,difficulty:"Hard",category:"Cardio"},{title:"Early Bird",description:"Workout before 8 AM daily",type:"weekly",points:160,difficulty:"Hard",category:"Consistency"},{title:"Hydration Hero",description:"Drink 2L water daily",type:"weekly",points:140,difficulty:"Easy",category:"Nutrition"},{title:"Yoga Week",description:"Complete 4 yoga sessions",type:"weekly",points:155,difficulty:"Easy",category:"Flexibility"},{title:"Core Focus",description:"30 min of core work daily",type:"weekly",points:170,difficulty:"Medium",category:"Strength"},{title:"Consistency Champion",description:"No missed workouts",type:"weekly",points:250,difficulty:"Hard",category:"Consistency"},{title:"Digital Discipline",description:"No phone first hour after waking",type:"weekly",points:160,difficulty:"Hard",category:"Consistency"},{title:"Meal Timing",description:"Eat meals at consistent times daily",type:"weekly",points:140,difficulty:"Medium",category:"Nutrition"},{title:"Sleep Routine",description:"Same bedtime and wake-up time daily",type:"weekly",points:150,difficulty:"Medium",category:"Consistency"},{title:"Bodyweight Beast",description:"Complete 5 full-body bodyweight workouts",type:"weekly",points:220,difficulty:"Hard",category:"Strength"},{title:"Endurance Builder",description:"Complete 4 cardio sessions (30+ min)",type:"weekly",points:200,difficulty:"Hard",category:"Cardio"},{title:"Breathing Routine",description:"Practice breathing exercises daily",type:"weekly",points:130,difficulty:"Medium",category:"Flexibility"},{title:"Home Cooking",description:"Prepare all meals from scratch",type:"weekly",points:180,difficulty:"Hard",category:"Nutrition"},{title:"Flexibility Focus",description:"Daily stretching routine (20+ min)",type:"weekly",points:155,difficulty:"Medium",category:"Flexibility"},{title:"Clean Eating",description:"No added sugars or processed foods",type:"weekly",points:200,difficulty:"Hard",category:"Nutrition"},{title:"Two-a-Day",description:"Morning and evening workouts 3 times",type:"weekly",points:240,difficulty:"Hard",category:"Consistency"},{title:"Outdoor Cardio",description:"All cardio sessions done outdoors",type:"weekly",points:170,difficulty:"Medium",category:"Cardio"},{title:"Macro Master",description:"Hit daily macro nutrient targets",type:"weekly",points:190,difficulty:"Hard",category:"Nutrition"},{title:"Recovery Routine",description:"Foam rolling after every workout",type:"weekly",points:145,difficulty:"Medium",category:"Flexibility"},{title:"Skill Development",description:"Practice handstands or mobility daily",type:"weekly",points:165,difficulty:"Medium",category:"Flexibility"},{title:"Active Days",description:"10,000+ steps every day",type:"weekly",points:175,difficulty:"Hard",category:"Consistency"}];for(let r of[...e,...t])yield Wi(this.challengesCollection,oe(H({},r),{createdAt:new Date}));console.log("Challenges seeded successfully!")})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var yX=n=>["/routines",n],vX=()=>["/routines"],mj=()=>["/challenges"];function _X(n,e){n&1&&(v(0,"div",8)(1,"div",9)(2,"span",10),E(3,"Loading..."),m()()())}function bX(n,e){if(n&1&&(Bt(0),v(1,"h6",25),E(2),m(),v(3,"p",26),E(4),m(),v(5,"a",27),E(6," View Routine "),m(),$t()),n&2){let t=W(3);C(2),re(t.todayRoutine.name),C(2),dn(" ",t.todayRoutine.exercises.length," exercises \xB7 ",t.todayRoutine.time," "),C(),N("routerLink",Qd(4,yX,t.todayRoutine.id))}}function wX(n,e){n&1&&(v(0,"p",28),E(1,"No routine scheduled for today."),m(),v(2,"a",29),E(3," Browse Routines "),m()),n&2&&(C(2),N("routerLink",$a(1,vX)))}function EX(n,e){if(n&1&&(Bt(0),v(1,"h6",30),E(2),m(),v(3,"p",26),E(4),m(),v(5,"a",31),E(6," Take Challenge "),m(),$t()),n&2){let t=W(3);C(2),re(t.dailyChallenge.title),C(2),re(t.dailyChallenge.description),C(),N("routerLink",$a(3,mj))}}function CX(n,e){n&1&&(v(0,"p",28),E(1,"No challenge today. Check back tomorrow!"),m(),v(2,"a",32),E(3," Browse Challenges "),m()),n&2&&(C(2),N("routerLink",$a(1,mj)))}function IX(n,e){if(n&1&&(Bt(0),v(1,"div",33)(2,"div",34),E(3,"Weight"),m(),v(4,"div",35),E(5),m()(),v(6,"div",36)(7,"div",34),E(8,"Height"),m(),v(9,"div",35),E(10),m()(),v(11,"div",36)(12,"div",34),E(13,"BMI"),m(),v(14,"div",35),E(15),m()(),v(16,"div",36)(17,"div",34),E(18,"Metabolism"),m(),v(19,"div",37),E(20),m()(),v(21,"div",38)(22,"div",34),E(23,"Gender"),m(),v(24,"div",37),E(25),m()(),$t()),n&2){let t=e.ngIf;C(5),ie("",t.weight," kg"),C(5),ie("",t.height," cm"),C(5),re(t.bmi),C(5),re(t.metabolism),C(5),re(t.gender)}}function xX(n,e){n&1&&(v(0,"div",39),Q(1,"div",40),v(2,"div",41),E(3,"Loading metrics..."),m()())}function DX(n,e){n&1&&(v(0,"div",67),E(1," Enter a valid weight (20\u2013500). "),m())}function TX(n,e){n&1&&(v(0,"div",67),E(1," Enter a valid height (100\u2013250). "),m())}function SX(n,e){if(n&1&&(v(0,"div",68)(1,"div",69),E(2,"BMI"),m(),v(3,"div",70),E(4),m()()),n&2){let t=W(4);C(4),re(t.bmi)}}function MX(n,e){if(n&1&&(v(0,"div",71),E(1),m()),n&2){let t=W(4);C(),re(t.saveError)}}function AX(n,e){if(n&1){let t=ke();v(0,"div",42),Q(1,"div",43),v(2,"div",44)(3,"div",45)(4,"div",46)(5,"div",47)(6,"h5",48),E(7,"Edit Metrics"),m(),v(8,"button",49),ae("click",function(){de(t);let i=W(3);return he(i.closeEditMetrics())}),m()(),v(9,"div",50)(10,"form",51),ae("ngSubmit",function(){de(t);let i=W(3);return he(i.saveMetrics())}),v(11,"div",52)(12,"label",53),E(13,"Weight (kg)"),m(),Q(14,"input",54),K(15,DX,2,0,"div",55),m(),v(16,"div",52)(17,"label",53),E(18,"Height (cm)"),m(),Q(19,"input",56),K(20,TX,2,0,"div",55),m(),v(21,"div",52)(22,"label",53),E(23,"Metabolism"),m(),v(24,"select",57)(25,"option",58),E(26,"Slow"),m(),v(27,"option",59),E(28,"Medium"),m(),v(29,"option",60),E(30,"Fast"),m()()(),v(31,"div",52)(32,"label",53),E(33,"Gender"),m(),v(34,"select",61)(35,"option",62),E(36,"Male"),m(),v(37,"option",63),E(38,"Female"),m(),v(39,"option",64),E(40,"Other"),m()()(),K(41,SX,5,1,"div",65)(42,MX,2,1,"div",66),m()()()()()()}if(n&2){let t,r,i=W(3);C(10),N("formGroup",i.metricsForm),C(5),N("ngIf",((t=i.metricsForm.get("weight"))==null?null:t.touched)&&((t=i.metricsForm.get("weight"))==null?null:t.invalid)),C(5),N("ngIf",((r=i.metricsForm.get("height"))==null?null:r.touched)&&((r=i.metricsForm.get("height"))==null?null:r.invalid)),C(21),N("ngIf",i.bmi!==null),C(),N("ngIf",i.saveError)}}function PX(n,e){if(n&1&&(Bt(0),v(1,"div")(2,"div",11)(3,"div",12)(4,"div",13)(5,"div",14)(6,"div",15),Q(7,"i",16),m()(),v(8,"h5",17),E(9,"Today's Routine"),m(),K(10,bX,7,6,"ng-container",7)(11,wX,4,2,"ng-template",null,2,tr),m()(),v(13,"div",12)(14,"div",18)(15,"div",14)(16,"div",19),Q(17,"i",20),m()(),v(18,"h5",17),E(19,"Daily Challenge"),m(),K(20,EX,7,4,"ng-container",7)(21,CX,4,2,"ng-template",null,3,tr),m()(),v(23,"div",12)(24,"div",21)(25,"div",14)(26,"div",22),Q(27,"i",23),m()(),v(28,"h5",17),E(29,"Your Metrics"),m(),K(30,IX,26,5,"ng-container",7),fn(31,"async"),K(32,xX,4,0,"ng-template",null,4,tr),m()()(),K(34,AX,43,5,"div",24),m(),$t()),n&2){let t=er(12),r=er(22),i=er(33),o=W(2);C(),N("@slideInOut",void 0),C(9),N("ngIf",o.todayRoutine)("ngIfElse",t),C(10),N("ngIf",o.dailyChallenge)("ngIfElse",r),C(10),N("ngIf",Wn(31,8,o.userService.userMetrics$))("ngIfElse",i),C(4),N("ngIf",o.editModalOpen)}}function RX(n,e){if(n&1&&(Bt(0),K(1,PX,35,10,"ng-container",7),fn(2,"async"),$t()),n&2){let t=W(),r=er(6);C(),N("ngIf",Wn(2,2,t.user$))("ngIfElse",r)}}function kX(n,e){n&1&&(v(0,"div",8)(1,"div",9)(2,"span",10),E(3,"Loading..."),m()()())}function OX(n,e){if(n&1&&(v(0,"div",112)(1,"div",113)(2,"div",114),Q(3,"i",115)(4,"i",115)(5,"i",115)(6,"i",115)(7,"i",115),m(),v(8,"p",116),E(9),m(),v(10,"div",117)(11,"div",118),E(12),m(),v(13,"div")(14,"p",119),E(15),m(),v(16,"p",120),E(17),m()()()()()),n&2){let t=e.$implicit,r=e.index;C(),An("animation","fadeInUp "+(.7+r*.15)+"s ease-out"),C(8),ie('"',t.text,'"'),C(3),re(t.name.charAt(0)),C(3),re(t.name),C(2),ie("Age ",t.age)}}function NX(n,e){if(n&1&&(v(0,"div")(1,"div",72),Q(2,"div",73),v(3,"div",74)(4,"div",75)(5,"div",76)(6,"div",77),Q(7,"i",78),m()(),v(8,"h2",79)(9,"span",80),E(10,"Level Up Your"),m(),E(11," Fitness Journey "),m(),v(12,"p",81),E(13," Track workouts, build streaks, and stay motivated with a community that moves with you. "),m(),v(14,"p",82),E(15,"Stronger every day \u2014 start where you are."),m(),v(16,"a",83),E(17," Get Started Now "),m()()()(),v(18,"section",84)(19,"div",85)(20,"h3",86),E(21,"What You Can Do"),m(),v(22,"p",87),E(23,"Everything you need to achieve your fitness goals"),m()(),v(24,"div",88)(25,"div",89)(26,"div",90)(27,"div",91),Q(28,"i",92),m(),v(29,"h5",93),E(30,"Log Your Workouts"),m(),v(31,"p",94),E(32,"Track your daily exercises, reps, sets, and progress effortlessly."),m()()(),v(33,"div",89)(34,"div",90)(35,"div",91),Q(36,"i",95),m(),v(37,"h5",93),E(38,"Maintain Your Streak"),m(),v(39,"p",94),E(40,"Stay consistent and earn streak milestones for your dedication."),m()()(),v(41,"div",89)(42,"div",90)(43,"div",91),Q(44,"i",96),m(),v(45,"h5",93),E(46,"Join Challenges"),m(),v(47,"p",94),E(48,"Compete with the community and push yourself to new heights."),m()()()()(),v(49,"section",97)(50,"div",98)(51,"div",99)(52,"div",100)(53,"h3",101),E(54,"Your Progress at a Glance"),m(),v(55,"p",102),E(56," A clean and user-friendly dashboard lets you easily view routines, achievements, streaks, and your overall fitness journey. "),m(),v(57,"p",103),E(58,"Built to motivate you every day."),m(),v(59,"div",104)(60,"div",105)(61,"div",106),E(62,"500K+"),m(),v(63,"div",107),E(64,"Active Users"),m()(),v(65,"div",105)(66,"div",106),E(67,"10M+"),m(),v(68,"div",107),E(69,"Workouts Logged"),m()()()()(),v(70,"div",99)(71,"div",108),Q(72,"img",109),m()()()(),v(73,"section",110)(74,"div",85)(75,"h3",86),E(76,"What People Are Saying"),m(),v(77,"p",87),E(78,"Join thousands of people achieving their fitness goals"),m()(),v(79,"div",88),K(80,OX,18,6,"div",111),m()()()),n&2){let t=W();N("@slideInOut",void 0),C(80),N("ngForOf",t.testimonials)}}var Of=class n{constructor(e,t,r,i,o,s,a,c){this.auth=e;this.router=t;this.routineService=r;this.challengeService=i;this.streakService=o;this.progressService=s;this.userService=a;this.fb=c}user$;userSubscription;metricsSubscription;routines$=q([]);todayRoutine=null;consistency=0;userId="";loadingStreak=!0;isLoading=!0;dailyChallenge=null;todayRoutine$;streakData$;dailyChallenge$;weeklyChallenge$;userMetrics=null;testimonials=[{text:"This tracker helped me stay consistent for the first time ever.",name:"Alex",age:22},{text:"The challenges keep me motivated, especially with friends around.",name:"Sam",age:19},{text:"A super clean and simple way to stay active every day.",name:"Jamie",age:24}];editModalOpen=!1;metricsForm;saveLoading=!1;saveError=null;bmi=null;ngOnInit(){console.log("Home component initializing..."),this.user$=this.auth.user$,this.metricsForm=this.fb.group({weight:[null,[We.required,We.min(20),We.max(500)]],height:[null,[We.required,We.min(100),We.max(250)]],metabolism:["medium",We.required],gender:["other"]}),this.metricsForm.valueChanges.subscribe(()=>this.computeBMI()),this.userSubscription=this.user$.subscribe({next:e=>{console.log("User state changed:",e?.uid||"No user"),e?(this.userId=e.uid,this.loadUserMetrics(e.uid),this.loadDashboardData(e.uid)):(this.userMetrics=null,this.isLoading=!1)},error:e=>{console.error("Error in user subscription:",e),this.isLoading=!1}}),this.metricsSubscription=this.userService.userMetrics$.subscribe({next:e=>{console.log("UserService metrics updated:",e),this.userMetrics=e,this.metricsForm&&e&&(this.metricsForm.patchValue({weight:e.weight??null,height:e.height??null,metabolism:e.metabolism??"medium",gender:e.gender??"other"},{emitEvent:!1}),this.computeBMI())},error:e=>{console.error("Error in metrics subscription:",e)}}),this.streakData$=this.user$.pipe(Xt(e=>!!e),Ce(e=>e?this.streakService.getUserStreak(e.uid).pipe(Y(t=>({current:t?.current_streak??0,longest:t?.longest_streak??0,weeklyConsistency:t?.completed_days?Math.round(t.completed_days.length/7*100):0}))):q({current:0,longest:0,weeklyConsistency:0})))}loadUserMetrics(e){console.log("Loading user metrics for:",e),this.progressService.getUserMetrics(e).pipe(Vn(1)).subscribe({next:t=>{if(console.log("Metrics loaded from Firestore:",t),t)this.userService.setMetrics(t);else{console.log("No metrics found in Firestore, using UserService defaults");let r=this.userService.getMetricsSnapshot();r.userId!==e&&this.userService.setMetrics(oe(H({},r),{userId:e}))}this.isLoading=!1},error:t=>{console.error("Error loading user metrics:",t),this.isLoading=!1}})}loadDashboardData(e){this.routineService.getUserRoutines().subscribe({next:t=>{this.routines$=q(t),this.todayRoutine=this.getTodaysRoutine(t)},error:t=>console.error("Error fetching routines:",t)}),this.challengeService.getDailyChallengeOfTheDay().subscribe({next:t=>{this.dailyChallenge=t},error:t=>console.error("Error fetching daily challenge:",t)}),this.todayRoutine$=this.routineService.getTodayRoutine(e).pipe(Y(t=>t&&t.length?t[0]:null)),this.dailyChallenge$=this.challengeService.getDailyChallengeOfTheDay(),this.weeklyChallenge$=this.challengeService.getWeeklyChallengeOfTheWeek()}getTodaysRoutine(e){let t=new Date().getDay(),r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.find(o=>o.schedule?.includes?.(r[t]))||(e.length>0?e[0]:null)}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe(),this.metricsSubscription&&this.metricsSubscription.unsubscribe()}logout(){this.auth.logout(),this.router.navigate(["/"])}scrollToFirstButton(){let e=document.getElementById("firstStartBtn");e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("shadow-lg","border","border-warning","bg-warning-subtle","highlight"),setTimeout(()=>{e.classList.remove("shadow-lg","border","border-warning","bg-warning-subtle","highlight")},1500))}openEditMetrics(){let t=this.userService.getMetricsSnapshot&&this.userService.getMetricsSnapshot()||this.userMetrics||{weight:null,height:null,metabolism:"medium",gender:"other"};this.metricsForm.patchValue({weight:t.weight||null,height:t.height||null,metabolism:t.metabolism||"medium",gender:t.gender||"other"}),this.computeBMI(),this.editModalOpen=!0,document.body.classList.add("modal-open")}closeEditMetrics(){this.editModalOpen=!1,document.body.classList.remove("modal-open"),this.saveError=null}computeBMI(){let e=this.metricsForm.get("weight").value,t=this.metricsForm.get("height").value;if(e&&t){let r=t/100;this.bmi=Number((e/(r*r)).toFixed(1))}else this.bmi=null}saveMetrics(){return S(this,null,function*(){if(!this.metricsForm)return;if(this.metricsForm.invalid){this.metricsForm.markAllAsTouched();return}this.saveLoading=!0,this.saveError=null;let e=this.metricsForm.value;try{if(!this.userId)throw new Error("User not available");yield this.progressService.saveUserMetrics(this.userId,{weight:e.weight,height:e.height,metabolism:e.metabolism,gender:e.gender});try{yield nl(this.progressService.updateWeight(e.weight))}catch(t){console.warn("updateWeight failed (non-fatal):",t)}this.userService.setMetrics({userId:this.userId,weight:e.weight,height:e.height,metabolism:e.metabolism,gender:e.gender,bmi:this.bmi??0,lastUpdated:new Date}),this.closeEditMetrics()}catch(t){console.error("Could not save metrics:",t),this.saveError=t?.message||"Could not save metrics"}finally{this.saveLoading=!1}})}static \u0275fac=function(t){return new(t||n)(X(ia),X(ze),X(lr),X(Fu),X(xu),X(Br),X(ra),X(ku))};static \u0275cmp=$e({type:n,selectors:[["app-home"]],decls:7,vars:3,consts:[["loading",""],["publicView",""],["noRoutine",""],["noChallenge",""],["loadingMetrics",""],[1,"container","py-5","my-4","justify-content-center"],["class","text-center py-5",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"row","g-4","justify-content-center"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"dashboard-card","card-today","shadow-sm","h-100","text-center","p-4","rounded-4","d-flex","flex-column","align-items-center",2,"animation","fadeInUp 0.6s ease-out"],[1,"mb-3",2,"position","relative"],[2,"width","70px","height","70px","background","rgba(16, 185, 129, 0.1)","border-radius","50%","display","flex","align-items","center","justify-content","center","margin","0 auto"],["aria-hidden","true",1,"bi","bi-clipboard-check","display-5","text-success"],[1,"fw-bold","mb-2"],[1,"dashboard-card","card-challenge","shadow-sm","h-100","text-center","p-4","rounded-4","d-flex","flex-column","align-items-center",2,"animation","fadeInUp 0.7s ease-out"],[2,"width","70px","height","70px","background","rgba(245, 158, 11, 0.1)","border-radius","50%","display","flex","align-items","center","justify-content","center","margin","0 auto"],["aria-hidden","true",1,"bi","bi-trophy","display-5","text-warning"],[1,"dashboard-card","card-metrics","shadow-sm","h-100","text-center","p-4","rounded-4","d-flex","flex-column","align-items-center",2,"animation","fadeInUp 0.8s ease-out"],[2,"width","70px","height","70px","background","rgba(59, 130, 246, 0.1)","border-radius","50%","display","flex","align-items","center","justify-content","center","margin","0 auto"],["aria-hidden","true",1,"bi","bi-person-circle","display-5","text-primary"],["aria-live","polite",4,"ngIf"],[1,"mt-3","fw-semibold"],[1,"text-muted","small",2,"font-size","0.85rem"],["role","button","aria-label","View routine",1,"btn","btn-success","btn-sm","mt-auto",2,"width","100%","margin-top","1rem",3,"routerLink"],[1,"text-muted","small",2,"margin-top","1rem"],["role","button",1,"btn","btn-outline-success","btn-sm","mt-auto",2,"width","100%","margin-top","1rem",3,"routerLink"],[1,"mt-3"],["role","button",1,"btn","btn-warning","btn-sm","mt-auto",2,"width","100%","margin-top","1rem",3,"routerLink"],["role","button",1,"btn","btn-outline-warning","btn-sm","mt-auto",2,"width","100%","margin-top","1rem",3,"routerLink"],[1,"mt-3",2,"width","100%"],[1,"small","text-muted",2,"font-weight","600"],[1,"fw-bold","text-primary",2,"font-size","1.1rem"],[1,"mt-2",2,"width","100%"],[1,"fw-bold","text-capitalize","text-primary",2,"font-size","1rem"],[1,"mt-2","mb-3",2,"width","100%"],[1,"text-center","py-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","text-primary"],[1,"small","text-muted","mt-2"],["aria-live","polite"],[1,"modal-backdrop","fade","show","position-fixed","top-0","start-0","w-100","h-100",2,"background","rgba(0,0,0,0.45)","z-index","1040"],["tabindex","-1","aria-modal","true","role","dialog","aria-labelledby","editMetricsTitle","aria-describedby","editMetricsDesc",1,"modal","d-block",2,"z-index","1050"],[1,"modal-dialog","modal-sm","modal-dialog-centered"],["id","editMetricsDialog",1,"modal-content"],[1,"modal-header"],["id","editMetricsTitle",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label","small"],["type","number","formControlName","weight","aria-label","Weight in kilograms",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["type","number","formControlName","height","aria-label","Height in centimeters",1,"form-control"],["formControlName","metabolism","aria-label","Metabolism type",1,"form-select"],["value","slow"],["value","medium"],["value","fast"],["formControlName","gender","aria-label","Gender",1,"form-select"],["value","male"],["value","female"],["value","other"],["class","mb-2","id","editMetricsDesc",4,"ngIf"],["class","alert alert-danger small",4,"ngIf"],[1,"text-danger","small","mt-1"],["id","editMetricsDesc",1,"mb-2"],[1,"small","text-muted"],[1,"fw-semibold"],[1,"alert","alert-danger","small"],[1,"hero-section","py-5","mb-5"],[1,"hero-background"],[1,"container"],[1,"hero-content","p-5","text-center","text-white","rounded-5"],[1,"mb-4","hero-icon-container"],[1,"icon-ring"],[1,"bi","bi-activity","display-3","hero-icon"],[1,"fw-bold","mb-3","display-4","text-white","hero-title"],[1,"gradient-text"],[1,"fs-5","mb-3","text-white","hero-subtitle"],[1,"small","opacity-85","mb-5","fs-6","text-white","hero-subtext"],["id","firstStartBtn","routerLink","/login",1,"btn","btn-light","btn-lg","px-6","py-3","rounded-pill","fw-bold","fs-5","shadow-sm","start-btn","hero-btn"],[1,"features-section","container","my-5","py-5"],[1,"text-center","mb-5"],[1,"fw-bold","mb-2","display-6"],[1,"text-muted","fs-5"],[1,"row","g-4"],[1,"col-md-4","feature-card-wrapper"],[1,"feature-card","p-5","rounded-4","bg-white","h-100","shadow-sm"],[1,"feature-icon-bg","mb-4"],[1,"bi","bi-clipboard-check","text-success","feature-icon"],[1,"fw-bold","mb-3"],[1,"text-muted","mb-0"],[1,"bi","bi-fire","text-danger","feature-icon"],[1,"bi","bi-trophy","text-warning","feature-icon"],[1,"preview-section","container","my-5","py-5"],[1,"row","align-items-center","g-5"],[1,"col-md-6"],[1,"preview-content"],[1,"fw-bold","mb-4","display-6"],[1,"text-muted","fs-5","mb-3"],[1,"text-muted","fs-5","mb-4"],[1,"d-flex","gap-3"],[1,"preview-stat"],[1,"stat-number"],[1,"stat-label"],[1,"preview-image-wrapper","rounded-4","shadow-lg","overflow-hidden"],["src","https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=500&q=80","alt","Fitness Progress","loading","lazy","width","500","height","333",1,"img-fluid"],[1,"testimonials-section","container","my-5","py-5"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"testimonial-card","p-5","bg-white","rounded-4","shadow-sm","h-100"],[1,"testimonial-stars","mb-4"],[1,"bi","bi-star-fill","text-warning"],[1,"fst-italic","text-muted","mb-4"],[1,"testimonial-author"],[1,"author-avatar","me-3"],[1,"fw-bold","mb-0"],[1,"small","text-muted","mb-0"]],template:function(t,r){if(t&1&&(v(0,"div",5),K(1,_X,4,0,"div",6)(2,RX,3,4,"ng-container",7)(3,kX,4,0,"ng-template",null,0,tr),m(),K(5,NX,81,2,"ng-template",null,1,tr)),t&2){let i=er(4);C(),N("ngIf",r.isLoading),C(),N("ngIf",!r.isLoading)("ngIfElse",i)}},dependencies:[Je,Wt,it,Vt,At,Nu,Ru,ta,na,$r,Ho,Gi,qi,Pu,Dc,Tc,za],styles:['[_ngcontent-%COMP%]:root{--primary-green: #10b981;--primary-blue: #3b82f6;--primary-purple: #8b5cf6;--primary-pink: #ec4899;--hero-dark: #0f172a;--card-radius: 1.5rem;--shadow-soft: 0 4px 12px rgba(0, 0, 0, .08);--shadow-md: 0 10px 25px rgba(0, 0, 0, .12);--shadow-lg: 0 20px 40px rgba(0, 0, 0, .15);--gradient-primary: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);--gradient-success: linear-gradient(135deg, #10b981 0%, #06b6d4 100%)}body[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#f0f9ff,#f8fafc);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;color:#1f2937}.section[_ngcontent-%COMP%]{margin-top:4rem;margin-bottom:4rem}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(40px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_floatIcon{0%,to{transform:translateY(0)}50%{transform:translateY(-15px)}}@keyframes _ngcontent-%COMP%_pulseRing{0%,to{box-shadow:0 0 #3b82f666}50%{box-shadow:0 0 0 15px #3b82f600}}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-1000px 0}to{background-position:1000px 0}}@keyframes _ngcontent-%COMP%_gradientShift{0%,to{background:linear-gradient(135deg,#66afea,#4b7fa2,#93a3fb)}50%{background:linear-gradient(135deg,#0f5d7c,#3ab0ff,#66a4ea)}}.fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .7s ease-out}.slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInRight .6s ease-out}.dashboard-card[_ngcontent-%COMP%]{border:none;border-radius:var(--card-radius);padding:2.5rem 2rem;background:#fff;box-shadow:var(--shadow-soft);transition:all .3s cubic-bezier(.4,0,.2,1);overflow:hidden;position:relative}.dashboard-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary);opacity:0;transition:opacity .3s ease}.dashboard-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:var(--shadow-lg)}.dashboard-card[_ngcontent-%COMP%]:hover:before{opacity:1}.dashboard-card.card-today[_ngcontent-%COMP%]{border-left:5px solid #10b981}.dashboard-card.card-challenge[_ngcontent-%COMP%]{border-left:5px solid #f59e0b}.dashboard-card.card-metrics[_ngcontent-%COMP%]{border-left:5px solid #3b82f6}.dashboard-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.dashboard-card[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.1)}.card-today[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#10b981!important}.card-challenge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f59e0b!important}.card-metrics[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6!important}.dashboard-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#1f2937;margin-bottom:1rem}.dashboard-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#374151;font-size:1rem}.dashboard-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem}.dashboard-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1.2rem;font-size:.85rem;font-weight:600;border-radius:.75rem;transition:all .2s ease}.dashboard-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.hero-section[_ngcontent-%COMP%]{position:relative;padding:6rem 0;overflow:hidden}.hero-background[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:-1;background:linear-gradient(135deg,#667eea,#764ba2);animation:_ngcontent-%COMP%_gradientShift 8s ease infinite;background-size:200% 200%}.hero-content[_ngcontent-%COMP%]{background:#ffffff14;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:2.5rem;padding:5rem 2.5rem;animation:_ngcontent-%COMP%_fadeInUp .9s ease-out;border:1px solid rgba(255,255,255,.2)}.hero-title[_ngcontent-%COMP%]{font-size:clamp(2rem,8vw,3.5rem);line-height:1.2;font-weight:800;color:#fff;letter-spacing:-.02em}.gradient-text[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a7f3d0,#7dd3fc);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem;color:#fffffff2;font-weight:500}.hero-subtext[_ngcontent-%COMP%]{color:#ffffffd9}.hero-icon-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .8s ease-out .2s both}.icon-ring[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;background:#ffffff26;display:flex;align-items:center;justify-content:center;margin:0 auto;animation:_ngcontent-%COMP%_pulseRing 2.5s ease-in-out infinite;border:2px solid rgba(255,255,255,.3)}.hero-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_floatIcon 3.5s ease-in-out infinite;color:#fff}.hero-btn[_ngcontent-%COMP%]{padding:1rem 3rem!important;font-size:1.1rem;border-radius:50px!important;font-weight:700;transition:all .3s ease;box-shadow:0 10px 30px #0003}.hero-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 15px 40px #0000004d}.features-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .9s ease-out .3s both}.features-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#0f172a;font-weight:800}.feature-card[_ngcontent-%COMP%]{border-radius:var(--card-radius);box-shadow:var(--shadow-soft);background:#fff;transition:all .35s cubic-bezier(.4,0,.2,1);border:1px solid #e5e7eb}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:var(--shadow-lg);border-color:var(--primary-blue)}.feature-icon-bg[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#3b82f61a,#8b5cf61a);border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.feature-card[_ngcontent-%COMP%]:hover   .feature-icon-bg[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-blue),var(--primary-purple));transform:scale(1.15) rotate(5deg)}.feature-card[_ngcontent-%COMP%]:hover   .feature-icon[_ngcontent-%COMP%]{color:#fff!important;transform:scale(1.1)}.feature-icon[_ngcontent-%COMP%]{font-size:2.2rem;transition:all .3s ease}.feature-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#0f172a;font-weight:700;font-size:1.25rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:.95rem;line-height:1.6}.feature-card[_ngcontent-%COMP%]:nth-child(1)   .feature-icon[_ngcontent-%COMP%]{color:#10b981}.feature-card[_ngcontent-%COMP%]:nth-child(2)   .feature-icon[_ngcontent-%COMP%]{color:#ef4444}.feature-card[_ngcontent-%COMP%]:nth-child(3)   .feature-icon[_ngcontent-%COMP%]{color:#f59e0b}.preview-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .9s ease-out .4s both}.preview-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#0f172a;font-weight:800;font-size:clamp(1.8rem,5vw,2.8rem)}.preview-image-wrapper[_ngcontent-%COMP%]{border-radius:var(--card-radius);overflow:hidden;box-shadow:var(--shadow-lg);animation:_ngcontent-%COMP%_slideInRight .8s ease-out;border:8px solid #fff}.preview-image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .5s cubic-bezier(.4,0,.2,1)}.preview-image-wrapper[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.preview-stat[_ngcontent-%COMP%]{text-align:center;padding:1.5rem;background:linear-gradient(135deg,#3b82f60d,#8b5cf60d);border-radius:1rem;transition:all .3s ease}.preview-stat[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3b82f626,#8b5cf626);transform:translateY(-4px)}.stat-number[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:800;background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.stat-label[_ngcontent-%COMP%]{font-size:.95rem;color:#6b7280;font-weight:600;margin-top:.5rem}.testimonials-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .9s ease-out .5s both}.testimonials-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#0f172a;font-weight:800}.testimonial-card[_ngcontent-%COMP%]{border-radius:var(--card-radius);box-shadow:var(--shadow-soft);background:#fff;border:1px solid #e5e7eb;transition:all .35s cubic-bezier(.4,0,.2,1);animation:_ngcontent-%COMP%_scaleIn}.testimonial-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:var(--shadow-lg);border-color:var(--primary-pink)}.testimonial-stars[_ngcontent-%COMP%]{display:flex;gap:.3rem;animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}.testimonial-stars[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;transition:transform .2s ease}.testimonial-card[_ngcontent-%COMP%]:hover   .testimonial-stars[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.15) rotate(10deg)}.testimonial-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4b5563;line-height:1.7;font-weight:500}.testimonial-author[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.author-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:var(--gradient-primary);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.2rem;flex-shrink:0}.testimonial-author[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.testimonial-author[_ngcontent-%COMP%]   p.fw-bold[_ngcontent-%COMP%]{color:#1f2937}.modal-content[_ngcontent-%COMP%]{border-radius:1.5rem;border:none;box-shadow:var(--shadow-lg)}.modal-header[_ngcontent-%COMP%]{border:none;padding:2rem;background:linear-gradient(135deg,#f0f4ff,#f5f3ff)}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-weight:700;color:#0f172a;font-size:1.35rem}.modal-body[_ngcontent-%COMP%]{padding:2rem}.form-label[_ngcontent-%COMP%]{color:#374151;font-weight:600;margin-bottom:.6rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border:1.5px solid #e5e7eb;border-radius:.75rem;padding:.75rem 1rem;font-size:.95rem;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:var(--primary-blue);box-shadow:0 0 0 3px #3b82f61a}.form-control[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.btn-close[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}.btn-outline-custom[_ngcontent-%COMP%]{border:2px solid var(--primary-blue);color:var(--primary-blue);font-weight:600;transition:all .3s ease}.btn-outline-custom[_ngcontent-%COMP%]:hover{background:var(--primary-blue);color:#fff;transform:translateY(-2px)}.btn-success[_ngcontent-%COMP%]{background:var(--gradient-success);border:none;font-weight:600}.btn-success[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #10b9814d}.btn-outline-success[_ngcontent-%COMP%]{border:2px solid #10b981;color:#10b981}.btn-outline-success[_ngcontent-%COMP%]:hover{background:#10b981}.btn-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);border:none;font-weight:600}.btn-warning[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #f59e0b4d}.btn-outline-warning[_ngcontent-%COMP%]{border:2px solid #f59e0b;color:#f59e0b}.btn-outline-warning[_ngcontent-%COMP%]:hover{background:#f59e0b}@media (max-width: 768px){.hero-title[_ngcontent-%COMP%]{font-size:2rem}.hero-content[_ngcontent-%COMP%]{padding:3rem 1.5rem}.dashboard-card[_ngcontent-%COMP%]{padding:1.5rem}.stat-number[_ngcontent-%COMP%]{font-size:1.8rem}.preview-image-wrapper[_ngcontent-%COMP%]{margin-top:2rem}}'],data:{animation:[bT("slideInOut",[e_(":enter",[Df({transform:"translateX(-100%)",opacity:0}),Zv("100ms ease-out",Df({transform:"translateX(0)",opacity:1}))]),e_(":leave",[Zv("100ms ease-in",Df({transform:"translateX(100%)",opacity:0}))])])]}})};var g_=class n{constructor(e,t,r){this.fb=e;this.auth=t;this.router=r}loading=!1;error=null;showPassword=!1;loginForm;ngOnInit(){this.loginForm=this.fb.group({email:new Zs("",{nonNullable:!0,validators:[We.required,We.email]}),password:new Zs("",{nonNullable:!0,validators:[We.required,We.minLength(6)]})})}togglePassword(){this.showPassword=!this.showPassword}onSubmit(){return S(this,null,function*(){if(this.loginForm.invalid)return;this.loading=!0,this.error=null;let{email:e,password:t}=this.loginForm.value;try{yield this.auth.login(e,t),this.router.navigate(["/"])}catch(r){r.code==="auth/user-not-found"?this.error="User not found":r.code==="auth/wrong-password"?this.error="Incorrect password":this.error=r?.message||"Login failed",this.loginForm.get("password")?.reset()}finally{this.loading=!1}})}forgotPassword(){let e=this.loginForm.get("email")?.value;if(!e){this.error="Please enter your email to reset your password";return}this.auth.sendPasswordResetEmail(e).then(()=>{this.error=null,alert("Password reset email sent! Please check your inbox.")}).catch(t=>{t.code==="auth/user-not-found"?this.error="No account found with this email":this.error=t.message||"Failed to send password reset email"})}static \u0275fac=function(t){return new(t||n)(X(ku),X(ia),X(ze))};static \u0275cmp=$e({type:n,selectors:[["app-login"]],decls:42,vars:15,consts:[[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100",2,"background-color","#f8fafc"],[1,"card","shadow-lg","p-4",2,"max-width","420px","width","100%","border-radius","15px","animation","fadeInUp 0.5s ease-out"],[1,"text-center","mb-4","fw-bold",2,"font-family","'Poppins', sans-serif"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"input-group"],[1,"input-group-text"],[1,"fa","fa-envelope"],["type","email","formControlName","email","placeholder","Enter your email",1,"form-control"],[1,"invalid-feedback",3,"hidden"],[1,"fa","fa-lock"],["formControlName","password","placeholder","Enter your password",1,"form-control",3,"type"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa",3,"ngClass"],[1,"d-flex","justify-content-center","align-items-center","mb-3"],["href","#",3,"click"],["type","submit",1,"btn","w-100","text-white","fw-bold",2,"background","linear-gradient(to right, #5aaad8, #7fcaf5)","border-radius","10px","transition","0.3s",3,"disabled"],[3,"hidden"],[1,"spinner-border","spinner-border-sm",3,"hidden"],[1,"text-center","mt-3"],["routerLink","/register"]],template:function(t,r){if(t&1&&(v(0,"div",0)(1,"div",1)(2,"h2",2),E(3,"Login"),m(),v(4,"form",3),ae("ngSubmit",function(){return r.onSubmit()}),v(5,"div",4)(6,"label"),E(7,"Email"),m(),v(8,"div",5)(9,"span",6),Q(10,"i",7),m(),Q(11,"input",8),m(),v(12,"div",9),E(13," Email is required "),m(),v(14,"div",9),E(15," Enter a valid email "),m()(),v(16,"div",4)(17,"label"),E(18,"Password"),m(),v(19,"div",5)(20,"span",6),Q(21,"i",10),m(),Q(22,"input",11),v(23,"button",12),ae("click",function(){return r.showPassword=!r.showPassword}),Q(24,"i",13),m()(),v(25,"div",9),E(26," Password is required "),m(),v(27,"div",9),E(28," Minimum 6 characters required "),m()(),v(29,"div",14)(30,"a",15),ae("click",function(o){return r.forgotPassword(),o.preventDefault()}),E(31,"Forgot password?"),m()(),v(32,"button",16)(33,"span",17),E(34,"Login"),m(),Q(35,"span",18),m()(),v(36,"div",19)(37,"small"),E(38,"Don't have an account?"),m(),Q(39,"br"),v(40,"a",20),E(41,"Create an account"),m()()()()),t&2){let i,o,s,a,c,l;C(4),N("formGroup",r.loginForm),C(7),Se("is-invalid",((i=r.loginForm.get("email"))==null?null:i.touched)&&((i=r.loginForm.get("email"))==null?null:i.invalid)),C(),N("hidden",!(!((o=r.loginForm.get("email"))==null||o.errors==null)&&o.errors.required)),C(2),N("hidden",!(!((s=r.loginForm.get("email"))==null||s.errors==null)&&s.errors.email)),C(8),Se("is-invalid",((a=r.loginForm.get("password"))==null?null:a.touched)&&((a=r.loginForm.get("password"))==null?null:a.invalid)),N("type",wE(r.showPassword?"text":"password")),C(2),N("ngClass",r.showPassword?"fa-eye-slash":"fa-eye"),C(),N("hidden",!(!((c=r.loginForm.get("password"))==null||c.errors==null)&&c.errors.required)),C(2),N("hidden",!(!((l=r.loginForm.get("password"))==null||l.errors==null)&&l.errors.minlength)),C(5),N("disabled",r.loading||r.loginForm.invalid),C(),N("hidden",r.loading),C(2),N("hidden",!r.loading)}},dependencies:[Je,wr,Nu,Ru,$r,qi,Pu,Dc,Tc,Vt,At],styles:["@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.form-control[_ngcontent-%COMP%]:focus{border-color:#5a67d8;box-shadow:0 0 0 .25rem #5a67d826}.input-group-text[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px 0 0 10px;border-right:none}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-left:none}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-left:none;box-shadow:none}.input-group[_ngcontent-%COMP%]:focus-within   .input-group-text[_ngcontent-%COMP%]{border-color:#5a67d8;background-color:#f0f4ff}a[_ngcontent-%COMP%]{color:#5a67d8;text-decoration:none;transition:.2s;font-weight:500}a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#434190}.btn[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-1px);box-shadow:0 4px 12px #5a67d833}.btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important;box-shadow:none!important}label[_ngcontent-%COMP%]{font-weight:600;color:#4a5568;margin-bottom:.5rem;font-size:.9rem}.is-invalid[_ngcontent-%COMP%]{border-color:#e53e3e!important}.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem #e53e3e26!important}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:#e2e8f0;color:#718096;transition:all .2s}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#f7fafc;border-color:#cbd5e0;color:#4a5568}.card[_ngcontent-%COMP%]{border:none;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}@media (max-width: 576px){.card[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem!important}.container[_ngcontent-%COMP%]{padding:1rem}}.spinner-border[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.15em}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.text-center.mb-3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.9rem}.text-center.mt-3[_ngcontent-%COMP%]{font-size:.9rem;color:#718096}.text-center.mt-3[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:600;margin-top:.25rem;display:inline-block}.input-group[_ngcontent-%COMP%]:focus-within{box-shadow:0 0 0 .25rem #5a67d826;border-radius:.375rem}.alert[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}","@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.form-control[_ngcontent-%COMP%]:focus{border-color:#5a67d8;box-shadow:0 0 5px #5a67d84d}.input-group-text[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px 0 0 10px}a[_ngcontent-%COMP%]{color:#5a67d8;text-decoration:none;transition:.2s}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn[_ngcontent-%COMP%]:hover{opacity:.9}"]})};function FX(n,e){if(n&1&&(v(0,"div",32),Q(1,"i",33),E(2),m()),n&2){let t=W();C(2),ie(" ",t.error," ")}}function LX(n,e){n&1&&(v(0,"div",34),E(1," Full name is required "),m())}function VX(n,e){n&1&&(v(0,"div",34),E(1," Minimum 2 characters "),m())}function jX(n,e){n&1&&(v(0,"div",34),E(1," Email is required "),m())}function UX(n,e){n&1&&(v(0,"div",34),E(1," Enter a valid email "),m())}function BX(n,e){n&1&&(v(0,"div",34),E(1," Password is required "),m())}function $X(n,e){n&1&&(v(0,"div",34),E(1," Minimum 6 characters "),m())}function HX(n,e){n&1&&(v(0,"div",34),E(1," Confirm your password "),m())}function zX(n,e){n&1&&(v(0,"div",35),E(1," Passwords do not match. "),m())}function WX(n,e){n&1&&(v(0,"div",34),E(1," Weight is required "),m())}function qX(n,e){n&1&&(v(0,"div",34),E(1," Minimum: 20 kg "),m())}function GX(n,e){n&1&&(v(0,"div",34),E(1," Maximum: 500 kg "),m())}function KX(n,e){n&1&&(v(0,"div",34),E(1," Height is required "),m())}function YX(n,e){n&1&&(v(0,"div",34),E(1," Minimum: 100 cm "),m())}function QX(n,e){n&1&&(v(0,"div",34),E(1," Maximum: 250 cm "),m())}function XX(n,e){n&1&&(v(0,"div",34),E(1," Select your metabolism type "),m())}function JX(n,e){n&1&&(v(0,"div",34),E(1," Select your gender "),m())}function ZX(n,e){n&1&&(v(0,"span"),E(1,"Sign Up"),m())}function eJ(n,e){n&1&&Q(0,"span",36)}var m_=class n{constructor(e,t,r,i,o){this.fb=e;this.auth=t;this.progressService=r;this.userService=i;this.router=o;this.registerForm=this.fb.group({displayName:this.fb.control(null,[We.required,We.minLength(2)]),email:this.fb.control(null,[We.required,We.email]),password:this.fb.control(null,[We.required,We.minLength(6)]),confirmPassword:this.fb.control(null,[We.required]),weight:this.fb.control(null,[We.required,We.min(20),We.max(500)]),height:this.fb.control(null,[We.required,We.min(100),We.max(250)]),metabolism:this.fb.control("medium",[We.required]),gender:this.fb.control(null,[We.required])},{validators:this.passwordsMatch})}loading=!1;error=null;userBMI=null;showPassword=!1;showConfirmPassword=!1;registerForm;calculateBMI(e,t){let r=t/100;return Number((e/(r*r)).toFixed(1))}passwordsMatch(e){let t=e.get("password")?.value,r=e.get("confirmPassword")?.value;return t===r?null:{notMatching:!0}}togglePassword(){this.showPassword=!this.showPassword}toggleConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword}onSubmit(){return S(this,null,function*(){if(this.registerForm.invalid){this.registerForm.hasError("notMatching")&&(this.error="Passwords do not match");return}this.loading=!0,this.error=null;let{displayName:e,email:t,password:r,weight:i,height:o,metabolism:s,gender:a}=this.registerForm.value;try{console.log("Starting registration...");let c=yield this.auth.register(t,r,e);console.log("User created:",c.uid);let l=0;i!=null&&o!=null&&(l=this.calculateBMI(i,o),this.userBMI=l);let u=s||"medium";console.log("Saving user metrics to Firestore..."),yield this.progressService.saveUserMetricsV2(c.uid,{weight:i??0,height:o??0,metabolism:u,gender:a??"other"}),console.log("Metrics saved to Firestore");try{yield nl(this.progressService.updateWeight(i??0)),console.log("Weight updated in userStats")}catch(f){console.warn("updateWeight failed (non-critical):",f)}let h={userId:c.uid,weight:i??0,height:o??0,metabolism:u,bmi:l,gender:a??"other",lastUpdated:new Date};console.log("Setting metrics in UserService:",h),this.userService.setMetrics(h);try{yield nl(this.progressService.getUserStats().pipe(Vn(1)))}catch(f){console.warn("getUserStats failed (non-critical):",f)}yield new Promise(f=>setTimeout(f,300)),console.log("Registration complete, navigating to home..."),yield this.router.navigate(["/"])}catch(c){console.error("Registration error:",c),this.error=c?.message||"Registration failed",this.loading=!1}})}static \u0275fac=function(t){return new(t||n)(X(ku),X(ia),X(Br),X(ra),X(ze))};static \u0275cmp=$e({type:n,selectors:[["app-register"]],decls:85,vars:41,consts:[[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100",2,"background-color","#f8fafc"],[1,"card","shadow-lg","p-4",2,"max-width","420px","width","100%","border-radius","15px","animation","fadeInUp 0.5s ease-out"],[1,"text-center","mb-4","fw-bold",2,"font-family","'Poppins', sans-serif"],["class","alert alert-danger d-flex align-items-center py-2",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["type","text","formControlName","displayName","placeholder","Enter your full name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"input-group"],[1,"input-group-text"],[1,"fa","fa-envelope"],["type","email","formControlName","email","placeholder","Enter your email",1,"form-control"],[1,"fa","fa-lock"],["formControlName","password","placeholder","Enter your password",1,"form-control",3,"type"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa",3,"ngClass"],["formControlName","confirmPassword","placeholder","Confirm password",1,"form-control",3,"type"],["class","text-danger small mt-1",4,"ngIf"],["type","number","formControlName","weight","placeholder","e.g. 60",1,"form-control"],["type","number","formControlName","height","placeholder","e.g. 165",1,"form-control"],["formControlName","metabolism",1,"form-control"],["value","slow"],["value","medium"],["value","fast"],["formControlName","gender",1,"form-control"],["value","female"],["value","male"],["type","submit",1,"btn","w-100","text-white","fw-bold",2,"background","linear-gradient(to right, #a7aef1, #7fcaf5)","border-radius","10px","transition","0.3s",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"mt-3","text-center"],["routerLink","/login"],[1,"alert","alert-danger","d-flex","align-items-center","py-2"],[1,"fa","fa-exclamation-circle","me-2"],[1,"invalid-feedback"],[1,"text-danger","small","mt-1"],[1,"spinner-border","spinner-border-sm"]],template:function(t,r){if(t&1&&(v(0,"div",0)(1,"div",1)(2,"h2",2),E(3,"Create Account"),m(),K(4,FX,3,1,"div",3),v(5,"form",4),ae("ngSubmit",function(){return r.onSubmit()}),v(6,"div",5)(7,"label"),E(8,"Full Name"),m(),Q(9,"input",6),K(10,LX,2,0,"div",7)(11,VX,2,0,"div",7),m(),v(12,"div",5)(13,"label"),E(14,"Email"),m(),v(15,"div",8)(16,"span",9),Q(17,"i",10),m(),Q(18,"input",11),m(),K(19,jX,2,0,"div",7)(20,UX,2,0,"div",7),m(),v(21,"div",5)(22,"label"),E(23,"Password"),m(),v(24,"div",8)(25,"span",9),Q(26,"i",12),m(),Q(27,"input",13),v(28,"button",14),ae("click",function(){return r.togglePassword()}),Q(29,"i",15),m()(),K(30,BX,2,0,"div",7)(31,$X,2,0,"div",7),m(),v(32,"div",5)(33,"label"),E(34,"Confirm Password"),m(),v(35,"div",8)(36,"span",9),Q(37,"i",12),m(),Q(38,"input",16),v(39,"button",14),ae("click",function(){return r.toggleConfirmPassword()}),Q(40,"i",15),m()(),K(41,HX,2,0,"div",7)(42,zX,2,0,"div",17),m(),v(43,"div",5)(44,"label"),E(45,"Weight (kg)"),m(),Q(46,"input",18),K(47,WX,2,0,"div",7)(48,qX,2,0,"div",7)(49,GX,2,0,"div",7),m(),v(50,"div",5)(51,"label"),E(52,"Height (cm)"),m(),Q(53,"input",19),K(54,KX,2,0,"div",7)(55,YX,2,0,"div",7)(56,QX,2,0,"div",7),m(),v(57,"div",5)(58,"label"),E(59,"Metabolism Type"),m(),v(60,"select",20)(61,"option",21),E(62,"Slow"),m(),v(63,"option",22),E(64,"Medium"),m(),v(65,"option",23),E(66,"Fast"),m()(),K(67,XX,2,0,"div",7),m(),v(68,"div",5)(69,"label"),E(70,"Gender"),m(),v(71,"select",24)(72,"option",25),E(73,"Female"),m(),v(74,"option",26),E(75,"Male"),m()(),K(76,JX,2,0,"div",7),m(),v(77,"button",27),K(78,ZX,2,0,"span",28)(79,eJ,1,0,"span",29),m()(),v(80,"div",30)(81,"small"),E(82,"Already have an account? "),v(83,"a",31),E(84,"Sign in"),m()()()()()),t&2){let i,o,s,a,c,l,u,h,f,p,_,w,b,T,k,V,j,U,B,M,x,D,P;C(4),N("ngIf",r.error),C(),N("formGroup",r.registerForm),C(4),Se("is-invalid",((i=r.registerForm.get("displayName"))==null?null:i.touched)&&((i=r.registerForm.get("displayName"))==null?null:i.invalid)),C(),N("ngIf",(o=r.registerForm.get("displayName"))==null||o.errors==null?null:o.errors.required),C(),N("ngIf",(s=r.registerForm.get("displayName"))==null||s.errors==null?null:s.errors.minlength),C(7),Se("is-invalid",((a=r.registerForm.get("email"))==null?null:a.touched)&&((a=r.registerForm.get("email"))==null?null:a.invalid)),C(),N("ngIf",(c=r.registerForm.get("email"))==null||c.errors==null?null:c.errors.required),C(),N("ngIf",(l=r.registerForm.get("email"))==null||l.errors==null?null:l.errors.email),C(7),Se("is-invalid",((u=r.registerForm.get("password"))==null?null:u.touched)&&((u=r.registerForm.get("password"))==null?null:u.invalid)),N("type",r.showPassword?"text":"password"),C(2),N("ngClass",r.showPassword?"fa-eye-slash":"fa-eye"),C(),N("ngIf",(h=r.registerForm.get("password"))==null||h.errors==null?null:h.errors.required),C(),N("ngIf",(f=r.registerForm.get("password"))==null||f.errors==null?null:f.errors.minlength),C(7),Se("is-invalid",((p=r.registerForm.get("confirmPassword"))==null?null:p.touched)&&(((p=r.registerForm.get("confirmPassword"))==null?null:p.invalid)||r.registerForm.hasError("notMatching"))),N("type",r.showConfirmPassword?"text":"password"),C(2),N("ngClass",r.showConfirmPassword?"fa-eye-slash":"fa-eye"),C(),N("ngIf",(_=r.registerForm.get("confirmPassword"))==null||_.errors==null?null:_.errors.required),C(),N("ngIf",r.registerForm.hasError("notMatching")),C(4),Se("is-invalid",((w=r.registerForm.get("weight"))==null?null:w.touched)&&((w=r.registerForm.get("weight"))==null?null:w.invalid)),C(),N("ngIf",(b=r.registerForm.get("weight"))==null||b.errors==null?null:b.errors.required),C(),N("ngIf",(T=r.registerForm.get("weight"))==null||T.errors==null?null:T.errors.min),C(),N("ngIf",(k=r.registerForm.get("weight"))==null||k.errors==null?null:k.errors.max),C(4),Se("is-invalid",((V=r.registerForm.get("height"))==null?null:V.touched)&&((V=r.registerForm.get("height"))==null?null:V.invalid)),C(),N("ngIf",(j=r.registerForm.get("height"))==null||j.errors==null?null:j.errors.required),C(),N("ngIf",(U=r.registerForm.get("height"))==null||U.errors==null?null:U.errors.min),C(),N("ngIf",(B=r.registerForm.get("height"))==null||B.errors==null?null:B.errors.max),C(4),Se("is-invalid",((M=r.registerForm.get("metabolism"))==null?null:M.touched)&&((M=r.registerForm.get("metabolism"))==null?null:M.invalid)),C(7),N("ngIf",(x=r.registerForm.get("metabolism"))==null||x.errors==null?null:x.errors.required),C(4),Se("is-invalid",((D=r.registerForm.get("gender"))==null?null:D.touched)&&((D=r.registerForm.get("gender"))==null?null:D.invalid)),C(5),N("ngIf",(P=r.registerForm.get("gender"))==null||P.errors==null?null:P.errors.required),C(),N("disabled",r.loading||r.registerForm.invalid),C(),N("ngIf",!r.loading),C(),N("ngIf",r.loading)}},dependencies:[Je,wr,it,Nu,Ru,ta,na,$r,Ho,Gi,qi,Pu,Dc,Tc,Vt,At],styles:["@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.form-control[_ngcontent-%COMP%]:focus{border-color:#5a67d8;box-shadow:0 0 5px #5a67d84d}.input-group-text[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:10px 0 0 10px}a[_ngcontent-%COMP%]{color:#5a67d8;text-decoration:none;transition:.2s}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn[_ngcontent-%COMP%]:hover{opacity:.9}"]})};var tJ=n=>["/routines",n];function nJ(n,e){n&1&&(v(0,"div",3),Q(1,"div",4),v(2,"p",5),E(3,"Loading your routines..."),m()())}function rJ(n,e){n&1&&(v(0,"div",3)(1,"div",16),E(2,"\u{1F4AA}"),m(),v(3,"h4",17),E(4,"No Routines Yet"),m(),v(5,"p",18),E(6,"Create one or browse premade templates."),m(),v(7,"a",19),E(8," Create Routine "),m(),v(9,"a",20),E(10," Browse Routines "),m()())}function iJ(n,e){if(n&1&&(v(0,"p",41),E(1),m()),n&2){let t=W().$implicit;C(),ie(" ",t.description," ")}}function oJ(n,e){if(n&1&&(v(0,"li")(1,"span",42),E(2),m(),E(3),m()),n&2){let t=e.$implicit;C(2),re(t.name),C(),dn(" - ",t.sets,"x",t.reps||t.duration+"min"," ")}}function sJ(n,e){if(n&1&&(v(0,"small",18),E(1),m()),n&2){let t=W().$implicit;C(),ie(" + ",t.exercises.length-3," more ")}}function aJ(n,e){n&1&&Q(0,"span",43)}function cJ(n,e){if(n&1){let t=ke();v(0,"div",23)(1,"div",24)(2,"div",25)(3,"h5",26),E(4),m(),K(5,iJ,2,1,"p",27),v(6,"div",28)(7,"div",29)(8,"strong",30),E(9,"\u{1F4C5} Schedule:"),m(),v(10,"span",31),E(11),m()(),v(12,"div")(13,"strong",30),E(14,"\u23F1\uFE0F Time:"),m(),v(15,"span",31),E(16),m()()(),Q(17,"hr",32),v(18,"div",28)(19,"strong",30),E(20),m(),v(21,"ul",33),K(22,oJ,4,3,"li",34),m(),K(23,sJ,2,1,"small",35),m()(),v(24,"div",36)(25,"div",37)(26,"a",38),E(27," View "),m(),v(28,"button",39),ae("click",function(){let i=de(t).$implicit,o=W(3);return he(o.deleteRoutine(i.id))}),K(29,aJ,1,0,"span",40),E(30," Delete "),m()()()()()}if(n&2){let t=e.$implicit,r=W(3);C(4),re(t.name),C(),N("ngIf",t.description),C(6),re(t.schedule.join(", ")),C(5),re(t.time),C(4),ie("\u{1F4AA} Exercises (",t.exercises.length,")"),C(2),N("ngForOf",t.exercises.slice(0,3)),C(),N("ngIf",t.exercises.length>3),C(3),N("routerLink",Qd(9,tJ,t.id)),C(3),N("ngIf",r.deletingId===t.id)}}function lJ(n,e){if(n&1&&(v(0,"div",21),K(1,cJ,31,11,"div",22),m()),n&2){let t=W(2);C(),N("ngForOf",t.routines)}}function uJ(n,e){if(n&1&&(v(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"h2",10),E(5,"My Routines"),m(),v(6,"small",11),E(7,"Manage your custom routines"),m()(),v(8,"div",12)(9,"a",13),E(10," Premade "),m(),v(11,"a",14),E(12," New Routine "),m()()()(),K(13,rJ,11,0,"div",1)(14,lJ,2,1,"div",15),m()),n&2){let t=W();C(13),N("ngIf",t.routines.length===0),C(),N("ngIf",t.routines.length>0)}}var y_=class n{routineService=L(lr);routines=[];loading=!0;deletingId=null;ngOnInit(){this.loadRoutines()}loadRoutines(){console.debug("[RoutineList] loadRoutines called"),this.routineService.getUserRoutines().subscribe({next:e=>{console.debug("[RoutineList] received routines:",e),this.routines=e,this.loading=!1},error:e=>{console.error("[RoutineList] Error loading routines:",e),this.loading=!1}})}deleteRoutine(e){!e||!confirm("Are you sure you want to delete this routine?")||(this.deletingId=e,this.routineService.deleteUserRoutine(e).subscribe({next:()=>{this.routines=this.routines.filter(t=>t.id!==e),this.deletingId=null,alert("Routine deleted successfully!")},error:t=>{console.error("Error deleting routine:",t),this.deletingId=null,alert("Failed to delete routine")}}))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$e({type:n,selectors:[["app-routine-list"]],decls:3,vars:2,consts:[[1,"container","mt-4"],["class","text-center py-5",4,"ngIf"],["class","fade-in",4,"ngIf"],[1,"text-center","py-5"],[1,"spinner-border","text-primary"],[1,"mt-3","text-muted"],[1,"fade-in"],[1,"card","shadow-lg","border-0","mb-4","header-card"],[1,"card-body","p-4","d-flex","justify-content-between","align-items-center"],[1,"d-flex","flex-column"],[1,"fw-bold","mb-1"],[1,"opacity-75"],[1,"d-flex","align-items-center","gap-2"],["routerLink","/routines/premade",1,"btn","btn-primary","text-dark","fw-semibold","rounded-pill","px-4","shadow-sm"],["routerLink","/routines/create",1,"btn","btn-primary","text-white","fw-semibold","rounded-pill","px-4","shadow-sm"],["class","row g-4",4,"ngIf"],[1,"empty-icon","mb-3"],[1,"fw-bold"],[1,"text-muted"],["routerLink","/routines/create",1,"btn","btn-primary","me-2","text-white","fw-semibold","rounded-pill","px-4"],["routerLink","/routines/premade",1,"btn","btn-outline-primary","text-dark","fw-semibold","rounded-pill","px-4"],[1,"row","g-4"],["class","col-sm-6 col-md-4 col-lg-4",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-4"],[1,"card","card-section","fade-in","h-100","d-flex","flex-column"],[1,"card-body","flex-grow-1"],[1,"card-title","fw-bold","mb-2"],["class","text-muted small mb-3",4,"ngIf"],[1,"small","mb-3"],[1,"mb-2"],[1,"text-dark"],[1,"text-muted","d-block"],[1,"my-3"],[1,"ps-3","mb-0","small","text-muted"],[4,"ngFor","ngForOf"],["class","text-muted",4,"ngIf"],[1,"card-footer","bg-white","border-top","p-3"],[1,"d-flex","gap-2"],[1,"btn","btn-outline-primary","btn-sm","text-dark","fw-semibold","flex-grow-1","rounded-pill",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm","fw-semibold","flex-grow-1","rounded-pill",3,"click"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"text-muted","small","mb-3"],[1,"fw-semibold"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,r){t&1&&(v(0,"div",0),K(1,nJ,4,0,"div",1)(2,uJ,15,2,"div",2),m()),t&2&&(C(),N("ngIf",r.loading),C(),N("ngIf",!r.loading))},dependencies:[Je,Wt,it,At,Vt],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease forwards}.fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards}.header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#457b9d,#2b7a78)!important;border:none!important;color:#fff!important;margin-bottom:2rem!important;border-radius:16px!important;box-shadow:0 4px 12px #457b9d33!important}.header-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{color:#fff!important}.header-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff!important;font-size:1.8rem;margin-top:.5rem!important;font-weight:700}.card-section[_ngcontent-%COMP%]{background:#fff!important;border:1px solid rgba(69,123,157,.12)!important;box-shadow:0 2px 8px #457b9d0d!important;border-radius:16px!important;transition:all .3s ease;display:flex;flex-direction:column}.card-section[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #457b9d1a!important;transform:translateY(-2px);border-color:#457b9d33!important}.card-section[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{flex:1 1 auto!important;display:flex!important;flex-direction:column!important}.card-title[_ngcontent-%COMP%]{color:#227e7b!important;font-size:1.1rem;font-weight:700;margin-bottom:.75rem!important}.text-dark[_ngcontent-%COMP%]{color:#1b4c4a!important}.text-muted[_ngcontent-%COMP%]{color:#718096!important}.description[_ngcontent-%COMP%]{color:#718096!important;line-height:1.5}.card-footer[_ngcontent-%COMP%]{background:#fff!important;border-top:1px solid rgba(69,123,157,.1)!important;padding:1rem!important;border-radius:0 0 16px 16px!important}.card-footer[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{display:flex;gap:.5rem}.card-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:0}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(to right,#457b9d,#5d9cc6)!important;border:none!important;color:#fff!important;font-weight:600;transition:all .3s ease;box-shadow:0 2px 8px #457b9d26!important;margin-top:2rem}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#3d6a8a,#4d8bb6)!important;transform:translateY(-2px);box-shadow:0 4px 12px #457b9d40!important}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-outline-primary[_ngcontent-%COMP%]{color:#457b9d!important;border-color:#457b9d!important;background:transparent!important;font-weight:600;transition:all .3s ease}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#457b9d14!important;color:#1b4c4a!important;border-color:#3d6a8a!important;transform:translateY(-2px)}.btn-outline-danger[_ngcontent-%COMP%]{color:#e63946!important;border-color:#e63946!important;font-weight:600;transition:all .3s ease}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#e6394614!important;color:#c6303d!important;border-color:#c6303d!important;transform:translateY(-2px)}.btn-outline-danger[_ngcontent-%COMP%]{transition:background .18s ease,color .18s ease,transform .18s ease}.btn-outline-danger[_ngcontent-%COMP%]:active{transform:translateY(0)}.empty-icon[_ngcontent-%COMP%]{color:#457b9d!important;font-size:60px;opacity:.8;margin-bottom:1rem!important}.empty-icon[_ngcontent-%COMP%] + h4[_ngcontent-%COMP%]{color:#1b4c4a!important;font-weight:700;margin-bottom:.5rem!important}.empty-state-text[_ngcontent-%COMP%]{max-width:520px;margin:0 auto 1rem}"]})};function dJ(n,e){if(n&1){let t=ke();v(0,"button",33),ae("click",function(){let i=de(t).$implicit,o=W();return he(o.toggleDay(i))}),E(1),m()}if(n&2){let t=e.$implicit,r=W();An("background",r.selectedDays.includes(t)?"linear-gradient(to right, #457B9D, #5d9cc6)":"#ffffff")("color",r.selectedDays.includes(t)?"white":"#457B9D"),C(),ie(" ",t.substring(0,3)," ")}}function hJ(n,e){if(n&1){let t=ke();v(0,"div",36)(1,"div",37)(2,"div")(3,"strong",38),E(4),m(),v(5,"span",39),E(6),m(),v(7,"span",40),E(8),m(),Q(9,"br"),v(10,"small",41),E(11),m()(),v(12,"button",42),ae("click",function(){let i=de(t).index,o=W(2);return he(o.removeExercise(i))}),E(13," Remove "),m()()()}if(n&2){let t=e.$implicit;C(4),re(t.name),C(2),re(t.type),C(2),re(t.intensity),C(3),dn(" ",t.sets," sets \xD7 ",t.reps>0?t.reps+" reps":t.duration+" min"," ")}}function fJ(n,e){if(n&1&&(v(0,"div",9)(1,"div",34),K(2,hJ,14,5,"div",35),m()()),n&2){let t=W();C(2),N("ngForOf",t.exercises)}}function pJ(n,e){if(n&1&&(v(0,"option",43),E(1),m()),n&2){let t=e.$implicit;N("value",t),C(),re(t)}}function gJ(n,e){if(n&1&&(v(0,"option",43),E(1),m()),n&2){let t=e.$implicit;N("value",t),C(),re(t)}}var v_=class n{routineService=L(lr);router=L(ze);routineName="";routineDescription="";selectedDays=[];selectedTime="09:00";exercises=[];currentExercise=this.getEmptyExercise();daysOfWeek=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];exerciseTypes=["Strength","Cardio","Flexibility","Balance"];intensityLevels=["Low","Medium","High"];getEmptyExercise(){return{name:"",type:"strength",sets:3,reps:10,duration:0,intensity:0,caloriesPerMinute:0}}toggleDay(e){let t=this.selectedDays.indexOf(e);t>-1?this.selectedDays.splice(t,1):this.selectedDays.push(e)}addExercise(){if(!this.currentExercise.name.trim()){alert("Please enter exercise name");return}this.exercises.push(H({},this.currentExercise)),this.currentExercise=this.getEmptyExercise()}removeExercise(e){this.exercises.splice(e,1)}saveRoutine(){if(!this.routineName.trim()){alert("Please enter a routine name");return}if(this.selectedDays.length===0){alert("Please select at least one day");return}if(this.exercises.length===0){alert("Please add at least one exercise");return}let e={userId:"",name:this.routineName,description:this.routineDescription,schedule:this.selectedDays,time:this.selectedTime,exercises:this.exercises};this.routineService.createRoutine(e).subscribe({next:t=>{console.debug("[RoutineCreate] routine created with id:",t),alert("Routine created successfully!"),this.router.navigate(["/routines"])},error:t=>{console.error("[RoutineCreate] Error creating routine:",t),alert("Failed to create routine")}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$e({type:n,selectors:[["app-routine-create"]],decls:76,vars:13,consts:[[1,"container","mt-4"],[1,"card","shadow-lg","border-0","mb-4","header-card"],[1,"card-body","p-4","d-flex","justify-content-between","align-items-center"],["routerLink","/routines",1,"back-link"],[1,"fw-bold","mt-2","mb-1"],[1,"opacity-75"],[1,"card","card-section","fade-in","shadow-sm","border-0","rounded-4","mb-4","p-4"],[1,"mb-4"],[1,"fw-bold","mb-3"],[1,"mb-3"],[1,"form-label","text-dark","fw-semibold"],["type","text","placeholder","e.g., Morning Full-Body Workout",1,"form-control",2,"border-radius","10px","border","1px solid rgba(69, 123, 157, 0.2)",3,"ngModelChange","ngModel"],["rows","3","placeholder","Describe your routine...",1,"form-control",2,"border-radius","10px","border","1px solid rgba(69, 123, 157, 0.2)",3,"ngModelChange","ngModel"],[1,"my-4"],[1,"d-flex","flex-wrap","gap-2","mb-3"],["type","button","class","btn fw-semibold","style","border-radius: 20px; border: 1px solid #457B9D; padding: 0.5rem 1rem;",3,"background","color","click",4,"ngFor","ngForOf"],["type","time",1,"form-control",2,"border-radius","10px","border","1px solid rgba(69, 123, 157, 0.2)",3,"ngModelChange","ngModel"],["class","mb-3",4,"ngIf"],[1,"card","p-4",2,"border-radius","16px","background","#f8f9fa","border","1px solid rgba(69, 123, 157, 0.1)","box-shadow","0 4px 12px rgba(69, 123, 157, 0.05)"],[1,"fw-bold","text-dark","mb-3"],[1,"row"],[1,"col-md-6","mb-3"],["type","text","placeholder","e.g., Push-ups",1,"form-control",2,"border-radius","10px","border","1px solid rgba(69, 123, 157, 0.2)",3,"ngModelChange","ngModel"],[1,"form-select",2,"border-radius","10px","border","1px solid rgba(69, 123, 157, 0.2)",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],["type","number","min","1",1,"form-control",2,"border-radius","10px","border","1px solid rgba(69, 123, 157, 0.2)",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-control",2,"border-radius","10px","border","1px solid rgba(69, 123, 157, 0.2)",3,"ngModelChange","ngModel"],[1,"col-md-12","mb-3"],["type","button",1,"btn","text-white","w-100","fw-semibold",2,"background","linear-gradient(to right, #457B9D, #5d9cc6)","border-radius","10px",3,"click"],[1,"d-flex","justify-content-between","mt-4","pt-3","border-top"],["routerLink","/routines",1,"btn","btn-outline-primary","text-dark","fw-semibold","rounded-pill","px-4"],["type","button",1,"btn","text-white","fw-semibold","rounded-pill","px-4",2,"background","linear-gradient(to right, #457B9D, #5d9cc6)",3,"click"],["type","button",1,"btn","fw-semibold",2,"border-radius","20px","border","1px solid #457B9D","padding","0.5rem 1rem",3,"click"],[1,"list-group"],["class","list-group-item","style","border-radius: 10px; margin-bottom: 8px; background: #f8f9fa; border: 1px solid rgba(69, 123, 157, 0.1);",4,"ngFor","ngForOf"],[1,"list-group-item",2,"border-radius","10px","margin-bottom","8px","background","#f8f9fa","border","1px solid rgba(69, 123, 157, 0.1)"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-dark"],[1,"badge","bg-primary","ms-2",2,"background","linear-gradient(to right, #457B9D, #5d9cc6) !important"],[1,"badge","bg-info","ms-1"],[1,"text-muted"],["type","button",1,"btn","btn-sm","btn-outline-danger","fw-semibold",2,"border-radius","20px",3,"click"],[3,"value"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"a",3),E(5,"\u2190 Back"),m(),v(6,"h2",4),E(7,"Create Custom Routine"),m(),v(8,"small",5),E(9," Add exercises and schedule your routine "),m()()()(),v(10,"div",6)(11,"div",7)(12,"h5",8),E(13,"1. Basic Information"),m(),v(14,"div",9)(15,"label",10),E(16,"Routine Name *"),m(),v(17,"input",11),en("ngModelChange",function(o){return hn(r.routineName,o)||(r.routineName=o),o}),m()(),v(18,"div",9)(19,"label",10),E(20,"Description (Optional)"),m(),v(21,"textarea",12),en("ngModelChange",function(o){return hn(r.routineDescription,o)||(r.routineDescription=o),o}),m()()(),Q(22,"hr",13),v(23,"div",7)(24,"h5",8),E(25,"2. Schedule"),m(),v(26,"label",10),E(27,"Select Days *"),m(),v(28,"div",14),K(29,dJ,2,5,"button",15),m(),v(30,"div")(31,"label",10),E(32,"Time"),m(),v(33,"input",16),en("ngModelChange",function(o){return hn(r.selectedTime,o)||(r.selectedTime=o),o}),m()()(),Q(34,"hr",13),v(35,"div",7)(36,"h5",8),E(37,"3. Add Exercises *"),m(),K(38,fJ,3,1,"div",17),v(39,"div",18)(40,"h6",19),E(41,"Add Exercise"),m(),v(42,"div",20)(43,"div",21)(44,"label",10),E(45,"Exercise Name"),m(),v(46,"input",22),en("ngModelChange",function(o){return hn(r.currentExercise.name,o)||(r.currentExercise.name=o),o}),m()(),v(47,"div",21)(48,"label",10),E(49,"Type"),m(),v(50,"select",23),en("ngModelChange",function(o){return hn(r.currentExercise.type,o)||(r.currentExercise.type=o),o}),K(51,pJ,2,2,"option",24),m()(),v(52,"div",25)(53,"label",10),E(54,"Sets"),m(),v(55,"input",26),en("ngModelChange",function(o){return hn(r.currentExercise.sets,o)||(r.currentExercise.sets=o),o}),m()(),v(56,"div",25)(57,"label",10),E(58,"Reps"),m(),v(59,"input",27),en("ngModelChange",function(o){return hn(r.currentExercise.reps,o)||(r.currentExercise.reps=o),o}),m()(),v(60,"div",25)(61,"label",10),E(62,"Duration (min)"),m(),v(63,"input",27),en("ngModelChange",function(o){return hn(r.currentExercise.duration,o)||(r.currentExercise.duration=o),o}),m()(),v(64,"div",28)(65,"label",10),E(66,"Intensity"),m(),v(67,"select",23),en("ngModelChange",function(o){return hn(r.currentExercise.intensity,o)||(r.currentExercise.intensity=o),o}),K(68,gJ,2,2,"option",24),m()()(),v(69,"button",29),ae("click",function(){return r.addExercise()}),E(70," + Add Exercise "),m()()(),v(71,"div",30)(72,"a",31),E(73," Cancel "),m(),v(74,"button",32),ae("click",function(){return r.saveRoutine()}),E(75," Save Routine "),m()()()()),t&2&&(C(17),Zt("ngModel",r.routineName),C(4),Zt("ngModel",r.routineDescription),C(8),N("ngForOf",r.daysOfWeek),C(4),Zt("ngModel",r.selectedTime),C(5),N("ngIf",r.exercises.length>0),C(8),Zt("ngModel",r.currentExercise.name),C(4),Zt("ngModel",r.currentExercise.type),C(),N("ngForOf",r.exerciseTypes),C(4),Zt("ngModel",r.currentExercise.sets),C(4),Zt("ngModel",r.currentExercise.reps),C(4),Zt("ngModel",r.currentExercise.duration),C(4),Zt("ngModel",r.currentExercise.intensity),C(),N("ngForOf",r.intensityLevels))},dependencies:[Je,Wt,it,Ou,ta,na,$r,Ho,Gi,qi,RT,Rf,At],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease forwards}.header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#457b9d,#2b7a78)!important;border:none!important;color:#fff!important;margin-bottom:2rem!important;border-radius:16px!important;box-shadow:0 4px 12px #457b9d33!important}.header-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{color:#fff!important}.header-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff!important;font-size:1.8rem;margin-top:.5rem!important}.header-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#ffffffe6!important}.header-card[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{color:#ffffffe6;text-decoration-line:underline;font-size:.9rem;transition:all .2s ease}.header-card[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{color:#fff;opacity:.8}.card-section[_ngcontent-%COMP%]{background:#fff!important;border:1px solid rgba(69,123,157,.12)!important;box-shadow:0 2px 8px #457b9d0d!important;border-radius:16px!important;transition:all .3s ease}.card-section[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #457b9d1a!important;transform:translateY(-2px)}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border:1px solid rgba(69,123,157,.2)!important;border-radius:10px!important;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#457b9d!important;box-shadow:0 0 0 3px #457b9d1a!important;outline:none}.form-label[_ngcontent-%COMP%]{color:#1b4c4a!important;font-weight:600!important;margin-bottom:.5rem!important}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(to right,#457b9d,#5d9cc6)!important;border:none!important;color:#fff!important;font-weight:600;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#3d6a8a,#4d8bb6)!important;transform:translateY(-2px);box-shadow:0 4px 12px #457b9d33!important}.btn-outline-primary[_ngcontent-%COMP%]{color:#457b9d!important;border-color:#457b9d!important;background:transparent!important;font-weight:600}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#457b9d14!important;color:#3d6a8a!important;border-color:#3d6a8a!important}.btn-outline-danger[_ngcontent-%COMP%]{color:#e63946!important;border-color:#e63946!important;font-weight:600}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#e6394614!important;color:#c6303d!important;border-color:#c6303d!important}.list-group-item[_ngcontent-%COMP%]{background:#f8f9fa!important;border:1px solid rgba(69,123,157,.1)!important;border-radius:10px!important;margin-bottom:8px;transition:all .2s ease}.list-group-item[_ngcontent-%COMP%]:hover{background:#f0f7fa!important;border-color:#457b9d33!important;box-shadow:0 2px 8px #457b9d14}.list-group-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1b4c4a!important}.badge[_ngcontent-%COMP%]{font-size:.65rem;font-weight:600;vertical-align:middle}.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(to right,#457b9d,#5d9cc6)!important;color:#fff!important}.bg-info[_ngcontent-%COMP%]{background:#2b7a78!important;color:#fff!important}h5.fw-bold[_ngcontent-%COMP%]{color:#1b4c4a!important}hr[_ngcontent-%COMP%]{border-top:1px solid rgba(69,123,157,.1)!important}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#457b9d0d}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#457b9d4d;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#457b9d80}@media (max-width: 768px){.header-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{flex-direction:column!important;text-align:center}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:16px}}","@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.soft-input[_ngcontent-%COMP%]{border-radius:10px!important;border:1px solid #c9d3ff!important;transition:.25s}.soft-input[_ngcontent-%COMP%]:focus{border-color:#5a67d8!important;box-shadow:0 0 5px #5a67d84d!important}.soft-btn[_ngcontent-%COMP%]{border-radius:10px!important;transition:.25s}.soft-btn[_ngcontent-%COMP%]:hover{opacity:.9}.soft-list-item[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:8px;background:#f7f9ff}.soft-subcard[_ngcontent-%COMP%]{border-radius:12px;background:#f5f7ff;border:none;box-shadow:0 4px 12px #5a67d81a}"]})};var mJ=(n,e,t)=>({"bg-success":n,"bg-warning":e,"bg-danger":t});function yJ(n,e){n&1&&(v(0,"div",5),Q(1,"div",6),v(2,"p",7),E(3,"Loading routine..."),m()())}function vJ(n,e){n&1&&(v(0,"span",43),E(1,"Completed"),m())}function _J(n,e){if(n&1&&(v(0,"span",44),E(1),m()),n&2){let t=W(2).$implicit;C(),ie("\u2022 ",t.reps," reps")}}function bJ(n,e){if(n&1&&(v(0,"span",44),E(1),m()),n&2){let t=W(2).$implicit;C(),ie("\u2022 ",t.duration," min")}}function wJ(n,e){if(n&1){let t=ke();Bt(0),v(1,"button",45),ae("click",function(){de(t);let i=W(2).index,o=W(2);return he(o.editExercise(i))}),E(2,"Edit"),m(),v(3,"button",46),ae("click",function(){de(t);let i=W(2).index,o=W(2);return he(o.deleteExercise(i))}),E(4,"Delete"),m(),$t()}}function EJ(n,e){if(n&1&&(v(0,"div",34)(1,"div",35)(2,"h6",36),E(3),K(4,vJ,2,0,"span",37),m(),v(5,"div",38)(6,"span",39),E(7),m(),v(8,"span"),E(9),m(),K(10,_J,2,1,"span",40)(11,bJ,2,1,"span",40),m()(),v(12,"div",14)(13,"span",41),E(14),m(),K(15,wJ,5,0,"ng-container",42),m()()),n&2){let t=W(),r=t.$implicit,i=t.index,o=W(2);C(3),ie(" ",r.name," "),C(),N("ngIf",o.completedExerciseIndices.has(i)),C(3),re(r.type),C(2),ie("",r.sets," sets"),C(),N("ngIf",r.reps),C(),N("ngIf",r.duration),C(2),N("ngClass",Xd(9,mJ,r.intensity+""=="Low",r.intensity+""=="Medium",r.intensity+""=="High")),C(),ie(" ",r.intensity," "),C(),N("ngIf",r.isCustom)}}function CJ(n,e){if(n&1){let t=ke();v(0,"div",47)(1,"input",48),en("ngModelChange",function(i){de(t);let o=W(3);return hn(o.exerciseToAdd.name,i)||(o.exerciseToAdd.name=i),he(i)}),m(),v(2,"input",49),en("ngModelChange",function(i){de(t);let o=W(3);return hn(o.exerciseToAdd.type,i)||(o.exerciseToAdd.type=i),he(i)}),m(),v(3,"input",50),en("ngModelChange",function(i){de(t);let o=W(3);return hn(o.exerciseToAdd.sets,i)||(o.exerciseToAdd.sets=i),he(i)}),m(),v(4,"input",51),en("ngModelChange",function(i){de(t);let o=W(3);return hn(o.exerciseToAdd.reps,i)||(o.exerciseToAdd.reps=i),he(i)}),m(),v(5,"input",52),en("ngModelChange",function(i){de(t);let o=W(3);return hn(o.exerciseToAdd.duration,i)||(o.exerciseToAdd.duration=i),he(i)}),m(),v(6,"select",53),en("ngModelChange",function(i){de(t);let o=W(3);return hn(o.exerciseToAdd.intensity,i)||(o.exerciseToAdd.intensity=i),he(i)}),v(7,"option"),E(8,"Low"),m(),v(9,"option"),E(10,"Medium"),m(),v(11,"option"),E(12,"High"),m()(),v(13,"div",54)(14,"button",55),ae("click",function(){de(t);let i=W(3);return he(i.saveExercise())}),E(15,"Save"),m(),v(16,"button",56),ae("click",function(){de(t);let i=W(3);return he(i.cancelEdit())}),E(17,"Cancel"),m()()()}if(n&2){let t=W(3);C(),Zt("ngModel",t.exerciseToAdd.name),C(),Zt("ngModel",t.exerciseToAdd.type),C(),Zt("ngModel",t.exerciseToAdd.sets),C(),Zt("ngModel",t.exerciseToAdd.reps),C(),Zt("ngModel",t.exerciseToAdd.duration),C(),Zt("ngModel",t.exerciseToAdd.intensity)}}function IJ(n,e){if(n&1&&(v(0,"div",31),K(1,EJ,16,13,"div",32)(2,CJ,18,6,"div",33),m()),n&2){let t=e.index,r=W(2);C(),N("ngIf",r.editingExerciseIndex!==t),C(),N("ngIf",r.editingExerciseIndex===t)}}function xJ(n,e){if(n&1){let t=ke();v(0,"div",57)(1,"h5",17),E(2,"Add Exercise"),m(),v(3,"button",58),ae("click",function(){de(t);let i=W(2);return he(i.addExercise({name:" ",type:" ",sets:null,reps:null,duration:null,intensity:"Low"}))}),E(4," New "),m()()}}function DJ(n,e){if(n&1){let t=ke();v(0,"div",8)(1,"div",9)(2,"div",10)(3,"div")(4,"a",11),E(5,"\u2190 Back"),m(),v(6,"h2",12),E(7),m(),v(8,"small",13),E(9),m()(),v(10,"div",14)(11,"button",15),ae("click",function(){de(t);let i=W();return he(i.startWorkout())}),E(12," Start "),m()()()(),v(13,"div",16)(14,"h5",17),E(15,"Routine Details"),m(),v(16,"p",18),E(17),m(),Q(18,"hr"),v(19,"div",19)(20,"div",20)(21,"strong",21),E(22,"Days:"),m(),E(23),m(),v(24,"div",20)(25,"strong",21),E(26,"Time:"),m(),E(27),m()()(),v(28,"div",22)(29,"div",23)(30,"h5",24),E(31,"\u{1F4AA} Exercises"),m()(),v(32,"div",25)(33,"div",26),K(34,IJ,3,2,"div",27),m()()(),K(35,xJ,5,0,"div",28),v(36,"div",29)(37,"button",30),ae("click",function(){de(t);let i=W();return he(i.confirmDeleteRoutine())}),E(38),m()()()}if(n&2){let t=W();C(7),re(t.routine.name),C(2),dn(" ",t.routine.exercises.length," exercises \u2022 ",t.routine.schedule.join(", ")," "),C(8),re(t.routine.description||"No description provided."),C(6),ie(" ",t.routine.schedule.join(", ")," "),C(4),ie(" ",t.routine.time," "),C(7),N("ngForOf",t.routine.exercises),C(),N("ngIf",!t.isPremade),C(3),ie(" ",t.isPremade?"Remove Routine":"Delete Routine"," ")}}function TJ(n,e){if(n&1&&(v(0,"span"),E(1),m()),n&2){let t,r=W(2);C(),ie("\u2022 ",(t=r.getCurrentExercise())==null?null:t.reps," reps")}}function SJ(n,e){if(n&1&&(v(0,"span"),E(1),m()),n&2){let t,r=W(2);C(),ie("\u2022 ",(t=r.getCurrentExercise())==null?null:t.duration," min")}}function MJ(n,e){if(n&1&&(Bt(0),E(1),$t()),n&2){let t=W(2);C(),ie(" ",t.formatTime(t.getRemainingTime())," ")}}function AJ(n,e){n&1&&(v(0,"span",18),E(1,"No timer for this exercise"),m())}function PJ(n,e){if(n&1){let t=ke();v(0,"button",77),ae("click",function(){de(t);let i=W(2);return he(i.pauseTimer())}),E(1," Pause "),m()}}function RJ(n,e){if(n&1){let t=ke();v(0,"button",78),ae("click",function(){de(t);let i=W(2);return he(i.resumeTimer())}),E(1," Resume "),m()}}function kJ(n,e){if(n&1&&(v(0,"small",79),E(1),m()),n&2){let t=W(2);C(),ie(" ",t.formatTime(t.getRemainingTime())," remaining ")}}function OJ(n,e){n&1&&(v(0,"small",79),E(1," Move to next exercise "),m())}function NJ(n,e){n&1&&(v(0,"small",80),E(1," Ready to complete! "),m())}function FJ(n,e){if(n&1){let t=ke();v(0,"div",59)(1,"div",60)(2,"h3",61),E(3),m(),v(4,"p",62),E(5),K(6,TJ,2,1,"span",42)(7,SJ,2,1,"span",42),m(),v(8,"div",63),K(9,MJ,2,1,"ng-container",64)(10,AJ,2,0,"ng-template",null,0,tr),m(),v(12,"div",65)(13,"button",66),ae("click",function(){de(t);let i=W();return he(i.previousExercise())}),E(14," Previous "),m(),K(15,PJ,2,0,"button",67)(16,RJ,2,0,"button",68),v(17,"button",66),ae("click",function(){de(t);let i=W();return he(i.nextExercise())}),E(18," Next "),m()(),v(19,"div",69),Q(20,"div",70),m(),v(21,"div",71)(22,"button",72),ae("click",function(){de(t);let i=W();return he(i.cancelWorkout())}),E(23," Cancel "),m(),v(24,"div",73)(25,"button",74),ae("click",function(){de(t);let i=W();return he(i.completeWorkout())}),E(26," Complete "),m(),K(27,kJ,2,1,"small",75)(28,OJ,2,0,"small",75)(29,NJ,2,0,"small",76),m()()()()}if(n&2){let t,r,i,o,s=er(11),a=W();C(3),re((t=a.getCurrentExercise())==null?null:t.name),C(2),dn(" ",(r=a.getCurrentExercise())==null?null:r.type," \u2022 ",(r=a.getCurrentExercise())==null?null:r.sets," sets "),C(),N("ngIf",(i=a.getCurrentExercise())==null?null:i.reps),C(),N("ngIf",(o=a.getCurrentExercise())==null?null:o.duration),C(2),N("ngIf",a.exerciseTimeRequiredSeconds>0)("ngIfElse",s),C(4),N("disabled",a.currentExerciseIndex===0),C(2),N("ngIf",a.isTimerRunning),C(),N("ngIf",!a.isTimerRunning&&a.exerciseTimeRequiredSeconds>0&&a.exerciseRemainingSeconds>0),C(),N("disabled",a.currentExerciseIndex===a.routine.exercises.length-1||!a.isCurrentExerciseComplete()&&a.exerciseTimeRequiredSeconds>0),C(3),An("width",a.getProgressPercentage(),"%"),C(5),N("disabled",a.completedExerciseIndices.size!==a.routine.exercises.length),C(2),N("ngIf",a.completedExerciseIndices.size!==a.routine.exercises.length&&a.exerciseTimeRequiredSeconds>0),C(),N("ngIf",a.exerciseTimeRequiredSeconds===0&&a.currentExerciseIndex!==a.routine.exercises.length-1),C(),N("ngIf",a.completedExerciseIndices.size===a.routine.exercises.length)}}var __=class n{route=L(Vr);router=L(ze);routineService=L(lr);progressService=L(Br);firestore=L(rn);routine=null;loading=!0;workoutStarted=!1;currentExerciseIndex=0;workoutNotes="";showDeleteConfirm=!1;editingExerciseIndex=null;exerciseToAdd=null;totalElapsedSeconds=0;timerInterval=null;isTimerRunning=!1;exerciseTimeRequiredSeconds=0;exerciseRemainingSeconds=0;completedExerciseIndices=new Set;routineTotalRequiredSeconds=0;isPremade=!1;ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?this.loadRoutine(e):this.router.navigate(["/routines"])}ngOnDestroy(){this.stopExerciseTimer()}loadRoutine(e){this.routineService.getRoutineById(e).subscribe({next:t=>{if(!t){this.router.navigate(["/routines"]);return}t.exercises=(t.exercises||[]).map(r=>oe(H({},r),{isCustom:r.isCustom||!1})),this.routine=t,this.loading=!1,this.isPremade=!!t.isTemplate||!t.userId},error:t=>{console.error("Error loading routine:",t),this.loading=!1,alert("Failed to load routine"),this.router.navigate(["/routines"])}})}startWorkout(){this.routine&&(this.workoutStarted=!0,this.currentExerciseIndex=0,this.totalElapsedSeconds=0,this.completedExerciseIndices.clear(),this.computeRoutineTotalRequiredSeconds(),this.updateExerciseDuration(),this.exerciseTimeRequiredSeconds>0&&this.startExerciseTimer())}nextExercise(){this.routine&&this.currentExerciseIndex<this.routine.exercises.length-1&&(this.stopExerciseTimer(),this.currentExerciseIndex++,this.updateExerciseDuration(),this.exerciseTimeRequiredSeconds>0&&this.startExerciseTimer())}previousExercise(){this.currentExerciseIndex>0&&(this.stopExerciseTimer(),this.currentExerciseIndex--,this.updateExerciseDuration(),this.exerciseTimeRequiredSeconds>0&&this.startExerciseTimer())}goToExercise(e){this.routine&&(e<0||e>=this.routine.exercises.length||(this.stopExerciseTimer(),this.currentExerciseIndex=e,this.updateExerciseDuration(),this.exerciseTimeRequiredSeconds>0&&this.startExerciseTimer()))}updateExerciseDuration(){let e=this.getCurrentExercise(),t=e?.duration?e.duration*60:0;this.exerciseTimeRequiredSeconds=t,this.exerciseRemainingSeconds=t,t===0&&(this.completedExerciseIndices.add(this.currentExerciseIndex),this.stopExerciseTimer())}startExerciseTimer(){if(!this.timerInterval){if(this.exerciseTimeRequiredSeconds===0||this.exerciseRemainingSeconds===0){this.isTimerRunning=!1;return}this.isTimerRunning=!0,this.timerInterval=setInterval(()=>{this.totalElapsedSeconds++,this.exerciseRemainingSeconds>0&&this.exerciseRemainingSeconds--,this.exerciseRemainingSeconds<=0&&(this.completedExerciseIndices.add(this.currentExerciseIndex),this.stopExerciseTimer())},1e3)}}stopExerciseTimer(){this.isTimerRunning=!1,this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)}pauseTimer(){this.stopExerciseTimer()}resumeTimer(){this.exerciseTimeRequiredSeconds>0&&this.exerciseRemainingSeconds>0&&this.startExerciseTimer()}formatTime(e){let t=Math.floor(e/60),r=e%60;return`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}completeWorkout(){return S(this,null,function*(){if(this.routine&&confirm("Mark this workout as complete?")&&(this.stopExerciseTimer(),!!this.routine.id)){try{yield this.markRoutineCompleted(this.routine.id),console.log("[RoutineDetail] Routine marked completed")}catch(e){console.error("Error marking routine completed:",e),alert("Failed to mark routine complete");return}try{yield Yp(this.progressService.logWorkout(this.routine,this.workoutNotes)),console.log("[RoutineDetail] Workout logged successfully"),alert("\u{1F389} Workout completed successfully!"),this.router.navigate(["/progress"])}catch(e){console.error("Error logging workout:",e);let t=e instanceof Error?e.message:String(e);alert("Failed to log workout: "+t)}}})}quickComplete(){return S(this,null,function*(){if(this.routine&&confirm("Mark this routine as completed?")&&this.routine.id){try{yield this.markRoutineCompleted(this.routine.id),console.log("[RoutineDetail] Routine marked completed")}catch(e){console.error("Error marking routine completed:",e),alert("Failed to mark routine complete");return}try{yield Yp(this.progressService.logWorkout(this.routine)),console.log("[RoutineDetail] Workout logged successfully"),alert("Workout logged successfully! \u{1F389}"),this.router.navigate(["/progress"])}catch(e){console.error("Error logging workout:",e),alert("Failed to log workout")}}})}markRoutineCompleted(e){return S(this,null,function*(){let t=new Date().toISOString().split("T")[0],r=vt(this.firestore,`routines/${e}`);yield $o(r,{completedDates:TV(t)})})}deleteRoutine(){this.routine?.id&&this.routineService.deleteUserRoutine(this.routine.id).subscribe({next:()=>{alert("Routine deleted successfully!"),this.router.navigate(["/routines"])},error:e=>{console.error("Error deleting routine:",e),alert("Failed to delete routine")}})}addExercise(e){if(!this.routine)return;let t=oe(H({},e),{isCustom:!0});if(this.isPremade){this.routineService.clonePremadeRoutine(this.routine).subscribe({next:i=>{let o=oe(H({},this.routine),{id:i,isPremade:!1,exercises:[...this.routine.exercises||[],t]});this.routineService.updateRoutine(o).subscribe({next:()=>{this.routine=o,this.isPremade=!1,alert("Exercise added to your copy of the routine!"),this.editExercise(this.routine.exercises.length-1)},error:s=>{console.error("[RoutineDetail] addExercise -> update cloned routine error:",s),alert(s?.message||"Failed to add exercise to cloned routine")}})},error:i=>{console.error("[RoutineDetail] addExercise -> clone error:",i),alert(i?.message||"Failed to create a personal copy of this routine")}});return}let r=oe(H({},this.routine),{exercises:[...this.routine.exercises||[],t]});this.routineService.updateRoutine(r).subscribe({next:()=>{this.routine&&(this.routine.exercises=r.exercises),alert("Exercise added successfully!"),this.editExercise((this.routine?.exercises.length||1)-1)},error:i=>{console.error("Error adding exercise:",i),alert(i?.message||"Failed to add exercise")}})}editExercise(e){this.routine&&(this.editingExerciseIndex=e,this.exerciseToAdd=H({},this.routine.exercises[e]))}saveExercise(){if(this.editingExerciseIndex===null||!this.routine)return;let e=this.editingExerciseIndex,t=[...this.routine.exercises];t[e]=H({},this.exerciseToAdd);let r=oe(H({},this.routine),{exercises:t});this.routineService.updateRoutine(r).subscribe({next:()=>{this.routine&&(this.routine.exercises=t),alert("Exercise updated!"),this.editingExerciseIndex=null,this.exerciseToAdd=null},error:i=>{console.error("[RoutineDetail] saveExercise error:",i),alert(i?.message||"Failed to update exercise.")}})}deleteExercise(e){if(!this.routine||!confirm("Are you sure you want to delete this exercise?"))return;let t=this.routine.exercises.filter((i,o)=>o!==e),r=oe(H({},this.routine),{exercises:t});this.routineService.updateRoutine(r).subscribe({next:()=>{this.routine&&(this.routine.exercises=t),alert("Exercise deleted!")},error:i=>{console.error("[RoutineDetail] deleteExercise error:",i),alert(i?.message||"Failed to delete exercise.")}})}cancelEdit(){this.editingExerciseIndex=null,this.exerciseToAdd=null}cancelWorkout(){confirm("Are you sure you want to cancel this workout?")&&(this.stopExerciseTimer(),this.workoutStarted=!1,this.currentExerciseIndex=0,this.workoutNotes="")}getCurrentExercise(){return this.routine?.exercises[this.currentExerciseIndex]}getRemainingTime(){return this.exerciseRemainingSeconds??0}isCurrentExerciseComplete(){return this.exerciseTimeRequiredSeconds===0?!0:this.exerciseRemainingSeconds===0||this.completedExerciseIndices.has(this.currentExerciseIndex)}computeRoutineTotalRequiredSeconds(){if(!this.routine){this.routineTotalRequiredSeconds=0;return}let e=this.routine.duration;if(e&&typeof e=="number"&&e>0){this.routineTotalRequiredSeconds=e*60;return}let t=(this.routine.exercises||[]).reduce((r,i)=>r+(i.duration||0),0);this.routineTotalRequiredSeconds=t*60}getProgressPercentage(){return!this.routine||!this.routine.exercises||this.routine.exercises.length===0?0:(this.currentExerciseIndex+1)/this.routine.exercises.length*100}confirmDeleteRoutine(){confirm("Are you sure you want to delete this routine?")&&this.deleteRoutine()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$e({type:n,selectors:[["app-routine-detail"]],decls:4,vars:3,consts:[["noTimer",""],[1,"container","mt-4"],["class","text-center py-5 fade-in",4,"ngIf"],["class","fade-in",4,"ngIf"],["class","workout-overlay fade-in",4,"ngIf"],[1,"text-center","py-5","fade-in"],[1,"spinner-border","text-primary"],[1,"mt-3","text-muted"],[1,"fade-in"],[1,"card","shadow-lg","border-0","mb-4","header-card"],[1,"card-body","p-4","d-flex","justify-content-between","align-items-center"],["routerLink","/routines",1,"back-link"],[1,"fw-bold","mt-2","mb-1"],[1,"opacity-75"],[1,"d-flex","align-items-center","gap-2"],[1,"btn","btn-light","text-dark","fw-semibold","rounded-pill","px-4","shadow-sm",3,"click"],[1,"card","card-section","fade-in","shadow-sm","border-0","rounded-4","mb-4","p-4"],[1,"fw-bold","mb-3"],[1,"text-muted"],[1,"row","small","text-muted","mt-3"],[1,"col-md-6","mb-2"],[1,"text-dark"],[1,"card","card-section","shadow-sm","border-0","rounded-4","mb-4","fade-in"],[1,"card-header","bg-white","border-0","p-4"],[1,"fw-bold","mb-0"],[1,"card-body","p-0"],[1,"list-group","list-group-flush"],["class","list-group-item exercise-item fade-in",4,"ngFor","ngForOf"],["class","card shadow-sm border-0 rounded-4 p-4 mb-5 text-center fade-in",4,"ngIf"],[1,"text-center","mt-3","mb-5","fade-in"],[1,"btn","btn-danger","rounded-pill","px-4",3,"click"],[1,"list-group-item","exercise-item","fade-in"],["class","d-flex justify-content-between align-items-center",4,"ngIf"],["class","edit-exercise-form",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center"],[1,"flex-grow-1"],[1,"fw-bold","mb-1"],["class","badge bg-success ms-2","style","background: linear-gradient(to right, #2B7A78, #457B9D) !important;",4,"ngIf"],[1,"small","text-muted"],[1,"badge","bg-light","text-dark","me-2"],["class","ms-2",4,"ngIf"],[1,"badge","intensity-badge","px-3","py-2",3,"ngClass"],[4,"ngIf"],[1,"badge","bg-success","ms-2",2,"background","linear-gradient(to right, #2B7A78, #457B9D) !important"],[1,"ms-2"],[1,"btn","btn-sm","btn-outline-primary","fw-semibold","rounded-pill",3,"click"],[1,"btn","btn-sm","btn-outline-danger","fw-semibold","rounded-pill",3,"click"],[1,"edit-exercise-form"],["placeholder","Name",1,"form-control","mb-1",3,"ngModelChange","ngModel"],["placeholder","Type",1,"form-control","mb-1",3,"ngModelChange","ngModel"],["type","number","placeholder","Sets",1,"form-control","mb-1",3,"ngModelChange","ngModel"],["type","number","placeholder","Reps",1,"form-control","mb-1",3,"ngModelChange","ngModel"],["type","number","placeholder","Duration (min)",1,"form-control","mb-1",3,"ngModelChange","ngModel"],[1,"form-select","mb-1",3,"ngModelChange","ngModel"],[1,"mt-2"],[1,"btn","btn-success","btn-sm","me-2",3,"click"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"card","shadow-sm","border-0","rounded-4","p-4","mb-5","text-center","fade-in"],[1,"btn","add-btn","rounded-pill","px-4",3,"click"],[1,"workout-overlay","fade-in"],[1,"workout-panel"],[1,"fw-bold","mb-3","text-center"],[1,"text-muted","text-center","mb-4"],[1,"timer-display","text-center","fw-bold","my-4"],[4,"ngIf","ngIfElse"],[1,"d-flex","justify-content-center","gap-3","my-3"],[1,"btn","btn-light","rounded-pill","px-4","shadow-sm",3,"click","disabled"],["class","btn btn-warning rounded-pill px-4",3,"click",4,"ngIf"],["class","btn btn-success rounded-pill px-4",3,"click",4,"ngIf"],[1,"progress","mt-4",2,"height","12px"],["role","progressbar",1,"progress-bar","progress-purple"],[1,"d-flex","justify-content-between","mt-4"],[1,"btn","btn-outline-danger","rounded-pill","px-4",3,"click"],[1,"d-flex","flex-column","align-items-center"],[1,"btn","btn-primary","rounded-pill","px-4","shadow-sm",3,"click","disabled"],["class","text-muted mt-2",4,"ngIf"],["class","text-success mt-2",4,"ngIf"],[1,"btn","btn-warning","rounded-pill","px-4",3,"click"],[1,"btn","btn-success","rounded-pill","px-4",3,"click"],[1,"text-muted","mt-2"],[1,"text-success","mt-2"]],template:function(t,r){t&1&&(v(0,"div",1),K(1,yJ,4,0,"div",2)(2,DJ,39,9,"div",3)(3,FJ,30,17,"div",4),m()),t&2&&(C(),N("ngIf",r.loading),C(),N("ngIf",!r.loading&&r.routine&&!r.workoutStarted),C(),N("ngIf",r.workoutStarted))},dependencies:[Je,wr,Wt,it,At,Ou,ta,na,$r,Ho,Gi,qi,Rf],styles:["body[_ngcontent-%COMP%]{margin:0;padding:80px 0 0;font-family:Segoe UI,sans-serif;background:linear-gradient(180deg,#f7fbfd,#eef6f8)!important}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}.header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#457b9d,#2b7a78)!important;color:#fff!important;border-radius:16px!important;box-shadow:0 6px 20px #457b9d26!important;border:none!important;margin-bottom:2rem!important}.header-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{color:#fff!important}.header-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff!important;font-size:1.8rem;margin-top:.5rem!important}.header-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#ffffffe6!important}.header-card[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{color:#ffffffe6;text-decoration:none;font-size:.9rem;transition:all .2s ease}.header-card[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{color:#fff;opacity:.8}.header-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;margin-top:.5rem}.card-section[_ngcontent-%COMP%]{background:#fff;border:1px solid rgba(69,123,157,.12);box-shadow:0 2px 8px #457b9d0d;transition:all .3s ease;border-radius:16px!important}.card-section[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #457b9d1a!important;transform:translateY(-2px)}.card-section[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #00000014!important;transform:translateY(-2px)}.exercise-item[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid rgba(69,123,157,.08);transition:all .2s ease;background-color:#fafbfc}.exercise-item[_ngcontent-%COMP%]:hover{background-color:#f0f7fa;border-color:#457b9d26}.exercise-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.exercise-item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#1b4c4a;font-size:1rem;font-weight:700}.intensity-badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;border-radius:20px;transition:all .2s ease;text-transform:uppercase;letter-spacing:.5px}.intensity-badge[_ngcontent-%COMP%]:hover{transform:scale(1.08)}.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2b7a78,#457b9d)!important;color:#fff!important}.bg-warning[_ngcontent-%COMP%]{background:#f57f17!important;color:#fff!important}.bg-danger[_ngcontent-%COMP%]{background:#e63946!important;color:#fff!important}.add-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#457b9d,#2b7a78)!important;color:#fff!important;border:none!important;padding:.75rem 2rem;font-weight:600;transition:all .3s ease}.add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #457b9d4d!important}.edit-exercise-form[_ngcontent-%COMP%]{background:#f8f9fa;padding:1.25rem;border-radius:12px;border-left:4px solid #457B9D;animation:_ngcontent-%COMP%_slideIn .3s ease}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-10px)}to{opacity:1;transform:translate(0)}}.edit-exercise-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .edit-exercise-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid rgba(69,123,157,.2);border-radius:8px;padding:.5rem .75rem;font-size:.9rem;transition:border-color .2s ease,box-shadow .2s ease}.edit-exercise-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .edit-exercise-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#457b9d;box-shadow:0 0 0 3px #457b9d1a;outline:none}.workout-overlay[_ngcontent-%COMP%]{background:#f8f9faf2;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);min-height:80vh;display:flex;align-items:center;justify-content:center;border-radius:20px;padding:2rem}.workout-panel[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2.5rem;box-shadow:0 20px 60px #00000014;border:1px solid rgba(0,0,0,.05);max-width:500px;width:100%;animation:_ngcontent-%COMP%_scaleIn .4s ease}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.timer-display[_ngcontent-%COMP%]{font-size:3rem;color:#2c3e50;font-family:Segoe UI,system-ui,sans-serif;text-shadow:0 2px 4px rgba(0,0,0,.05);letter-spacing:-1px}.progress[_ngcontent-%COMP%]{border-radius:20px;background-color:#e9ecef;overflow:hidden}.progress-purple[_ngcontent-%COMP%]{background:linear-gradient(90deg,#667eea,#764ba2);transition:width .5s cubic-bezier(.4,0,.2,1)}.btn[_ngcontent-%COMP%]{border-radius:12px;font-weight:500;transition:all .25s ease;border:none}.btn[_ngcontent-%COMP%]:not(.btn-outline):not(.btn-light){box-shadow:0 4px 12px #00000014}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #0000001f}.btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-light[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border:1px solid #dee2e6}.btn-light[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#ced4da}.btn-outline-light[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.3);color:#fff}.btn-outline-light[_ngcontent-%COMP%]:hover{background:#ffffff1a;border-color:#ffffff80}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.small[_ngcontent-%COMP%]{font-size:.875rem}@media (max-width: 768px){.header-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:1rem}.timer-display[_ngcontent-%COMP%]{font-size:2.5rem}.workout-panel[_ngcontent-%COMP%]{padding:1.5rem;margin:1rem}}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;border-width:.25em}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f3f5;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#adb5bd;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#868e96}"]})};var b_=class n{constructor(e){this.http=e}getPremadeRoutines(){return this.http.get("/assetss/data/premade-routines.json")}static \u0275fac=function(t){return new(t||n)(ce(jm))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};function VJ(n,e){n&1&&(v(0,"div",9),Q(1,"div",10),v(2,"p",11),E(3,"Loading routines..."),m()())}function jJ(n,e){n&1&&(v(0,"div",12)(1,"div",13),E(2,"\u{1F4ED}"),m(),v(3,"h4",14),E(4,"No Routines Available"),m(),v(5,"p",15),E(6,"Come back soon for new routine templates!"),m()())}function UJ(n,e){if(n&1&&(v(0,"p",31),E(1),m()),n&2){let t=W().$implicit;C(),re(t.description)}}function BJ(n,e){if(n&1&&(v(0,"li")(1,"span",32),E(2),m(),E(3),v(4,"span",33),E(5),m()()),n&2){let t=e.$implicit;C(2),re(t.name),C(),dn(" - ",t.sets,"x",t.reps||t.duration+"min"," "),C(2),re(t.type)}}function $J(n,e){if(n&1){let t=ke();v(0,"div",18)(1,"div",19)(2,"div",20)(3,"h5",21),E(4),m(),K(5,UJ,2,1,"p",22),v(6,"div",23)(7,"div",24)(8,"strong",25),E(9,"\u{1F4C5} Schedule:"),m(),v(10,"span",15),E(11),m()(),v(12,"div")(13,"strong",25),E(14,"\u23F1\uFE0F Time:"),m(),v(15,"span",15),E(16),m()()(),Q(17,"hr",26),v(18,"div")(19,"strong",25),E(20),m(),v(21,"ul",27),K(22,BJ,6,4,"li",28),m()()(),v(23,"div",29)(24,"button",30),ae("click",function(){let i=de(t).$implicit,o=W(2);return he(o.saveToMyRoutines(i))}),E(25," Add to My Routines "),m()()()()}if(n&2){let t=e.$implicit;C(4),re(t.name),C(),N("ngIf",t.description),C(6),re(t.schedule.join(", ")),C(5),re(t.time),C(4),ie("\u{1F4AA} Exercises (",t.exercises.length,")"),C(2),N("ngForOf",t.exercises)}}function HJ(n,e){if(n&1&&(v(0,"div",16),K(1,$J,26,6,"div",17),m()),n&2){let t=W();C(),N("ngForOf",t.premadeRoutines)}}var w_=class n{constructor(e,t){this.premadeService=e;this.routineService=t}premadeRoutines=[];loading=!0;router=L(ze);ngOnInit(){this.premadeService.getPremadeRoutines().subscribe({next:e=>{this.premadeRoutines=e,this.loading=!1,console.log("Premade routines loaded:",e),this.premadeRoutines=e,this.loading=!1},error:e=>{console.error("Error loading premade routines:",e),this.loading=!1}})}saveToMyRoutines(e){console.debug("[PremadeRoutines] Saving routine:",e.name),this.routineService.clonePremadeRoutine(e).subscribe({next:t=>{console.debug("[PremadeRoutines] Cloned routine ID:",t),alert("Routine saved to your routines"),this.router.navigate(["/routines"])},error:t=>{console.error("[PremadeRoutines] Error saving routine:",t),alert("Failed to save routine")}})}static \u0275fac=function(t){return new(t||n)(X(b_),X(lr))};static \u0275cmp=$e({type:n,selectors:[["app-premade-routines"]],decls:13,vars:3,consts:[[1,"container","mt-4"],[1,"card","shadow-lg","border-0","mb-4","header-card"],[1,"card-body","p-4","d-flex","justify-content-between","align-items-center"],["routerLink","/routines",1,"back-link"],[1,"fw-bold","mt-2","mb-1"],[1,"opacity-75"],["class","text-center py-5",4,"ngIf"],["class","card card-section p-5 text-center",4,"ngIf"],["class","row g-4",4,"ngIf"],[1,"text-center","py-5"],[1,"spinner-border","text-primary"],[1,"mt-3","text-muted"],[1,"card","card-section","p-5","text-center"],[1,"empty-icon","mb-3"],[1,"fw-bold","text-dark"],[1,"text-muted"],[1,"row","g-4"],["class","col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4"],[1,"card","card-section","fade-in","h-100","d-flex","flex-column"],[1,"card-body","flex-grow-1"],[1,"card-title","fw-bold","mb-2"],["class","text-muted small mb-3",4,"ngIf"],[1,"small","mb-3"],[1,"mb-2"],[1,"text-dark"],[1,"my-3"],[1,"small","text-muted","mb-0","ps-3"],[4,"ngFor","ngForOf"],[1,"card-footer","bg-white","border-top","p-3"],[1,"btn","w-100","btn-primary","text-white","fw-semibold","rounded-pill",2,"background","linear-gradient(to right, #457B9D, #5d9cc6) !important",3,"click"],[1,"text-muted","small","mb-3"],[1,"fw-semibold"],[1,"badge","bg-primary","ms-1",2,"background","linear-gradient(to right, #457B9D, #5d9cc6) !important","font-size","0.65rem"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"a",3),E(5,"\u2190 Back"),m(),v(6,"h2",4),E(7,"\u{1F4CB} Premade Templates"),m(),v(8,"small",5),E(9," Choose from our collection of ready-made routines "),m()()()(),K(10,VJ,4,0,"div",6)(11,jJ,7,0,"div",7)(12,HJ,2,1,"div",8),m()),t&2&&(C(10),N("ngIf",r.loading),C(),N("ngIf",!r.loading&&r.premadeRoutines.length===0),C(),N("ngIf",!r.loading&&r.premadeRoutines.length>0))},dependencies:[Je,Wt,it,Vt,At,ph],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease forwards}.header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#457b9d,#2b7a78)!important;border:none!important;color:#fff!important;margin-bottom:2rem!important;border-radius:16px!important;box-shadow:0 4px 12px #457b9d33!important}.header-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{color:#fff!important}.header-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff!important;font-size:1.8rem;margin-top:.5rem!important}.header-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#ffffffe6!important}.header-card[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{color:#ffffffe6;text-decoration-line:underline;font-size:.9rem;transition:all .2s ease}.header-card[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{color:#fff;opacity:.8}.card-section[_ngcontent-%COMP%]{background:#fff!important;border:1px solid rgba(69,123,157,.12)!important;box-shadow:0 2px 8px #457b9d0d!important;border-radius:16px!important;transition:all .3s ease}.card-section[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #457b9d1a!important;transform:translateY(-6px)}.card-title[_ngcontent-%COMP%]{color:#1b4c4a!important;font-size:1.1rem;font-weight:700;margin-bottom:.75rem!important}.badge[_ngcontent-%COMP%]{font-size:.65rem;font-weight:600;vertical-align:middle}.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(to right,#457b9d,#5d9cc6)!important;color:#fff!important}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(to right,#457b9d,#5d9cc6)!important;border:none!important;color:#fff!important;font-weight:600;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#3d6a8a,#4d8bb6)!important;transform:translateY(-2px);box-shadow:0 4px 12px #457b9d33!important}.empty-icon[_ngcontent-%COMP%]{font-size:60px;opacity:.8}.text-muted[_ngcontent-%COMP%]{color:#718096!important}.text-dark[_ngcontent-%COMP%]{color:#1b4c4a!important}.fw-semibold[_ngcontent-%COMP%]{font-weight:600}.card-footer[_ngcontent-%COMP%]{border-top:1px solid rgba(69,123,157,.1)!important;background:transparent!important}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#457b9d0d}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#457b9d4d;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#457b9d80}@media (max-width: 768px){.header-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{flex-direction:column!important;text-align:center}}","@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out forwards}.card-section[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 12px 32px #457b9d26!important}.empty-icon[_ngcontent-%COMP%]{font-size:60px;opacity:.8}.badge[_ngcontent-%COMP%]{font-size:.65rem;vertical-align:middle;font-weight:600}"]})};function zJ(n,e){if(n&1&&(Bt(0),Q(1,"i"),$t()),n&2){let t=W();C(),wo(t.icon)}}function WJ(n,e){if(n&1&&(v(0,"span",11),E(1),m()),n&2){let t=W();C(),re(t.icon)}}function qJ(n,e){if(n&1&&(v(0,"small",13),E(1),m()),n&2){let t=W(2);C(),re(t.unit)}}function GJ(n,e){if(n&1&&(Bt(0),E(1),K(2,qJ,2,1,"small",12),$t()),n&2){let t=W();C(),ie(" ",t.value," "),C(),N("ngIf",t.unit)}}function KJ(n,e){n&1&&(v(0,"div",14),E(1,"Loading\u2026"),m())}function YJ(n,e){if(n&1&&(v(0,"small",15),E(1),m()),n&2){let t=W();C(),re(t.subtitle)}}var E_=class n{title="";value=0;subtitle="";icon="\u{1F4CA}";gradient="linear-gradient(135deg, #667eea 0%, #764ba2 100%)";color="primary";trend="neutral";trendValue=0;isLoading=!1;unit="";getIconColor(){let e={primary:"#6366f1",success:"#20c997",danger:"#dc3545",warning:"#ffc107",info:"#0dcaf0"};return e[this.color]||e.primary}getTrendIcon(){switch(this.trend){case"up":return"bi-arrow-up-circle-fill text-success";case"down":return"bi-arrow-down-circle-fill text-danger";default:return"bi-dash-circle-fill text-secondary"}}getTrendText(){switch(this.trend){case"up":return`+${this.trendValue}% from last week`;case"down":return`-${this.trendValue}% from last week`;default:return"No change from last week"}}isIconClass(){return typeof this.icon=="string"&&this.icon.startsWith("bi-")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$e({type:n,selectors:[["app-stats-card"]],inputs:{title:"title",value:"value",subtitle:"subtitle",icon:"icon",gradient:"gradient",color:"color",trend:"trend",trendValue:"trendValue",isLoading:"isLoading",unit:"unit"},decls:15,vars:10,consts:[["emojiIcon",""],["loadingTpl",""],[1,"card","shadow-sm","h-100"],[1,"card-body","text-white"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"mb-0"],[1,"d-flex","align-items-center"],[1,"icon-wrapper","d-flex","align-items-center","justify-content-center","me-2",2,"width","40px","height","40px","border-radius","8px","color","#fff"],[4,"ngIf","ngIfElse"],[1,"mb-0","fw-bold"],["class","opacity-75 d-block mt-1",4,"ngIf"],[1,"fs-3"],["class","ms-2 fw-normal",4,"ngIf"],[1,"ms-2","fw-normal"],[1,"text-white-50"],[1,"opacity-75","d-block","mt-1"]],template:function(t,r){if(t&1&&(v(0,"div",2)(1,"div",3)(2,"div",4)(3,"h6",5),E(4),m(),v(5,"div",6)(6,"div",7),K(7,zJ,2,2,"ng-container",8)(8,WJ,2,1,"ng-template",null,0,tr),m()()(),v(10,"h2",9),K(11,GJ,3,2,"ng-container",8),m(),K(12,KJ,2,0,"ng-template",null,1,tr)(14,YJ,2,1,"small",10),m()()),t&2){let i=er(9),o=er(13);An("background",r.gradient),C(4),re(r.title),C(2),An("background",r.getIconColor()),C(),N("ngIf",r.isIconClass())("ngIfElse",i),C(4),N("ngIf",!r.isLoading)("ngIfElse",o),C(3),N("ngIf",r.subtitle)}},dependencies:[Je,it],styles:[".stats-card[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;padding:10px;border-radius:8px;background:#fff;box-shadow:0 1px 3px #0000000f}.icon-wrapper[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#fff}.icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .emoji[_ngcontent-%COMP%]{font-size:20px}.stats-card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stats-title[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.stats-value[_ngcontent-%COMP%]{font-size:20px;font-weight:600;display:flex;align-items:baseline;gap:6px}.unit[_ngcontent-%COMP%]{font-size:13px;color:#6b7280}.stats-trend[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;margin-top:6px;font-size:13px;color:#6b7280}.spinner[_ngcontent-%COMP%]{font-style:italic;color:#9ca3af}"]})};function Lf(n){return n+.5|0}var oa=(n,e,t)=>Math.max(Math.min(n,t),e);function Nf(n){return oa(Lf(n*2.55),0,255)}function sa(n){return oa(Lf(n*255),0,255)}function zo(n){return oa(Lf(n/2.55)/100,0,1)}function yj(n){return oa(Lf(n*100),0,100)}var Hr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},FT=[..."0123456789ABCDEF"],QJ=n=>FT[n&15],XJ=n=>FT[(n&240)>>4]+FT[n&15],C_=n=>(n&240)>>4===(n&15),JJ=n=>C_(n.r)&&C_(n.g)&&C_(n.b)&&C_(n.a);function ZJ(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Hr[n[1]]*17,g:255&Hr[n[2]]*17,b:255&Hr[n[3]]*17,a:e===5?Hr[n[4]]*17:255}:(e===7||e===9)&&(t={r:Hr[n[1]]<<4|Hr[n[2]],g:Hr[n[3]]<<4|Hr[n[4]],b:Hr[n[5]]<<4|Hr[n[6]],a:e===9?Hr[n[7]]<<4|Hr[n[8]]:255})),t}var eZ=(n,e)=>n<255?e(n):"";function tZ(n){var e=JJ(n)?QJ:XJ;return n?"#"+e(n.r)+e(n.g)+e(n.b)+eZ(n.a,e):void 0}var nZ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function wj(n,e,t){let r=e*Math.min(t,1-t),i=(o,s=(o+n/30)%12)=>t-r*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function rZ(n,e,t){let r=(i,o=(i+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function iZ(n,e,t){let r=wj(n,1,.5),i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function oZ(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function LT(n){let t=n.r/255,r=n.g/255,i=n.b/255,o=Math.max(t,r,i),s=Math.min(t,r,i),a=(o+s)/2,c,l,u;return o!==s&&(u=o-s,l=a>.5?u/(2-o-s):u/(o+s),c=oZ(t,r,i,u,o),c=c*60+.5),[c|0,l||0,a]}function VT(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(sa)}function jT(n,e,t){return VT(wj,n,e,t)}function sZ(n,e,t){return VT(iZ,n,e,t)}function aZ(n,e,t){return VT(rZ,n,e,t)}function Ej(n){return(n%360+360)%360}function cZ(n){let e=nZ.exec(n),t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Nf(+e[5]):sa(+e[5]));let i=Ej(+e[2]),o=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?r=sZ(i,o,s):e[1]==="hsv"?r=aZ(i,o,s):r=jT(i,o,s),{r:r[0],g:r[1],b:r[2],a:t}}function lZ(n,e){var t=LT(n);t[0]=Ej(t[0]+e),t=jT(t),n.r=t[0],n.g=t[1],n.b=t[2]}function uZ(n){if(!n)return;let e=LT(n),t=e[0],r=yj(e[1]),i=yj(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${zo(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}var vj={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},_j={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function dZ(){let n={},e=Object.keys(_j),t=Object.keys(vj),r,i,o,s,a;for(r=0;r<e.length;r++){for(s=a=e[r],i=0;i<t.length;i++)o=t[i],a=a.replace(o,vj[o]);o=parseInt(_j[s],16),n[a]=[o>>16&255,o>>8&255,o&255]}return n}var I_;function hZ(n){I_||(I_=dZ(),I_.transparent=[0,0,0,0]);let e=I_[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var fZ=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function pZ(n){let e=fZ.exec(n),t=255,r,i,o;if(e){if(e[7]!==r){let s=+e[7];t=e[8]?Nf(s):oa(s*255,0,255)}return r=+e[1],i=+e[3],o=+e[5],r=255&(e[2]?Nf(r):oa(r,0,255)),i=255&(e[4]?Nf(i):oa(i,0,255)),o=255&(e[6]?Nf(o):oa(o,0,255)),{r,g:i,b:o,a:t}}}function gZ(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${zo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var NT=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Lu=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function mZ(n,e,t){let r=Lu(zo(n.r)),i=Lu(zo(n.g)),o=Lu(zo(n.b));return{r:sa(NT(r+t*(Lu(zo(e.r))-r))),g:sa(NT(i+t*(Lu(zo(e.g))-i))),b:sa(NT(o+t*(Lu(zo(e.b))-o))),a:n.a+t*(e.a-n.a)}}function x_(n,e,t){if(n){let r=LT(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=jT(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function Cj(n,e){return n&&Object.assign(e||{},n)}function bj(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=sa(n[3]))):(e=Cj(n,{r:0,g:0,b:0,a:1}),e.a=sa(e.a)),e}function yZ(n){return n.charAt(0)==="r"?pZ(n):cZ(n)}var Ff=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,r;t==="object"?r=bj(e):t==="string"&&(r=ZJ(e)||hZ(e)||yZ(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Cj(this._rgb);return e&&(e.a=zo(e.a)),e}set rgb(e){this._rgb=bj(e)}rgbString(){return this._valid?gZ(this._rgb):void 0}hexString(){return this._valid?tZ(this._rgb):void 0}hslString(){return this._valid?uZ(this._rgb):void 0}mix(e,t){if(e){let r=this.rgb,i=e.rgb,o,s=t===o?.5:t,a=2*s-1,c=r.a-i.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;o=1-l,r.r=255&l*r.r+o*i.r+.5,r.g=255&l*r.g+o*i.g+.5,r.b=255&l*r.b+o*i.b+.5,r.a=s*r.a+(1-s)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=mZ(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=sa(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Lf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return x_(this._rgb,2,e),this}darken(e){return x_(this._rgb,2,-e),this}saturate(e){return x_(this._rgb,1,e),this}desaturate(e){return x_(this._rgb,1,-e),this}rotate(e){return lZ(this._rgb,e),this}};function Qi(){}var Oj=(()=>{let n=0;return()=>n++})();function Me(n){return n==null}function ct(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Pe(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Et(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ur(n,e){return Et(n)?n:e}function ve(n,e){return typeof n>"u"?e:n}var Nj=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,HT=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ot(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Ke(n,e,t,r){let i,o,s;if(ct(n))if(o=n.length,r)for(i=o-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<o;i++)e.call(t,n[i],i);else if(Pe(n))for(s=Object.keys(n),o=s.length,i=0;i<o;i++)e.call(t,n[s[i]],s[i])}function Uf(n,e){let t,r,i,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],o=e[t],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function M_(n){if(ct(n))return n.map(M_);if(Pe(n)){let e=Object.create(null),t=Object.keys(n),r=t.length,i=0;for(;i<r;++i)e[t[i]]=M_(n[t[i]]);return e}return n}function Fj(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function vZ(n,e,t,r){if(!Fj(n))return;let i=e[n],o=t[n];Pe(i)&&Pe(o)?ju(i,o,r):e[n]=M_(o)}function ju(n,e,t){let r=ct(e)?e:[e],i=r.length;if(!Pe(n))return n;t=t||{};let o=t.merger||vZ,s;for(let a=0;a<i;++a){if(s=r[a],!Pe(s))continue;let c=Object.keys(s);for(let l=0,u=c.length;l<u;++l)o(c[l],n,s,t)}return n}function Bu(n,e){return ju(n,e,{merger:_Z})}function _Z(n,e,t){if(!Fj(n))return;let r=e[n],i=t[n];Pe(r)&&Pe(i)?Bu(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=M_(i))}var Ij={"":n=>n,x:n=>n.x,y:n=>n.y};function bZ(n){let e=n.split("."),t=[],r="";for(let i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function wZ(n){let e=bZ(n);return t=>{for(let r of e){if(r==="")break;t=t&&t[r]}return t}}function Go(n,e){return(Ij[e]||(Ij[e]=wZ(e)))(n)}function k_(n){return n.charAt(0).toUpperCase()+n.slice(1)}var $u=n=>typeof n<"u",Wo=n=>typeof n=="function",zT=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function Lj(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Ve=Math.PI,lt=2*Ve,EZ=lt+Ve,A_=Number.POSITIVE_INFINITY,CZ=Ve/180,Ft=Ve/2,Sc=Ve/4,xj=Ve*2/3,qo=Math.log10,pi=Math.sign;function Hu(n,e,t){return Math.abs(n-e)<t}function WT(n){let e=Math.round(n);n=Hu(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(qo(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function Vj(n){let e=[],t=Math.sqrt(n),r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,o)=>i-o).pop(),e}function IZ(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Pc(n){return!IZ(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function jj(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function qT(n,e,t){let r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function zr(n){return n*(Ve/180)}function O_(n){return n*(180/Ve)}function GT(n){if(!Et(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function KT(n,e){let t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r),o=Math.atan2(r,t);return o<-.5*Ve&&(o+=lt),{angle:o,distance:i}}function P_(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function xZ(n,e){return(n-e+EZ)%lt-Ve}function bn(n){return(n%lt+lt)%lt}function zu(n,e,t,r){let i=bn(n),o=bn(e),s=bn(t),a=bn(o-i),c=bn(s-i),l=bn(i-o),u=bn(i-s);return i===o||i===s||r&&o===s||a>c&&l<u}function sn(n,e,t){return Math.max(e,Math.min(t,n))}function Uj(n){return sn(n,-32768,32767)}function Xi(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function N_(n,e,t){t=t||(s=>n[s]<e);let r=n.length-1,i=0,o;for(;r-i>1;)o=i+r>>1,t(o)?i=o:r=o;return{lo:i,hi:r}}var Ki=(n,e,t,r)=>N_(n,t,r?i=>{let o=n[i][e];return o<t||o===t&&n[i+1][e]===t}:i=>n[i][e]<t),Bj=(n,e,t)=>N_(n,t,r=>n[r][e]>=t);function $j(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}var Hj=["push","pop","shift","splice","unshift"];function zj(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Hj.forEach(t=>{let r="_onData"+k_(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){let s=i.apply(this,o);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...o)}),s}})})}function YT(n,e){let t=n._chartjs;if(!t)return;let r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(Hj.forEach(o=>{delete n[o]}),delete n._chartjs)}function QT(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var XT=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function JT(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,XT.call(window,()=>{r=!1,n.apply(e,t)}))}}function Wj(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}var F_=n=>n==="start"?"left":n==="end"?"right":"center",wn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,qj=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function ZT(n,e,t){let r=e.length,i=0,o=r;if(n._sorted){let{iScale:s,vScale:a,_parsed:c}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=s.axis,{min:h,max:f,minDefined:p,maxDefined:_}=s.getUserBounds();if(p){if(i=Math.min(Ki(c,u,h).lo,t?r:Ki(e,u,s.getPixelForValue(h)).lo),l){let w=c.slice(0,i+1).reverse().findIndex(b=>!Me(b[a.axis]));i-=Math.max(0,w)}i=sn(i,0,r-1)}if(_){let w=Math.max(Ki(c,s.axis,f,!0).hi+1,t?0:Ki(e,u,s.getPixelForValue(f),!0).hi+1);if(l){let b=c.slice(w-1).findIndex(T=>!Me(T[a.axis]));w+=Math.max(0,b)}o=sn(w,i,r)-i}else o=r-i}return{start:i,count:o}}function eS(n){let{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;let o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),o}var D_=n=>n===0||n===1,Dj=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*lt/t)),Tj=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*lt/t)+1,Vu={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ft)+1,easeOutSine:n=>Math.sin(n*Ft),easeInOutSine:n=>-.5*(Math.cos(Ve*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>D_(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>D_(n)?n:Dj(n,.075,.3),easeOutElastic:n=>D_(n)?n:Tj(n,.075,.3),easeInOutElastic(n){return D_(n)?n:n<.5?.5*Dj(n*2,.1125,.45):.5+.5*Tj(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Vu.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Vu.easeInBounce(n*2)*.5:Vu.easeOutBounce(n*2-1)*.5+.5};function tS(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function nS(n){return tS(n)?n:new Ff(n)}function UT(n){return tS(n)?n:new Ff(n).saturate(.5).darken(.1).hexString()}var DZ=["x","y","borderWidth","radius","tension"],TZ=["color","borderColor","backgroundColor"];function SZ(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:TZ},numbers:{type:"number",properties:DZ}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function MZ(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var Sj=new Map;function AZ(n,e){e=e||{};let t=n+JSON.stringify(e),r=Sj.get(t);return r||(r=new Intl.NumberFormat(n,e),Sj.set(t,r)),r}function Wu(n,e,t){return AZ(e,t).format(n)}var Gj={values(n){return ct(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let r=this.chart.options.locale,i,o=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),o=PZ(n,t)}let s=qo(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Wu(n,r,c)},logarithmic(n,e,t){if(n===0)return"0";let r=t[e].significand||n/Math.pow(10,Math.floor(qo(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?Gj.numeric.call(this,n,e,t):""}};function PZ(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Bf={formatters:Gj};function RZ(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Bf.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var la=Object.create(null),L_=Object.create(null);function Vf(n,e){if(!e)return n;let t=e.split(".");for(let r=0,i=t.length;r<i;++r){let o=t[r];n=n[o]||(n[o]=Object.create(null))}return n}function BT(n,e,t){return typeof e=="string"?ju(Vf(n,e),t):ju(Vf(n,""),e)}var $T=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>UT(i.backgroundColor),this.hoverBorderColor=(r,i)=>UT(i.borderColor),this.hoverColor=(r,i)=>UT(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return BT(this,e,t)}get(e){return Vf(this,e)}describe(e,t){return BT(L_,e,t)}override(e,t){return BT(la,e,t)}route(e,t,r,i){let o=Vf(this,e),s=Vf(this,r),a="_"+t;Object.defineProperties(o,{[a]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=s[i];return Pe(c)?Object.assign({},l,c):ve(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},ht=new $T({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[SZ,MZ,RZ]);function kZ(n){return!n||Me(n.size)||Me(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function jf(n,e,t,r,i){let o=e[i];return o||(o=e[i]=n.measureText(i).width,t.push(i)),o>r&&(r=o),r}function Kj(n,e,t,r){r=r||{};let i=r.data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},o=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let s=0,a=t.length,c,l,u,h,f;for(c=0;c<a;c++)if(h=t[c],h!=null&&!ct(h))s=jf(n,i,o,s,h);else if(ct(h))for(l=0,u=h.length;l<u;l++)f=h[l],f!=null&&!ct(f)&&(s=jf(n,i,o,s,f));n.restore();let p=o.length/2;if(p>t.length){for(c=0;c<p;c++)delete i[o[c]];o.splice(0,p)}return s}function ua(n,e,t){let r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function rS(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function V_(n,e,t,r){iS(n,e,t,r,null)}function iS(n,e,t,r,i){let o,s,a,c,l,u,h,f,p=e.pointStyle,_=e.rotation,w=e.radius,b=(_||0)*CZ;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(b),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(w)||w<=0)){switch(n.beginPath(),p){default:i?n.ellipse(t,r,i/2,w,0,0,lt):n.arc(t,r,w,0,lt),n.closePath();break;case"triangle":u=i?i/2:w,n.moveTo(t+Math.sin(b)*u,r-Math.cos(b)*w),b+=xj,n.lineTo(t+Math.sin(b)*u,r-Math.cos(b)*w),b+=xj,n.lineTo(t+Math.sin(b)*u,r-Math.cos(b)*w),n.closePath();break;case"rectRounded":l=w*.516,c=w-l,s=Math.cos(b+Sc)*c,h=Math.cos(b+Sc)*(i?i/2-l:c),a=Math.sin(b+Sc)*c,f=Math.sin(b+Sc)*(i?i/2-l:c),n.arc(t-h,r-a,l,b-Ve,b-Ft),n.arc(t+f,r-s,l,b-Ft,b),n.arc(t+h,r+a,l,b,b+Ft),n.arc(t-f,r+s,l,b+Ft,b+Ve),n.closePath();break;case"rect":if(!_){c=Math.SQRT1_2*w,u=i?i/2:c,n.rect(t-u,r-c,2*u,2*c);break}b+=Sc;case"rectRot":h=Math.cos(b)*(i?i/2:w),s=Math.cos(b)*w,a=Math.sin(b)*w,f=Math.sin(b)*(i?i/2:w),n.moveTo(t-h,r-a),n.lineTo(t+f,r-s),n.lineTo(t+h,r+a),n.lineTo(t-f,r+s),n.closePath();break;case"crossRot":b+=Sc;case"cross":h=Math.cos(b)*(i?i/2:w),s=Math.cos(b)*w,a=Math.sin(b)*w,f=Math.sin(b)*(i?i/2:w),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-s),n.lineTo(t-f,r+s);break;case"star":h=Math.cos(b)*(i?i/2:w),s=Math.cos(b)*w,a=Math.sin(b)*w,f=Math.sin(b)*(i?i/2:w),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-s),n.lineTo(t-f,r+s),b+=Sc,h=Math.cos(b)*(i?i/2:w),s=Math.cos(b)*w,a=Math.sin(b)*w,f=Math.sin(b)*(i?i/2:w),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-s),n.lineTo(t-f,r+s);break;case"line":s=i?i/2:Math.cos(b)*w,a=Math.sin(b)*w,n.moveTo(t-s,r-a),n.lineTo(t+s,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(b)*(i?i/2:w),r+Math.sin(b)*w);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Yi(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function $f(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Hf(n){n.restore()}function Yj(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){let o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Qj(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function OZ(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Me(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function NZ(n,e,t,r,i){if(i.strikethrough||i.underline){let o=n.measureText(r),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,c=t-o.actualBoundingBoxAscent,l=t+o.actualBoundingBoxDescent,u=i.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(s,u),n.lineTo(a,u),n.stroke()}}function FZ(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function da(n,e,t,r,i,o={}){let s=ct(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="",c,l;for(n.save(),n.font=i.string,OZ(n,o),c=0;c<s.length;++c)l=s[c],o.backdrop&&FZ(n,o.backdrop),a&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Me(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(l,t,r,o.maxWidth)),n.fillText(l,t,r,o.maxWidth),NZ(n,t,r,l,o),r+=Number(i.lineHeight);n.restore()}function qu(n,e){let{x:t,y:r,w:i,h:o,radius:s}=e;n.arc(t+s.topLeft,r+s.topLeft,s.topLeft,1.5*Ve,Ve,!0),n.lineTo(t,r+o-s.bottomLeft),n.arc(t+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,Ve,Ft,!0),n.lineTo(t+i-s.bottomRight,r+o),n.arc(t+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,Ft,0,!0),n.lineTo(t+i,r+s.topRight),n.arc(t+i-s.topRight,r+s.topRight,s.topRight,0,-Ft,!0),n.lineTo(t+s.topLeft,r)}var LZ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,VZ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function jZ(n,e){let t=(""+n).match(LZ);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var UZ=n=>+n||0;function j_(n,e){let t={},r=Pe(e),i=r?Object.keys(e):e,o=Pe(n)?r?s=>ve(n[s],n[e[s]]):s=>n[s]:()=>n;for(let s of i)t[s]=UZ(o(s));return t}function oS(n){return j_(n,{top:"y",right:"x",bottom:"y",left:"x"})}function ha(n){return j_(n,["topLeft","topRight","bottomLeft","bottomRight"])}function En(n){let e=oS(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Qt(n,e){n=n||{},e=e||ht.font;let t=ve(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=ve(n.style,e.style);r&&!(""+r).match(VZ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:ve(n.family,e.family),lineHeight:jZ(ve(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:ve(n.weight,e.weight),string:""};return i.string=kZ(i),i}function Gu(n,e,t,r){let i=!0,o,s,a;for(o=0,s=n.length;o<s;++o)if(a=n[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),t!==void 0&&ct(a)&&(a=a[t%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function Xj(n,e,t){let{min:r,max:i}=n,o=HT(e,(i-r)/2),s=(a,c)=>t&&a===0?0:a+c;return{min:s(r,-Math.abs(o)),max:s(i,o)}}function Ko(n,e){return Object.assign(Object.create(n),e)}function U_(n,e=[""],t,r,i=()=>n[0]){let o=t||n;typeof r>"u"&&(r=e3("_fallback",n));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:r,_getTarget:i,override:a=>U_([a,...n],e,o,r)};return new Proxy(s,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return Jj(a,c,()=>KZ(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return Aj(a).includes(c)},ownKeys(a){return Aj(a)},set(a,c,l){let u=a._storage||(a._storage=i());return a[c]=u[c]=l,delete a._keys,!0}})}function Ac(n,e,t,r){let i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:sS(n,r),setContext:o=>Ac(n,o,t,r),override:o=>Ac(n.override(o),e,t,r)};return new Proxy(i,{deleteProperty(o,s){return delete o[s],delete n[s],!0},get(o,s,a){return Jj(o,s,()=>$Z(o,s,a))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(n,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,s)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,s){return Reflect.has(n,s)},ownKeys(){return Reflect.ownKeys(n)},set(o,s,a){return n[s]=a,delete o[s],!0}})}function sS(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Wo(t)?t:()=>t,isIndexable:Wo(r)?r:()=>r}}var BZ=(n,e)=>n?n+k_(e):e,aS=(n,e)=>Pe(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Jj(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let r=t();return n[e]=r,r}function $Z(n,e,t){let{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=n,a=r[e];return Wo(a)&&s.isScriptable(e)&&(a=HZ(e,a,n,t)),ct(a)&&a.length&&(a=zZ(e,a,n,s.isIndexable)),aS(e,a)&&(a=Ac(a,i,o&&o[e],s)),a}function HZ(n,e,t,r){let{_proxy:i,_context:o,_subProxy:s,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(o,s||r);return a.delete(n),aS(n,c)&&(c=cS(i._scopes,i,n,c)),c}function zZ(n,e,t,r){let{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=t;if(typeof o.index<"u"&&r(n))return e[o.index%e.length];if(Pe(e[0])){let c=e,l=i._scopes.filter(u=>u!==c);e=[];for(let u of c){let h=cS(l,i,n,u);e.push(Ac(h,o,s&&s[n],a))}}return e}function Zj(n,e,t){return Wo(n)?n(e,t):n}var WZ=(n,e)=>n===!0?e:typeof n=="string"?Go(e,n):void 0;function qZ(n,e,t,r,i){for(let o of e){let s=WZ(t,o);if(s){n.add(s);let a=Zj(s._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(s===!1&&typeof r<"u"&&t!==r)return null}return!1}function cS(n,e,t,r){let i=e._rootScopes,o=Zj(e._fallback,t,r),s=[...n,...i],a=new Set;a.add(r);let c=Mj(a,s,t,o||t,r);return c===null||typeof o<"u"&&o!==t&&(c=Mj(a,s,o,c,r),c===null)?!1:U_(Array.from(a),[""],i,o,()=>GZ(e,t,r))}function Mj(n,e,t,r,i){for(;t;)t=qZ(n,e,t,r,i);return t}function GZ(n,e,t){let r=n._getTarget();e in r||(r[e]={});let i=r[e];return ct(i)&&Pe(t)?t:i||{}}function KZ(n,e,t,r){let i;for(let o of e)if(i=e3(BZ(o,n),t),typeof i<"u")return aS(n,i)?cS(t,r,n,i):i}function e3(n,e){for(let t of e){if(!t)continue;let r=t[n];if(typeof r<"u")return r}}function Aj(n){let e=n._keys;return e||(e=n._keys=YZ(n._scopes)),e}function YZ(n){let e=new Set;for(let t of n)for(let r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function lS(n,e,t,r){let{iScale:i}=n,{key:o="r"}=this._parsing,s=new Array(r),a,c,l,u;for(a=0,c=r;a<c;++a)l=a+t,u=e[l],s[a]={r:i.parse(Go(u,o),l)};return s}var QZ=Number.EPSILON||1e-14,Uu=(n,e)=>e<n.length&&!n[e].skip&&n[e],t3=n=>n==="x"?"y":"x";function XZ(n,e,t,r){let i=n.skip?e:n,o=e,s=t.skip?e:t,a=P_(o,i),c=P_(s,o),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let h=r*l,f=r*u;return{previous:{x:o.x-h*(s.x-i.x),y:o.y-h*(s.y-i.y)},next:{x:o.x+f*(s.x-i.x),y:o.y+f*(s.y-i.y)}}}function JZ(n,e,t){let r=n.length,i,o,s,a,c,l=Uu(n,0);for(let u=0;u<r-1;++u)if(c=l,l=Uu(n,u+1),!(!c||!l)){if(Hu(e[u],0,QZ)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],o=t[u+1]/e[u],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(s=3/Math.sqrt(a),t[u]=i*s*e[u],t[u+1]=o*s*e[u])}}function ZZ(n,e,t="x"){let r=t3(t),i=n.length,o,s,a,c=Uu(n,0);for(let l=0;l<i;++l){if(s=a,a=c,c=Uu(n,l+1),!a)continue;let u=a[t],h=a[r];s&&(o=(u-s[t])/3,a[`cp1${t}`]=u-o,a[`cp1${r}`]=h-o*e[l]),c&&(o=(c[t]-u)/3,a[`cp2${t}`]=u+o,a[`cp2${r}`]=h+o*e[l])}}function eee(n,e="x"){let t=t3(e),r=n.length,i=Array(r).fill(0),o=Array(r),s,a,c,l=Uu(n,0);for(s=0;s<r;++s)if(a=c,c=l,l=Uu(n,s+1),!!c){if(l){let u=l[e]-c[e];i[s]=u!==0?(l[t]-c[t])/u:0}o[s]=a?l?pi(i[s-1])!==pi(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}JZ(n,i,o),ZZ(n,o,e)}function T_(n,e,t){return Math.max(Math.min(n,t),e)}function tee(n,e){let t,r,i,o,s,a=Yi(n[0],e);for(t=0,r=n.length;t<r;++t)s=o,o=a,a=t<r-1&&Yi(n[t+1],e),o&&(i=n[t],s&&(i.cp1x=T_(i.cp1x,e.left,e.right),i.cp1y=T_(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=T_(i.cp2x,e.left,e.right),i.cp2y=T_(i.cp2y,e.top,e.bottom)))}function n3(n,e,t,r,i){let o,s,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")eee(n,i);else{let l=r?n[n.length-1]:n[0];for(o=0,s=n.length;o<s;++o)a=n[o],c=XZ(l,a,n[Math.min(o+1,s-(r?0:1))%s],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&tee(n,t)}function B_(){return typeof window<"u"&&typeof document<"u"}function $_(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function R_(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}var H_=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function nee(n,e){return H_(n).getPropertyValue(e)}var ree=["top","right","bottom","left"];function Mc(n,e,t){let r={};t=t?"-"+t:"";for(let i=0;i<4;i++){let o=ree[i];r[o]=parseFloat(n[e+"-"+o+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var iee=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function oee(n,e){let t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:o}=r,s=!1,a,c;if(iee(i,o,n.target))a=i,c=o;else{let l=e.getBoundingClientRect();a=r.clientX-l.left,c=r.clientY-l.top,s=!0}return{x:a,y:c,box:s}}function fa(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:r}=e,i=H_(t),o=i.boxSizing==="border-box",s=Mc(i,"padding"),a=Mc(i,"border","width"),{x:c,y:l,box:u}=oee(n,t),h=s.left+(u&&a.left),f=s.top+(u&&a.top),{width:p,height:_}=e;return o&&(p-=s.width+a.width,_-=s.height+a.height),{x:Math.round((c-h)/p*t.width/r),y:Math.round((l-f)/_*t.height/r)}}function see(n,e,t){let r,i;if(e===void 0||t===void 0){let o=n&&$_(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{let s=o.getBoundingClientRect(),a=H_(o),c=Mc(a,"border","width"),l=Mc(a,"padding");e=s.width-l.width-c.width,t=s.height-l.height-c.height,r=R_(a.maxWidth,o,"clientWidth"),i=R_(a.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:r||A_,maxHeight:i||A_}}var ca=n=>Math.round(n*10)/10;function r3(n,e,t,r){let i=H_(n),o=Mc(i,"margin"),s=R_(i.maxWidth,n,"clientWidth")||A_,a=R_(i.maxHeight,n,"clientHeight")||A_,c=see(n,e,t),{width:l,height:u}=c;if(i.boxSizing==="content-box"){let f=Mc(i,"border","width"),p=Mc(i,"padding");l-=p.width+f.width,u-=p.height+f.height}return l=Math.max(0,l-o.width),u=Math.max(0,r?l/r:u-o.height),l=ca(Math.min(l,s,c.maxWidth)),u=ca(Math.min(u,a,c.maxHeight)),l&&!u&&(u=ca(l/2)),(e!==void 0||t!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,l=ca(Math.floor(u*r))),{width:l,height:u}}function uS(n,e,t){let r=e||1,i=ca(n.height*r),o=ca(n.width*r);n.height=ca(n.height),n.width=ca(n.width);let s=n.canvas;return s.style&&(t||!s.style.height&&!s.style.width)&&(s.style.height=`${n.height}px`,s.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||s.height!==i||s.width!==o?(n.currentDevicePixelRatio=r,s.height=i,s.width=o,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}var i3=(function(){let n=!1;try{let e={get passive(){return n=!0,!1}};B_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function dS(n,e){let t=nee(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function aa(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function o3(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function s3(n,e,t,r){let i={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},s=aa(n,i,t),a=aa(i,o,t),c=aa(o,e,t),l=aa(s,a,t),u=aa(a,c,t);return aa(l,u,t)}var aee=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},cee=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Rc(n,e,t){return n?aee(e,t):cee()}function hS(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function fS(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function a3(n){return n==="angle"?{between:zu,compare:xZ,normalize:bn}:{between:Xi,compare:(e,t)=>e-t,normalize:e=>e}}function Pj({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function lee(n,e,t){let{property:r,start:i,end:o}=t,{between:s,normalize:a}=a3(r),c=e.length,{start:l,end:u,loop:h}=n,f,p;if(h){for(l+=c,u+=c,f=0,p=c;f<p&&s(a(e[l%c][r]),i,o);++f)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:h,style:n.style}}function pS(n,e,t){if(!t)return[n];let{property:r,start:i,end:o}=t,s=e.length,{compare:a,between:c,normalize:l}=a3(r),{start:u,end:h,loop:f,style:p}=lee(n,e,t),_=[],w=!1,b=null,T,k,V,j=()=>c(i,V,T)&&a(i,V)!==0,U=()=>a(o,T)===0||c(o,V,T),B=()=>w||j(),M=()=>!w||U();for(let x=u,D=u;x<=h;++x)k=e[x%s],!k.skip&&(T=l(k[r]),T!==V&&(w=c(T,i,o),b===null&&B()&&(b=a(T,i)===0?x:D),b!==null&&M()&&(_.push(Pj({start:b,end:x,loop:f,count:s,style:p})),b=null),D=x,V=T));return b!==null&&_.push(Pj({start:b,end:h,loop:f,count:s,style:p})),_}function gS(n,e){let t=[],r=n.segments;for(let i=0;i<r.length;i++){let o=pS(r[i],n.points,e);o.length&&t.push(...o)}return t}function uee(n,e,t,r){let i=0,o=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(o+=i);o>i&&n[o%e].skip;)o--;return o%=e,{start:i,end:o}}function dee(n,e,t,r){let i=n.length,o=[],s=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%i];l.skip||l.stop?a.skip||(r=!1,o.push({start:e%i,end:(c-1)%i,loop:r}),e=s=l.stop?c:null):(s=c,a.skip&&(e=c)),a=l}return s!==null&&o.push({start:e%i,end:s%i,loop:r}),o}function c3(n,e){let t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];let o=!!n._loop,{start:s,end:a}=uee(t,i,o,r);if(r===!0)return Rj(n,[{start:s,end:a,loop:o}],t,e);let c=a<s?a+i:a,l=!!n._fullLoop&&s===0&&a===i-1;return Rj(n,dee(t,s,c,l),t,e)}function Rj(n,e,t,r){return!r||!r.setContext||!t?e:hee(n,e,t,r)}function hee(n,e,t,r){let i=n._chart.getContext(),o=kj(n.options),{_datasetIndex:s,options:{spanGaps:a}}=n,c=t.length,l=[],u=o,h=e[0].start,f=h;function p(_,w,b,T){let k=a?-1:1;if(_!==w){for(_+=c;t[_%c].skip;)_-=k;for(;t[w%c].skip;)w+=k;_%c!==w%c&&(l.push({start:_%c,end:w%c,loop:b,style:T}),u=T,h=w%c)}}for(let _ of e){h=a?h:_.start;let w=t[h%c],b;for(f=h+1;f<=_.end;f++){let T=t[f%c];b=kj(r.setContext(Ko(i,{type:"segment",p0:w,p1:T,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:s}))),fee(b,u)&&p(h,f-1,_.loop,u),w=T,u=b}h<f-1&&p(h,f-1,_.loop,u)}return l}function kj(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function fee(n,e){if(!e)return!1;let t=[],r=function(i,o){return tS(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function S_(n,e,t){return n.options.clip?n[t]:e[t]}function pee(n,e){let{xScale:t,yScale:r}=n;return t&&r?{left:S_(t,e,"left"),right:S_(t,e,"right"),top:S_(r,e,"top"),bottom:S_(r,e,"bottom")}:e}function mS(n,e){let t=e._clip;if(t.disabled)return!1;let r=pee(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}var SS=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){let o=t.listeners[i],s=t.duration;o.forEach(a=>a({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(r-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=XT.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let o=r.items,s=o.length-1,a=!1,c;for(;s>=0;--s)c=o[s],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(o[s]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),o.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let r=t.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Yo=new SS,l3="transparent",gee={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let r=nS(n||l3),i=r.valid&&nS(e||l3);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}},MS=class{constructor(e,t,r,i){let o=t[r];i=Gu([e.to,i,o,e.from]);let s=Gu([e.from,o,i]);this._active=!0,this._fn=e.fn||gee[e.type||typeof s],this._easing=Vu[e.easing]||Vu.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);let i=this._target[this._prop],o=r-this._start,s=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Gu([e.to,t,i,e.from]),this._from=Gu([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,r=this._duration,i=this._prop,o=this._from,s=this._loop,a=this._to,c;if(this._active=o!==a&&(s||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=o;return}c=t/r%2,c=s&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(o,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){let t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}},J_=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Pe(e))return;let t=Object.keys(ht.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let o=e[i];if(!Pe(o))return;let s={};for(let a of t)s[a]=o[a];(ct(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,s)})})}_animateOptions(e,t){let r=t.options,i=yee(e,r);if(!i)return[];let o=this._createAnimations(i,r);return r.$shared&&mee(e.options.$animations,r).then(()=>{e.options=r},()=>{}),o}_createAnimations(e,t){let r=this._properties,i=[],o=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now(),c;for(c=s.length-1;c>=0;--c){let l=s[c];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,t));continue}let u=t[l],h=o[l],f=r.get(l);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[l]=u;continue}o[l]=h=new MS(f,e,l,u),i.push(h)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let r=this._createAnimations(e,t);if(r.length)return Yo.add(this._chart,r),!0}};function mee(n,e){let t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){let o=n[r[i]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function yee(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function u3(n,e){let t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:r?o:i,end:r?i:o}}function vee(n,e,t){if(t===!1)return!1;let r=u3(n,t),i=u3(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function _ee(n){let e,t,r,i;return Pe(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function lU(n,e){let t=[],r=n._getSortedDatasetMetas(e),i,o;for(i=0,o=r.length;i<o;++i)t.push(r[i].index);return t}function d3(n,e,t,r={}){let i=n.keys,o=r.mode==="single",s,a,c,l;if(e===null)return;let u=!1;for(s=0,a=i.length;s<a;++s){if(c=+i[s],c===t){if(u=!0,r.all)continue;break}l=n.values[c],Et(l)&&(o||e===0||pi(e)===pi(l))&&(e+=l)}return!u&&!r.all?0:e}function bee(n,e){let{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",s=Object.keys(n),a=new Array(s.length),c,l,u;for(c=0,l=s.length;c<l;++c)u=s[c],a[c]={[i]:u,[o]:n[u]};return a}function yS(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function wee(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Eee(n){let{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function Cee(n,e,t){let r=n[e]||(n[e]={});return r[t]||(r[t]={})}function h3(n,e,t,r){for(let i of e.getMatchingVisibleMetas(r).reverse()){let o=n[i.index];if(t&&o>0||!t&&o<0)return i.index}return null}function f3(n,e){let{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:o,vScale:s,index:a}=r,c=o.axis,l=s.axis,u=wee(o,s,r),h=e.length,f;for(let p=0;p<h;++p){let _=e[p],{[c]:w,[l]:b}=_,T=_._stacks||(_._stacks={});f=T[l]=Cee(i,u,w),f[a]=b,f._top=h3(f,s,!0,r.type),f._bottom=h3(f,s,!1,r.type);let k=f._visualValues||(f._visualValues={});k[a]=b}}function vS(n,e){let t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function Iee(n,e){return Ko(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function xee(n,e,t){return Ko(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function zf(n,e){let t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(let i of e){let o=i._stacks;if(!o||o[r]===void 0||o[r][t]===void 0)return;delete o[r][t],o[r]._visualValues!==void 0&&o[r]._visualValues[t]!==void 0&&delete o[r]._visualValues[t]}}}var _S=n=>n==="reset"||n==="none",p3=(n,e)=>e?n:Object.assign({},n),Dee=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:lU(t,!0),values:null},ga=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=yS(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&zf(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,r=this._cachedMeta,i=this.getDataset(),o=(f,p,_,w)=>f==="x"?p:f==="r"?w:_,s=r.xAxisID=ve(i.xAxisID,vS(t,"x")),a=r.yAxisID=ve(i.yAxisID,vS(t,"y")),c=r.rAxisID=ve(i.rAxisID,vS(t,"r")),l=r.indexAxis,u=r.iAxisID=o(l,s,a,c),h=r.vAxisID=o(l,a,s,c);r.xScale=this.getScaleForId(s),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&YT(this._data,this),t._stacked&&zf(t)}_dataCheck(){let t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(Pe(r)){let o=this._cachedMeta;this._data=bee(r,o)}else if(i!==r){if(i){YT(i,this);let o=this._cachedMeta;zf(o),o._parsed=[]}r&&Object.isExtensible(r)&&zj(r,this),this._syncList=[],this._data=r}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let r=this._cachedMeta,i=this.getDataset(),o=!1;this._dataCheck();let s=r._stacked;r._stacked=yS(r.vScale,r),r.stack!==i.stack&&(o=!0,zf(r),r.stack=i.stack),this._resyncElements(t),(o||s!==r._stacked)&&(f3(this,r._parsed),r._stacked=yS(r.vScale,r))}configure(){let t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){let{_cachedMeta:i,_data:o}=this,{iScale:s,_stacked:a}=i,c=s.axis,l=t===0&&r===o.length?!0:i._sorted,u=t>0&&i._parsed[t-1],h,f,p;if(this._parsing===!1)i._parsed=o,i._sorted=!0,p=o;else{ct(o[t])?p=this.parseArrayData(i,o,t,r):Pe(o[t])?p=this.parseObjectData(i,o,t,r):p=this.parsePrimitiveData(i,o,t,r);let _=()=>f[c]===null||u&&f[c]<u[c];for(h=0;h<r;++h)i._parsed[h+t]=f=p[h],l&&(_()&&(l=!1),u=f);i._sorted=l}a&&f3(this,p)}parsePrimitiveData(t,r,i,o){let{iScale:s,vScale:a}=t,c=s.axis,l=a.axis,u=s.getLabels(),h=s===a,f=new Array(o),p,_,w;for(p=0,_=o;p<_;++p)w=p+i,f[p]={[c]:h||s.parse(u[w],w),[l]:a.parse(r[w],w)};return f}parseArrayData(t,r,i,o){let{xScale:s,yScale:a}=t,c=new Array(o),l,u,h,f;for(l=0,u=o;l<u;++l)h=l+i,f=r[h],c[l]={x:s.parse(f[0],h),y:a.parse(f[1],h)};return c}parseObjectData(t,r,i,o){let{xScale:s,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(o),h,f,p,_;for(h=0,f=o;h<f;++h)p=h+i,_=r[p],u[h]={x:s.parse(Go(_,c),p),y:a.parse(Go(_,l),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){let o=this.chart,s=this._cachedMeta,a=r[t.axis],c={keys:lU(o,!0),values:r._stacks[t.axis]._visualValues};return d3(c,a,s.index,{mode:i})}updateRangeFromParsed(t,r,i,o){let s=i[r.axis],a=s===null?NaN:s,c=o&&i._stacks[r.axis];o&&c&&(o.values=c,a=d3(o,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,r){let i=this._cachedMeta,o=i._parsed,s=i._sorted&&t===i.iScale,a=o.length,c=this._getOtherScale(t),l=Dee(r,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=Eee(c),p,_;function w(){_=o[p];let b=_[c.axis];return!Et(_[t.axis])||h>b||f<b}for(p=0;p<a&&!(!w()&&(this.updateRangeFromParsed(u,t,_,l),s));++p);if(s){for(p=a-1;p>=0;--p)if(!w()){this.updateRangeFromParsed(u,t,_,l);break}}return u}getAllParsedValues(t){let r=this._cachedMeta._parsed,i=[],o,s,a;for(o=0,s=r.length;o<s;++o)a=r[o][t.axis],Et(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let r=this._cachedMeta,i=r.iScale,o=r.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:o?""+o.getLabelForValue(s[o.axis]):""}}_update(t){let r=this._cachedMeta;this.update(t||"default"),r._clip=_ee(ve(this.options.clip,vee(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,r=this.chart,i=this._cachedMeta,o=i.data||[],s=r.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||o.length-c,u=this.options.drawActiveElementsOnTop,h;for(i.dataset&&i.dataset.draw(t,s,c,l),h=c;h<c+l;++h){let f=o[h];f.hidden||(f.active&&u?a.push(f):f.draw(t,s))}for(h=0;h<a.length;++h)a[h].draw(t,s)}getStyle(t,r){let i=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){let o=this.getDataset(),s;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];s=a.$context||(a.$context=xee(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=o.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=Iee(this.chart.getContext(),this.index)),s.dataset=o,s.index=s.datasetIndex=this.index;return s.active=!!r,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){let o=r==="active",s=this._cachedDataOpts,a=t+"-"+r,c=s[a],l=this.enableOptionSharing&&$u(i);if(c)return p3(c,l);let u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),f=o?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),h),_=Object.keys(ht.elements[t]),w=()=>this.getContext(i,o,r),b=u.resolveNamedOptions(p,_,w,f);return b.$shared&&(b.$shared=l,s[a]=Object.freeze(p3(b,l))),b}_resolveAnimations(t,r,i){let o=this.chart,s=this._cachedDataOpts,a=`animation-${r}`,c=s[a];if(c)return c;let l;if(o.options.animation!==!1){let h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,r),p=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(p,this.getContext(t,i,r))}let u=new J_(o,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||_S(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){let i=this.resolveDataElementOptions(t,r),o=this._sharedOptions,s=this.getSharedOptions(i),a=this.includeOptions(r,s)||s!==o;return this.updateSharedOptions(s,r,i),{sharedOptions:s,includeOptions:a}}updateElement(t,r,i,o){_S(o)?Object.assign(t,i):this._resolveAnimations(r,o).update(t,i)}updateSharedOptions(t,r,i){t&&!_S(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,o){t.active=o;let s=this.getStyle(r,o);this._resolveAnimations(r,i,o).update(t,{options:!o&&this.getSharedOptions(s)||s})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let r=this._data,i=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let o=i.length,s=r.length,a=Math.min(s,o);a&&this.parse(0,a),s>o?this._insertElements(o,s-o,t):s<o&&this._removeElements(s,o-s)}_insertElements(t,r,i=!0){let o=this._cachedMeta,s=o.data,a=t+r,c,l=u=>{for(u.length+=r,c=u.length-1;c>=a;c--)u[c]=u[c-r]};for(l(s),c=t;c<a;++c)s[c]=new this.dataElementType;this._parsing&&l(o._parsed),this.parse(t,r),i&&this.updateElements(s,t,r,"reset")}updateElements(t,r,i,o){}_removeElements(t,r){let i=this._cachedMeta;if(this._parsing){let o=i._parsed.splice(t,r);i._stacked&&zf(i,o)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[r,i,o]=t;this[r](i,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function Tee(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),r=[];for(let i=0,o=t.length;i<o;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=QT(r.sort((i,o)=>i-o))}return n._cache.$bar}function See(n){let e=n.iScale,t=Tee(e,n.type),r=e._length,i,o,s,a,c=()=>{s===32767||s===-32768||($u(a)&&(r=Math.min(r,Math.abs(s-a)||r)),a=s)};for(i=0,o=t.length;i<o;++i)s=e.getPixelForValue(t[i]),c();for(a=void 0,i=0,o=e.ticks.length;i<o;++i)s=e.getPixelForTick(i),c();return r}function Mee(n,e,t,r){let i=t.barThickness,o,s;return Me(i)?(o=e.min*t.categoryPercentage,s=t.barPercentage):(o=i*r,s=1),{chunk:o/r,ratio:s,start:e.pixels[n]-o/2}}function Aee(n,e,t,r){let i=e.pixels,o=i[n],s=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null,c=t.categoryPercentage;s===null&&(s=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-s);let l=o-(o-Math.min(s,a))/2*c;return{chunk:Math.abs(a-s)/2*c/r,ratio:t.barPercentage,start:l}}function Pee(n,e,t,r){let i=t.parse(n[0],r),o=t.parse(n[1],r),s=Math.min(i,o),a=Math.max(i,o),c=s,l=a;Math.abs(s)>Math.abs(a)&&(c=a,l=s),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:i,end:o,min:s,max:a}}function uU(n,e,t,r){return ct(n)?Pee(n,e,t,r):e[t.axis]=t.parse(n,r),e}function g3(n,e,t,r){let i=n.iScale,o=n.vScale,s=i.getLabels(),a=i===o,c=[],l,u,h,f;for(l=t,u=t+r;l<u;++l)f=e[l],h={},h[i.axis]=a||i.parse(s[l],l),c.push(uU(f,h,o,l));return c}function bS(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Ree(n,e,t){return n!==0?pi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function kee(n){let e,t,r,i,o;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",o="start"):(i="start",o="end"),{start:t,end:r,reverse:e,top:i,bottom:o}}function Oee(n,e,t,r){let i=e.borderSkipped,o={};if(!i){n.borderSkipped=o;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:s,end:a,reverse:c,top:l,bottom:u}=kee(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=l:(t._bottom||0)===r?i=u:(o[m3(u,s,a,c)]=!0,i=l)),o[m3(i,s,a,c)]=!0,n.borderSkipped=o}function m3(n,e,t,r){return r?(n=Nee(n,e,t),n=y3(n,t,e)):n=y3(n,e,t),n}function Nee(n,e,t){return n===e?t:n===t?e:n}function y3(n,e,t){return n==="start"?e:n==="end"?t:n}function Fee(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var Lee=(()=>{class n extends ga{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,o){return g3(t,r,i,o)}parseArrayData(t,r,i,o){return g3(t,r,i,o)}parseObjectData(t,r,i,o){let{iScale:s,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=s.axis==="x"?c:l,h=a.axis==="x"?c:l,f=[],p,_,w,b;for(p=i,_=i+o;p<_;++p)b=r[p],w={},w[s.axis]=s.parse(Go(b,u),p),f.push(uU(Go(b,h),w,a,p));return f}updateRangeFromParsed(t,r,i,o){super.updateRangeFromParsed(t,r,i,o);let s=i._custom;s&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let r=this._cachedMeta,{iScale:i,vScale:o}=r,s=this.getParsed(t),a=s._custom,c=bS(a)?"["+a.start+", "+a.end+"]":""+o.getLabelForValue(s[o.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,o){let s=o==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(r,o);for(let _=r;_<r+i;_++){let w=this.getParsed(_),b=s||Me(w[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(_),T=this._calculateBarIndexPixels(_,h),k=(w._stacks||{})[c.axis],V={horizontal:u,base:b.base,enableBorderRadius:!k||bS(w._custom)||a===k._top||a===k._bottom,x:u?b.head:T.center,y:u?T.center:b.head,height:u?T.size:Math.abs(b.size),width:u?Math.abs(b.size):T.size};p&&(V.options=f||this.resolveDataElementOptions(_,t[_].active?"active":o));let j=V.options||t[_].options;Oee(V,j,k,a),Fee(V,j,h.ratio),this.updateElement(t[_],_,V,o)}}_getStacks(t,r){let{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=i.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(r),l=c&&c[i.axis],u=h=>{let f=h._parsed.find(_=>_[i.axis]===l),p=f&&f[h.vScale.axis];if(Me(p)||isNaN(p))return!0};for(let h of o)if(!(r!==void 0&&u(h))&&((s===!1||a.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&a.push(h.stack),h.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===r).shift()}_getAxis(){let t={},r=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[ve(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,i){let o=this._getStacks(t,i),s=r!==void 0?o.indexOf(r):-1;return s===-1?o.length-1:s}_getRuler(){let t=this.options,r=this._cachedMeta,i=r.iScale,o=[],s,a;for(s=0,a=r.data.length;s<a;++s)o.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));let c=t.barThickness;return{min:c||See(r),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:r,_stacked:i,index:o},options:{base:s,minBarLength:a}}=this,c=s||0,l=this.getParsed(t),u=l._custom,h=bS(u),f=l[r.axis],p=0,_=i?this.applyStack(r,l,i):f,w,b;_!==f&&(p=_-f,_=f),h&&(f=u.barStart,_=u.barEnd-u.barStart,f!==0&&pi(f)!==pi(u.barEnd)&&(p=0),p+=f);let T=!Me(s)&&!h?s:p,k=r.getPixelForValue(T);if(this.chart.getDataVisibility(t)?w=r.getPixelForValue(p+_):w=k,b=w-k,Math.abs(b)<a){b=Ree(b,r,c)*a,f===c&&(k-=b/2);let V=r.getPixelForDecimal(0),j=r.getPixelForDecimal(1),U=Math.min(V,j),B=Math.max(V,j);k=Math.max(Math.min(k,B),U),w=k+b,i&&!h&&(l._stacks[r.axis]._visualValues[o]=r.getValueForPixel(w)-r.getValueForPixel(k))}if(k===r.getPixelForValue(c)){let V=pi(b)*r.getLineWidthForValue(c)/2;k+=V,b-=V}return{size:b,base:k,head:w,center:w+b/2}}_calculateBarIndexPixels(t,r){let i=r.scale,o=this.options,s=o.skipNull,a=ve(o.maxBarThickness,1/0),c,l,u=this._getAxisCount();if(r.grouped){let h=s?this._getStackCount(t):r.stackCount,f=o.barThickness==="flex"?Aee(t,r,o,h*u):Mee(t,r,o,h*u),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,_=this._getAxis().indexOf(ve(p,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+_;c=f.start+f.chunk*w+f.chunk/2,l=Math.min(a,f.chunk*f.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(a,r.min*r.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,r=t.vScale,i=t.data,o=i.length,s=0;for(;s<o;++s)this.getParsed(s)[r.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}return n})(),Vee=(()=>{class n extends ga{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,o){let s=super.parsePrimitiveData(t,r,i,o);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+i).radius;return s}parseArrayData(t,r,i,o){let s=super.parseArrayData(t,r,i,o);for(let a=0;a<s.length;a++){let c=r[i+a];s[a]._custom=ve(c[2],this.resolveDataElementOptions(a+i).radius)}return s}parseObjectData(t,r,i,o){let s=super.parseObjectData(t,r,i,o);for(let a=0;a<s.length;a++){let c=r[i+a];s[a]._custom=ve(c&&c.r&&+c.r,this.resolveDataElementOptions(a+i).radius)}return s}getMaxOverflow(){let t=this._cachedMeta.data,r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=r,a=this.getParsed(t),c=o.getLabelForValue(a.x),l=s.getLabelForValue(a.y),u=a._custom;return{label:i[t]||"",value:"("+c+", "+l+(u?", "+u:"")+")"}}update(t){let r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(r,o),h=a.axis,f=c.axis;for(let p=r;p<r+i;p++){let _=t[p],w=!s&&this.getParsed(p),b={},T=b[h]=s?a.getPixelForDecimal(.5):a.getPixelForValue(w[h]),k=b[f]=s?c.getBasePixel():c.getPixelForValue(w[f]);b.skip=isNaN(T)||isNaN(k),u&&(b.options=l||this.resolveDataElementOptions(p,_.active?"active":o),s&&(b.options.radius=0)),this.updateElement(_,p,b,o)}}resolveDataElementOptions(t,r){let i=this.getParsed(t),o=super.resolveDataElementOptions(t,r);o.$shared&&(o=Object.assign({},o,{$shared:!1}));let s=o.radius;return r!=="active"&&(o.radius=0),o.radius+=ve(i&&i._custom,s),o}}return n})();function jee(n,e,t){let r=1,i=1,o=0,s=0;if(e<lt){let a=n,c=a+e,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),f=Math.sin(c),p=(V,j,U)=>zu(V,a,c,!0)?1:Math.max(j,j*t,U,U*t),_=(V,j,U)=>zu(V,a,c,!0)?-1:Math.min(j,j*t,U,U*t),w=p(0,l,h),b=p(Ft,u,f),T=_(Ve,l,h),k=_(Ve+Ft,u,f);r=(w-T)/2,i=(b-k)/2,o=-(w+T)/2,s=-(b+k)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:s}}var YS=(()=>{class n extends ga{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data,{labels:{pointStyle:i,textAlign:o,color:s,useBorderRadius:a,borderRadius:c}}=t.legend.options;return r.labels.length&&r.datasets.length?r.labels.map((l,u)=>{let f=t.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:f.backgroundColor,fontColor:s,hidden:!t.getDataVisibility(u),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:o,pointStyle:i,borderRadius:a&&(c||f.borderRadius),index:u}}):[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){let i=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=i;else{let s=l=>+i[l];if(Pe(i[t])){let{key:l="value"}=this._parsing;s=u=>+Go(i[u],l)}let a,c;for(a=t,c=t+r;a<c;++a)o._parsed[a]=s(a)}}_getRotation(){return zr(this.options.rotation-90)}_getCircumference(){return zr(this.options.circumference)}_getRotationExtents(){let t=lt,r=-lt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let o=this.chart.getDatasetMeta(i).controller,s=o._getRotation(),a=o._getCircumference();t=Math.min(t,s),r=Math.max(r,s+a)}return{rotation:t,circumference:r-t}}update(t){let r=this.chart,{chartArea:i}=r,o=this._cachedMeta,s=o.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min(Nj(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:h,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:_,offsetX:w,offsetY:b}=jee(f,h,l),T=(i.width-a)/p,k=(i.height-a)/_,V=Math.max(Math.min(T,k)/2,0),j=HT(this.options.radius,V),U=Math.max(j*l,0),B=(j-U)/this._getVisibleDatasetWeightTotal();this.offsetX=w*j,this.offsetY=b*j,o.total=this.calculateTotal(),this.outerRadius=j-B*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-B*u,0),this.updateElements(s,0,s.length,t)}_circumference(t,r){let i=this.options,o=this._cachedMeta,s=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*s/lt)}updateElements(t,r,i,o){let s=o==="reset",a=this.chart,c=a.chartArea,u=a.options.animation,h=(c.left+c.right)/2,f=(c.top+c.bottom)/2,p=s&&u.animateScale,_=p?0:this.innerRadius,w=p?0:this.outerRadius,{sharedOptions:b,includeOptions:T}=this._getSharedOptions(r,o),k=this._getRotation(),V;for(V=0;V<r;++V)k+=this._circumference(V,s);for(V=r;V<r+i;++V){let j=this._circumference(V,s),U=t[V],B={x:h+this.offsetX,y:f+this.offsetY,startAngle:k,endAngle:k+j,circumference:j,outerRadius:w,innerRadius:_};T&&(B.options=b||this.resolveDataElementOptions(V,U.active?"active":o)),k+=j,this.updateElement(U,V,B,o)}}calculateTotal(){let t=this._cachedMeta,r=t.data,i=0,o;for(o=0;o<r.length;o++){let s=t._parsed[o];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(o)&&!r[o].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(t){let r=this._cachedMeta.total;return r>0&&!isNaN(t)?lt*(Math.abs(t)/r):0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,o=i.data.labels||[],s=Wu(r._parsed[t],i.options.locale);return{label:o[t]||"",value:s}}getMaxBorderWidth(t){let r=0,i=this.chart,o,s,a,c,l;if(!t){for(o=0,s=i.data.datasets.length;o<s;++o)if(i.isDatasetVisible(o)){a=i.getDatasetMeta(o),t=a.data,c=a.controller;break}}if(!t)return 0;for(o=0,s=t.length;o<s;++o)l=c.resolveDataElementOptions(o),l.borderAlign!=="inner"&&(r=Math.max(r,l.borderWidth||0,l.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,o=t.length;i<o;++i){let s=this.resolveDataElementOptions(i);r=Math.max(r,s.offset||0,s.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(ve(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),Uee=(()=>{class n extends ga{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let r=this._cachedMeta,{dataset:i,data:o=[],_dataset:s}=r,a=this.chart._animationsDisabled,{start:c,count:l}=ZT(r,o,a);this._drawStart=c,this._drawCount=l,eS(r)&&(c=0,l=o.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=o;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:u},t),this.updateElements(o,c,l,t)}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(r,o),p=a.axis,_=c.axis,{spanGaps:w,segment:b}=this.options,T=Pc(w)?w:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||s||o==="none",V=r+i,j=t.length,U=r>0&&this.getParsed(r-1);for(let B=0;B<j;++B){let M=t[B],x=k?M:{};if(B<r||B>=V){x.skip=!0;continue}let D=this.getParsed(B),P=Me(D[_]),R=x[p]=a.getPixelForValue(D[p],B),O=x[_]=s||P?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,D,l):D[_],B);x.skip=isNaN(R)||isNaN(O)||P,x.stop=B>0&&Math.abs(D[p]-U[p])>T,b&&(x.parsed=D,x.raw=u.data[B]),f&&(x.options=h||this.resolveDataElementOptions(B,M.active?"active":o)),k||this.updateElement(M,B,x,o),U=D}}getMaxOverflow(){let t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,o=t.data||[];if(!o.length)return i;let s=o[0].size(this.resolveDataElementOptions(0)),a=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(i,s,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),dU=(()=>{class n extends ga{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:o}}=t.legend.options;return r.labels.map((s,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:o,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,o=i.data.labels||[],s=Wu(r._parsed[t].r,i.options.locale);return{label:o[t]||"",value:s}}parseObjectData(t,r,i,o){return lS.bind(this)(t,r,i,o)}update(t){let r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){let t=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,o)=>{let s=this.getParsed(o).r;!isNaN(s)&&this.chart.getDataVisibility(o)&&(s<r.min&&(r.min=s),s>r.max&&(r.max=s))}),r}_updateRadius(){let t=this.chart,r=t.chartArea,i=t.options,o=Math.min(r.right-r.left,r.bottom-r.top),s=Math.max(o/2,0),a=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),c=(s-a)/t.getVisibleDatasetCount();this.outerRadius=s-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,r,i,o){let s=o==="reset",a=this.chart,l=a.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,f=u.yCenter,p=u.getIndexAngle(0)-.5*Ve,_=p,w,b=360/this.countVisibleElements();for(w=0;w<r;++w)_+=this._computeAngle(w,o,b);for(w=r;w<r+i;w++){let T=t[w],k=_,V=_+this._computeAngle(w,o,b),j=a.getDataVisibility(w)?u.getDistanceFromCenterForValue(this.getParsed(w).r):0;_=V,s&&(l.animateScale&&(j=0),l.animateRotate&&(k=V=p));let U={x:h,y:f,innerRadius:0,outerRadius:j,startAngle:k,endAngle:V,options:this.resolveDataElementOptions(w,T.active?"active":o)};this.updateElement(T,w,U,o)}}countVisibleElements(){let t=this._cachedMeta,r=0;return t.data.forEach((i,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?zr(this.resolveDataElementOptions(t,r).angle||i):0}}return n})(),Bee=(()=>{class n extends YS{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),$ee=(()=>{class n extends ga{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,o){return lS.bind(this)(t,r,i,o)}update(t){let r=this._cachedMeta,i=r.dataset,o=r.data||[],s=r.iScale.getLabels();if(i.points=o,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:s.length===o.length,options:a};this.updateElement(i,void 0,c,t)}this.updateElements(o,0,o.length,t)}updateElements(t,r,i,o){let s=this._cachedMeta.rScale,a=o==="reset";for(let c=r;c<r+i;c++){let l=t[c],u=this.resolveDataElementOptions(c,l.active?"active":o),h=s.getPointPositionForValue(c,this.getParsed(c).r),f=a?s.xCenter:h.x,p=a?s.yCenter:h.y,_={x:f,y:p,angle:h.angle,skip:isNaN(f)||isNaN(p),options:u};this.updateElement(l,c,_,o)}}}return n})(),Hee=(()=>{class n extends ga{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=r,a=this.getParsed(t),c=o.getLabelForValue(a.x),l=s.getLabelForValue(a.y);return{label:i[t]||"",value:"("+c+", "+l+")"}}update(t){let r=this._cachedMeta,{data:i=[]}=r,o=this.chart._animationsDisabled,{start:s,count:a}=ZT(r,i,o);if(this._drawStart=s,this._drawCount=a,eS(r)&&(s=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=r;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=i;let u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(c,void 0,{animated:!o,options:u},t)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,s,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(r,o),f=this.getSharedOptions(h),p=this.includeOptions(o,f),_=a.axis,w=c.axis,{spanGaps:b,segment:T}=this.options,k=Pc(b)?b:Number.POSITIVE_INFINITY,V=this.chart._animationsDisabled||s||o==="none",j=r>0&&this.getParsed(r-1);for(let U=r;U<r+i;++U){let B=t[U],M=this.getParsed(U),x=V?B:{},D=Me(M[w]),P=x[_]=a.getPixelForValue(M[_],U),R=x[w]=s||D?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,M,l):M[w],U);x.skip=isNaN(P)||isNaN(R)||D,x.stop=U>0&&Math.abs(M[_]-j[_])>k,T&&(x.parsed=M,x.raw=u.data[U]),p&&(x.options=f||this.resolveDataElementOptions(U,B.active?"active":o)),V||this.updateElement(B,U,x,o),j=M}this.updateSharedOptions(f,o,h)}getMaxOverflow(){let t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let c=0;for(let l=r.length-1;l>=0;--l)c=Math.max(c,r[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let i=t.dataset,o=i.options&&i.options.borderWidth||0;if(!r.length)return o;let s=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(o,s,a)/2}}return n})(),zee=Object.freeze({__proto__:null,BarController:Lee,BubbleController:Vee,DoughnutController:YS,LineController:Uee,PieController:Bee,PolarAreaController:dU,RadarController:$ee,ScatterController:Hee});function kc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var AS=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return kc()}parse(){return kc()}format(){return kc()}add(){return kc()}diff(){return kc()}startOf(){return kc()}endOf(){return kc()}},Wee={_date:AS};function qee(n,e,t,r){let{controller:i,data:o,_sorted:s}=n,a=i._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&s&&o.length){let l=a._reversePixels?Bj:Ki;if(r){if(i._sharedOptions){let u=o[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){let f=l(o,e,t-h),p=l(o,e,t+h);return{lo:f.lo,hi:p.hi}}}}else{let u=l(o,e,t);if(c){let{vScale:h}=i._cachedMeta,{_parsed:f}=n,p=f.slice(0,u.lo+1).reverse().findIndex(w=>!Me(w[h.axis]));u.lo-=Math.max(0,p);let _=f.slice(u.hi).findIndex(w=>!Me(w[h.axis]));u.hi+=Math.max(0,_)}return u}}return{lo:0,hi:o.length-1}}function ep(n,e,t,r,i){let o=n.getSortedVisibleDatasetMetas(),s=t[e];for(let a=0,c=o.length;a<c;++a){let{index:l,data:u}=o[a],{lo:h,hi:f}=qee(o[a],e,s,i);for(let p=h;p<=f;++p){let _=u[p];_.skip||r(_,l,p)}}}function Gee(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){let o=e?Math.abs(r.x-i.x):0,s=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function wS(n,e,t,r,i){let o=[];return!i&&!n.isPointInArea(e)||ep(n,t,e,function(a,c,l){!i&&!Yi(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&o.push({element:a,datasetIndex:c,index:l})},!0),o}function Kee(n,e,t,r){let i=[];function o(s,a,c){let{startAngle:l,endAngle:u}=s.getProps(["startAngle","endAngle"],r),{angle:h}=KT(s,{x:e.x,y:e.y});zu(h,l,u)&&i.push({element:s,datasetIndex:a,index:c})}return ep(n,t,e,o),i}function Yee(n,e,t,r,i,o){let s=[],a=Gee(t),c=Number.POSITIVE_INFINITY;function l(u,h,f){let p=u.inRange(e.x,e.y,i);if(r&&!p)return;let _=u.getCenterPoint(i);if(!(!!o||n.isPointInArea(_))&&!p)return;let b=a(e,_);b<c?(s=[{element:u,datasetIndex:h,index:f}],c=b):b===c&&s.push({element:u,datasetIndex:h,index:f})}return ep(n,t,e,l),s}function ES(n,e,t,r,i,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!r?Kee(n,e,t,i):Yee(n,e,t,r,i,o)}function v3(n,e,t,r,i){let o=[],s=t==="x"?"inXRange":"inYRange",a=!1;return ep(n,t,e,(c,l,u)=>{c[s]&&c[s](e[t],i)&&(o.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,i))}),r&&!a?[]:o}var Qee={evaluateInteractionItems:ep,modes:{index(n,e,t,r){let i=fa(e,n),o=t.axis||"x",s=t.includeInvisible||!1,a=t.intersect?wS(n,i,o,r,s):ES(n,i,o,!1,r,s),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,h=l.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,r){let i=fa(e,n),o=t.axis||"xy",s=t.includeInvisible||!1,a=t.intersect?wS(n,i,o,r,s):ES(n,i,o,!1,r,s);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,e,t,r){let i=fa(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;return wS(n,i,o,r,s)},nearest(n,e,t,r){let i=fa(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;return ES(n,i,o,t.intersect,r,s)},x(n,e,t,r){let i=fa(e,n);return v3(n,i,"x",t.intersect,r)},y(n,e,t,r){let i=fa(e,n);return v3(n,i,"y",t.intersect,r)}}},hU=["left","top","right","bottom"];function Wf(n,e){return n.filter(t=>t.pos===e)}function _3(n,e){return n.filter(t=>hU.indexOf(t.pos)===-1&&t.box.axis===e)}function qf(n,e){return n.sort((t,r)=>{let i=e?r:t,o=e?t:r;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function Xee(n){let e=[],t,r,i,o,s,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:o,options:{stack:s,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return e}function Jee(n){let e={};for(let t of n){let{stack:r,pos:i,stackWeight:o}=t;if(!r||!hU.includes(i))continue;let s=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return e}function Zee(n,e){let t=Jee(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e,o,s,a;for(o=0,s=n.length;o<s;++o){a=n[o];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*r:c&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:c&&e.availableHeight)}return t}function ete(n){let e=Xee(n),t=qf(e.filter(l=>l.box.fullSize),!0),r=qf(Wf(e,"left"),!0),i=qf(Wf(e,"right")),o=qf(Wf(e,"top"),!0),s=qf(Wf(e,"bottom")),a=_3(e,"x"),c=_3(e,"y");return{fullSize:t,leftAndTop:r.concat(o),rightAndBottom:i.concat(c).concat(s).concat(a),chartArea:Wf(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:o.concat(s).concat(a)}}function b3(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function fU(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function tte(n,e,t,r){let{pos:i,box:o}=t,s=n.maxPadding;if(!Pe(i)){t.size&&(n[i]-=t.size);let h=r[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?o.height:o.width),t.size=h.size/h.count,n[i]+=t.size}o.getPadding&&fU(s,o.getPadding());let a=Math.max(0,e.outerWidth-b3(s,n,"left","right")),c=Math.max(0,e.outerHeight-b3(s,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function nte(n){let e=n.maxPadding;function t(r){let i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function rte(n,e){let t=e.maxPadding;function r(i){let o={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{o[s]=Math.max(e[s],t[s])}),o}return r(n?["left","right"]:["top","bottom"])}function Yf(n,e,t,r){let i=[],o,s,a,c,l,u;for(o=0,s=n.length,l=0;o<s;++o){a=n[o],c=a.box,c.update(a.width||e.w,a.height||e.h,rte(a.horizontal,e));let{same:h,other:f}=tte(e,t,a,r);l|=h&&i.length,u=u||f,c.fullSize||i.push(a)}return l&&Yf(i,e,t,r)||u}function z_(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function w3(n,e,t,r){let i=t.padding,{x:o,y:s}=e;for(let a of n){let c=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let h=e.w*u,f=l.size||c.height;$u(l.start)&&(s=l.start),c.fullSize?z_(c,i.left,s,t.outerWidth-i.right-i.left,f):z_(c,e.left+l.placed,s,h,f),l.start=s,l.placed+=h,s=c.bottom}else{let h=e.h*u,f=l.size||c.width;$u(l.start)&&(o=l.start),c.fullSize?z_(c,o,i.top,f,t.outerHeight-i.bottom-i.top):z_(c,o,e.top+l.placed,f,h),l.start=o,l.placed+=h,o=c.right}}e.x=o,e.y=s}var On={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;let i=En(n.options.layout.padding),o=Math.max(e-i.width,0),s=Math.max(t-i.height,0),a=ete(n.boxes),c=a.vertical,l=a.horizontal;Ke(n.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});let u=c.reduce((w,b)=>b.box.options&&b.box.options.display===!1?w:w+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),f=Object.assign({},i);fU(f,En(r));let p=Object.assign({maxPadding:f,w:o,h:s,x:i.left,y:i.top},i),_=Zee(c.concat(l),h);Yf(a.fullSize,p,h,_),Yf(c,p,h,_),Yf(l,p,h,_)&&Yf(c,p,h,_),nte(p),w3(a.leftAndTop,p,h,_),p.x+=p.w,p.y+=p.h,w3(a.rightAndBottom,p,h,_),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ke(a.chartArea,w=>{let b=w.box;Object.assign(b,n.chartArea),b.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},Z_=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}},PS=class extends Z_{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},Q_="$chartjs",ite={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},E3=n=>n===null||n==="";function ote(n,e){let t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[Q_]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",E3(i)){let o=dS(n,"width");o!==void 0&&(n.width=o)}if(E3(r))if(n.style.height==="")n.height=n.width/(e||2);else{let o=dS(n,"height");o!==void 0&&(n.height=o)}return n}var pU=i3?{passive:!0}:!1;function ste(n,e,t){n&&n.addEventListener(e,t,pU)}function ate(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,pU)}function cte(n,e){let t=ite[n.type]||n.type,{x:r,y:i}=fa(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function e0(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function lte(n,e,t){let r=n.canvas,i=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||e0(a.addedNodes,r),s=s&&!e0(a.removedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function ute(n,e,t){let r=n.canvas,i=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||e0(a.removedNodes,r),s=s&&!e0(a.addedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}var Xf=new Map,C3=0;function gU(){let n=window.devicePixelRatio;n!==C3&&(C3=n,Xf.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function dte(n,e){Xf.size||window.addEventListener("resize",gU),Xf.set(n,e)}function hte(n){Xf.delete(n),Xf.size||window.removeEventListener("resize",gU)}function fte(n,e,t){let r=n.canvas,i=r&&$_(r);if(!i)return;let o=JT((a,c)=>{let l=i.clientWidth;t(a,c),l<i.clientWidth&&t()},window),s=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||o(l,u)});return s.observe(i),dte(n,o),s}function CS(n,e,t){t&&t.disconnect(),e==="resize"&&hte(n)}function pte(n,e,t){let r=n.canvas,i=JT(o=>{n.ctx!==null&&t(cte(o,n))},n);return ste(r,e,i),i}var RS=class extends Z_{acquireContext(e,t){let r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(ote(e,t),r):null}releaseContext(e){let t=e.canvas;if(!t[Q_])return!1;let r=t[Q_].initial;["height","width"].forEach(o=>{let s=r[o];Me(s)?t.removeAttribute(o):t.setAttribute(o,s)});let i=r.style||{};return Object.keys(i).forEach(o=>{t.style[o]=i[o]}),t.width=t.width,delete t[Q_],!0}addEventListener(e,t,r){this.removeEventListener(e,t);let i=e.$proxies||(e.$proxies={}),s={attach:lte,detach:ute,resize:fte}[t]||pte;i[t]=s(e,t,r)}removeEventListener(e,t){let r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:CS,detach:CS,resize:CS}[t]||ate)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return r3(e,t,r,i)}isAttached(e){let t=e&&$_(e);return!!(t&&t.isConnected)}};function gte(n){return!B_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?PS:RS}var gi=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Pc(this.x)&&Pc(this.y)}getProps(e,t){let r=this.$animations;if(!t||!r)return this;let i={};return e.forEach(o=>{i[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),i}};function mte(n,e){let t=n.options.ticks,r=yte(n),i=Math.min(t.maxTicksLimit||r,r),o=t.major.enabled?_te(e):[],s=o.length,a=o[0],c=o[s-1],l=[];if(s>i)return bte(e,l,o,s/i),l;let u=vte(o,e,i);if(s>0){let h,f,p=s>1?Math.round((c-a)/(s-1)):null;for(W_(e,l,u,Me(p)?0:a-p,a),h=0,f=s-1;h<f;h++)W_(e,l,u,o[h],o[h+1]);return W_(e,l,u,c,Me(p)?e.length:c+p),l}return W_(e,l,u),l}function yte(n){let e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function vte(n,e,t){let r=wte(n),i=e.length/t;if(!r)return Math.max(i,1);let o=Vj(r);for(let s=0,a=o.length-1;s<a;s++){let c=o[s];if(c>i)return c}return Math.max(i,1)}function _te(n){let e=[],t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function bte(n,e,t,r){let i=0,o=t[0],s;for(r=Math.ceil(r),s=0;s<n.length;s++)s===o&&(e.push(n[s]),i++,o=t[i*r])}function W_(n,e,t,r,i){let o=ve(r,0),s=Math.min(ve(i,n.length),n.length),a=0,c,l,u;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),u=o;u<0;)a++,u=Math.round(o+a*t);for(l=Math.max(o,0);l<s;l++)l===u&&(e.push(n[l]),a++,u=Math.round(o+a*t))}function wte(n){let e=n.length,t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}var Ete=n=>n==="left"?"right":n==="right"?"left":n,I3=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,x3=(n,e)=>Math.min(e||n,n);function D3(n,e){let t=[],r=n.length/e,i=n.length,o=0;for(;o<i;o+=r)t.push(n[Math.floor(o)]);return t}function Cte(n,e,t){let r=n.ticks.length,i=Math.min(e,r-1),o=n._startPixel,s=n._endPixel,a=1e-6,c=n.getPixelForTick(i),l;if(!(t&&(r===1?l=Math.max(c-o,s-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<o-a||c>s+a)))return c}function Ite(n,e){Ke(n,t=>{let r=t.gc,i=r.length/2,o;if(i>e){for(o=0;o<i;++o)delete t.data[r[o]];r.splice(0,i)}})}function Gf(n){return n.drawTicks?n.tickLength:0}function T3(n,e){if(!n.display)return 0;let t=Qt(n.font,e),r=En(n.padding);return(ct(n.text)?n.text.length:1)*t.lineHeight+r.height}function xte(n,e){return Ko(n,{scale:e,type:"scale"})}function Dte(n,e,t){return Ko(n,{tick:t,index:e,type:"tick"})}function Tte(n,e,t){let r=F_(n);return(t&&e!=="right"||!t&&e==="right")&&(r=Ete(r)),r}function Ste(n,e,t,r){let{top:i,left:o,bottom:s,right:a,chart:c}=n,{chartArea:l,scales:u}=c,h=0,f,p,_,w=s-i,b=a-o;if(n.isHorizontal()){if(p=wn(r,o,a),Pe(t)){let T=Object.keys(t)[0],k=t[T];_=u[T].getPixelForValue(k)+w-e}else t==="center"?_=(l.bottom+l.top)/2+w-e:_=I3(n,t,e);f=a-o}else{if(Pe(t)){let T=Object.keys(t)[0],k=t[T];p=u[T].getPixelForValue(k)-b+e}else t==="center"?p=(l.left+l.right)/2-b+e:p=I3(n,t,e);_=wn(r,s,i),h=t==="left"?-Ft:Ft}return{titleX:p,titleY:_,maxWidth:f,rotation:h}}var Nc=class n extends gi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=ur(e,Number.POSITIVE_INFINITY),t=ur(t,Number.NEGATIVE_INFINITY),r=ur(r,Number.POSITIVE_INFINITY),i=ur(i,Number.NEGATIVE_INFINITY),{min:ur(e,r),max:ur(t,i),minDefined:Et(e),maxDefined:Et(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:o}=this.getUserBounds(),s;if(i&&o)return{min:t,max:r};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)s=a[c].controller.getMinMax(this,e),i||(t=Math.min(t,s.min)),o||(r=Math.max(r,s.max));return t=o&&t>r?r:t,r=i&&t>r?t:r,{min:ur(t,ur(r,t)),max:ur(r,ur(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ot(this.options.beforeUpdate,[this])}update(e,t,r){let{beginAtZero:i,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Xj(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?D3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=mte(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ot(this.options.afterUpdate,[this])}beforeSetDimensions(){ot(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ot(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ot(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ot(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r],o.label=ot(t.callback,[o.value,r,e],this)}afterTickToLabelConversion(){ot(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ot(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,r=x3(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,o=t.maxRotation,s=i,a,c,l;if(!this._isVisible()||!t.display||i>=o||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=sn(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),h+6>a&&(a=p/(r-(e.offset?.5:1)),c=this.maxHeight-Gf(e.grid)-t.padding-T3(e.title,this.chart.options.font),l=Math.sqrt(h*h+f*f),s=O_(Math.min(Math.asin(sn((u.highest.height+6)/a,-1,1)),Math.asin(sn(c/l,-1,1))-Math.asin(sn(f/l,-1,1)))),s=Math.max(i,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){ot(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ot(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){let c=T3(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=Gf(o)+c):(e.height=this.maxHeight,e.width=Gf(o)+c),r.display&&this.ticks.length){let{first:l,last:u,widest:h,highest:f}=this._getLabelSizes(),p=r.padding*2,_=zr(this.labelRotation),w=Math.cos(_),b=Math.sin(_);if(a){let T=r.mirror?0:b*h.width+w*f.height;e.height=Math.min(this.maxHeight,e.height+T+p)}else{let T=r.mirror?0:w*h.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+T+p)}this._calculatePadding(l,u,b,w)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){let{ticks:{align:o,padding:s},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),f=0,p=0;c?l?(f=i*e.width,p=r*t.height):(f=r*e.height,p=i*t.width):o==="start"?p=t.width:o==="end"?f=e.width:o!=="inner"&&(f=e.width/2,p=t.width/2),this.paddingLeft=Math.max((f-u+s)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+s)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;o==="start"?(u=0,h=e.height):o==="end"&&(u=t.height,h=0),this.paddingTop=u+s,this.paddingBottom=h+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ot(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Me(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,r=this.ticks;t<r.length&&(r=D3(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){let{ctx:i,_longestTextCache:o}=this,s=[],a=[],c=Math.floor(t/x3(t,r)),l=0,u=0,h,f,p,_,w,b,T,k,V,j,U;for(h=0;h<t;h+=c){if(_=e[h].label,w=this._resolveTickFontOptions(h),i.font=b=w.string,T=o[b]=o[b]||{data:{},gc:[]},k=w.lineHeight,V=j=0,!Me(_)&&!ct(_))V=jf(i,T.data,T.gc,V,_),j=k;else if(ct(_))for(f=0,p=_.length;f<p;++f)U=_[f],!Me(U)&&!ct(U)&&(V=jf(i,T.data,T.gc,V,U),j+=k);s.push(V),a.push(j),l=Math.max(V,l),u=Math.max(j,u)}Ite(o,t);let B=s.indexOf(l),M=a.indexOf(u),x=D=>({width:s[D]||0,height:a[D]||0});return{first:x(0),last:x(t-1),widest:x(B),highest:x(M),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return Uj(this._alignToPixels?ua(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let r=t[e];return r.$context||(r.$context=Dte(this.getContext(),e,r))}return this.$context||(this.$context=xte(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=zr(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),o=this._getLabelSizes(),s=e.autoSkipPadding||0,a=o?o.widest.width+s:0,c=o?o.highest.height+s:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,r=this.chart,i=this.options,{grid:o,position:s,border:a}=i,c=o.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Gf(o),p=[],_=a.setContext(this.getContext()),w=_.display?_.width:0,b=w/2,T=function(st){return ua(r,st,w)},k,V,j,U,B,M,x,D,P,R,O,A;if(s==="top")k=T(this.bottom),M=this.bottom-f,D=k-b,R=T(e.top)+b,A=e.bottom;else if(s==="bottom")k=T(this.top),R=e.top,A=T(e.bottom)-b,M=k+b,D=this.top+f;else if(s==="left")k=T(this.right),B=this.right-f,x=k-b,P=T(e.left)+b,O=e.right;else if(s==="right")k=T(this.left),P=e.left,O=T(e.right)-b,B=k+b,x=this.left+f;else if(t==="x"){if(s==="center")k=T((e.top+e.bottom)/2+.5);else if(Pe(s)){let st=Object.keys(s)[0],tt=s[st];k=T(this.chart.scales[st].getPixelForValue(tt))}R=e.top,A=e.bottom,M=k+b,D=M+f}else if(t==="y"){if(s==="center")k=T((e.left+e.right)/2);else if(Pe(s)){let st=Object.keys(s)[0],tt=s[st];k=T(this.chart.scales[st].getPixelForValue(tt))}B=k-b,x=B-f,P=e.left,O=e.right}let _t=ve(i.ticks.maxTicksLimit,h),Ne=Math.max(1,Math.ceil(h/_t));for(V=0;V<h;V+=Ne){let st=this.getContext(V),tt=o.setContext(st),yn=a.setContext(st),jt=tt.lineWidth,no=tt.color,Fc=yn.dash||[],Nn=yn.dashOffset,Ct=tt.tickWidth,ro=tt.tickColor,Wr=tt.tickBorderDash||[],io=tt.tickBorderDashOffset;j=Cte(this,V,c),j!==void 0&&(U=ua(r,j,jt),l?B=x=P=O=U:M=D=R=A=U,p.push({tx1:B,ty1:M,tx2:x,ty2:D,x1:P,y1:R,x2:O,y2:A,width:jt,color:no,borderDash:Fc,borderDashOffset:Nn,tickWidth:Ct,tickColor:ro,tickBorderDash:Wr,tickBorderDashOffset:io}))}return this._ticksLength=h,this._borderValue=k,p}_computeLabelItems(e){let t=this.axis,r=this.options,{position:i,ticks:o}=r,s=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:h}=o,f=Gf(r.grid),p=f+u,_=h?-u:p,w=-zr(this.labelRotation),b=[],T,k,V,j,U,B,M,x,D,P,R,O,A="middle";if(i==="top")B=this.bottom-_,M=this._getXAxisLabelAlignment();else if(i==="bottom")B=this.top+_,M=this._getXAxisLabelAlignment();else if(i==="left"){let Ne=this._getYAxisLabelAlignment(f);M=Ne.textAlign,U=Ne.x}else if(i==="right"){let Ne=this._getYAxisLabelAlignment(f);M=Ne.textAlign,U=Ne.x}else if(t==="x"){if(i==="center")B=(e.top+e.bottom)/2+p;else if(Pe(i)){let Ne=Object.keys(i)[0],st=i[Ne];B=this.chart.scales[Ne].getPixelForValue(st)+p}M=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")U=(e.left+e.right)/2-p;else if(Pe(i)){let Ne=Object.keys(i)[0],st=i[Ne];U=this.chart.scales[Ne].getPixelForValue(st)}M=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(c==="start"?A="top":c==="end"&&(A="bottom"));let _t=this._getLabelSizes();for(T=0,k=a.length;T<k;++T){V=a[T],j=V.label;let Ne=o.setContext(this.getContext(T));x=this.getPixelForTick(T)+o.labelOffset,D=this._resolveTickFontOptions(T),P=D.lineHeight,R=ct(j)?j.length:1;let st=R/2,tt=Ne.color,yn=Ne.textStrokeColor,jt=Ne.textStrokeWidth,no=M;s?(U=x,M==="inner"&&(T===k-1?no=this.options.reverse?"left":"right":T===0?no=this.options.reverse?"right":"left":no="center"),i==="top"?l==="near"||w!==0?O=-R*P+P/2:l==="center"?O=-_t.highest.height/2-st*P+P:O=-_t.highest.height+P/2:l==="near"||w!==0?O=P/2:l==="center"?O=_t.highest.height/2-st*P:O=_t.highest.height-R*P,h&&(O*=-1),w!==0&&!Ne.showLabelBackdrop&&(U+=P/2*Math.sin(w))):(B=x,O=(1-R)*P/2);let Fc;if(Ne.showLabelBackdrop){let Nn=En(Ne.backdropPadding),Ct=_t.heights[T],ro=_t.widths[T],Wr=O-Nn.top,io=0-Nn.left;switch(A){case"middle":Wr-=Ct/2;break;case"bottom":Wr-=Ct;break}switch(M){case"center":io-=ro/2;break;case"right":io-=ro;break;case"inner":T===k-1?io-=ro:T>0&&(io-=ro/2);break}Fc={left:io,top:Wr,width:ro+Nn.width,height:Ct+Nn.height,color:Ne.backdropColor}}b.push({label:j,font:D,textOffset:O,options:{rotation:w,color:tt,strokeColor:yn,strokeWidth:jt,textAlign:no,textBaseline:A,translation:[U,B],backdrop:Fc}})}return b}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-zr(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:r,mirror:i,padding:o}}=this.options,s=this._getLabelSizes(),a=e+o,c=s.widest.width,l,u;return t==="left"?i?(u=this.right+o,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?i?(u=this.left+o,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:r,top:i,width:o,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,o,s),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(o=>o.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o,s,a=(c,l,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(l.x,l.y),r.stroke(),r.restore())};if(t.display)for(o=0,s=i.length;o<s;++o){let c=i[o];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:r,grid:i}}=this,o=r.setContext(this.getContext()),s=r.display?o.width:0;if(!s)return;let a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,h,f;this.isHorizontal()?(l=ua(e,this.left,s)-s/2,u=ua(e,this.right,a)+a/2,h=f=c):(h=ua(e,this.top,s)-s/2,f=ua(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(l,h),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&$f(r,i);let o=this.getLabelItems(e);for(let s of o){let a=s.options,c=s.font,l=s.label,u=s.textOffset;da(r,l,0,u,c,a)}i&&Hf(r)}drawTitle(){let{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;let o=Qt(r.font),s=En(r.padding),a=r.align,c=o.lineHeight/2;t==="bottom"||t==="center"||Pe(t)?(c+=s.bottom,ct(r.text)&&(c+=o.lineHeight*(r.text.length-1))):c+=s.top;let{titleX:l,titleY:u,maxWidth:h,rotation:f}=Ste(this,c,t,a);da(e,r.text,0,0,o,{color:r.color,maxWidth:h,rotation:f,textAlign:Tte(a,t,i),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,r=ve(e.grid&&e.grid.z,-1),i=ve(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],o,s;for(o=0,s=t.length;o<s;++o){let a=t[o];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return Qt(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Yu=class{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),r;Pte(t)&&(r=this.register(t));let i=this.items,o=e.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,Mte(e,s,r),this.override&&ht.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){let t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in ht[i]&&(delete ht[i][r],this.override&&delete la[r])}};function Mte(n,e,t){let r=ju(Object.create(null),[t?ht.get(t):{},ht.get(e),n.defaults]);ht.set(e,r),n.defaultRoutes&&Ate(e,n.defaultRoutes),n.descriptors&&ht.describe(e,n.descriptors)}function Ate(n,e){Object.keys(e).forEach(t=>{let r=t.split("."),i=r.pop(),o=[n].concat(r).join("."),s=e[t].split("."),a=s.pop(),c=s.join(".");ht.route(o,i,c,a)})}function Pte(n){return"id"in n&&"defaults"in n}var kS=class{constructor(){this.controllers=new Yu(ga,"datasets",!0),this.elements=new Yu(gi,"elements"),this.plugins=new Yu(Object,"plugins"),this.scales=new Yu(Nc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{let o=r||this._getRegistryForType(i);r||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):Ke(i,s=>{let a=r||this._getRegistryForType(s);this._exec(e,a,s)})})}_exec(e,t,r){let i=k_(e);ot(r["before"+i],[],r),t[e](r),ot(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){let i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}},Zi=new kS,OS=class{constructor(){this._init=void 0}notify(e,t,r,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;let o=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(o,e,t,r);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),s}_notify(e,t,r,i){i=i||{};for(let o of e){let s=o.plugin,a=s[r],c=[t,i,o.options];if(ot(a,c,s)===!1&&i.cancelable)return!1}return!0}invalidate(){Me(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let r=e&&e.config,i=ve(r.options&&r.options.plugins,{}),o=Rte(r);return i===!1&&!t?[]:Ote(e,o,i,t)}_notifyStateChanges(e){let t=this._oldCache||[],r=this._cache,i=(o,s)=>o.filter(a=>!s.some(c=>a.plugin.id===c.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}};function Rte(n){let e={},t=[],r=Object.keys(Zi.plugins.items);for(let o=0;o<r.length;o++)t.push(Zi.getPlugin(r[o]));let i=n.plugins||[];for(let o=0;o<i.length;o++){let s=i[o];t.indexOf(s)===-1&&(t.push(s),e[s.id]=!0)}return{plugins:t,localIds:e}}function kte(n,e){return!e&&n===!1?null:n===!0?{}:n}function Ote(n,{plugins:e,localIds:t},r,i){let o=[],s=n.getContext();for(let a of e){let c=a.id,l=kte(r[c],i);l!==null&&o.push({plugin:a,options:Nte(n.config,{plugin:a,local:t[c]},l,s)})}return o}function Nte(n,{plugin:e,local:t},r,i){let o=n.pluginScopeKeys(e),s=n.getOptionScopes(r,o);return t&&e.defaults&&s.push(e.defaults),n.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function NS(n,e){let t=ht.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function Fte(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function Lte(n,e){return n===e?"_index_":"_value_"}function S3(n){if(n==="x"||n==="y"||n==="r")return n}function Vte(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function FS(n,...e){if(S3(n))return n;for(let t of e){let r=t.axis||Vte(t.position)||n.length>1&&S3(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function M3(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function jte(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return M3(n,"x",t[0])||M3(n,"y",t[0])}return{}}function Ute(n,e){let t=la[n.type]||{scales:{}},r=e.scales||{},i=NS(n.type,e),o=Object.create(null);return Object.keys(r).forEach(s=>{let a=r[s];if(!Pe(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);let c=FS(s,a,jte(s,n),ht.scales[a.type]),l=Lte(c,i),u=t.scales||{};o[s]=Bu(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(s=>{let a=s.type||n.type,c=s.indexAxis||NS(a,e),u=(la[a]||{}).scales||{};Object.keys(u).forEach(h=>{let f=Fte(h,c),p=s[f+"AxisID"]||f;o[p]=o[p]||Object.create(null),Bu(o[p],[{axis:f},r[p],u[h]])})}),Object.keys(o).forEach(s=>{let a=o[s];Bu(a,[ht.scales[a.type],ht.scale])}),o}function mU(n){let e=n.options||(n.options={});e.plugins=ve(e.plugins,{}),e.scales=Ute(n,e)}function yU(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Bte(n){return n=n||{},n.data=yU(n.data),mU(n),n}var A3=new Map,vU=new Set;function q_(n,e){let t=A3.get(n);return t||(t=e(),A3.set(n,t),vU.add(t)),t}var Kf=(n,e,t)=>{let r=Go(e,t);r!==void 0&&n.add(r)},LS=class{constructor(e){this._config=Bte(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=yU(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),mU(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return q_(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return q_(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return q_(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,r=this.type;return q_(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let r=this._scopeCache,i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){let{options:i,type:o}=this,s=this._cachedScopes(e,r),a=s.get(t);if(a)return a;let c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(h=>Kf(c,e,h))),u.forEach(h=>Kf(c,i,h)),u.forEach(h=>Kf(c,la[o]||{},h)),u.forEach(h=>Kf(c,ht,h)),u.forEach(h=>Kf(c,L_,h))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),vU.has(t)&&s.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,la[t]||{},ht.datasets[t]||{},{type:t},ht,L_]}resolveNamedOptions(e,t,r,i=[""]){let o={$shared:!0},{resolver:s,subPrefixes:a}=P3(this._resolverCache,e,i),c=s;if(Hte(s,t)){o.$shared=!1,r=Wo(r)?r():r;let l=this.createResolver(e,r,a);c=Ac(s,r,l)}for(let l of t)o[l]=c[l];return o}createResolver(e,t,r=[""],i){let{resolver:o}=P3(this._resolverCache,e,r);return Pe(t)?Ac(o,t,void 0,i):o}};function P3(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));let i=t.join(),o=r.get(i);return o||(o={resolver:U_(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,o)),o}var $te=n=>Pe(n)&&Object.getOwnPropertyNames(n).some(e=>Wo(n[e]));function Hte(n,e){let{isScriptable:t,isIndexable:r}=sS(n);for(let i of e){let o=t(i),s=r(i),a=(s||o)&&n[i];if(o&&(Wo(a)||$te(a))||s&&ct(a))return!0}return!1}var zte="4.5.1",Wte=["top","bottom","left","right","chartArea"];function R3(n,e){return n==="top"||n==="bottom"||Wte.indexOf(n)===-1&&e==="x"}function k3(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function O3(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ot(t&&t.onComplete,[n],e)}function qte(n){let e=n.chart,t=e.options.animation;ot(t&&t.onProgress,[n],e)}function _U(n){return B_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var X_={},N3=n=>{let e=_U(n);return Object.values(X_).filter(t=>t.canvas===e).pop()};function Gte(n,e,t){let r=Object.keys(n);for(let i of r){let o=+i;if(o>=e){let s=n[i];delete n[i],(t>0||o>e)&&(n[o+t]=s)}}}function Kte(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}var eo=(()=>{class n{static defaults=ht;static instances=X_;static overrides=la;static registry=Zi;static version=zte;static getChart=N3;static register(...t){Zi.add(...t),F3()}static unregister(...t){Zi.remove(...t),F3()}constructor(t,r){let i=this.config=new LS(r),o=_U(t),s=N3(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||gte(o)),this.platform.updateConfig(i);let c=this.platform.acquireContext(o,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,h=l&&l.width;if(this.id=Oj(),this.ctx=c,this.canvas=l,this.width=h,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new OS,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Wj(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],X_[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Yo.listen(this,"complete",O3),Yo.listen(this,"progress",qte),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:o,_aspectRatio:s}=this;return Me(t)?r&&s?s:o?i/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Zi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():uS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return rS(this.canvas,this.ctx),this}stop(){return Yo.stop(this),this}resize(t,r){Yo.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){let i=this.options,o=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(o,t,r,s),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,uS(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),ot(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};Ke(r,(i,o)=>{i.id=o})}buildOrUpdateScales(){let t=this.options,r=t.scales,i=this.scales,o=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{}),s=[];r&&(s=s.concat(Object.keys(r).map(a=>{let c=r[a],l=FS(a,c),u=l==="r",h=l==="x";return{options:c,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Ke(s,a=>{let c=a.options,l=c.id,u=FS(l,c),h=ve(c.type,a.dtype);(c.position===void 0||R3(c.position,u)!==R3(a.dposition))&&(c.position=a.dposition),o[l]=!0;let f=null;if(l in i&&i[l].type===h)f=i[l];else{let p=Zi.getScale(h);f=new p({id:l,type:h,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(c,t)}),Ke(o,(a,c)=>{a||delete i[c]}),Ke(i,a=>{On.configure(this,a,a.options),On.addBox(this,a)})}_updateMetasets(){let t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((o,s)=>o.index-s.index),i>r){for(let o=r;o<i;++o)this._destroyDatasetMeta(o);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(k3("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,o)=>{r.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){let t=[],r=this.data.datasets,i,o;for(this._removeUnreferencedMetasets(),i=0,o=r.length;i<o;i++){let s=r[i],a=this.getDatasetMeta(i),c=s.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=s.indexAxis||NS(c,this.options),a.order=s.order||0,a.index=i,a.label=""+s.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let l=Zi.getController(c),{datasetElementType:u,dataElementType:h}=ht.datasets[c];Object.assign(l,{dataElementType:Zi.getElement(h),datasetElementType:u&&Zi.getElement(u)}),a.controller=new l(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Ke(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,h=this.data.datasets.length;u<h;u++){let{controller:f}=this.getDatasetMeta(u),p=!o&&s.indexOf(f)===-1;f.buildOrUpdateElements(p),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),o||Ke(s,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(k3("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Ke(this.scales,t=>{On.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!zT(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:o,count:s}of r){let a=i==="_removeElements"?-s:s;Gte(t,o,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=s=>new Set(t.filter(a=>a[0]===s).map((a,c)=>c+","+a.splice(1).join(","))),o=i(0);for(let s=1;s<r;s++)if(!zT(o,i(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;On.update(this,this.width,this.height,t);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],Ke(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,Wo(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){let i=this.getDatasetMeta(t),o={meta:i,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(r),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Yo.has(this)?this.attached&&!Yo.running(this)&&Yo.start(this):(this.draw(),O3({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let r=this._sortedMetasets,i=[],o,s;for(o=0,s=r.length;o<s;++o){let a=r[o];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let r=this.ctx,i={meta:t,index:t.index,cancelable:!0},o=mS(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&$f(r,o),t.controller.draw(),o&&Hf(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Yi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,o){let s=Qee.modes[r];return typeof s=="function"?s(this,t,i,o):[]}getDatasetMeta(t){let r=this.data.datasets[t],i=this._metasets,o=i.filter(s=>s&&s._dataset===r).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=Ko(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let r=this.data.datasets[t];if(!r)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(t,r){let i=this.getDatasetMeta(t);i.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){let o=i?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,o);$u(r)?(s.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(s,{visible:i}),this.update(c=>c.datasetIndex===t?o:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){let r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),Yo.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),rS(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete X_[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,r=this.platform,i=(s,a)=>{r.addEventListener(this,s,a),t[s]=a},o=(s,a,c)=>{s.offsetX=a,s.offsetY=c,this._eventHandler(s)};Ke(this.options.events,s=>i(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,r=this.platform,i=(l,u)=>{r.addEventListener(this,l,u),t[l]=u},o=(l,u)=>{t[l]&&(r.removeEventListener(this,l,u),delete t[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{o("attach",c),this.attached=!0,this.resize(),i("resize",s),i("detach",a)};a=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),i("attach",c)},r.isAttached(this.canvas)?c():a()}unbindEvents(){Ke(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},Ke(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){let o=i?"set":"remove",s,a,c,l;for(r==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[o+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let r=this._active||[],i=t.map(({datasetIndex:s,index:a})=>{let c=this.getDatasetMeta(s);if(!c)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:c.data[a],index:a}});!Uf(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,i){let o=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),a=s(r,t),c=i?t:s(t,r);a.length&&this.updateHoverStyle(a,o.mode,!1),c.length&&o.mode&&this.updateHoverStyle(c,o.mode,!0)}_eventHandler(t,r){let i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},o=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;let s=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(s||i.changed)&&this.render(),this}_handleEvent(t,r,i){let{_active:o=[],options:s}=this,a=r,c=this._getActiveElements(t,o,i,a),l=Lj(t),u=Kte(t,this._lastEvent,i,l);i&&(this._lastEvent=null,ot(s.onHover,[t,c,this],this),l&&ot(s.onClick,[t,c,this],this));let h=!Uf(c,o);return(h||r)&&(this._active=c,this._updateHoverStyles(c,o,r)),this._lastEvent=u,h}_getActiveElements(t,r,i,o){if(t.type==="mouseout")return[];if(!i)return r;let s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,o)}}return n})();function F3(){return Ke(eo.instances,n=>n._plugins.invalidate())}function Yte(n,e,t){let{startAngle:r,x:i,y:o,outerRadius:s,innerRadius:a,options:c}=e,{borderWidth:l,borderJoinStyle:u}=c,h=Math.min(l/s,bn(r-t));if(n.beginPath(),n.arc(i,o,s-l/2,r+h/2,t-h/2),a>0){let f=Math.min(l/a,bn(r-t));n.arc(i,o,a+l/2,t-f/2,r+f/2,!0)}else{let f=Math.min(l/2,s*bn(r-t));if(u==="round")n.arc(i,o,f,t-Ve/2,r+Ve/2,!0);else if(u==="bevel"){let p=2*f*f,_=-p*Math.cos(t+Ve/2)+i,w=-p*Math.sin(t+Ve/2)+o,b=p*Math.cos(r+Ve/2)+i,T=p*Math.sin(r+Ve/2)+o;n.lineTo(_,w),n.lineTo(b,T)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function Qte(n,e,t){let{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:c}=e,l=i/a;n.beginPath(),n.arc(o,s,a,r-l,t+l),c>i?(l=i/c,n.arc(o,s,c,t+l,r-l,!0)):n.arc(o,s,i,t+Ft,r-Ft),n.closePath(),n.clip()}function Xte(n){return j_(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Jte(n,e,t,r){let i=Xte(n.options.borderRadius),o=(t-e)/2,s=Math.min(o,r*e/2),a=c=>{let l=(t-Math.min(o,c))*r/2;return sn(c,0,Math.min(o,l))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:sn(i.innerStart,0,s),innerEnd:sn(i.innerEnd,0,s)}}function Ku(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function t0(n,e,t,r,i,o){let{x:s,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,h=Math.max(e.outerRadius+r+t-l,0),f=u>0?u+r+t+l:0,p=0,_=i-c;if(r){let Ne=u>0?u-r:0,st=h>0?h-r:0,tt=(Ne+st)/2,yn=tt!==0?_*tt/(tt+r):_;p=(_-yn)/2}let w=Math.max(.001,_*h-t/Ve)/h,b=(_-w)/2,T=c+b+p,k=i-b-p,{outerStart:V,outerEnd:j,innerStart:U,innerEnd:B}=Jte(e,f,h,k-T),M=h-V,x=h-j,D=T+V/M,P=k-j/x,R=f+U,O=f+B,A=T+U/R,_t=k-B/O;if(n.beginPath(),o){let Ne=(D+P)/2;if(n.arc(s,a,h,D,Ne),n.arc(s,a,h,Ne,P),j>0){let jt=Ku(x,P,s,a);n.arc(jt.x,jt.y,j,P,k+Ft)}let st=Ku(O,k,s,a);if(n.lineTo(st.x,st.y),B>0){let jt=Ku(O,_t,s,a);n.arc(jt.x,jt.y,B,k+Ft,_t+Math.PI)}let tt=(k-B/f+(T+U/f))/2;if(n.arc(s,a,f,k-B/f,tt,!0),n.arc(s,a,f,tt,T+U/f,!0),U>0){let jt=Ku(R,A,s,a);n.arc(jt.x,jt.y,U,A+Math.PI,T-Ft)}let yn=Ku(M,T,s,a);if(n.lineTo(yn.x,yn.y),V>0){let jt=Ku(M,D,s,a);n.arc(jt.x,jt.y,V,T-Ft,D)}}else{n.moveTo(s,a);let Ne=Math.cos(D)*h+s,st=Math.sin(D)*h+a;n.lineTo(Ne,st);let tt=Math.cos(P)*h+s,yn=Math.sin(P)*h+a;n.lineTo(tt,yn)}n.closePath()}function Zte(n,e,t,r,i){let{fullCircles:o,startAngle:s,circumference:a}=e,c=e.endAngle;if(o){t0(n,e,t,r,c,i);for(let l=0;l<o;++l)n.fill();isNaN(a)||(c=s+(a%lt||lt))}return t0(n,e,t,r,c,i),n.fill(),c}function ene(n,e,t,r,i){let{fullCircles:o,startAngle:s,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:h,borderDashOffset:f,borderRadius:p}=c,_=c.borderAlign==="inner";if(!l)return;n.setLineDash(h||[]),n.lineDashOffset=f,_?(n.lineWidth=l*2,n.lineJoin=u||"round"):(n.lineWidth=l,n.lineJoin=u||"bevel");let w=e.endAngle;if(o){t0(n,e,t,r,w,i);for(let b=0;b<o;++b)n.stroke();isNaN(a)||(w=s+(a%lt||lt))}_&&Qte(n,e,w),c.selfJoin&&w-s>=Ve&&p===0&&u!=="miter"&&Yte(n,e,w),o||(t0(n,e,t,r,w,i),n.stroke())}var VS=class extends gi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){let i=this.getProps(["x","y"],r),{angle:o,distance:s}=KT(i,{x:e,y:t}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,p=ve(h,c-a),_=zu(o,a,c)&&a!==c,w=p>=lt||_,b=Xi(s,l+f,u+f);return w&&b}getCenterPoint(e){let{x:t,y:r,startAngle:i,endAngle:o,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:l}=this.options,u=(i+o)/2,h=(s+a+l+c)/2;return{x:t+Math.cos(u)*h,y:r+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:r}=this,i=(t.offset||0)/4,o=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>lt?Math.floor(r/lt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);let c=1-Math.sin(Math.min(Ve,r||0)),l=i*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,Zte(e,this,l,o,s),ene(e,this,l,o,s),e.restore()}};function bU(n,e,t=e){n.lineCap=ve(t.borderCapStyle,e.borderCapStyle),n.setLineDash(ve(t.borderDash,e.borderDash)),n.lineDashOffset=ve(t.borderDashOffset,e.borderDashOffset),n.lineJoin=ve(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=ve(t.borderWidth,e.borderWidth),n.strokeStyle=ve(t.borderColor,e.borderColor)}function tne(n,e,t){n.lineTo(t.x,t.y)}function nne(n){return n.stepped?Yj:n.tension||n.cubicInterpolationMode==="monotone"?Qj:tne}function wU(n,e,t={}){let r=n.length,{start:i=0,end:o=r-1}=t,{start:s,end:a}=e,c=Math.max(i,s),l=Math.min(o,a),u=i<s&&o<s||i>a&&o>a;return{count:r,start:c,loop:e.loop,ilen:l<c&&!u?r+l-c:l-c}}function rne(n,e,t,r){let{points:i,options:o}=e,{count:s,start:a,loop:c,ilen:l}=wU(i,t,r),u=nne(o),{move:h=!0,reverse:f}=r||{},p,_,w;for(p=0;p<=l;++p)_=i[(a+(f?l-p:p))%s],!_.skip&&(h?(n.moveTo(_.x,_.y),h=!1):u(n,w,_,f,o.stepped),w=_);return c&&(_=i[(a+(f?l:0))%s],u(n,w,_,f,o.stepped)),!!c}function ine(n,e,t,r){let i=e.points,{count:o,start:s,ilen:a}=wU(i,t,r),{move:c=!0,reverse:l}=r||{},u=0,h=0,f,p,_,w,b,T,k=j=>(s+(l?a-j:j))%o,V=()=>{w!==b&&(n.lineTo(u,b),n.lineTo(u,w),n.lineTo(u,T))};for(c&&(p=i[k(0)],n.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[k(f)],p.skip)continue;let j=p.x,U=p.y,B=j|0;B===_?(U<w?w=U:U>b&&(b=U),u=(h*u+j)/++h):(V(),n.lineTo(j,U),_=B,h=0,w=b=U),T=U}V()}function jS(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?ine:rne}function one(n){return n.stepped?o3:n.tension||n.cubicInterpolationMode==="monotone"?s3:aa}function sne(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),bU(n,e.options),n.stroke(i)}function ane(n,e,t,r){let{segments:i,options:o}=e,s=jS(e);for(let a of i)bU(n,o,a.style),n.beginPath(),s(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}var cne=typeof Path2D=="function";function lne(n,e,t,r){cne&&!e.options.segment?sne(n,e,t,r):ane(n,e,t,r)}var i0=(()=>{class n extends gi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let o=i.spanGaps?this._loop:this._fullLoop;n3(this._points,i,t,o,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=c3(this,this.options.segment))}first(){let t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){let t=this.segments,r=this.points,i=t.length;return i&&r[t[i-1].end]}interpolate(t,r){let i=this.options,o=t[r],s=this.points,a=gS(this,{property:r,start:o,end:o});if(!a.length)return;let c=[],l=one(i),u,h;for(u=0,h=a.length;u<h;++u){let{start:f,end:p}=a[u],_=s[f],w=s[p];if(_===w){c.push(_);continue}let b=Math.abs((o-_[r])/(w[r]-_[r])),T=l(_,w,b,i.stepped);T[r]=t[r],c.push(T)}return c.length===1?c[0]:c}pathSegment(t,r,i){return jS(this)(t,this,r,i)}path(t,r,i){let o=this.segments,s=jS(this),a=this._loop;r=r||0,i=i||this.points.length-r;for(let c of o)a&=s(t,this,c,{start:r,end:r+i-1});return!!a}draw(t,r,i,o){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),lne(t,this,i,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function L3(n,e,t,r){let i=n.options,{[t]:o}=n.getProps([t],r);return Math.abs(e-o)<i.radius+i.hitRadius}var une=(()=>{class n extends gi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){let o=this.options,{x:s,y:a}=this.getProps(["x","y"],i);return Math.pow(t-s,2)+Math.pow(r-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,r){return L3(this,t,"x",r)}inYRange(t,r){return L3(this,t,"y",r)}getCenterPoint(t){let{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);let i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){let i=this.options;this.skip||i.radius<.1||!Yi(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,V_(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function EU(n,e){let{x:t,y:r,base:i,width:o,height:s}=n.getProps(["x","y","base","width","height"],e),a,c,l,u,h;return n.horizontal?(h=s/2,a=Math.min(t,i),c=Math.max(t,i),l=r-h,u=r+h):(h=o/2,a=t-h,c=t+h,l=Math.min(r,i),u=Math.max(r,i)),{left:a,top:l,right:c,bottom:u}}function pa(n,e,t,r){return n?0:sn(e,t,r)}function dne(n,e,t){let r=n.options.borderWidth,i=n.borderSkipped,o=oS(r);return{t:pa(i.top,o.top,0,t),r:pa(i.right,o.right,0,e),b:pa(i.bottom,o.bottom,0,t),l:pa(i.left,o.left,0,e)}}function hne(n,e,t){let{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,o=ha(i),s=Math.min(e,t),a=n.borderSkipped,c=r||Pe(i);return{topLeft:pa(!c||a.top||a.left,o.topLeft,0,s),topRight:pa(!c||a.top||a.right,o.topRight,0,s),bottomLeft:pa(!c||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:pa(!c||a.bottom||a.right,o.bottomRight,0,s)}}function fne(n){let e=EU(n),t=e.right-e.left,r=e.bottom-e.top,i=dne(n,t/2,r/2),o=hne(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function IS(n,e,t,r){let i=e===null,o=t===null,a=n&&!(i&&o)&&EU(n,r);return a&&(i||Xi(e,a.left,a.right))&&(o||Xi(t,a.top,a.bottom))}function pne(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function gne(n,e){n.rect(e.x,e.y,e.w,e.h)}function xS(n,e,t={}){let r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-r,s=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+o,h:n.h+s,radius:n.radius}}var US=class extends gi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:o,outer:s}=fne(this),a=pne(s.radius)?qu:gne;e.save(),(s.w!==o.w||s.h!==o.h)&&(e.beginPath(),a(e,xS(s,t,o)),e.clip(),a(e,xS(o,-t,s)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,xS(o,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return IS(this,e,t,r)}inXRange(e,t){return IS(this,e,null,t)}inYRange(e,t){return IS(this,null,e,t)}getCenterPoint(e){let{x:t,y:r,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+i)/2:t,y:o?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},mne=Object.freeze({__proto__:null,ArcElement:VS,BarElement:US,LineElement:i0,PointElement:une}),BS=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],V3=BS.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function CU(n){return BS[n%BS.length]}function IU(n){return V3[n%V3.length]}function yne(n,e){return n.borderColor=CU(e),n.backgroundColor=IU(e),++e}function vne(n,e){return n.backgroundColor=n.data.map(()=>CU(e++)),e}function _ne(n,e){return n.backgroundColor=n.data.map(()=>IU(e++)),e}function bne(n){let e=0;return(t,r)=>{let i=n.getDatasetMeta(r).controller;i instanceof YS?e=vne(t,e):i instanceof dU?e=_ne(t,e):i&&(e=yne(t,e))}}function j3(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function wne(n){return n&&(n.borderColor||n.backgroundColor)}function Ene(){return ht.borderColor!=="rgba(0,0,0,0.1)"||ht.backgroundColor!=="rgba(0,0,0,0.1)"}var Cne={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:r},options:i}=n.config,{elements:o}=i,s=j3(r)||wne(i)||o&&j3(o)||Ene();if(!t.forceOverride&&s)return;let a=bne(n);r.forEach(a)}};function Ine(n,e,t,r,i){let o=i.samples||r;if(o>=t)return n.slice(e,e+t);let s=[],a=(t-2)/(o-2),c=0,l=e+t-1,u=e,h,f,p,_,w;for(s[c++]=n[u],h=0;h<o-2;h++){let b=0,T=0,k,V=Math.floor((h+1)*a)+1+e,j=Math.min(Math.floor((h+2)*a)+1,t)+e,U=j-V;for(k=V;k<j;k++)b+=n[k].x,T+=n[k].y;b/=U,T/=U;let B=Math.floor(h*a)+1+e,M=Math.min(Math.floor((h+1)*a)+1,t)+e,{x,y:D}=n[u];for(p=_=-1,k=B;k<M;k++)_=.5*Math.abs((x-b)*(n[k].y-D)-(x-n[k].x)*(T-D)),_>p&&(p=_,f=n[k],w=k);s[c++]=f,u=w}return s[c++]=n[l],s}function xne(n,e,t,r){let i=0,o=0,s,a,c,l,u,h,f,p,_,w,b=[],T=e+t-1,k=n[e].x,j=n[T].x-k;for(s=e;s<e+t;++s){a=n[s],c=(a.x-k)/j*r,l=a.y;let U=c|0;if(U===u)l<_?(_=l,h=s):l>w&&(w=l,f=s),i=(o*i+a.x)/++o;else{let B=s-1;if(!Me(h)&&!Me(f)){let M=Math.min(h,f),x=Math.max(h,f);M!==p&&M!==B&&b.push(oe(H({},n[M]),{x:i})),x!==p&&x!==B&&b.push(oe(H({},n[x]),{x:i}))}s>0&&B!==p&&b.push(n[B]),b.push(a),u=U,o=0,_=w=l,h=f=p=s}}return b}function xU(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function U3(n){n.data.datasets.forEach(e=>{xU(e)})}function Dne(n,e){let t=e.length,r=0,i,{iScale:o}=n,{min:s,max:a,minDefined:c,maxDefined:l}=o.getUserBounds();return c&&(r=sn(Ki(e,o.axis,s).lo,0,t-1)),l?i=sn(Ki(e,o.axis,a).hi+1,r,t)-r:i=t-r,{start:r,count:i}}var Tne={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){U3(n);return}let r=n.width;n.data.datasets.forEach((i,o)=>{let{_data:s,indexAxis:a}=i,c=n.getDatasetMeta(o),l=s||i.data;if(Gu([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let u=n.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:h,count:f}=Dne(c,l),p=t.threshold||4*r;if(f<=p){xU(i);return}Me(s)&&(i._data=l,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(w){this._data=w}}));let _;switch(t.algorithm){case"lttb":_=Ine(l,h,f,r,t);break;case"min-max":_=xne(l,h,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=_})},destroy(n){U3(n)}};function Sne(n,e,t){let r=n.segments,i=n.points,o=e.points,s=[];for(let a of r){let{start:c,end:l}=a;l=o0(c,l,i);let u=$S(t,i[c],i[l],a.loop);if(!e.segments){s.push({source:a,target:u,start:i[c],end:i[l]});continue}let h=gS(e,u);for(let f of h){let p=$S(t,o[f.start],o[f.end],f.loop),_=pS(a,i,p);for(let w of _)s.push({source:w,target:f,start:{[t]:B3(u,p,"start",Math.max)},end:{[t]:B3(u,p,"end",Math.min)}})}}return s}function $S(n,e,t,r){if(r)return;let i=e[n],o=t[n];return n==="angle"&&(i=bn(i),o=bn(o)),{property:n,start:i,end:o}}function Mne(n,e){let{x:t=null,y:r=null}=n||{},i=e.points,o=[];return e.segments.forEach(({start:s,end:a})=>{a=o0(s,a,i);let c=i[s],l=i[a];r!==null?(o.push({x:c.x,y:r}),o.push({x:l.x,y:r})):t!==null&&(o.push({x:t,y:c.y}),o.push({x:t,y:l.y}))}),o}function o0(n,e,t){for(;e>n;e--){let r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function B3(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function DU(n,e){let t=[],r=!1;return ct(n)?(r=!0,t=n):t=Mne(n,e),t.length?new i0({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function $3(n){return n&&n.fill!==!1}function Ane(n,e,t){let i=n[e].fill,o=[e],s;if(!t)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!Et(i))return i;if(s=n[i],!s)return!1;if(s.visible)return i;o.push(i),i=s.fill}return!1}function Pne(n,e,t){let r=Nne(n);if(Pe(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Et(i)&&Math.floor(i)===i?Rne(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Rne(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function kne(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Pe(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function One(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:Pe(n)?r=n.value:r=e.getBaseValue(),r}function Nne(n){let e=n.options,t=e.fill,r=ve(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Fne(n){let{scale:e,index:t,line:r}=n,i=[],o=r.segments,s=r.points,a=Lne(e,t);a.push(DU({x:null,y:e.bottom},r));for(let c=0;c<o.length;c++){let l=o[c];for(let u=l.start;u<=l.end;u++)Vne(i,s[u],a)}return new i0({points:i,options:{}})}function Lne(n,e){let t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){let o=r[i];if(o.index===e)break;o.hidden||t.unshift(o.dataset)}return t}function Vne(n,e,t){let r=[];for(let i=0;i<t.length;i++){let o=t[i],{first:s,last:a,point:c}=jne(o,e,"x");if(!(!c||s&&a)){if(s)r.unshift(c);else if(n.push(c),!a)break}}n.push(...r)}function jne(n,e,t){let r=n.interpolate(e,t);if(!r)return{};let i=r[t],o=n.segments,s=n.points,a=!1,c=!1;for(let l=0;l<o.length;l++){let u=o[l],h=s[u.start][t],f=s[u.end][t];if(Xi(i,h,f)){a=i===h,c=i===f;break}}return{first:a,last:c,point:r}}var n0=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){let{x:i,y:o,radius:s}=this;return t=t||{start:0,end:lt},e.arc(i,o,s,t.end,t.start,!0),!r.bounds}interpolate(e){let{x:t,y:r,radius:i}=this,o=e.angle;return{x:t+Math.cos(o)*i,y:r+Math.sin(o)*i,angle:o}}};function Une(n){let{chart:e,fill:t,line:r}=n;if(Et(t))return Bne(e,t);if(t==="stack")return Fne(n);if(t==="shape")return!0;let i=$ne(n);return i instanceof n0?i:DU(i,r)}function Bne(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function $ne(n){return(n.scale||{}).getPointPositionForValue?zne(n):Hne(n)}function Hne(n){let{scale:e={},fill:t}=n,r=kne(t,e);if(Et(r)){let i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function zne(n){let{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,o=r.reverse?e.max:e.min,s=One(t,e,o),a=[];if(r.grid.circular){let c=e.getPointPositionForValue(0,o);return new n0({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(s)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,s));return a}function DS(n,e,t){let r=Une(e),{chart:i,index:o,line:s,scale:a,axis:c}=e,l=s.options,u=l.fill,h=l.backgroundColor,{above:f=h,below:p=h}=u||{},_=i.getDatasetMeta(o),w=mS(i,_);r&&s.points.length&&($f(n,t),Wne(n,{line:s,target:r,above:f,below:p,area:t,scale:a,axis:c,clip:w}),Hf(n))}function Wne(n,e){let{line:t,target:r,above:i,below:o,area:s,scale:a,clip:c}=e,l=t._loop?"angle":e.axis;n.save();let u=o;o!==i&&(l==="x"?(H3(n,r,s.top),TS(n,{line:t,target:r,color:i,scale:a,property:l,clip:c}),n.restore(),n.save(),H3(n,r,s.bottom)):l==="y"&&(z3(n,r,s.left),TS(n,{line:t,target:r,color:o,scale:a,property:l,clip:c}),n.restore(),n.save(),z3(n,r,s.right),u=i)),TS(n,{line:t,target:r,color:u,scale:a,property:l,clip:c}),n.restore()}function H3(n,e,t){let{segments:r,points:i}=e,o=!0,s=!1;n.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],h=i[o0(c,l,i)];o?(n.moveTo(u.x,u.y),o=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),s=!!e.pathSegment(n,a,{move:s}),s?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function z3(n,e,t){let{segments:r,points:i}=e,o=!0,s=!1;n.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],h=i[o0(c,l,i)];o?(n.moveTo(u.x,u.y),o=!1):(n.lineTo(t,u.y),n.lineTo(u.x,u.y)),s=!!e.pathSegment(n,a,{move:s}),s?n.closePath():n.lineTo(t,h.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function TS(n,e){let{line:t,target:r,property:i,color:o,scale:s,clip:a}=e,c=Sne(t,r,i);for(let{source:l,target:u,start:h,end:f}of c){let{style:{backgroundColor:p=o}={}}=l,_=r!==!0;n.save(),n.fillStyle=p,qne(n,s,a,_&&$S(i,h,f)),n.beginPath();let w=!!t.pathSegment(n,l),b;if(_){w?n.closePath():W3(n,r,f,i);let T=!!r.pathSegment(n,u,{move:w,reverse:!0});b=w&&T,b||W3(n,r,h,i)}n.closePath(),n.fill(b?"evenodd":"nonzero"),n.restore()}}function qne(n,e,t,r){let i=e.chart.chartArea,{property:o,start:s,end:a}=r||{};if(o==="x"||o==="y"){let c,l,u,h;o==="x"?(c=s,l=i.top,u=a,h=i.bottom):(c=i.left,l=s,u=i.right,h=a),n.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),l=Math.max(l,t.top),h=Math.min(h,t.bottom)),n.rect(c,l,u-c,h-l),n.clip()}}function W3(n,e,t,r){let i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var Gne={id:"filler",afterDatasetsUpdate(n,e,t){let r=(n.data.datasets||[]).length,i=[],o,s,a,c;for(s=0;s<r;++s)o=n.getDatasetMeta(s),a=o.dataset,c=null,a&&a.options&&a instanceof i0&&(c={visible:n.isDatasetVisible(s),index:s,fill:Pne(a,s,r),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=c,i.push(c);for(s=0;s<r;++s)c=i[s],!(!c||c.fill===!1)&&(c.fill=Ane(i,s,t.propagate))},beforeDraw(n,e,t){let r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let s=i.length-1;s>=0;--s){let a=i[s].$filler;a&&(a.line.updateControlPoints(o,a.axis),r&&a.fill&&DS(n.ctx,a,o))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){let o=r[i].$filler;$3(o)&&DS(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,e,t){let r=e.meta.$filler;!$3(r)||t.drawTime!=="beforeDatasetDraw"||DS(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},q3=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},Kne=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,r0=class extends gi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=ot(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let r=e.labels,i=Qt(r.font),o=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=q3(r,o),l,u;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(s,o,a,c)+10):(u=this.maxHeight,l=this._fitCols(s,i,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){let{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+a,h=e;o.textAlign="left",o.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((_,w)=>{let b=r+t/2+o.measureText(_.text).width;(w===0||l[l.length-1]+b+2*a>s)&&(h+=u,l[l.length-(w>0?0:1)]=0,p+=u,f++),c[w]={left:0,top:p,row:f,width:b,height:i},l[l.length-1]+=b+a}),h}_fitCols(e,t,r,i){let{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=s-e,h=a,f=0,p=0,_=0,w=0;return this.legendItems.forEach((b,T)=>{let{itemWidth:k,itemHeight:V}=Yne(r,t,o,b,i);T>0&&p+V+2*a>u&&(h+=f+a,l.push({width:f,height:p}),_+=f+a,w++,f=p=0),c[T]={left:_,top:p,col:w,width:k,height:V},f=Math.max(f,k),p+=V+a}),h+=f,l.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:o}}=this,s=Rc(o,this.left,this.width);if(this.isHorizontal()){let a=0,c=wn(r,this.left+i,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=wn(r,this.left+i,this.right-this.lineWidths[a])),l.top+=this.top+e+i,l.left=s.leftForLtr(s.x(c),l.width),c+=l.width+i}else{let a=0,c=wn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=wn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+i,l.left=s.leftForLtr(s.x(l.left),l.width),c+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;$f(e,this),this._draw(),Hf(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:o,labels:s}=e,a=ht.color,c=Rc(e.rtl,this.left,this.width),l=Qt(s.font),{padding:u}=s,h=l.size,f=h/2,p;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;let{boxWidth:_,boxHeight:w,itemHeight:b}=q3(s,h),T=function(B,M,x){if(isNaN(_)||_<=0||isNaN(w)||w<0)return;i.save();let D=ve(x.lineWidth,1);if(i.fillStyle=ve(x.fillStyle,a),i.lineCap=ve(x.lineCap,"butt"),i.lineDashOffset=ve(x.lineDashOffset,0),i.lineJoin=ve(x.lineJoin,"miter"),i.lineWidth=D,i.strokeStyle=ve(x.strokeStyle,a),i.setLineDash(ve(x.lineDash,[])),s.usePointStyle){let P={radius:w*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:D},R=c.xPlus(B,_/2),O=M+f;iS(i,P,R,O,s.pointStyleWidth&&_)}else{let P=M+Math.max((h-w)/2,0),R=c.leftForLtr(B,_),O=ha(x.borderRadius);i.beginPath(),Object.values(O).some(A=>A!==0)?qu(i,{x:R,y:P,w:_,h:w,radius:O}):i.rect(R,P,_,w),i.fill(),D!==0&&i.stroke()}i.restore()},k=function(B,M,x){da(i,x.text,B,M+b/2,l,{strikethrough:x.hidden,textAlign:c.textAlign(x.textAlign)})},V=this.isHorizontal(),j=this._computeTitleHeight();V?p={x:wn(o,this.left+u,this.right-r[0]),y:this.top+u+j,line:0}:p={x:this.left+u,y:wn(o,this.top+j+u,this.bottom-t[0].height),line:0},hS(this.ctx,e.textDirection);let U=b+u;this.legendItems.forEach((B,M)=>{i.strokeStyle=B.fontColor,i.fillStyle=B.fontColor;let x=i.measureText(B.text).width,D=c.textAlign(B.textAlign||(B.textAlign=s.textAlign)),P=_+f+x,R=p.x,O=p.y;c.setWidth(this.width),V?M>0&&R+P+u>this.right&&(O=p.y+=U,p.line++,R=p.x=wn(o,this.left+u,this.right-r[p.line])):M>0&&O+U>this.bottom&&(R=p.x=R+t[p.line].width+u,p.line++,O=p.y=wn(o,this.top+j+u,this.bottom-t[p.line].height));let A=c.x(R);if(T(A,O,B),R=qj(D,R+_+f,V?R+P:this.right,e.rtl),k(c.x(R),O,B),V)p.x+=P+u;else if(typeof B.text!="string"){let _t=l.lineHeight;p.y+=TU(B,_t)+u}else p.y+=U}),fS(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,r=Qt(t.font),i=En(t.padding);if(!t.display)return;let o=Rc(e.rtl,this.left,this.width),s=this.ctx,a=t.position,c=r.size/2,l=i.top+c,u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+l,h=wn(e.align,h,this.right-f);else{let _=this.columnSizes.reduce((w,b)=>Math.max(w,b.height),0);u=l+wn(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}let p=wn(a,h,h+f);s.textAlign=o.textAlign(F_(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=r.string,da(s,t.text,p,u,r)}_computeTitleHeight(){let e=this.options.title,t=Qt(e.font),r=En(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,o;if(Xi(e,this.left,this.right)&&Xi(t,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(i=o[r],Xi(e,i.left,i.left+i.width)&&Xi(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){let t=this.options;if(!Jne(e.type,t))return;let r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,o=Kne(i,r);i&&!o&&ot(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!o&&ot(t.onHover,[e,r,this],this)}else r&&ot(t.onClick,[e,r,this],this)}};function Yne(n,e,t,r,i){let o=Qne(r,n,e,t),s=Xne(i,r,e.lineHeight);return{itemWidth:o,itemHeight:s}}function Qne(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((o,s)=>o.length>s.length?o:s)),e+t.size/2+r.measureText(i).width}function Xne(n,e,t){let r=n;return typeof e.text!="string"&&(r=TU(e,t)),r}function TU(n,e){let t=n.text?n.text.length:0;return e*t}function Jne(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Zne={id:"legend",_element:r0,start(n,e,t){let r=n.legend=new r0({ctx:n.ctx,options:t,chart:n});On.configure(n,r,t),On.addBox(n,r)},stop(n){On.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let r=n.legend;On.configure(n,r,t),r.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:o,useBorderRadius:s,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=En(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Jf=class extends gi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let i=ct(r.text)?r.text.length:1;this._padding=En(r.padding);let o=i*Qt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:r,bottom:i,right:o,options:s}=this,a=s.align,c=0,l,u,h;return this.isHorizontal()?(u=wn(a,r,o),h=t+e,l=o-r):(s.position==="left"?(u=r+e,h=wn(a,i,t),c=Ve*-.5):(u=o-e,h=wn(a,t,i),c=Ve*.5),l=i-t),{titleX:u,titleY:h,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let r=Qt(t.font),o=r.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(o);da(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:l,textAlign:F_(t.align),textBaseline:"middle",translation:[s,a]})}};function ere(n,e){let t=new Jf({ctx:n.ctx,options:e,chart:n});On.configure(n,t,e),On.addBox(n,t),n.titleBlock=t}var tre={id:"title",_element:Jf,start(n,e,t){ere(n,t)},stop(n){let e=n.titleBlock;On.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let r=n.titleBlock;On.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},G_=new WeakMap,nre={id:"subtitle",start(n,e,t){let r=new Jf({ctx:n.ctx,options:t,chart:n});On.configure(n,r,t),On.addBox(n,r),G_.set(n,r)},stop(n){On.removeBox(n,G_.get(n)),G_.delete(n)},beforeUpdate(n,e,t){let r=G_.get(n);On.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Qf={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,o=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();r.add(c.x),i+=c.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((a,c)=>a+c)/r.size,y:i/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,o,s,a;for(o=0,s=n.length;o<s;++o){let c=n[o].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=P_(e,l);u<i&&(i=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function Ji(n,e){return e&&(ct(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Qo(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function rre(n,e){let{element:t,datasetIndex:r,index:i}=e,o=n.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:n,label:s,parsed:o.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function G3(n,e){let t=n.chart.ctx,{body:r,footer:i,title:o}=n,{boxWidth:s,boxHeight:a}=e,c=Qt(e.bodyFont),l=Qt(e.titleFont),u=Qt(e.footerFont),h=o.length,f=i.length,p=r.length,_=En(e.padding),w=_.height,b=0,T=r.reduce((j,U)=>j+U.before.length+U.lines.length+U.after.length,0);if(T+=n.beforeBody.length+n.afterBody.length,h&&(w+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),T){let j=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;w+=p*j+(T-p)*c.lineHeight+(T-1)*e.bodySpacing}f&&(w+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let k=0,V=function(j){b=Math.max(b,t.measureText(j).width+k)};return t.save(),t.font=l.string,Ke(n.title,V),t.font=c.string,Ke(n.beforeBody.concat(n.afterBody),V),k=e.displayColors?s+2+e.boxPadding:0,Ke(r,j=>{Ke(j.before,V),Ke(j.lines,V),Ke(j.after,V)}),k=0,t.font=u.string,Ke(n.footer,V),t.restore(),b+=_.width,{width:b,height:w}}function ire(n,e){let{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function ore(n,e,t,r){let{x:i,width:o}=r,s=t.caretSize+t.caretPadding;if(n==="left"&&i+o+s>e.width||n==="right"&&i-o-s<0)return!0}function sre(n,e,t,r){let{x:i,width:o}=t,{width:s,chartArea:{left:a,right:c}}=n,l="center";return r==="center"?l=i<=(a+c)/2?"left":"right":i<=o/2?l="left":i>=s-o/2&&(l="right"),ore(l,n,e,t)&&(l="center"),l}function K3(n,e,t){let r=t.yAlign||e.yAlign||ire(n,t);return{xAlign:t.xAlign||e.xAlign||sre(n,e,t,r),yAlign:r}}function are(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function cre(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function Y3(n,e,t,r){let{caretSize:i,caretPadding:o,cornerRadius:s}=n,{xAlign:a,yAlign:c}=t,l=i+o,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=ha(s),_=are(e,a),w=cre(e,c,l);return c==="center"?a==="left"?_+=l:a==="right"&&(_-=l):a==="left"?_-=Math.max(u,f)+i:a==="right"&&(_+=Math.max(h,p)+i),{x:sn(_,0,r.width-e.width),y:sn(w,0,r.height-e.height)}}function K_(n,e,t){let r=En(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function Q3(n){return Ji([],Qo(n))}function lre(n,e,t){return Ko(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function X3(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var SU={beforeTitle:Qi,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Qi,beforeBody:Qi,beforeLabel:Qi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Me(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Qi,afterBody:Qi,beforeFooter:Qi,footer:Qi,afterFooter:Qi};function dr(n,e,t,r){let i=n[e].call(t,r);return typeof i>"u"?SU[e].call(t,r):i}var J3=(()=>{class n extends gi{static positioners=Qf;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let r=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&r.options.animation&&i.animations,s=new J_(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=lre(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){let{callbacks:i}=r,o=dr(i,"beforeTitle",this,t),s=dr(i,"title",this,t),a=dr(i,"afterTitle",this,t),c=[];return c=Ji(c,Qo(o)),c=Ji(c,Qo(s)),c=Ji(c,Qo(a)),c}getBeforeBody(t,r){return Q3(dr(r.callbacks,"beforeBody",this,t))}getBody(t,r){let{callbacks:i}=r,o=[];return Ke(t,s=>{let a={before:[],lines:[],after:[]},c=X3(i,s);Ji(a.before,Qo(dr(c,"beforeLabel",this,s))),Ji(a.lines,dr(c,"label",this,s)),Ji(a.after,Qo(dr(c,"afterLabel",this,s))),o.push(a)}),o}getAfterBody(t,r){return Q3(dr(r.callbacks,"afterBody",this,t))}getFooter(t,r){let{callbacks:i}=r,o=dr(i,"beforeFooter",this,t),s=dr(i,"footer",this,t),a=dr(i,"afterFooter",this,t),c=[];return c=Ji(c,Qo(o)),c=Ji(c,Qo(s)),c=Ji(c,Qo(a)),c}_createItems(t){let r=this._active,i=this.chart.data,o=[],s=[],a=[],c=[],l,u;for(l=0,u=r.length;l<u;++l)c.push(rre(this.chart,r[l]));return t.filter&&(c=c.filter((h,f,p)=>t.filter(h,f,p,i))),t.itemSort&&(c=c.sort((h,f)=>t.itemSort(h,f,i))),Ke(c,h=>{let f=X3(t.callbacks,h);o.push(dr(f,"labelColor",this,h)),s.push(dr(f,"labelPointStyle",this,h)),a.push(dr(f,"labelTextColor",this,h))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=c,c}update(t,r){let i=this.options.setContext(this.getContext()),o=this._active,s,a=[];if(!o.length)this.opacity!==0&&(s={opacity:0});else{let c=Qf[i.position].call(this,o,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);let l=this._size=G3(this,i),u=Object.assign({},c,l),h=K3(this.chart,i,u),f=Y3(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,o){let s=this.getCaretPosition(t,i,o);r.lineTo(s.x1,s.y1),r.lineTo(s.x2,s.y2),r.lineTo(s.x3,s.y3)}getCaretPosition(t,r,i){let{xAlign:o,yAlign:s}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:f}=ha(c),{x:p,y:_}=t,{width:w,height:b}=r,T,k,V,j,U,B;return s==="center"?(U=_+b/2,o==="left"?(T=p,k=T-a,j=U+a,B=U-a):(T=p+w,k=T+a,j=U-a,B=U+a),V=T):(o==="left"?k=p+Math.max(l,h)+a:o==="right"?k=p+w-Math.max(u,f)-a:k=this.caretX,s==="top"?(j=_,U=j-a,T=k-a,V=k+a):(j=_+b,U=j+a,T=k+a,V=k-a),B=j),{x1:T,x2:k,x3:V,y1:j,y2:U,y3:B}}drawTitle(t,r,i){let o=this.title,s=o.length,a,c,l;if(s){let u=Rc(i.rtl,this.x,this.width);for(t.x=K_(this,i.titleAlign,i),r.textAlign=u.textAlign(i.titleAlign),r.textBaseline="middle",a=Qt(i.titleFont),c=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,l=0;l<s;++l)r.fillText(o[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===s&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,r,i,o,s){let a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=s,h=Qt(s.bodyFont),f=K_(this,"left",s),p=o.x(f),_=l<h.lineHeight?(h.lineHeight-l)/2:0,w=r.y+_;if(s.usePointStyle){let b={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},T=o.leftForLtr(p,u)+u/2,k=w+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,V_(t,b,T,k),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,V_(t,b,T,k)}else{t.lineWidth=Pe(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let b=o.leftForLtr(p,u),T=o.leftForLtr(o.xPlus(p,1),u-2),k=ha(a.borderRadius);Object.values(k).some(V=>V!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,qu(t,{x:b,y:w,w:u,h:l,radius:k}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),qu(t,{x:T,y:w+1,w:u-2,h:l-2,radius:k}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(b,w,u,l),t.strokeRect(b,w,u,l),t.fillStyle=a.backgroundColor,t.fillRect(T,w+1,u-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){let{body:o}=this,{bodySpacing:s,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:h}=i,f=Qt(i.bodyFont),p=f.lineHeight,_=0,w=Rc(i.rtl,this.x,this.width),b=function(D){r.fillText(D,w.x(t.x+_),t.y+p/2),t.y+=p+s},T=w.textAlign(a),k,V,j,U,B,M,x;for(r.textAlign=a,r.textBaseline="middle",r.font=f.string,t.x=K_(this,T,i),r.fillStyle=i.bodyColor,Ke(this.beforeBody,b),_=c&&T!=="right"?a==="center"?u/2+h:u+2+h:0,U=0,M=o.length;U<M;++U){for(k=o[U],V=this.labelTextColors[U],r.fillStyle=V,Ke(k.before,b),j=k.lines,c&&j.length&&(this._drawColorBox(r,t,U,w,i),p=Math.max(f.lineHeight,l)),B=0,x=j.length;B<x;++B)b(j[B]),p=f.lineHeight;Ke(k.after,b)}_=0,p=f.lineHeight,Ke(this.afterBody,b),t.y-=s}drawFooter(t,r,i){let o=this.footer,s=o.length,a,c;if(s){let l=Rc(i.rtl,this.x,this.width);for(t.x=K_(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=l.textAlign(i.footerAlign),r.textBaseline="middle",a=Qt(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,c=0;c<s;++c)r.fillText(o[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,r,i,o){let{xAlign:s,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:h}=i,{topLeft:f,topRight:p,bottomLeft:_,bottomRight:w}=ha(o.cornerRadius);r.fillStyle=o.backgroundColor,r.strokeStyle=o.borderColor,r.lineWidth=o.borderWidth,r.beginPath(),r.moveTo(c+f,l),a==="top"&&this.drawCaret(t,r,i,o),r.lineTo(c+u-p,l),r.quadraticCurveTo(c+u,l,c+u,l+p),a==="center"&&s==="right"&&this.drawCaret(t,r,i,o),r.lineTo(c+u,l+h-w),r.quadraticCurveTo(c+u,l+h,c+u-w,l+h),a==="bottom"&&this.drawCaret(t,r,i,o),r.lineTo(c+_,l+h),r.quadraticCurveTo(c,l+h,c,l+h-_),a==="center"&&s==="left"&&this.drawCaret(t,r,i,o),r.lineTo(c,l+f),r.quadraticCurveTo(c,l,c+f,l),r.closePath(),r.fill(),o.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){let r=this.chart,i=this.$animations,o=i&&i.x,s=i&&i.y;if(o||s){let a=Qf[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=G3(this,t),l=Object.assign({},a,this._size),u=K3(r,t,l),h=Y3(t,l,u,r);(o._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){let r=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(r);let o={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let a=En(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,o,r),hS(t,r.textDirection),s.y+=a.top,this.drawTitle(s,t,r),this.drawBody(s,t,r),this.drawFooter(s,t,r),fS(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){let i=this._active,o=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),s=!Uf(i,o),a=this._positionChanged(o,r);(s||a)&&(this._active=o,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let o=this.options,s=this._active||[],a=this._getActiveElements(t,s,r,i),c=this._positionChanged(a,t),l=r||!Uf(a,s)||c;return l&&(this._active=a,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),l}_getActiveElements(t,r,i,o){let s=this.options;if(t.type==="mouseout")return[];if(!o)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&a.reverse(),a}_positionChanged(t,r){let{caretX:i,caretY:o,options:s}=this,a=Qf[s.position].call(this,t,r);return a!==!1&&(i!==a.x||o!==a.y)}}return n})(),ure={id:"tooltip",_element:J3,positioners:Qf,afterInit(n,e,t){t&&(n.tooltip=new J3({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",oe(H({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:SU},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},dre=Object.freeze({__proto__:null,Colors:Cne,Decimation:Tne,Filler:Gne,Legend:Zne,SubTitle:nre,Title:tre,Tooltip:ure}),hre=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function fre(n,e,t,r){let i=n.indexOf(e);if(i===-1)return hre(n,e,t,r);let o=n.lastIndexOf(e);return i!==o?t:i}var pre=(n,e)=>n===null?null:sn(Math.round(n),0,e);function Z3(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var gre=(()=>{class n extends Nc{static id="category";static defaults={ticks:{callback:Z3}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let r=this._addedLabels;if(r.length){let i=this.getLabels();for(let{index:o,label:s}of r)i[o]===s&&i.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Me(t))return null;let i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:fre(i,t,ve(r,t),this._addedLabels),pre(r,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),r||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){let t=this.min,r=this.max,i=this.options.offset,o=[],s=this.getLabels();s=t===0&&r===s.length-1?s:s.slice(t,r+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=r;a++)o.push({value:a});return o}getLabelForValue(t){return Z3.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function mre(n,e){let t=[],{bounds:i,step:o,min:s,max:a,precision:c,count:l,maxTicks:u,maxDigits:h,includeBounds:f}=n,p=o||1,_=u-1,{min:w,max:b}=e,T=!Me(s),k=!Me(a),V=!Me(l),j=(b-w)/(h+1),U=WT((b-w)/_/p)*p,B,M,x,D;if(U<1e-14&&!T&&!k)return[{value:w},{value:b}];D=Math.ceil(b/U)-Math.floor(w/U),D>_&&(U=WT(D*U/_/p)*p),Me(c)||(B=Math.pow(10,c),U=Math.ceil(U*B)/B),i==="ticks"?(M=Math.floor(w/U)*U,x=Math.ceil(b/U)*U):(M=w,x=b),T&&k&&o&&jj((a-s)/o,U/1e3)?(D=Math.round(Math.min((a-s)/U,u)),U=(a-s)/D,M=s,x=a):V?(M=T?s:M,x=k?a:x,D=l-1,U=(x-M)/D):(D=(x-M)/U,Hu(D,Math.round(D),U/1e3)?D=Math.round(D):D=Math.ceil(D));let P=Math.max(GT(U),GT(M));B=Math.pow(10,Me(c)?P:c),M=Math.round(M*B)/B,x=Math.round(x*B)/B;let R=0;for(T&&(f&&M!==s?(t.push({value:s}),M<s&&R++,Hu(Math.round((M+R*U)*B)/B,s,eU(s,j,n))&&R++):M<s&&R++);R<D;++R){let O=Math.round((M+R*U)*B)/B;if(k&&O>a)break;t.push({value:O})}return k&&f&&x!==a?t.length&&Hu(t[t.length-1].value,a,eU(a,j,n))?t[t.length-1].value=a:t.push({value:a}):(!k||x===a)&&t.push({value:x}),t}function eU(n,e,{horizontal:t,minRotation:r}){let i=zr(r),o=(t?Math.sin(i):Math.cos(i))||.001,s=.75*e*(""+n).length;return Math.min(e/o,s)}var Qu=class extends Nc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Me(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:o}=this,s=c=>i=t?i:c,a=c=>o=r?o:c;if(e){let c=pi(i),l=pi(o);c<0&&l<0?a(0):c>0&&l>0&&s(0)}if(i===o){let c=o===0?1:Math.abs(o*.05);a(o+c),e||s(i-c)}this.min=i,this.max=o}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,s=mre(i,o);return e.bounds==="ticks"&&qT(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){let i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return Wu(e,this.chart.options.locale,this.options.ticks.format)}},HS=class extends Qu{static id="linear";static defaults={ticks:{callback:Bf.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Et(e)?e:0,this.max=Et(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,r=zr(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},Zf=n=>Math.floor(qo(n)),Oc=(n,e)=>Math.pow(10,Zf(n)+e);function tU(n){return n/Math.pow(10,Zf(n))===1}function nU(n,e,t){let r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function yre(n,e){let t=e-n,r=Zf(t);for(;nU(n,e,r)>10;)r++;for(;nU(n,e,r)<10;)r--;return Math.min(r,Zf(n))}function vre(n,{min:e,max:t}){e=ur(n.min,e);let r=[],i=Zf(e),o=yre(e,t),s=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),c=i>o?Math.pow(10,i):0,l=Math.round((e-c)*s)/s,u=Math.floor((e-c)/a/10)*a*10,h=Math.floor((l-u)/Math.pow(10,o)),f=ur(n.min,Math.round((c+u+h*Math.pow(10,o))*s)/s);for(;f<t;)r.push({value:f,major:tU(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,s=o>=0?1:s),f=Math.round((c+u+h*Math.pow(10,o))*s)/s;let p=ur(n.max,f);return r.push({value:p,major:tU(p),significand:h}),r}var zS=class extends Nc{static id="logarithmic";static defaults={ticks:{callback:Bf.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let r=Qu.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return Et(r)&&r>0?r:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Et(e)?Math.max(0,e):null,this.max=Et(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Et(this._userMin)&&(this.min=e===Oc(this.min,0)?Oc(this.min,-1):Oc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),r=this.min,i=this.max,o=a=>r=e?r:a,s=a=>i=t?i:a;r===i&&(r<=0?(o(1),s(10)):(o(Oc(r,-1)),s(Oc(i,1)))),r<=0&&o(Oc(i,-1)),i<=0&&s(Oc(r,1)),this.min=r,this.max=i}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},r=vre(t,this);return e.bounds==="ticks"&&qT(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Wu(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=qo(e),this._valueRange=qo(this.max)-qo(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(qo(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function WS(n){let e=n.ticks;if(e.display&&n.display){let t=En(e.backdropPadding);return ve(e.font&&e.font.size,ht.font.size)+t.height}return 0}function _re(n,e,t){return t=ct(t)?t:[t],{w:Kj(n,e.string,t),h:t.length*e.lineHeight}}function rU(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function bre(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],o=n._pointLabels.length,s=n.options.pointLabels,a=s.centerPointLabels?Ve/o:0;for(let c=0;c<o;c++){let l=s.setContext(n.getPointLabelContext(c));i[c]=l.padding;let u=n.getPointPosition(c,n.drawingArea+i[c],a),h=Qt(l.font),f=_re(n.ctx,h,n._pointLabels[c]);r[c]=f;let p=bn(n.getIndexAngle(c)+a),_=Math.round(O_(p)),w=rU(_,u.x,f.w,0,180),b=rU(_,u.y,f.h,90,270);wre(t,e,p,w,b)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=Ire(n,r,i)}function wre(n,e,t,r,i){let o=Math.abs(Math.sin(t)),s=Math.abs(Math.cos(t)),a=0,c=0;r.start<e.l?(a=(e.l-r.start)/o,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/o,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/s,n.t=Math.min(n.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/s,n.b=Math.max(n.b,e.b+c))}function Ere(n,e,t){let r=n.drawingArea,{extra:i,additionalAngle:o,padding:s,size:a}=t,c=n.getPointPosition(e,r+i+s,o),l=Math.round(O_(bn(c.angle+Ft))),u=Tre(c.y,a.h,l),h=xre(l),f=Dre(c.x,a.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+a.w,bottom:u+a.h}}function Cre(n,e){if(!e)return!0;let{left:t,top:r,right:i,bottom:o}=n;return!(Yi({x:t,y:r},e)||Yi({x:t,y:o},e)||Yi({x:i,y:r},e)||Yi({x:i,y:o},e))}function Ire(n,e,t){let r=[],i=n._pointLabels.length,o=n.options,{centerPointLabels:s,display:a}=o.pointLabels,c={extra:WS(o)/2,additionalAngle:s?Ve/i:0},l;for(let u=0;u<i;u++){c.padding=t[u],c.size=e[u];let h=Ere(n,u,c);r.push(h),a==="auto"&&(h.visible=Cre(h,l),h.visible&&(l=h))}return r}function xre(n){return n===0||n===180?"center":n<180?"left":"right"}function Dre(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function Tre(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function Sre(n,e,t){let{left:r,top:i,right:o,bottom:s}=t,{backdropColor:a}=e;if(!Me(a)){let c=ha(e.borderRadius),l=En(e.backdropPadding);n.fillStyle=a;let u=r-l.left,h=i-l.top,f=o-r+l.width,p=s-i+l.height;Object.values(c).some(_=>_!==0)?(n.beginPath(),qu(n,{x:u,y:h,w:f,h:p,radius:c}),n.fill()):n.fillRect(u,h,f,p)}}function Mre(n,e){let{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){let o=n._pointLabelItems[i];if(!o.visible)continue;let s=r.setContext(n.getPointLabelContext(i));Sre(t,s,o);let a=Qt(s.font),{x:c,y:l,textAlign:u}=o;da(t,n._pointLabels[i],c,l+a.lineHeight/2,a,{color:s.color,textAlign:u,textBaseline:"middle"})}}function MU(n,e,t,r){let{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,lt);else{let o=n.getPointPosition(0,e);i.moveTo(o.x,o.y);for(let s=1;s<r;s++)o=n.getPointPosition(s,e),i.lineTo(o.x,o.y)}}function Are(n,e,t,r,i){let o=n.ctx,s=e.circular,{color:a,lineWidth:c}=e;!s&&!r||!a||!c||t<0||(o.save(),o.strokeStyle=a,o.lineWidth=c,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),MU(n,t,s,r),o.closePath(),o.stroke(),o.restore())}function Pre(n,e,t){return Ko(n,{label:t,index:e,type:"pointLabel"})}var qS=class extends Qu{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Bf.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=En(WS(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Et(e)&&!isNaN(e)?e:0,this.max=Et(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/WS(this.options))}generateTickLabels(e){Qu.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{let i=ot(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){let e=this.options;e.display&&e.pointLabels.display?bre(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){let t=lt/(this._pointLabels.length||1),r=this.options.startAngle||0;return bn(e*t+zr(r))}getDistanceFromCenterForValue(e){if(Me(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Me(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let r=t[e];return Pre(this.getContext(),e,r)}}getPointPosition(e,t,r=0){let i=this.getIndexAngle(e)-Ft+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:r,right:i,bottom:o}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:o}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let r=this.ctx;r.save(),r.beginPath(),MU(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:r,grid:i,border:o}=t,s=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&Mre(this,s),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let f=this.getContext(h),p=i.setContext(f),_=o.setContext(f);Are(this,p,c,s,_)}}),r.display){for(e.save(),a=s-1;a>=0;a--){let u=r.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;let i=this.getIndexAngle(0),o,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=r.setContext(this.getContext(c)),u=Qt(l.font);if(o=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,s=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let h=En(l.backdropPadding);e.fillRect(-s/2-h.left,-o-u.size/2-h.top,s+h.width,u.size+h.height)}da(e,a.label,0,-o,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},s0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hr=Object.keys(s0);function iU(n,e){return n-e}function oU(n,e){if(Me(e))return null;let t=n._adapter,{parser:r,round:i,isoWeekday:o}=n._parseOpts,s=e;return typeof r=="function"&&(s=r(s)),Et(s)||(s=typeof r=="string"?t.parse(s,r):t.parse(s)),s===null?null:(i&&(s=i==="week"&&(Pc(o)||o===!0)?t.startOf(s,"isoWeek",o):t.startOf(s,i)),+s)}function sU(n,e,t,r){let i=hr.length;for(let o=hr.indexOf(n);o<i-1;++o){let s=s0[hr[o]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((t-e)/(a*s.size))<=r)return hr[o]}return hr[i-1]}function Rre(n,e,t,r,i){for(let o=hr.length-1;o>=hr.indexOf(t);o--){let s=hr[o];if(s0[s].common&&n._adapter.diff(i,r,s)>=e-1)return s}return hr[t?hr.indexOf(t):0]}function kre(n){for(let e=hr.indexOf(n)+1,t=hr.length;e<t;++e)if(s0[hr[e]].common)return hr[e]}function aU(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:r,hi:i}=N_(t,e),o=t[r]>=e?t[r]:t[i];n[o]=!0}}function Ore(n,e,t,r){let i=n._adapter,o=+i.startOf(e[0].value,r),s=e[e.length-1].value,a,c;for(a=o;a<=s;a=+i.add(a,1,r))c=t[a],c>=0&&(e[c].major=!0);return e}function cU(n,e,t){let r=[],i={},o=e.length,s,a;for(s=0;s<o;++s)a=e[s],i[a]=s,r.push({value:a,major:!1});return o===0||!t?r:Ore(n,r,i,t)}var GS=(()=>{class n extends Nc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){let i=t.time||(t.time={}),o=this._adapter=new Wee._date(t.adapters.date);o.init(r),Bu(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:oU(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,r=this._adapter,i=t.time.unit||"day",{min:o,max:s,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(o=Math.min(o,u.min)),!c&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),o=Et(o)&&!isNaN(o)?o:+r.startOf(Date.now(),i),s=Et(s)&&!isNaN(s)?s:+r.endOf(Date.now(),i)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){let t=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){let t=this.options,r=t.time,i=t.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);let s=this.min,a=this.max,c=$j(o,s,a);return this._unit=r.unit||(i.autoSkip?sU(r.minUnit,this.min,this.max,this._getLabelCapacity(s)):Rre(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:kre(this._unit),this.initOffsets(o),t.reverse&&c.reverse(),cU(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,i=0,o,s;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?r=1-o:r=(this.getDecimalForValue(t[1])-o)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;r=sn(r,0,a),i=sn(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let t=this._adapter,r=this.min,i=this.max,o=this.options,s=o.time,a=s.unit||sU(s.minUnit,r,i,this._getLabelCapacity(r)),c=ve(o.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,u=Pc(l)||l===!0,h={},f=r,p,_;if(u&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,u?"day":a),t.diff(i,r,a)>1e5*c)throw new Error(r+" and "+i+" are too far apart with stepSize of "+c+" "+a);let w=o.ticks.source==="data"&&this.getDataTimestamps();for(p=f,_=0;p<i;p=+t.add(p,c,a),_++)aU(h,p,w);return(p===i||o.bounds==="ticks"||_===1)&&aU(h,p,w),Object.keys(h).sort(iU).map(b=>+b)}getLabelForValue(t){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(t,i.tooltipFormat):r.format(t,i.displayFormats.datetime)}format(t,r){let o=this.options.time.displayFormats,s=this._unit,a=r||o[s];return this._adapter.format(t,a)}_tickFormatFunction(t,r,i,o){let s=this.options,a=s.ticks.callback;if(a)return ot(a,[t,r,i],this);let c=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&c[l],f=u&&c[u],p=i[r],_=u&&f&&p&&p.major;return this._adapter.format(t,o||(_?f:h))}generateTickLabels(t){let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r],o.label=this._tickFormatFunction(o.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){let r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let r=this.options.ticks,i=this.ctx.measureText(t).width,o=zr(this.isHorizontal()?r.maxRotation:r.minRotation),s=Math.cos(o),a=Math.sin(o),c=this._resolveTickFontOptions(0).size;return{w:i*s+c*a,h:i*a+c*s}}_getLabelCapacity(t){let r=this.options.time,i=r.displayFormats,o=i[r.unit]||i.millisecond,s=this._tickFormatFunction(t,0,cU(this,[t],this._majorUnit),o),a=this._getLabelSize(s),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,i;if(t.length)return t;let o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(r=0,i=o.length;r<i;++r)t=t.concat(o[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],r,i;if(t.length)return t;let o=this.getLabels();for(r=0,i=o.length;r<i;++r)t.push(oU(this,o[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return QT(t.sort(iU))}}return n})();function Y_(n,e,t){let r=0,i=n.length-1,o,s,a,c;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Ki(n,"pos",e)),{pos:o,time:a}=n[r],{pos:s,time:c}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Ki(n,"time",e)),{time:o,pos:a}=n[r],{time:s,pos:c}=n[i]);let l=s-o;return l?a+(c-a)*(e-o)/l:a}var KS=class extends GS{static id="timeseries";static defaults=GS.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Y_(t,this.min),this._tableRange=Y_(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:r}=this,i=[],o=[],s,a,c,l,u;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=r&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(s=0,a=i.length;s<a;++s)u=i[s+1],c=i[s-1],l=i[s],Math.round((u+c)/2)!==l&&o.push({time:l,pos:s/(a-1)});return o}_generate(){let e=this.min,t=this.max,r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Y_(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return Y_(this._table,r*this._tableRange+this._minPos,!0)}},Nre=Object.freeze({__proto__:null,CategoryScale:gre,LinearScale:HS,LogarithmicScale:zS,RadialLinearScale:qS,TimeScale:GS,TimeSeriesScale:KS}),a0=[zee,mne,dre,Nre];eo.register(...a0);var Fre=["caloriesChart"],Lre=["repsChart"],Vre=["intensityChart"],jre=["weightChart"],Ure=(n,e,t)=>({"bg-success":n,"bg-warning":e,"bg-danger":t});function Bre(n,e){n&1&&(v(0,"div",8)(1,"div",9)(2,"span",10),E(3,"Loading..."),m()(),v(4,"p",11),E(5,"Loading your progress..."),m()())}function $re(n,e){n&1&&(v(0,"div",48)(1,"p"),E(2,"No recent workouts found"),m()())}function Hre(n,e){if(n&1&&(v(0,"span",37),E(1),m()),n&2){let t=W().$implicit;C(),ie(" ",t.duration," min")}}function zre(n,e){if(n&1&&(v(0,"span",37),E(1),m()),n&2){let t=W().$implicit;C(),dn(" ",t.sets,"\xD7",t.reps)}}function Wre(n,e){if(n&1&&(v(0,"li",38)(1,"span",61),E(2),m(),v(3,"span",37),E(4,"\u2022"),m(),K(5,Hre,2,1,"span",62)(6,zre,2,2,"span",62),v(7,"span",37),E(8),m()()),n&2){let t=e.$implicit;C(2),re(t.name),C(3),N("ngIf",t.duration),C(),N("ngIf",t.sets&&t.reps),C(2),ie("\u2014 ",t.calories??"-"," cal")}}function qre(n,e){if(n&1&&(v(0,"li",51)(1,"div",52)(2,"div")(3,"div",53),E(4),m(),v(5,"div",38),E(6),m(),v(7,"div",54)(8,"span",55),E(9,"Intensity: "),v(10,"span"),E(11),m()(),v(12,"span",55),E(13),m(),v(14,"span"),E(15),m()(),v(16,"ul",56),K(17,Wre,9,4,"li",57),m()(),v(18,"div",58)(19,"div",59),E(20,"Duration"),m(),v(21,"div",53),E(22),m(),v(23,"div",60),E(24,"Calories"),m(),v(25,"div",53),E(26),m()()()()),n&2){let t=e.$implicit,r=W(4);C(4),re(t.routineName),C(2),re(r.formatDate(t.date)),C(4),An("color",r.getIntensityColor(t.intensity||5)),C(),re(t.intensity??"\u2014"),C(2),ie("Exercises: ",(t.exercises==null?null:t.exercises.length)||0),C(2),ie("Reps: ",t.totalReps||0),C(2),N("ngForOf",t.exercises),C(5),ie("",t.duration??0," min"),C(4),ie("",r.Math.round(t.totalCalories??t.totalCalories??t.calories??0)," cal")}}function Gre(n,e){if(n&1&&(v(0,"ul",49),K(1,qre,27,10,"li",50),m()),n&2){let t=W(3);C(),N("ngForOf",t.recentWorkouts)}}function Kre(n,e){if(n&1){let t=ke();Bt(0),v(1,"div",12)(2,"div",13),Q(3,"app-stats-card",14),m(),v(4,"div",13),Q(5,"app-stats-card",15),m(),v(6,"div",13),Q(7,"app-stats-card",16),m(),v(8,"div",13),Q(9,"app-stats-card",17),m()(),v(10,"div",18)(11,"strong"),E(12,"Last Workout:"),m(),E(13),fn(14,"date"),m(),v(15,"div",19)(16,"div",20)(17,"div",21)(18,"div",22)(19,"div",23)(20,"h6",24),E(21,"Weekly Progress"),m(),v(22,"div",25)(23,"div",26),E(24),m(),v(25,"div",27)(26,"button",28),ae("click",function(){de(t);let i=W(2);return he(i.changeRange(7))}),E(27,"7d"),m(),v(28,"button",29),ae("click",function(){de(t);let i=W(2);return he(i.changeRange(14))}),E(29,"14d"),m(),v(30,"button",29),ae("click",function(){de(t);let i=W(2);return he(i.changeRange(30))}),E(31,"30d"),m()()()(),v(32,"div",19)(33,"div",30)(34,"div",31)(35,"h6",32),E(36),m(),Q(37,"canvas",null,0),m()(),v(39,"div",30)(40,"div",31)(41,"h6",32),E(42),m(),Q(43,"canvas",null,1),m()(),v(45,"div",30)(46,"div",31)(47,"h6",32),E(48),m(),Q(49,"canvas",null,2),m()(),v(51,"div",30)(52,"div",31)(53,"h6",32),E(54,"Weight / BMI"),m(),Q(55,"canvas",null,3),m()()(),v(57,"div",33)(58,"div",34)(59,"div",35)(60,"div",36),E(61),fn(62,"titlecase"),m()(),v(63,"div",37)(64,"div",38),E(65,"Weekly consistency: "),v(66,"strong"),E(67),m()(),v(68,"div",38),E(69,"Avg calories: "),v(70,"strong"),E(71),m()()()(),v(72,"div",39)(73,"div",40),E(74,"Improvement"),m(),v(75,"div",41),Q(76,"div",42),m(),v(77,"div",43),E(78),fn(79,"titlecase"),fn(80,"number"),m()()()()()(),v(81,"div",20)(82,"div",21)(83,"div",22)(84,"div",44)(85,"h6",45),E(86,"Recent Workouts"),m(),v(87,"div",38),E(88),m()(),K(89,$re,3,0,"div",46)(90,Gre,2,1,"ul",47),m()()()(),$t()}if(n&2){let t=e.ngIf,r=W(2);C(3),N("value",t.totalWorkouts),C(2),N("value",t.totalReps),C(2),N("value",r.Math.round(t.caloriesBurned)),C(2),N("value",t.streak),C(4),ie(" ",t.lastWorkoutDate?Sl(14,28,t.lastWorkoutDate,"fullDate"):"No workouts yet"," "),C(11),ie("",r.rangeDays,"-day overview"),C(2),Se("active",r.rangeDays===7),C(2),Se("active",r.rangeDays===14),C(2),Se("active",r.rangeDays===30),C(6),ie("Calories (",r.rangeDays,"d)"),C(6),ie("Workouts / Reps (",r.rangeDays,"d)"),C(6),ie("Intensity (",r.rangeDays,"d)"),C(12),N("ngClass",Xd(38,Ure,r.improvementStatus==="improving",r.improvementStatus==="maintaining",r.improvementStatus==="regressing")),C(),ie(" ",Wn(62,31,r.improvementStatus)," "),C(6),ie("",r.getWeeklyConsistency(),"%"),C(4),re(r.getWeeklyAverage()),C(5),An("width",r.improvementScore,"%")("background",r.improvementStatus==="improving"?"#2ecc71":r.improvementStatus==="maintaining"?"#f6c23e":"#e74a3b"),C(2),dn("",Wn(79,33,r.improvementStatus)," \u2014 ",Sl(80,35,r.improvementScore,"1.0-0"),"%"),C(10),ie("",r.recentWorkouts.length," shown"),C(),N("ngIf",r.recentWorkouts.length===0),C(),N("ngIf",r.recentWorkouts.length>0)}}function Yre(n,e){if(n&1&&(Bt(0),K(1,Kre,91,42,"ng-container",7),fn(2,"async"),$t()),n&2){let t=W();C(),N("ngIf",Wn(2,1,t.stats$))}}var c0=class n{progressService=L(Br);auth=L(dt);subs=[];registeredWeight=null;Math=Math;stats$;currentWeight=70;newWeight=70;loading=!0;showWeightUpdate=!1;dailyProgress=[];recentWorkouts=[];improvementStatus="maintaining";improvementScore=0;isLoadingCharts=!0;rangeDays=7;caloriesChartInstance;repsChartInstance;intensityChartInstance;weightChartInstance;caloriesChart;repsChart;intensityChart;weightChart;caloriesToday=0;totalCaloriesBurned=0;totalRepsCompleted=0;averageIntensity=0;weeklyConsistencyPercent=0;bmi=0;weightHistory=[];ngOnInit(){this.stats$=this.progressService.stats$,this.subs.push(this.stats$.subscribe(e=>{this.currentWeight=e.currentWeight??70,this.newWeight=e.currentWeight??70,this.totalRepsCompleted=e.totalReps??0,this.totalCaloriesBurned=e.caloriesBurned??0,this.loading=!1})),this.subs.push(this.progressService.getUserStats().subscribe()),this.subs.push(Vi(this.auth).subscribe(e=>{if(!e){console.warn("[ProgressDashboard] No authenticated user found"),this.isLoadingCharts=!1;return}let t=e.uid;this.loadDailyProgress(this.rangeDays),this.subs.push(this.progressService.getUserWorkoutLogs().subscribe({next:r=>{let i=(r||[]).map(s=>this.mapWorkoutLog(s));this.recentWorkouts=i.slice(0,20);let o=i.map(s=>s.intensity||0).filter(s=>s>0);this.averageIntensity=o.length?Math.round(o.reduce((s,a)=>s+a,0)/o.length):0,this.calculateImprovement()},error:r=>{console.error("[ProgressDashboard] Error loading workout history:",r)}})),this.subs.push(this.progressService.getUserMetrics(t).subscribe(r=>{r&&(this.registeredWeight=r.weight??null,this.registeredWeight&&this.registeredWeight>0&&(this.currentWeight=this.registeredWeight,this.newWeight=this.registeredWeight),this.bmi=r.bmi??this.calcBMI(this.currentWeight,r.height??170),this.weightHistory=[{date:r.lastUpdated?new Date(r.lastUpdated):new Date,weight:r.weight,bmi:r.bmi}],this.createChartsIfReady())},r=>console.error("[ProgressDashboard] getUserMetrics error",r)))}))}ngAfterViewInit(){this.createChartsIfReady()}ngOnDestroy(){try{this.subs.forEach(e=>e.unsubscribe())}catch{}[this.caloriesChartInstance,this.repsChartInstance,this.intensityChartInstance,this.weightChartInstance].forEach(e=>{e&&e.destroy()})}updateWeight(){if(this.newWeight<=0){alert("Please enter a valid weight");return}this.progressService.updateWeight(this.newWeight).subscribe({next:()=>{this.showWeightUpdate=!1,alert("Weight updated successfully!"),this.currentWeight=this.newWeight},error:e=>{console.error("Error updating weight:",e),alert("Failed to update weight")}})}normalizeDate(e){return e?e instanceof Date?e:e?.toDate?e.toDate():new Date(e):new Date}mapWorkoutLog(e){let t=this.normalizeDate(e.date),r=(e.exercises||[]).map(a=>{let u=a.sets||0,h=a.reps||0,f=a.duration||0,p=Math.round(u*h*.5+f*5);return{name:a.name||a.exerciseName||"Exercise",sets:u||void 0,reps:h||void 0,duration:f||void 0,intensityLabel:a.intensityLevel||a.intensity||void 0,intensity:typeof a.intensity=="number"?a.intensity:void 0,calories:p}}),i=e.caloriesBurned??r.reduce((a,c)=>a+(c.calories||0),0),o=e.totalReps??r.reduce((a,c)=>a+(c.sets||0)*(c.reps||0),0),s=e.intensityScore??(r.length?Math.round(r.reduce((a,c)=>a+(c.intensity||5),0)/r.length):5);return{id:e.id,date:t,routineName:e.routineName||e.routine||"Workout Session",exercises:r,totalCalories:i,totalReps:o,duration:e.duration??0,intensity:s}}calculateImprovement(){if(!this.dailyProgress||this.dailyProgress.length<2){this.improvementStatus="maintaining";return}let e=this.rangeDays,t=[...this.dailyProgress].sort((h,f)=>(f.date?.getTime()||0)-(h.date?.getTime()||0)),r="maintaining";if(t.length>=e*2){let h=t.slice(0,e),f=t.slice(e,e*2),p=h.reduce((b,T)=>b+(T.caloriesBurned||0),0)/h.length,_=f.reduce((b,T)=>b+(T.caloriesBurned||0),0)/f.length,w=_===0?p>0?100:0:(p-_)/_*100;w>=10?r="improving":w<=-10?r="regressing":r="maintaining"}else{let h=t[t.length-1],f=t[0],p=h&&f&&h.caloriesBurned?(f.caloriesBurned-h.caloriesBurned)/h.caloriesBurned*100:0;r=p>=10?"improving":p<=-10?"regressing":"maintaining"}let i="maintaining",o=[...this.recentWorkouts].sort((h,f)=>(f.date?.getTime()||0)-(h.date?.getTime()||0));if(o.length>=4){let h=Math.floor(o.length/2),f=o.slice(0,h).reduce((_,w)=>_+(w.intensity||0),0)/Math.max(1,h),p=o.slice(h,h*2).reduce((_,w)=>_+(w.intensity||0),0)/Math.max(1,h);f>p?i="improving":f<p?i="regressing":i="maintaining"}let s="maintaining",c=t.slice(0,e).filter(h=>(h.workoutsCompleted||0)>0).length;c>=6?s="improving":c>=4?s="maintaining":s="regressing";let l=[r,i,s],u={improving:l.filter(h=>h==="improving").length,maintaining:l.filter(h=>h==="maintaining").length,regressing:l.filter(h=>h==="regressing").length};u.improving>=2?this.improvementStatus="improving":u.regressing>=2?this.improvementStatus="regressing":u.maintaining>=2?this.improvementStatus="maintaining":u.regressing>0?this.improvementStatus="regressing":u.improving>0?this.improvementStatus="improving":this.improvementStatus="maintaining",this.improvementScore=u.improving*100/3-u.regressing*100/3+50,this.improvementScore<0&&(this.improvementScore=0),this.improvementScore>100&&(this.improvementScore=100)}changeRange(e){this.rangeDays!==e&&(this.rangeDays=e,this.loadDailyProgress(e))}loadDailyProgress(e=7){if(!this.auth.currentUser){this.dailyProgress=[],this.isLoadingCharts=!1;return}let r=Math.max(e*2,7),i=this.progressService.getDailyProgressFromLogs(r).subscribe({next:o=>{this.dailyProgress=(o||[]).map(s=>oe(H({},s),{date:this.normalizeDate(s.date)})),this.caloriesToday=this.calcCaloriesToday(this.dailyProgress),this.totalCaloriesBurned=this.dailyProgress.reduce((s,a)=>s+(a.caloriesBurned||0),0),this.weeklyConsistencyPercent=this.getWeeklyConsistencyFromArray(this.dailyProgress.slice(0,e)),this.calculateImprovement(),this.createChartsIfReady()},error:o=>{console.error("[ProgressDashboard] loadDailyProgress error",o)}});this.subs.push(i)}calcCaloriesToday(e){let t=new Date().toISOString().slice(0,10),r=(e||[]).find(i=>i.date&&i.date.toISOString().slice(0,10)===t);return r&&r.caloriesBurned||0}getWeeklyConsistencyFromArray(e){if(!e||!e.length)return 0;let t=e.filter(r=>(r.workoutsCompleted||0)>0).length;return Math.round(t/e.length*100)}createChartsIfReady(){if(this.dailyProgress?.length){if(!this.caloriesChart?.nativeElement||!this.repsChart?.nativeElement){setTimeout(()=>this.createChartsIfReady(),50);return}this.createCharts()}}createCharts(){let e=[...this.dailyProgress].slice(0,this.rangeDays).reverse(),t=e.map(T=>this.formatDate(T.date)),r={type:"line",data:{labels:t,datasets:[{label:"Calories Burned",data:e.map(T=>T.caloriesBurned||0),borderColor:"#4e73df",backgroundColor:"rgba(78, 115, 223, 0.08)",tension:.35}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}},i={type:"bar",data:{labels:t,datasets:[{label:"Total Reps",data:e.map(T=>T.totalReps||0),backgroundColor:"#1cc88a"}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}},o=e.map(T=>T.intensity||this.estimateIntensityFromDate(T.date)),s={type:"line",data:{labels:t,datasets:[{label:"Intensity",data:o,borderColor:"#fd7e14",backgroundColor:"rgba(253,126,20,0.06)",tension:.25}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,suggestedMax:10}}}},c=(this.weightHistory&&this.weightHistory.length?this.weightHistory.slice(-this.rangeDays):[{date:new Date,weight:this.currentWeight,bmi:this.bmi}]).map(T=>oe(H({},T),{date:this.normalizeDate(T.date)})).sort((T,k)=>T.date.getTime()-k.date.getTime()),l=c.map(T=>T.date.toLocaleDateString("en-US",{month:"short",day:"numeric"})),u=c.map(T=>T.weight),h=c.map(T=>T.bmi??this.calcBMI(T.weight,170)),f={type:"line",data:{labels:l,datasets:[{label:"Weight (kg)",data:u,borderColor:"#2e59d9",backgroundColor:"rgba(46,89,217,0.06)",tension:.3,yAxisID:"y"},{label:"BMI",data:h,borderColor:"#1cc88a",backgroundColor:"rgba(28,200,138,0.04)",tension:.3,yAxisID:"y1"}]},options:{responsive:!0,plugins:{legend:{display:!0}},scales:{y:{type:"linear",position:"left",beginAtZero:!1},y1:{type:"linear",position:"right",beginAtZero:!1,grid:{drawOnChartArea:!1}}}}};this.caloriesChartInstance&&this.caloriesChartInstance.destroy(),this.repsChartInstance&&this.repsChartInstance.destroy(),this.intensityChartInstance&&this.intensityChartInstance.destroy(),this.weightChartInstance&&this.weightChartInstance.destroy();let p=this.caloriesChart.nativeElement.getContext("2d"),_=this.repsChart.nativeElement.getContext("2d"),w=this.intensityChart?.nativeElement?.getContext?this.intensityChart.nativeElement.getContext("2d"):null,b=this.weightChart?.nativeElement?.getContext?this.weightChart.nativeElement.getContext("2d"):null;p&&(this.caloriesChartInstance=new eo(p,r)),_&&(this.repsChartInstance=new eo(_,i)),w&&(this.intensityChartInstance=new eo(w,s)),b&&(this.weightChartInstance=new eo(b,f)),this.isLoadingCharts=!1}estimateIntensityFromDate(e){let t=e.toISOString().slice(0,10),r=(this.recentWorkouts||[]).filter(i=>this.normalizeDate(i.date).toISOString().slice(0,10)===t);return r.length?Math.round(r.reduce((i,o)=>i+(o.intensity||0),0)/r.length):5}getWeeklyAverage(){if(!this.dailyProgress?.length)return 0;let e=this.dailyProgress.slice(0,this.rangeDays).reduce((t,r)=>t+(r.caloriesBurned||0),0);return Math.round(e/Math.min(this.rangeDays,this.dailyProgress.length))}getWeeklyConsistency(){return this.weeklyConsistencyPercent}formatDate(e){return this.normalizeDate(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}getIntensityColor(e){return e>=8?"#dc3545":e>=6?"#fd7e14":e>=4?"#ffc107":e>=2?"#20c997":"#6c757d"}calcBMI(e,t){if(!e||!t)return 0;let r=t/100;return Number((e/(r*r)).toFixed(1))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$e({type:n,selectors:[["app-progress-dashboard"]],viewQuery:function(t,r){if(t&1&&(Tl(Fre,5),Tl(Lre,5),Tl(Vre,5),Tl(jre,5)),t&2){let i;Es(i=Cs())&&(r.caloriesChart=i.first),Es(i=Cs())&&(r.repsChart=i.first),Es(i=Cs())&&(r.intensityChart=i.first),Es(i=Cs())&&(r.weightChart=i.first)}},decls:5,vars:2,consts:[["caloriesChart",""],["repsChart",""],["intensityChart",""],["weightChart",""],[1,"container","mt-4"],[1,"mb-4","text-center"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3"],[1,"row","mb-4","justify-content-center"],[1,"col-12","col-sm-6","col-md-3","mb-3"],["title","Total Workouts","subtitle","Sessions completed","icon","\u{1F4AA}","gradient","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",3,"value"],["title","Total Reps","subtitle","All exercises combined","icon","\u{1F4C8}","gradient","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",3,"value"],["title","Calories Burned","subtitle","Total calories","icon","\u{1F3CB}\u{1F3FD}","gradient","linear-gradient(135deg, #fa709a 0%, #fee140 100%)",3,"value"],["title","Current Streak","subtitle","Days in a row","icon","\u{1F525}","gradient","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",3,"value"],[1,"alert","alert-info","text-center","mb-4"],[1,"row","g-4","justify-content-center"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-center","mb-3"],[1,"mb-2","mb-md-0","fw-bold"],[1,"d-flex","align-items-center"],[1,"small","text-muted","me-3"],[1,"range-toggle"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"btn","btn-sm","btn-outline-secondary","ms-1",3,"click"],[1,"col-12","col-md-6"],[1,"chart-container"],[1,"small","text-muted","text-center","mb-2"],[1,"d-flex","flex-column","flex-md-row","align-items-center","justify-content-between","mt-4"],[1,"d-flex","align-items-center","mb-3","mb-md-0"],[1,"me-3"],[1,"badge","rounded-pill",2,"color","#fff",3,"ngClass"],[1,"ms-2"],[1,"small","text-muted"],[1,"text-center","text-md-end",2,"min-width","220px"],[1,"small","text-muted","mb-1"],[1,"meter-bar"],[1,"meter-fill"],[1,"small","text-muted","mt-1"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0","fw-bold"],["class","text-center text-muted py-3",4,"ngIf"],["class","list-group list-group-flush",4,"ngIf"],[1,"text-center","text-muted","py-3"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-start","align-items-md-center"],[1,"fw-semibold"],[1,"small","mt-2"],[1,"me-2"],[1,"mt-2","mb-0","ps-3"],["class","small text-muted",4,"ngFor","ngForOf"],[1,"text-end","small","mt-2","mt-md-0"],[1,"text-muted"],[1,"text-muted","mt-1"],[1,"fw-medium"],["class","ms-2",4,"ngIf"]],template:function(t,r){t&1&&(v(0,"div",4)(1,"h2",5),E(2,"Progress Tracking"),m(),K(3,Bre,6,0,"div",6)(4,Yre,3,3,"ng-container",7),m()),t&2&&(C(3),N("ngIf",r.loading),C(),N("ngIf",!r.loading))},dependencies:[Je,wr,Wt,it,Ou,Vt,E_,za,zE,Wa,oh],styles:["@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease forwards}.weight-card-short[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:1rem;max-height:250px;transition:transform .25s ease-in-out,box-shadow .25s ease-in-out;animation:_ngcontent-%COMP%_fadeInUp .5s ease}.weight-card-short[_ngcontent-%COMP%]:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 1rem 2rem #00000040}.update-section[_ngcontent-%COMP%]   input.form-control-sm[_ngcontent-%COMP%]{border-radius:.3rem 0 0 .3rem;border-right:0;transition:box-shadow .2s ease}.update-section[_ngcontent-%COMP%]   input.form-control-sm[_ngcontent-%COMP%]:focus{box-shadow:0 0 8px #2e59d966}.update-section[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{border-radius:0 .3rem .3rem 0;background-color:#fff3;border-left:0}button.btn-outline-light[_ngcontent-%COMP%]{transition:background-color .25s,transform .2s}button.btn-outline-light[_ngcontent-%COMP%]:hover{background-color:#fff3;transform:translateY(-2px)}.range-toggle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:4px 8px;line-height:1;font-size:.85rem;transition:all .25s}.range-toggle[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%], .range-toggle[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]:focus, .range-toggle[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]:hover{background:#2e59d9;color:#fff;border-color:#2e59d9;transform:scale(1.05)}.meter-bar[_ngcontent-%COMP%]{width:220px;height:10px;background:#eef2f6;border-radius:6px;overflow:hidden;box-shadow:inset 0 1px 2px #0000000f}.meter-fill[_ngcontent-%COMP%]{height:100%;width:0%;transition:width .6s ease,background .4s ease;border-radius:6px}.chart-container[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:0 auto;animation:_ngcontent-%COMP%_fadeInUp .6s ease}canvas[_ngcontent-%COMP%]{width:100%!important;height:auto!important}.list-group-item[_ngcontent-%COMP%]{opacity:0;transform:translateY(10px);animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards}.list-group-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.list-group-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.list-group-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.list-group-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.list-group-item[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.card[_ngcontent-%COMP%]{transition:transform .2s ease,box-shadow .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .8rem 1.5rem #00000026}"]})};function Qre(n,e){if(n&1){let t=ke();v(0,"button",20),ae("click",function(){de(t);let i=W();return he(i.onComplete())}),v(1,"span",21),E(2,"\u2714"),m(),v(3,"span",22),E(4,"Complete"),m()()}}function Xre(n,e){if(n&1&&(v(0,"div",23)(1,"span",24),E(2,"\u{1F3C1}"),m(),v(3,"div")(4,"div",25),E(5,"Completed"),m(),v(6,"div",26),E(7),m()()()),n&2){let t=W();C(7),ie("+",t.challenge.points)}}var l0=class n{challenge;isCompleted=!1;showCompleteButton=!0;complete=new gt;getDifficultyColor(){switch(this.challenge.difficulty){case"Easy":return"success";case"Medium":return"warning";case"Hard":return"danger";default:return"primary"}}getCategoryIcon(){switch(this.challenge.category){case"Strength":return"\u{1F4AA}";case"Cardio":return"\u{1F3C3}";case"Flexibility":return"\u{1F9D8}";case"Nutrition":return"\u{1F957}";case"Consistency":return"\u{1F3AF}";default:return"\u2B50"}}onComplete(){console.log("Card: Completing daily challenge",this.challenge.title),this.complete.emit(this.challenge)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$e({type:n,selectors:[["app-challenge-card"]],inputs:{challenge:"challenge",isCompleted:"isCompleted",showCompleteButton:"showCompleteButton"},outputs:{complete:"complete"},decls:32,vars:26,consts:[[1,"challenge-card","h-100","shadow-sm"],[1,"challenge-card-inner"],[1,"challenge-icon-container"],[1,"icon-background"],[1,"challenge-icon"],[1,"challenge-title"],[1,"challenge-description"],[1,"challenge-info"],[1,"points-container"],[1,"points-label"],[1,"points-value"],[1,"points-number"],[1,"points-text"],[1,"difficulty-indicator"],[1,"difficulty-label"],[1,"difficulty-dots"],[1,"dot"],[1,"challenge-action"],["class","complete-btn",3,"click",4,"ngIf"],["class","completed-state",4,"ngIf"],[1,"complete-btn",3,"click"],[1,"btn-icon"],[1,"btn-text"],[1,"completed-state"],[1,"completed-icon"],[1,"completed-text"],[1,"completed-points"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),E(5),m()(),v(6,"div"),E(7),fn(8,"titlecase"),m()(),v(9,"h3",5),E(10),m(),v(11,"p",6),E(12),m(),v(13,"div",7)(14,"div",8)(15,"div",9),E(16,"Points"),m(),v(17,"div",10)(18,"span",11),E(19),m(),v(20,"span",12),E(21,"pts"),m()()(),v(22,"div",13)(23,"div",14),E(24,"Difficulty"),m(),v(25,"div",15),Q(26,"div",16)(27,"div",16)(28,"div",16),m()()(),v(29,"div",17),K(30,Qre,5,0,"button",18)(31,Xre,8,1,"div",19),m()()()),t&2&&(Se("completed",r.isCompleted)("difficulty-easy",r.challenge.difficulty==="Easy")("difficulty-medium",r.challenge.difficulty==="Medium")("difficulty-hard",r.challenge.difficulty==="Hard"),C(5),re(r.getCategoryIcon()),C(),wo(EE("difficulty-badge ",r.challenge.difficulty.toLowerCase()," ms-3")),C(),re(Wn(8,24,r.challenge.difficulty)),C(3),re(r.challenge.title),C(2),re(r.challenge.description),C(7),re(r.challenge.points),C(7),Se("active",r.challenge.difficulty==="Easy"),C(),Se("active",r.challenge.difficulty==="Medium"),C(),Se("active",r.challenge.difficulty==="Hard"),C(2),N("ngIf",r.showCompleteButton&&!r.isCompleted),C(),N("ngIf",r.isCompleted))},dependencies:[Je,it,Wa],styles:['.challenge-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#1e293bf2,#0f172af2);border-radius:24px;border:1px solid rgba(168,218,220,.15);padding:24px;height:100%;min-height:220px;position:relative;transition:all .4s cubic-bezier(.34,1.56,.64,1);overflow:hidden;-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px);cursor:pointer;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.challenge-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;border-radius:24px;padding:2px;background:linear-gradient(135deg,#a8dadc4d,#457b9d33,#1d35571a);-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask-composite:exclude;opacity:0;transition:opacity .4s ease}.challenge-card[_ngcontent-%COMP%]:hover:before{opacity:1}.challenge-card[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:150%;height:150%;background:radial-gradient(circle at center,rgba(168,218,220,.1) 0%,transparent 70%);transform:translate(-50%,-50%);opacity:0;transition:opacity .5s ease;pointer-events:none}.challenge-card[_ngcontent-%COMP%]:hover:after{opacity:.3}.challenge-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px) scale(1.02);border-color:#a8dadc66;box-shadow:0 25px 50px -12px #00000080,0 0 30px #457b9d66,inset 0 1px #ffffff1a}.challenge-card.completed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293bf2,#457b9d26);border-color:#a8dadc4d}.challenge-card.completed[_ngcontent-%COMP%]:before{opacity:1;background:linear-gradient(135deg,#a8dadc80,#457b9d66)}.challenge-card.difficulty-easy[_ngcontent-%COMP%]{--glow-color: rgba(168, 218, 220, .3)}.challenge-card.difficulty-medium[_ngcontent-%COMP%]{--glow-color: rgba(69, 123, 157, .3)}.challenge-card.difficulty-hard[_ngcontent-%COMP%]{--glow-color: rgba(230, 57, 70, .3)}.challenge-card[_ngcontent-%COMP%]:hover{box-shadow:0 25px 50px -12px #00000080,0 0 40px var(--glow-color, rgba(168, 218, 220, .3)),inset 0 1px #ffffff1a}.challenge-card-inner[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;position:relative;z-index:2}.challenge-icon-container[_ngcontent-%COMP%]{margin-bottom:24px;text-align:center;position:relative}.icon-background[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:72px;height:72px;background:linear-gradient(135deg,#457b9d,#a8dadc);border-radius:20px;margin-bottom:12px;position:relative;overflow:hidden;transform:perspective(500px) rotateY(0);transition:all .5s cubic-bezier(.34,1.56,.64,1);box-shadow:0 8px 32px #457b9d4d,inset 0 1px 1px #ffffff1a}.icon-background[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.1) 0%,transparent 50%);opacity:.5}.icon-background[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:conic-gradient(from 0deg,transparent,rgba(255,255,255,.1),transparent 30%);animation:_ngcontent-%COMP%_rotate 3s linear infinite}@keyframes _ngcontent-%COMP%_rotate{to{transform:rotate(360deg)}}.challenge-card[_ngcontent-%COMP%]:hover   .icon-background[_ngcontent-%COMP%]{transform:perspective(500px) rotateY(15deg);box-shadow:0 12px 40px #457b9d66,inset 0 1px 1px #fff3}.challenge-icon[_ngcontent-%COMP%]{font-size:32px;color:#f1faee;position:relative;z-index:1;text-shadow:0 2px 4px rgba(0,0,0,.2);filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.challenge-header[_ngcontent-%COMP%]{margin-bottom:20px}.difficulty-badge[_ngcontent-%COMP%]{display:inline-block;padding:8px 20px;border-radius:20px;font-size:12px;font-weight:800;text-transform:uppercase;letter-spacing:.8px;position:relative;overflow:hidden;transition:all .3s ease;box-shadow:0 2px 4px #0000001a,inset 0 1px 1px #ffffff1a}.difficulty-badge[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}.challenge-card[_ngcontent-%COMP%]:hover   .difficulty-badge[_ngcontent-%COMP%]:before{left:100%}.difficulty-badge.easy[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a8dadc33,#a8dadc4d);color:#a8dadc;border:1px solid rgba(168,218,220,.4)}.difficulty-badge.medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#457b9d33,#457b9d4d);color:#457b9d;border:1px solid rgba(69,123,157,.4)}.difficulty-badge.hard[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e6394633,#e639464d);color:#e63946;border:1px solid rgba(230,57,70,.4)}.challenge-title[_ngcontent-%COMP%]{color:#f1faee;font-size:22px;font-weight:800;margin:0 0 16px;line-height:1.3;min-height:56px;text-shadow:0 2px 4px rgba(0,0,0,.2);position:relative;padding-bottom:12px}.challenge-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:60px;height:3px;background:linear-gradient(90deg,#457b9d,#a8dadc);border-radius:2px;opacity:.6;transition:width .3s ease}.challenge-card[_ngcontent-%COMP%]:hover   .challenge-title[_ngcontent-%COMP%]:after{width:100px}.challenge-description[_ngcontent-%COMP%]{color:#94a3b8;font-size:15px;line-height:1.6;margin:0 0 28px;flex-grow:1;text-shadow:0 1px 2px rgba(0,0,0,.1);transition:color .3s ease}.challenge-card[_ngcontent-%COMP%]:hover   .challenge-description[_ngcontent-%COMP%]{color:#cbd5e1}.challenge-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:28px;padding:20px;background:linear-gradient(135deg,#26263e66,#1e1e2e99);border-radius:16px;border:1px solid rgba(168,218,220,.15);position:relative;overflow:hidden}.challenge-info[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(168,218,220,.05) 0%,transparent 100%);opacity:0;transition:opacity .3s ease}.challenge-card[_ngcontent-%COMP%]:hover   .challenge-info[_ngcontent-%COMP%]:before{opacity:1}.points-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative}.points-label[_ngcontent-%COMP%]{color:#a8dadc;font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;margin-bottom:6px;opacity:.8}.points-value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;position:relative}.points-icon[_ngcontent-%COMP%]{font-size:18px;color:#a8dadc;filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.points-number[_ngcontent-%COMP%]{color:#f1faee;font-size:28px;font-weight:900;text-shadow:0 2px 4px rgba(0,0,0,.3);background:linear-gradient(135deg,#f1faee,#a8dadc);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.points-text[_ngcontent-%COMP%]{color:#94a3b8;font-size:13px;font-weight:500;opacity:.8}.difficulty-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.difficulty-label[_ngcontent-%COMP%]{color:#a8dadc;font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;margin-bottom:10px;opacity:.8}.difficulty-dots[_ngcontent-%COMP%]{display:flex;gap:8px;position:relative}.dot[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:50%;background:#a8dadc26;border:2px solid rgba(168,218,220,.3);transition:all .4s cubic-bezier(.34,1.56,.64,1);position:relative;overflow:hidden}.dot[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at center,rgba(255,255,255,.3) 0%,transparent 70%);opacity:0;transition:opacity .3s ease}.dot.active[_ngcontent-%COMP%]:before{opacity:1}.dot.active[_ngcontent-%COMP%]{transform:scale(1.2);box-shadow:0 0 12px currentColor}.difficulty-easy[_ngcontent-%COMP%]   .dot.active[_ngcontent-%COMP%]{background:#a8dadc;border-color:#a8dadc;box-shadow:0 0 12px #a8dadc99}.difficulty-medium[_ngcontent-%COMP%]   .dot.active[_ngcontent-%COMP%]{background:#457b9d;border-color:#457b9d;box-shadow:0 0 12px #457b9d99}.difficulty-hard[_ngcontent-%COMP%]   .dot.active[_ngcontent-%COMP%]{background:#e63946;border-color:#e63946;box-shadow:0 0 12px #e6394699}.challenge-action[_ngcontent-%COMP%]{margin-top:auto}.complete-btn[_ngcontent-%COMP%]{width:100%;padding:16px 28px;background:linear-gradient(135deg,#457b9d,#5d9cc6);color:#f1faee;border:none;border-radius:16px;font-size:15px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;cursor:pointer;transition:all .4s cubic-bezier(.34,1.56,.64,1);display:flex;align-items:center;justify-content:center;gap:10px;position:relative;overflow:hidden;box-shadow:0 4px 15px #457b9d4d,inset 0 1px 1px #ffffff1a}.complete-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .6s ease}.complete-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3a6a8a,#457b9d);transform:translateY(-3px) scale(1.02);box-shadow:0 8px 25px #457b9d80,inset 0 1px 1px #fff3}.complete-btn[_ngcontent-%COMP%]:hover:before{left:100%}.complete-btn[_ngcontent-%COMP%]:active{transform:translateY(-1px) scale(1.01)}.btn-icon[_ngcontent-%COMP%]{font-size:18px;font-weight:800;position:relative;z-index:1}.btn-text[_ngcontent-%COMP%]{font-weight:700;position:relative;z-index:1}.completed-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:14px;padding:18px;background:linear-gradient(135deg,#a8dadc1a,#457b9d26);border-radius:16px;border:1px solid rgba(168,218,220,.25);position:relative;overflow:hidden}.completed-state[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);animation:_ngcontent-%COMP%_shimmer 2s infinite}@keyframes _ngcontent-%COMP%_shimmer{to{left:100%}}.completed-icon[_ngcontent-%COMP%]{font-size:24px;color:#a8dadc;filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.completed-text[_ngcontent-%COMP%]{color:#a8dadc;font-size:15px;font-weight:700;text-shadow:0 1px 2px rgba(0,0,0,.2)}.completed-points[_ngcontent-%COMP%]{background:linear-gradient(135deg,#457b9d,#5d9cc6);color:#f1faee;padding:6px 16px;border-radius:20px;font-size:13px;font-weight:800;box-shadow:0 2px 8px #0003}.status-ribbon[_ngcontent-%COMP%]{position:absolute;top:24px;right:-34px;background:linear-gradient(135deg,#a8dadc,#8bc9cc);color:#1d3557;padding:6px 34px;transform:rotate(45deg);font-size:12px;font-weight:900;text-transform:uppercase;letter-spacing:1.2px;box-shadow:0 4px 12px #0000004d;z-index:10;transition:all .3s ease}.challenge-card[_ngcontent-%COMP%]:hover   .status-ribbon[_ngcontent-%COMP%]{transform:rotate(45deg) scale(1.05)}.challenge-card.completed[_ngcontent-%COMP%]   .challenge-icon-container[_ngcontent-%COMP%]{position:relative}.challenge-card.completed[_ngcontent-%COMP%]   .icon-background[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:100%;background:radial-gradient(circle at center,rgba(168,218,220,.3) 0%,transparent 70%);animation:_ngcontent-%COMP%_pulseGlow 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulseGlow{0%,to{opacity:.3}50%{opacity:.6}}@media (max-width: 768px){.challenge-card[_ngcontent-%COMP%]{padding:24px}.challenge-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px) scale(1.01)}.challenge-title[_ngcontent-%COMP%]{font-size:20px;min-height:auto}.icon-background[_ngcontent-%COMP%]{width:64px;height:64px}.challenge-info[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.complete-btn[_ngcontent-%COMP%]{padding:14px 24px}.status-ribbon[_ngcontent-%COMP%]{top:20px;right:-30px;padding:5px 30px;font-size:11px}}@media (prefers-contrast: high){.challenge-card[_ngcontent-%COMP%], .difficulty-badge[_ngcontent-%COMP%]{border:2px solid currentColor}}@media (prefers-reduced-motion: reduce){.challenge-card[_ngcontent-%COMP%], .icon-background[_ngcontent-%COMP%], .complete-btn[_ngcontent-%COMP%], .dot[_ngcontent-%COMP%]{transition:none}.complete-btn[_ngcontent-%COMP%]:hover, .challenge-card[_ngcontent-%COMP%]:hover{transform:none}.icon-background[_ngcontent-%COMP%]:after, .complete-btn[_ngcontent-%COMP%]:before, .completed-state[_ngcontent-%COMP%]:before{animation:none}}']})};var Xu=class n{firestore=L(rn);auth=L(dt);userChallengesCollection=Ot(this.firestore,"userChallenges");routinesCollection=Ot(this.firestore,"routines");usersCollection=Ot(this.firestore,"users");getLeaderboard(){return le(this.calculateLeaderboard())}calculateLeaderboard(){return S(this,null,function*(){try{let e=on(this.userChallengesCollection,Nt("status","==","completed")),t=yield cr(e),r=yield cr(this.routinesCollection),i=new Map;t.docs.forEach(s=>{let a=s.data(),c=a.userId,l=a.points||0,u=a.date||"";i.has(c)||i.set(c,{totalPoints:0,completedChallenges:0,completedDates:new Set});let h=i.get(c);if(h.totalPoints+=l,h.completedChallenges++,u)h.completedDates.add(u);else{let p=(a.completedAt?.toDate?.()||new Date).toISOString().split("T")[0];h.completedDates.add(p)}});let o=[];for(let[s,a]of i.entries()){let c=this.calculateStreakFromDates(Array.from(a.completedDates)),l=yield this.getUserInfo(s);o.push({userId:s,displayName:l.displayName,email:l.email,totalPoints:a.totalPoints,completedChallenges:a.completedChallenges,currentStreak:c,lastUpdated:new Date})}return o.sort((s,a)=>a.totalPoints!==s.totalPoints?a.totalPoints-s.totalPoints:a.currentStreak-s.currentStreak),o.forEach((s,a)=>{s.rank=a+1}),o}catch(e){return console.error("Error calculating leaderboard:",e),[]}})}calculateStreakFromDates(e){if(e.length===0)return 0;let t=[...e].sort().reverse(),r=0,i=new Date,o=i.toISOString().split("T")[0];if(t.includes(o)){r=1;for(let s=1;s<t.length;s++){let a=new Date(i);a.setDate(a.getDate()-s);let c=a.toISOString().split("T")[0];if(t.includes(c))r++;else break}}else{let s=new Date(i);s.setDate(s.getDate()-1);let a=s.toISOString().split("T")[0];if(t.includes(a)){r=1;for(let c=2;c<t.length+1;c++){let l=new Date(i);l.setDate(l.getDate()-c);let u=l.toISOString().split("T")[0];if(t.includes(u))r++;else break}}}return r}getUserInfo(e){return S(this,null,function*(){try{let t=on(Ot(this.firestore,"users"),Nt("__name__","==",e)),r=yield cr(t);if(!r.empty){let i=r.docs[0].data();return{displayName:i.displayName||i.name||i.email?.split("@")[0]||`User${e.substring(0,6)}`,email:i.email||`user${e.substring(0,6)}@fitness.com`}}}catch(t){console.error("Error fetching user info:",t)}return{displayName:`User${e.substring(0,6)}`,email:`user${e.substring(0,6)}@fitness.com`}})}getCurrentUserRank(){return new ue(e=>{let t=this.auth.currentUser?.uid;if(!t){e.next(null),e.complete();return}this.getLeaderboard().subscribe({next:r=>{let i=r.find(o=>o.userId===t);e.next(i?.rank||null),e.complete()},error:()=>{e.next(null),e.complete()}})})}getTopUsers(e){return this.getLeaderboard().pipe(Y(t=>t.slice(0,e)))}getUserTotalPoints(e){if(!e)return q(0);let t=on(this.userChallengesCollection,Nt("userId","==",e),Nt("status","==","completed"));return le(cr(t)).pipe(Y(r=>r.docs.reduce((i,o)=>{let s=o.data().points;return i+(typeof s=="number"?s:Number(s)||0)},0)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};function Jre(n,e){n&1&&(v(0,"div",7)(1,"div",8)(2,"span",9),E(3,"Loading..."),m()(),v(4,"p",10),E(5,"Loading challenges..."),m()())}function Zre(n,e){if(n&1){let t=ke();v(0,"div",23)(1,"app-challenge-card",24),ae("complete",function(i){de(t);let o=W(2);return he(o.completeChallenge(i))}),m()()}if(n&2){let t=e.$implicit,r=W(2);C(),N("challenge",t)("isCompleted",r.isChallengeCompleted(t.id,"daily"))}}function eie(n,e){n&1&&(v(0,"p",25),E(1,"No daily challenges assigned."),m())}function tie(n,e){if(n&1){let t=ke();v(0,"div",23)(1,"app-challenge-card",24),ae("complete",function(i){de(t);let o=W(2);return he(o.completeChallenge(i))}),m()()}if(n&2){let t=e.$implicit,r=W(2);C(),N("challenge",t)("isCompleted",r.isChallengeCompleted(t.id,"weekly"))}}function nie(n,e){n&1&&(v(0,"p",25),E(1,"No weekly challenges available."),m())}function rie(n,e){if(n&1){let t=ke();v(0,"div",26)(1,"p",27),E(2,"You haven't completed any challenges yet, or your history failed to load."),m(),v(3,"div")(4,"button",28),ae("click",function(){de(t);let i=W(2);return he(i.loadCompletedChallenges())}),E(5,"Try Reload"),m(),v(6,"button",29),ae("click",function(){de(t);let i=W(2);return he(i.loadAllData())}),E(7,"Reload All Data"),m()(),v(8,"small",30),E(9,"If the list still doesn't appear, check the browser console for Firestore errors (indexes/permissions)."),m()()}}function iie(n,e){if(n&1&&(v(0,"tr",36)(1,"td"),E(2),m(),v(3,"td")(4,"span",37),E(5),fn(6,"titlecase"),m()(),v(7,"td",38)(8,"span",39),E(9),m()(),v(10,"td",40),E(11),fn(12,"date"),m()()),n&2){let t=e.$implicit;C(2),re(t.challengeTitle),C(2),N("ngClass",t.challengeType==="daily"?"bg-primary":"bg-info"),C(),ie(" ",Wn(6,5,t.challengeType)," "),C(4),ie("+",t.points),C(2),re(Sl(12,7,t.completedAt,"short"))}}function oie(n,e){if(n&1&&(v(0,"div",31)(1,"table",32)(2,"colgroup"),Q(3,"col",33)(4,"col",34)(5,"col",34)(6,"col",34),m(),v(7,"thead")(8,"tr")(9,"th"),E(10,"Challenge"),m(),v(11,"th"),E(12,"Type"),m(),v(13,"th"),E(14,"Points"),m(),v(15,"th"),E(16,"Date"),m()()(),v(17,"tbody"),K(18,iie,13,10,"tr",35),m()()()),n&2){let t=W(2);C(18),N("ngForOf",t.completedChallenges)}}function sie(n,e){if(n&1){let t=ke();v(0,"div")(1,"div",11)(2,"h4",12),E(3,"\u{1F4C5} Today's Challenges"),m(),v(4,"div",13),K(5,Zre,2,2,"div",14),m(),K(6,eie,2,0,"p",15),m(),v(7,"div",11)(8,"h4",12),E(9,"\u{1F4C6} Weekly Challenges"),m(),v(10,"div",13),K(11,tie,2,2,"div",14),m(),K(12,nie,2,0,"p",15),m(),v(13,"div",16)(14,"div",17)(15,"h5",18),E(16),m(),v(17,"div")(18,"button",19),ae("click",function(){de(t);let i=W();return he(i.loadCompletedChallenges())}),E(19,"Refresh Completed"),m()()(),v(20,"div",20),K(21,rie,10,0,"div",21)(22,oie,19,1,"div",22),m()()()}if(n&2){let t=W();C(5),N("ngForOf",t.dailyChallenges),C(),N("ngIf",!t.dailyChallenges||t.dailyChallenges.length===0),C(5),N("ngForOf",t.weeklyChallenges),C(),N("ngIf",!t.weeklyChallenges||t.weeklyChallenges.length===0),C(4),ie("\u{1F3C6} Completed Challenges (",t.completedChallenges.length,")"),C(5),N("ngIf",!t.loading&&t.completedChallenges.length===0),C(),N("ngIf",t.completedChallenges.length>0)}}var Ju=class n{challengeService=L(Fu);leaderboardService=L(Xu);auth=L(dt);dailyChallenges=[];weeklyChallenges=[];completedChallenges=[];totalPoints=0;loading=!0;ngOnInit(){this.loadAllData()}loadAllData(){this.loading=!0,this.challengeService.getPublicWeeklyChallenges().subscribe({next:e=>{this.weeklyChallenges=e||[]},error:e=>{console.error("Error loading weekly challenges list:",e),this.weeklyChallenges=[]}}),Vi(this.auth).subscribe(e=>{if(!e){this.loading=!1,this.dailyChallenges=[],this.completedChallenges=[],this.totalPoints=0;return}this.challengeService.getUserCompletedChallenges().subscribe({next:r=>{this.completedChallenges=r||[],this.totalPoints=this.completedChallenges.reduce((i,o)=>i+(o.points||0),0)},error:r=>{console.error("Error loading completed challenges:",r),this.completedChallenges=[],this.totalPoints=0,this.loading=!1}});let t=this.auth.currentUser?.uid;t&&this.leaderboardService.getUserTotalPoints(t).subscribe({next:r=>{this.totalPoints=r},error:()=>{}}),this.challengeService.getDailyChallengesOfTheDay().subscribe({next:r=>{this.dailyChallenges=r??[]},error:r=>console.error("Error loading daily challenges set:",r)}),this.challengeService.getWeeklyChallengesOfTheWeek().subscribe({next:r=>{let i=r??[];i.length&&(this.weeklyChallenges=i)},error:r=>console.error("Error loading weekly challenges set:",r),complete:()=>{this.loading=!1}})})}loadCompletedChallenges(){this.challengeService.getUserCompletedChallenges().subscribe({next:e=>{this.completedChallenges=e,this.totalPoints=e.reduce((t,r)=>t+r.points,0)},error:e=>{console.error("Error loading completed challenges:",e),this.completedChallenges=[],this.totalPoints=0}})}loadTotalPoints(){this.challengeService.getUserTotalPoints().subscribe({next:e=>{this.totalPoints=e},error:e=>{console.error("Error loading points:",e)}})}isChallengeCompleted(e,t){if(!e)return!1;let r=String(e);return this.completedChallenges.some(i=>{let o=i.challengeId??i.challenge_id??i.id??"";if(String(o)!==r)return!1;if(t==="daily"){let s=i.completedAt;if(!s)return!1;let a=s.toDate?s.toDate():new Date(s),c=new Date;return a.getFullYear()===c.getFullYear()&&a.getMonth()===c.getMonth()&&a.getDate()===c.getDate()}return!0})}completeChallenge(e){if(!e.id){alert("Invalid challenge: missing ID");return}if(this.isChallengeCompleted(e.id,e.type)){alert("You have already completed this challenge today!");return}this.challengeService.completeChallenge(e).subscribe({next:t=>{alert(`Challenge completed! +${e.points} points \u{1F389}`),this.loadCompletedChallenges(),this.loadTotalPoints()},error:t=>{console.error("Error completing challenge:",t),alert("Failed to complete challenge")}})}seedChallenges(){return S(this,null,function*(){if(confirm("This will add challenges to the database. Continue?"))try{yield this.challengeService.seedChallenges(),alert("Challenges seeded successfully!"),this.loadAllData()}catch(e){console.error("Error seeding challenges:",e),alert("Failed to seed challenges")}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$e({type:n,selectors:[["app-challenge-list"]],decls:11,vars:3,consts:[[1,"challenge-container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"d-flex","align-items-center","gap-2"],["title","Reload all challenge data",1,"btn","btn-outline-primary","shiny",3,"click"],[1,"badge","bg-primary","fs-5","dynamic-badge"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3"],[1,"mb-4"],[1,"mb-3"],[1,"row"],["class","col-12 col-sm-6 col-md-4 mb-3",4,"ngFor","ngForOf"],["class","text-muted",4,"ngIf"],[1,"card","shadow-sm"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"card-body"],["class","text-center text-muted py-3",4,"ngIf"],["class","table-completed-wrapper",4,"ngIf"],[1,"col-12","col-sm-6","col-md-4","mb-3"],[3,"complete","challenge","isCompleted"],[1,"text-muted"],[1,"text-center","text-muted","py-3"],[1,"mb-2"],[1,"btn","btn-sm","btn-primary","me-2",3,"click"],[1,"btn","btn-sm","btn-link",3,"click"],[1,"d-block","text-muted","mt-2"],[1,"table-completed-wrapper"],[1,"table","table-hover","align-items-center"],[2,"width","40%"],[2,"width","20%"],["class","completed-row",4,"ngFor","ngForOf"],[1,"completed-row"],[1,"badge",3,"ngClass"],[1,"points-cell"],[1,"points-pop"],[1,"date-cell"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"h2"),E(3,"Challenges"),m(),v(4,"div",2)(5,"button",3),ae("click",function(){return r.loadAllData()}),E(6,"Refresh"),m(),v(7,"span",4),E(8),m()()(),K(9,Jre,6,0,"div",5)(10,sie,23,7,"div",6),m()),t&2&&(C(8),ie("",r.totalPoints," Total Points"),C(),N("ngIf",r.loading),C(),N("ngIf",!r.loading))},dependencies:[Je,wr,Wt,it,Vt,l0,Wa,oh],styles:['.challenge-container[_ngcontent-%COMP%]{padding:2rem 3rem;max-width:1400px;margin:0 auto;background:#fff;min-height:100vh;position:relative;border-radius:30px}.challenge-container[_ngcontent-%COMP%]:before{content:"";position:fixed;inset:0;background:radial-gradient(circle at 20% 30%,rgba(125,178,211,.1) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(168,218,220,.08) 0%,transparent 50%);pointer-events:none;z-index:0}.challenge-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}.challenge-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0c0c0c;font-size:2.2rem;font-weight:800;margin:0;background:linear-gradient(135deg,#a8dadc,#457b9d);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.challenge-container[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{margin-bottom:2.5rem;gap:1rem}.btn-outline-secondary.shiny[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#8cadb9}.dynamic-badge[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite;box-shadow:0 4px 12px #457b9d26;background:linear-gradient(135deg,#457b9d,#5d9cc6)!important;border:1px solid rgba(168,218,220,.2);padding:.6rem 1.2rem;border-radius:12px;font-weight:700}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.btn-outline-primary.shiny[_ngcontent-%COMP%]{position:relative;overflow:hidden;background:linear-gradient(135deg,#00d9ff,#00f0ff);border:2px solid #09acc5;color:#fff;border-radius:8px;font-weight:700;padding:.5rem 1.2rem;transition:all .3s cubic-bezier(.25,.46,.45,.94);font-size:.95rem;letter-spacing:.5px;text-transform:uppercase;box-shadow:0 4px 12px #00d9ff40}.btn-outline-primary.shiny[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .5s ease}.btn-outline-primary.shiny[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#00f0ff,#00d9ff);border-color:#fff;transform:translateY(-3px);box-shadow:0 8px 20px #00d9ff66}.btn-outline-primary.shiny[_ngcontent-%COMP%]:hover:before{left:100%}.btn-outline-primary.shiny[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 4px 12px #00d9ff4d}.btn-sm.btn-outline-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00d9ff,#00f0ff);border:1px solid #00B8D4;color:#fff;border-radius:6px;font-weight:600;padding:.4rem .8rem;font-size:.85rem;transition:all .2s ease;box-shadow:0 2px 6px #00d9ff33}.btn-sm.btn-outline-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#00f0ff,#00d9ff);border-color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #00d9ff4d}.btn-sm.btn-outline-primary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 6px #6dbac726}.btn-sm.btn-primary[_ngcontent-%COMP%]{position:relative;overflow:hidden;background:#596f92cc;border:1px solid rgba(168,218,220,.3);color:#a8dadc;border-radius:10px;font-weight:600;transition:all .3s ease}.btn-outline-secondary.shiny[_ngcontent-%COMP%]:hover{background:#85b4b51a;border-color:#a8dadc;transform:translateY(-2px)}.challenge-container[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{padding:3rem;background:#3c506e80;border-radius:16px;border:1px solid rgba(168,218,220,.15);margin:2rem 0}.challenge-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem;color:#a8dadc}.challenge-container[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#a8dadc;font-size:1.1rem;margin-top:1.5rem;font-weight:500}.challenge-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1a1a1a;font-size:1.6rem;font-weight:700;margin-bottom:1.5rem;padding-bottom:.75rem;border-bottom:2px solid rgba(0,217,255,.3)}.challenge-container[_ngcontent-%COMP%]   .mb-4[_ngcontent-%COMP%]{margin-bottom:3rem!important;animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.challenge-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3c506ed9,#465f82cc)!important;border:1px solid rgba(168,218,220,.2)!important;border-radius:16px!important;box-shadow:0 8px 24px #0000004d!important;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .6s ease;padding:1.9rem}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.challenge-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#fff!important;border-bottom:2px solid rgba(0,217,255,.2)!important;padding:1.5rem 2rem!important}.challenge-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#1a1a1a;font-size:1.4rem;font-weight:700;margin:0;display:flex;align-items:center;gap:.75rem}.challenge-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5 rem 2rem!important}.challenge-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{padding:2.5rem;margin:0;background:transparent;border:none;border-radius:0}.challenge-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#cbd5e1;font-size:1rem;margin-bottom:1.5rem}.challenge-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{border-radius:8px;font-weight:600;padding:.5rem 1rem;transition:all .2s ease}.challenge-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00d9ff,#00f0ff);border:none;color:#fff}.challenge-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3a6a8a,#457b9d);transform:translateY(-2px)}.challenge-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#a8dadc;text-decoration:none}.challenge-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{color:#53828f;text-decoration:underline}.challenge-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#94a3b8;font-size:.9rem}.table-completed-wrapper[_ngcontent-%COMP%]{width:100%;overflow:hidden;border-radius:10px}.table-completed-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:transparent;color:#9bb6c0;margin:0}.table-completed-wrapper[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:5;background:linear-gradient(135deg,#4a6a8a,#5a7a9a);color:#e6e8e8;padding:16px 20px;text-transform:uppercase;font-weight:700;font-size:.85rem;letter-spacing:.5px;border-bottom:1px solid rgba(168,218,220,.2)}.table-completed-wrapper[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#8cadb9;color:#1a2e3e;border-bottom:1px solid rgba(100,130,160,.1)}.table-completed-wrapper[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.table-completed-wrapper[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 20px;vertical-align:middle;font-size:.95rem;background-color:#d2eefc}.table-completed-wrapper[_ngcontent-%COMP%]   td.points-cell[_ngcontent-%COMP%]{text-align:center;width:140px}.table-completed-wrapper[_ngcontent-%COMP%]   td.date-cell[_ngcontent-%COMP%]{text-align:right;width:200px;color:#6b7280;font-family:Monaco,Consolas,monospace;font-size:.9rem}.points-pop[_ngcontent-%COMP%]{display:inline-flex!important;align-items:center;justify-content:center;height:32px;min-width:60px;padding:4px 10px;border-radius:12px;background:linear-gradient(90deg,#2bb49c,#2a9d8f)!important;color:#fff!important;font-weight:700;font-size:.9rem;box-shadow:0 4px 12px #2a9d8f26;border:none!important;animation:_ngcontent-%COMP%_pointsPop .5s cubic-bezier(.2,.9,.3,1)}@keyframes _ngcontent-%COMP%_pointsPop{0%{opacity:0;transform:scale(.8)}60%{transform:scale(1.12)}to{opacity:1;transform:scale(1)}}.completed-row[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_completedFade .6s ease forwards}@keyframes _ngcontent-%COMP%_completedFade{0%{opacity:0}to{opacity:1}}.challenge-container[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{border-radius:10px;font-weight:700;padding:.5rem .75rem;font-size:.85rem;transition:all .2s ease}.challenge-container[_ngcontent-%COMP%]   .badge.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#457b9d,#5d9cc6)!important;color:#f1faee!important;border:none!important}.challenge-container[_ngcontent-%COMP%]   .badge.bg-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1d3557,#457b9d)!important;color:#f1faee!important;border:none!important}.challenge-container[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:#666!important;font-style:italic;padding:1.5rem;text-align:center;background:#00d9ff0d;border-radius:12px;border:1px dashed rgba(0,217,255,.2)}@media (max-width: 768px){.challenge-container[_ngcontent-%COMP%]{padding:1.5rem .75rem}.challenge-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.challenge-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.3rem}.challenge-container[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.table-completed-wrapper[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-completed-wrapper[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;font-size:.9rem}.table-completed-wrapper[_ngcontent-%COMP%]   td.points-cell[_ngcontent-%COMP%]{width:100px}.table-completed-wrapper[_ngcontent-%COMP%]   td.date-cell[_ngcontent-%COMP%]{width:140px}.points-pop[_ngcontent-%COMP%]{min-width:50px;padding:3px 8px;height:28px;font-size:.85rem}.challenge-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.challenge-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{padding:2rem 1.5rem}}@media (max-width: 576px){.challenge-container[_ngcontent-%COMP%]{padding:1rem .5rem}.challenge-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.challenge-container[_ngcontent-%COMP%]   .mb-4[_ngcontent-%COMP%]{margin-bottom:2rem!important}.dynamic-badge[_ngcontent-%COMP%]{font-size:.95rem}.table-completed-wrapper[_ngcontent-%COMP%]{border-radius:0}.table-completed-wrapper[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 8px;font-size:.8rem}.table-completed-wrapper[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px}}']})};function aie(n,e){n&1&&(v(0,"div",4)(1,"div",5)(2,"span",6),E(3,"Loading..."),m()(),v(4,"p",7),E(5,"Loading leaderboard..."),m()())}function cie(n,e){if(n&1&&(v(0,"div",25)(1,"div",26)(2,"div")(3,"div",27)(4,"strong"),E(5,"Your Rank:"),m(),E(6),m(),v(7,"div",28)(8,"div",29)(9,"small",22),E(10,"Challenges Completed:"),m(),Q(11,"br"),v(12,"strong",30),E(13),m()(),v(14,"div",29)(15,"small",22),E(16,"Total Points:"),m(),Q(17,"br"),v(18,"strong",31),E(19),m()()()(),v(20,"div",32),E(21),m()()()),n&2){let t=W(2);C(6),dn(" #",t.currentUserRank," / ",t.leaderboardEntries.length," "),C(7),ie("",t.currentUserEntry.completedChallenges," \u{1F3AF}"),C(6),ie("",t.currentUserEntry.totalPoints," \u2B50"),C(2),re(t.getRankIcon(t.currentUserRank))}}function lie(n,e){if(n&1&&(v(0,"div",36)(1,"div",37)(2,"div",38),E(3,"\u{1F948}"),m(),v(4,"div",39),E(5),m(),v(6,"div",40),E(7),m(),v(8,"div",41),E(9),m()()()),n&2){let t=W(3);C(),Se("current-user",t.isCurrentUser(t.topUsers[1].userId)),C(4),re(t.topUsers[1].displayName),C(2),ie("",t.topUsers[1].totalPoints," pts"),C(2),ie("",t.topUsers[1].completedChallenges," challenges")}}function uie(n,e){if(n&1&&(v(0,"div",36)(1,"div",42)(2,"div",38),E(3,"\u{1F947}"),m(),v(4,"div",39),E(5),m(),v(6,"div",40),E(7),m(),v(8,"div",41),E(9),m()()()),n&2){let t=W(3);C(),Se("current-user",t.isCurrentUser(t.topUsers[0].userId)),C(4),re(t.topUsers[0].displayName),C(2),ie("",t.topUsers[0].totalPoints," pts"),C(2),ie("",t.topUsers[0].completedChallenges," challenges")}}function die(n,e){if(n&1&&(v(0,"div",36)(1,"div",43)(2,"div",38),E(3,"\u{1F949}"),m(),v(4,"div",39),E(5),m(),v(6,"div",40),E(7),m(),v(8,"div",41),E(9),m()()()),n&2){let t=W(3);C(),Se("current-user",t.isCurrentUser(t.topUsers[2].userId)),C(4),re(t.topUsers[2].displayName),C(2),ie("",t.topUsers[2].totalPoints," pts"),C(2),ie("",t.topUsers[2].completedChallenges," challenges")}}function hie(n,e){if(n&1&&(v(0,"div",33)(1,"div",34),K(2,lie,10,5,"div",35)(3,uie,10,5,"div",35)(4,die,10,5,"div",35),m()()),n&2){let t=W(2);C(2),N("ngIf",t.topUsers[1]),C(),N("ngIf",t.topUsers[0]),C(),N("ngIf",t.topUsers[2])}}function fie(n,e){n&1&&(v(0,"small",55),E(1,"You"),m())}function pie(n,e){if(n&1&&(v(0,"div",44)(1,"div",45)(2,"div",46),E(3),m(),v(4,"div",47)(5,"div",48)(6,"strong"),E(7),m(),K(8,fie,2,0,"small",49),m(),v(9,"div",50),E(10),m()()(),v(11,"div",51)(12,"div",52),E(13),m(),v(14,"div",53),Q(15,"div",54),m()()()),n&2){let t=e.$implicit,r=W(2);Se("list-group-item-success",r.isCurrentUser(t.userId)),C(2),N("ngClass",r.getRankBadgeClass(t.rank)),C(),ie(" #",t.rank," "),C(4),re(t.displayName),C(),N("ngIf",r.isCurrentUser(t.userId)),C(2),ie("",t.completedChallenges," challenges"),C(3),re(t.totalPoints),C(2),An("width",r.topUsers.length&&(r.topUsers[0]!=null&&r.topUsers[0].totalPoints)?t.totalPoints/r.topUsers[0].totalPoints*100:0,"%")}}function gie(n,e){if(n&1&&(v(0,"div",56)(1,"div",45)(2,"div",46),E(3),m(),v(4,"div")(5,"div",48)(6,"strong"),E(7),m(),v(8,"span",55),E(9,"You"),m()(),v(10,"small",22),E(11),m()()(),v(12,"div",57)(13,"strong",58),E(14),m(),v(15,"div")(16,"small",22),E(17,"points"),m()()()()),n&2){let t=W(2);C(2),N("ngClass",t.getRankBadgeClass(t.currentUserRank)),C(),ie(" #",t.currentUserRank," "),C(4),re(t.currentUserEntry.displayName),C(4),ie("",t.currentUserEntry.completedChallenges," challenges"),C(3),re(t.currentUserEntry.totalPoints)}}function mie(n,e){n&1&&(v(0,"div",4)(1,"p",22),E(2,"No participants yet. Be the first!"),m(),v(3,"a",59),E(4,"Start Completing Challenges"),m()())}function yie(n,e){n&1&&(v(0,"span",55),E(1,"You"),m())}function vie(n,e){if(n&1&&(v(0,"tr")(1,"td")(2,"div",65)(3,"span",66),E(4),m(),v(5,"span",67),E(6),m()()(),v(7,"td")(8,"div")(9,"strong"),E(10),m(),K(11,yie,2,0,"span",49),m()(),v(12,"td",63)(13,"span",68),E(14),m()(),v(15,"td",57)(16,"strong",58),E(17),m()()()),n&2){let t=e.$implicit,r=W(3);Se("table-success",r.isCurrentUser(t.userId)),C(4),re(r.getRankIcon(t.rank)),C(),wo(r.getRankBadgeClass(t.rank)),C(),ie(" #",t.rank," "),C(4),re(t.displayName),C(),N("ngIf",r.isCurrentUser(t.userId)),C(3),re(t.completedChallenges),C(3),re(t.totalPoints)}}function _ie(n,e){if(n&1&&(v(0,"div",60)(1,"table",61)(2,"thead")(3,"tr")(4,"th",62),E(5,"Rank"),m(),v(6,"th"),E(7,"User"),m(),v(8,"th",63),E(9,"Challenges"),m(),v(10,"th",57),E(11,"Points"),m()()(),v(12,"tbody"),K(13,vie,18,10,"tr",64),m()()()),n&2){let t=W(2);C(13),N("ngForOf",t.getPaginatedEntries())}}function bie(n,e){if(n&1){let t=ke();v(0,"li",70)(1,"button",71),ae("click",function(){let i=de(t).$implicit,o=W(3);return he(o.goToPage(i))}),E(2),m()()}if(n&2){let t=e.$implicit,r=W(3);Se("active",t===r.currentPage),C(2),re(t)}}function wie(n,e){if(n&1){let t=ke();v(0,"nav",7)(1,"ul",69)(2,"li",70)(3,"button",71),ae("click",function(){de(t);let i=W(2);return he(i.previousPage())}),E(4,"Previous"),m()(),K(5,bie,3,3,"li",72),v(6,"li",70)(7,"button",71),ae("click",function(){de(t);let i=W(2);return he(i.nextPage())}),E(8,"Next"),m()()()()}if(n&2){let t=W(2);C(2),Se("disabled",t.currentPage===1),C(3),N("ngForOf",t.getPageNumbers()),C(),Se("disabled",t.currentPage===t.totalPages)}}function Eie(n,e){if(n&1&&(v(0,"div"),K(1,cie,22,5,"div",8),v(2,"div",9)(3,"div",10)(4,"h4",11),E(5,"\u{1F451} Top 10 Champions"),m()(),v(6,"div",12)(7,"div",13),K(8,hie,5,3,"div",14),v(9,"div",15)(10,"div",16),K(11,pie,16,10,"div",17)(12,gie,18,5,"div",18),m()()()()(),v(13,"div",19)(14,"div",20)(15,"h5",21),E(16,"\u{1F4CA} All Participants"),m(),v(17,"span",22),E(18),m()(),v(19,"div",12),K(20,mie,5,0,"div",2)(21,_ie,14,1,"div",23)(22,wie,9,5,"nav",24),m()()()),n&2){let t=W();C(),N("ngIf",t.currentUserRank&&t.currentUserEntry),C(7),N("ngIf",t.topUsers.length>=3),C(3),N("ngForOf",t.topUsers.slice(3,10)),C(),N("ngIf",t.currentUserEntry&&t.currentUserRank&&t.currentUserRank>10),C(6),ie("",t.leaderboardEntries.length," total users"),C(2),N("ngIf",t.leaderboardEntries.length===0),C(),N("ngIf",t.leaderboardEntries.length>0),C(),N("ngIf",t.totalPages>1)}}var u0=class n{leaderboardService=L(Xu);auth=L(dt);routineService=L(lr);leaderboardEntries=[];topUsers=[];currentUserRank=null;currentUserId=null;currentUserEntry=null;loading=!0;currentPage=1;itemsPerPage=10;totalPages=1;ngOnInit(){this.currentUserId=this.auth.currentUser?.uid||null,this.loadLeaderboard()}loadLeaderboard(){this.leaderboardService.getLeaderboard().subscribe({next:e=>{this.leaderboardEntries=e,this.topUsers=e.slice(0,10),this.totalPages=Math.ceil(e.length/this.itemsPerPage);let t=e.find(r=>r.userId===this.currentUserId);t&&(this.currentUserRank=t.rank||null,this.currentUserEntry=t),this.loading=!1,console.log("Leaderboard loaded:",e)},error:e=>{console.error("Error loading leaderboard:",e),this.loading=!1}})}getPaginatedEntries(){let e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.leaderboardEntries.slice(e,t)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}previousPage(){this.currentPage>1&&this.currentPage--}goToPage(e){this.currentPage=e}getPageNumbers(){let e=[],r=Math.max(1,this.currentPage-Math.floor(2.5)),i=Math.min(this.totalPages,r+5-1);i-r<4&&(r=Math.max(1,i-5+1));for(let o=r;o<=i;o++)e.push(o);return e}getRankBadgeClass(e){return e?e===1?"bg-warning text-dark":e===2?"bg-secondary text-white":e===3?"bg-danger":"bg-primary":"bg-secondary"}getRankIcon(e){return e?e===1?"\u{1F947}":e===2?"\u{1F948}":e===3?"\u{1F949}":"\u{1F3C5}":""}isCurrentUser(e){return e===this.currentUserId}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$e({type:n,selectors:[["app-leaderboard"]],decls:5,vars:2,consts:[[1,"container","mt-4"],[1,"mb-4"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3"],["class","alert alert-info mb-4 dynamic-current",4,"ngIf"],[1,"card","shadow-sm","mb-4"],[1,"card-header","bg-primary","text-white"],[1,"mb-0","text-white"],[1,"card-body"],[1,"row"],["class","col-12 mb-4",4,"ngIf"],[1,"col-12"],[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-center leaderboard-item",3,"list-group-item-success",4,"ngFor","ngForOf"],["class","list-group-item list-group-item-success d-flex justify-content-between align-items-center",4,"ngIf"],[1,"card","shadow-sm"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"text-muted"],["class","table-responsive",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"alert","alert-info","mb-4","dynamic-current"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-2"],[1,"row","g-3"],[1,"col-auto"],[1,"text-info"],[1,"text-success"],[1,"text-center","rank-icon-lg"],[1,"col-12","mb-4"],[1,"row","podium-row","text-center","align-items-end","flex-nowrap","no-wrap-podium"],["class","col-auto podium-col",4,"ngIf"],[1,"col-auto","podium-col"],[1,"podium-card","podium-2"],[1,"medal"],[1,"name"],[1,"score"],[1,"meta","small","text-muted"],[1,"podium-card","podium-1"],[1,"podium-card","podium-3"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","leaderboard-item"],[1,"d-flex","align-items-center","gap-3"],[1,"rank-bubble",3,"ngClass"],[1,"user-meta"],[1,"user-name"],["class","badge bg-success ms-2",4,"ngIf"],[1,"small","text-muted"],[1,"score-block","text-end"],[1,"points-number"],[1,"points-bar"],[1,"points-fill"],[1,"badge","bg-success","ms-2"],[1,"list-group-item","list-group-item-success","d-flex","justify-content-between","align-items-center"],[1,"text-end"],[1,"fs-5"],["routerLink","/challenges",1,"btn","btn-primary"],[1,"table-responsive"],[1,"table","table-hover","align-middle"],[2,"width","100px"],[1,"text-center"],[3,"table-success",4,"ngFor","ngForOf"],[1,"rank-cell","d-flex","align-items-center","gap-2"],[1,"rank-emoji"],[1,"badge"],[1,"badge","bg-primary"],[1,"pagination","justify-content-center"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"h2",1),E(2,"\u{1F3C6} Leaderboard"),m(),K(3,aie,6,0,"div",2)(4,Eie,23,8,"div",3),m()),t&2&&(C(3),N("ngIf",r.loading),C(),N("ngIf",!r.loading))},dependencies:[Je,wr,Wt,it,Vt,At],styles:["body[_ngcontent-%COMP%]{background:linear-gradient(180deg,#f7fbfd,#eef6f8)!important}.card[_ngcontent-%COMP%], .alert-info[_ngcontent-%COMP%], .list-group-item[_ngcontent-%COMP%]{background:#fffe!important;border:none!important;border-radius:12px!important;box-shadow:0 6px 18px #1018280d}.card-header.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(90deg,#2b7a78,#457b9d)!important;color:#fff!important;border-radius:12px 12px 0 0!important}.dynamic-current[_ngcontent-%COMP%]{border-left:6px solid rgba(69,123,157,.18);padding:18px}.podium-row[_ngcontent-%COMP%]{gap:1rem;align-items:end}.podium-card[_ngcontent-%COMP%]{border-radius:12px;padding:18px;transition:transform .22s ease,box-shadow .22s ease;cursor:default;-webkit-user-select:none;user-select:none;box-shadow:0 8px 22px #1018280f}.podium-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 18px 36px #1018281f}.podium-1[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fff7e6,#fff2d1);border:2px solid #FFD166}.podium-2[_ngcontent-%COMP%]{background:linear-gradient(180deg,#f0f7ff,#e6f3ff);border:2px solid #B6D0FF}.podium-3[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fff0f0,#ffefef);border:2px solid #FFB4B4}.podium-card[_ngcontent-%COMP%]   .medal[_ngcontent-%COMP%]{font-size:34px}.podium-card[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700;margin-top:6px}.podium-card[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{font-weight:700;color:#2b7a78;margin-top:4px}.podium-card.current-user[_ngcontent-%COMP%]{outline:3px solid rgba(69,123,157,.12)}.leaderboard-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:12px 16px;border-radius:10px;margin-bottom:8px;transition:background .15s ease,transform .15s ease}.leaderboard-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.rank-bubble[_ngcontent-%COMP%]{min-width:54px;height:42px;border-radius:10px;display:inline-flex;align-items:center;justify-content:center;font-weight:700;color:#fff;background:#457b9d}.badge.bg-warning[_ngcontent-%COMP%]{background-color:#f1faee!important;color:#457b9d!important}.badge.bg-primary[_ngcontent-%COMP%]{background-color:#457b9d!important;color:#fff!important}.badge.bg-success[_ngcontent-%COMP%]{background-color:#e63946!important;color:#fff!important}.score-block[_ngcontent-%COMP%]{min-width:220px;max-width:320px;width:32%}.points-number[_ngcontent-%COMP%]{font-weight:700;color:#1b4c4a}.points-bar[_ngcontent-%COMP%]{height:10px;background:#edf6f7;border-radius:999px;overflow:hidden;margin-top:6px}.points-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#2b7a78,#57c7b6);transition:width .5s ease}.rank-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.rank-emoji[_ngcontent-%COMP%]{font-size:18px}.rank-icon-lg[_ngcontent-%COMP%]{font-size:2.2rem;color:#457b9d}.user-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.points-number[_ngcontent-%COMP%]{font-size:.98rem}.list-group-item-success[_ngcontent-%COMP%], .table-success[_ngcontent-%COMP%]{background-color:#eef7fb!important;border-left:4px solid #457B9D!important}@media (max-width: 767px){.podium-card[_ngcontent-%COMP%]{padding:12px}.score-block[_ngcontent-%COMP%]{width:40%;min-width:170px}.rank-bubble[_ngcontent-%COMP%]{min-width:44px;height:40px}}.no-wrap-podium[_ngcontent-%COMP%]{flex-wrap:nowrap!important;overflow-x:auto}.podium-col[_ngcontent-%COMP%]{flex:0 0 33.3333%;max-width:33.3333%;padding-left:.5rem;padding-right:.5rem;box-sizing:border-box}.podium-card[_ngcontent-%COMP%]{min-width:200px}.card[_ngcontent-%COMP%]:not(.podium-card):hover{transform:translateY(-6px);box-shadow:0 18px 40px #1018281f;transition:transform .22s ease,box-shadow .22s ease}.podium-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;min-height:170px;text-align:center;z-index:1}.podium-card[_ngcontent-%COMP%]   .medal[_ngcontent-%COMP%]{font-size:44px;line-height:1;display:block}.podium-card[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:8px;font-size:1.05rem}.podium-card[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{font-size:1.02rem;color:#1b4c4a}.podium-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{margin-top:6px;color:#6b7280}.podium-card.current-user[_ngcontent-%COMP%]{outline:3px solid rgba(69,123,157,.12);box-shadow:0 18px 36px #457b9d14}.podium-row[_ngcontent-%COMP%]{padding-bottom:12px;display:flex;justify-content:center;align-items:flex-end}.podium-col[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:center}.podium-1[_ngcontent-%COMP%]{z-index:3;min-height:240px}.podium-2[_ngcontent-%COMP%]{z-index:2;min-height:190px;margin-top:22px}.podium-3[_ngcontent-%COMP%]{z-index:1;min-height:170px;margin-top:22px}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{overflow:visible}.rank-bubble.rank-1[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ffd166,#ffb84d);color:#1b3a00}.rank-bubble.rank-2[_ngcontent-%COMP%]{background:linear-gradient(90deg,#b6d0ff,#89b6ff);color:#08345a}.rank-bubble.rank-3[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ffb4b4,#ff8f8f);color:#5a0b0b}.rank-bubble[_ngcontent-%COMP%]{transition:transform .18s ease,box-shadow .18s ease}.rank-bubble[_ngcontent-%COMP%]:focus, .rank-bubble[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 18px #10182814}.leaderboard-item[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fffffffa,#fffffff2);transition:background .15s ease,transform .15s ease,box-shadow .15s ease}.leaderboard-item[_ngcontent-%COMP%]:hover, .leaderboard-item[_ngcontent-%COMP%]:focus-within{background:#f6fbfc;transform:translateY(-3px);box-shadow:0 10px 20px #1018280a}.points-bar[_ngcontent-%COMP%]{background:#f1f7f7;border-radius:999px;box-shadow:inset 0 1px #fff9}.points-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#2b7a78,#57c7b6);box-shadow:0 3px 8px #2b7a781f}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:2;box-shadow:inset 0 -1px #1018280a}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background:#457b9d05}@media (max-width: 767px){.no-wrap-podium[_ngcontent-%COMP%]{flex-wrap:wrap!important;overflow-x:visible}.podium-col[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%;padding-left:.25rem;padding-right:.25rem}.podium-row[_ngcontent-%COMP%]{gap:.75rem}.podium-card[_ngcontent-%COMP%]{min-width:auto;margin:0 auto}}.btn[_ngcontent-%COMP%]:focus, .page-link[_ngcontent-%COMP%]:focus, .leaderboard-item[_ngcontent-%COMP%]:focus-within{outline:3px solid rgba(69,123,157,.12);outline-offset:3px}@media (min-width: 992px){.rank-icon-lg[_ngcontent-%COMP%]{font-size:2.4rem}.rank-bubble[_ngcontent-%COMP%]{min-width:60px;height:46px;border-radius:12px}}"]})};var to=(n,e)=>{let t=L(dt),r=L(ze);return j2(t).pipe(Vn(1),Y(i=>i?!0:(r.navigate(["/login"],{queryParams:{returnUrl:e.url}}),!1)))};var QS=[{path:"",component:Of},{path:"home",component:Of},{path:"login",component:g_},{path:"register",component:m_},{path:"routines",component:y_,canActivate:[to]},{path:"routines/create",component:v_,canActivate:[to]},{path:"routines/premade",component:w_,canActivate:[to]},{path:"routines/:id",component:__,canActivate:[to]},{path:"progress",component:c0,canActivate:[to]},{path:"challenges",component:Ju,canActivate:[to]},{path:"challenges/history",component:Ju,canActivate:[to]},{path:"challenges/:id",component:Ju,canActivate:[to]},{path:"leaderboard",component:u0,canActivate:[to]},{path:"**",redirectTo:""}];var AU={production:!1,firebase:{apiKey:"AIzaSyAlb-WzF26Qda5Q-grNmCMrhkMtaptdC10",authDomain:"appdevcommunityfitnesstracker.firebaseapp.com",projectId:"appdevcommunityfitnesstracker",storageBucket:"appdevcommunityfitnesstracker.appspot.com",messagingSenderId:"850758874600",appId:"1:850758874600:web:c416ad02816adcec0d605d"}};eo.register(...a0);eC(Jv,{providers:[py(QS),MN(()=>AN(AU.firebase)),V2(()=>B2()),kV(()=>NV()),hg(ph),py(QS)]}).catch(n=>console.error(n));
